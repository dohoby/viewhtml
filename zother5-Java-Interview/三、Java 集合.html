
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>三、Java 集合 · java实用笔记</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="九、操作系统.html" />
    
    
    <link rel="prev" href="七、JavaWeb.html" />
    


    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://blog.liangqingxiang.top/" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                        <b>1.2.</b>
                    
                    Base
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                        <b>1.2.1.</b>
                    
                    Assemble
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" >
            
                <span>
            
                    
                        <b>1.2.1.1.</b>
                    
                    Collection
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1.1" >
            
                <span>
            
                    
                        <b>1.2.1.1.1.</b>
                    
                    List
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1.1.1" data-path="../base/assemble/collection/list/ArrayList源码学习.html">
            
                <a href="../base/assemble/collection/list/ArrayList源码学习.html">
            
                    
                        <b>1.2.1.1.1.1.</b>
                    
                    ArrayList源码学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.1.2" data-path="../base/assemble/collection/list/LinkList源码学习.html">
            
                <a href="../base/assemble/collection/list/LinkList源码学习.html">
            
                    
                        <b>1.2.1.1.1.2.</b>
                    
                    LinkList源码学习
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.2" >
            
                <span>
            
                    
                        <b>1.2.1.1.2.</b>
                    
                    Queue
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1.2.1" data-path="../base/assemble/collection/queue/ArrayBlockingQueue源码学习.html">
            
                <a href="../base/assemble/collection/queue/ArrayBlockingQueue源码学习.html">
            
                    
                        <b>1.2.1.1.2.1.</b>
                    
                    ArrayBlockingQueue源码学习
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.3" >
            
                <span>
            
                    
                        <b>1.2.1.1.3.</b>
                    
                    Set
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1.3.1" data-path="../base/assemble/collection/set/hashset源码学习.html">
            
                <a href="../base/assemble/collection/set/hashset源码学习.html">
            
                    
                        <b>1.2.1.1.3.1.</b>
                    
                    hashset源码学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.3.2" data-path="../base/assemble/collection/set/TreeSet源码学习.html">
            
                <a href="../base/assemble/collection/set/TreeSet源码学习.html">
            
                    
                        <b>1.2.1.1.3.2.</b>
                    
                    TreeSet源码学习
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" >
            
                <span>
            
                    
                        <b>1.2.1.2.</b>
                    
                    Hashmap
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1" data-path="../base/assemble/hashmap/ConcurrentHashMap相关.html">
            
                <a href="../base/assemble/hashmap/ConcurrentHashMap相关.html">
            
                    
                        <b>1.2.1.2.1.</b>
                    
                    ConcurrentHashMap相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.2" data-path="../base/assemble/hashmap/HashMap相关.html">
            
                <a href="../base/assemble/hashmap/HashMap相关.html">
            
                    
                        <b>1.2.1.2.2.</b>
                    
                    HashMap相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.3" data-path="../base/assemble/hashmap/HashMap相关2.html">
            
                <a href="../base/assemble/hashmap/HashMap相关2.html">
            
                    
                        <b>1.2.1.2.3.</b>
                    
                    HashMap相关2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.4" data-path="../base/assemble/hashmap/HashMap相关tx.html">
            
                <a href="../base/assemble/hashmap/HashMap相关tx.html">
            
                    
                        <b>1.2.1.2.4.</b>
                    
                    HashMap相关tx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.5" data-path="../base/assemble/hashmap/jdk1.7hashmap源码分析.html">
            
                <a href="../base/assemble/hashmap/jdk1.7hashmap源码分析.html">
            
                    
                        <b>1.2.1.2.5.</b>
                    
                    jdk1.7hashmap源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.6" data-path="../base/assemble/hashmap/jdk1.8ConcurrentHashMap源码分析.html">
            
                <a href="../base/assemble/hashmap/jdk1.8ConcurrentHashMap源码分析.html">
            
                    
                        <b>1.2.1.2.6.</b>
                    
                    jdk1.8ConcurrentHashMap源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.7" data-path="../base/assemble/hashmap/jdk1.8HashMap源码分析.html">
            
                <a href="../base/assemble/hashmap/jdk1.8HashMap源码分析.html">
            
                    
                        <b>1.2.1.2.7.</b>
                    
                    jdk1.8hashmap源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.8" data-path="../base/assemble/hashmap/Jdk1.8源码解析HashMap-putTreeVal.html">
            
                <a href="../base/assemble/hashmap/Jdk1.8源码解析HashMap-putTreeVal.html">
            
                    
                        <b>1.2.1.2.8.</b>
                    
                    Jdk1.8源码解析-java.util.HashMap#putTreeVal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.9" data-path="../base/assemble/hashmap/Jdk1.8源码解析HashMap-resize.html">
            
                <a href="../base/assemble/hashmap/Jdk1.8源码解析HashMap-resize.html">
            
                    
                        <b>1.2.1.2.9.</b>
                    
                    Jdk1.8源码解析-java.util.HashMap#resize
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.10" data-path="../base/assemble/hashmap/Jdk1.8源码解析HashMap-treeifyBin.html">
            
                <a href="../base/assemble/hashmap/Jdk1.8源码解析HashMap-treeifyBin.html">
            
                    
                        <b>1.2.1.2.10.</b>
                    
                    Jdk1.8源码解析-java.util.HashMap#treeifyBin链表转化为红黑树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.11" data-path="../base/assemble/hashmap/LinkedHashMap.html">
            
                <a href="../base/assemble/hashmap/LinkedHashMap.html">
            
                    
                        <b>1.2.1.2.11.</b>
                    
                    Linked Hash Map
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" >
            
                <span>
            
                    
                        <b>1.2.1.3.</b>
                    
                    hashmap源码
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.3.1" data-path="../base/assemble/hashmap源码/jdk1.7ConcurrentHashMap源码.html">
            
                <a href="../base/assemble/hashmap源码/jdk1.7ConcurrentHashMap源码.html">
            
                    
                        <b>1.2.1.3.1.</b>
                    
                    jdk1.7ConcurrentHashMap源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3.2" data-path="../base/assemble/hashmap源码/jdk1.7HashMap源码.html">
            
                <a href="../base/assemble/hashmap源码/jdk1.7HashMap源码.html">
            
                    
                        <b>1.2.1.3.2.</b>
                    
                    jdk1.7HashMap源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3.3" data-path="../base/assemble/hashmap源码/jdk1.8ConcurrentHashMap源码.html">
            
                <a href="../base/assemble/hashmap源码/jdk1.8ConcurrentHashMap源码.html">
            
                    
                        <b>1.2.1.3.3.</b>
                    
                    jdk1.8ConcurrentHashMap源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3.4" data-path="../base/assemble/hashmap源码/jdk1.8HashMap源码.html">
            
                <a href="../base/assemble/hashmap源码/jdk1.8HashMap源码.html">
            
                    
                        <b>1.2.1.3.4.</b>
                    
                    jdk1.8HashMap源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="../base/assemble/集合类学习.html">
            
                <a href="../base/assemble/集合类学习.html">
            
                    
                        <b>1.2.1.4.</b>
                    
                    集合类学习
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                        <b>1.2.2.</b>
                    
                    Lambada
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../base/lambada/java8-求和.html">
            
                <a href="../base/lambada/java8-求和.html">
            
                    
                        <b>1.2.2.1.</b>
                    
                    java8-求和
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../base/lambada/java8-空指针Optional.html">
            
                <a href="../base/lambada/java8-空指针Optional.html">
            
                    
                        <b>1.2.2.2.</b>
                    
                    java8-空指针Optional
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../base/lambada/Java8实战例子.html">
            
                <a href="../base/lambada/Java8实战例子.html">
            
                    
                        <b>1.2.2.3.</b>
                    
                    Java8实战例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../base/lambada/Java8新特性- 重复注解.html">
            
                <a href="../base/lambada/Java8新特性- 重复注解.html">
            
                    
                        <b>1.2.2.4.</b>
                    
                    Java8新特性- 重复注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../base/lambada/Java8新特性-jvm年老代参数参数变更.html">
            
                <a href="../base/lambada/Java8新特性-jvm年老代参数参数变更.html">
            
                    
                        <b>1.2.2.5.</b>
                    
                    Java8新特性-jvm年老代参数参数变更
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="../base/lambada/Java8新特性-Lambda表达式-streams.html">
            
                <a href="../base/lambada/Java8新特性-Lambda表达式-streams.html">
            
                    
                        <b>1.2.2.6.</b>
                    
                    Java8新特性-Lambda表达式-streams
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="../base/lambada/Java8新特性-Lambda表达式与Functional接口.html">
            
                <a href="../base/lambada/Java8新特性-Lambda表达式与Functional接口.html">
            
                    
                        <b>1.2.2.7.</b>
                    
                    Java8新特性-Lambda表达式与Functional接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="../base/lambada/Java8新特性-接口的默认方法与静态方法.html">
            
                <a href="../base/lambada/Java8新特性-接口的默认方法与静态方法.html">
            
                    
                        <b>1.2.2.8.</b>
                    
                    Java8新特性-接口的默认方法与静态方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.9" data-path="../base/lambada/Java8新特性-方法引用.html">
            
                <a href="../base/lambada/Java8新特性-方法引用.html">
            
                    
                        <b>1.2.2.9.</b>
                    
                    Java8新特性-方法引用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.10" data-path="../base/lambada/Java8新特性——内建的功能性接口.html">
            
                <a href="../base/lambada/Java8新特性——内建的功能性接口.html">
            
                    
                        <b>1.2.2.10.</b>
                    
                    Java8新特性——内建的功能性接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.11" data-path="../base/lambada/java8用法.html">
            
                <a href="../base/lambada/java8用法.html">
            
                    
                        <b>1.2.2.11.</b>
                    
                    java8用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.12" data-path="../base/lambada/labada常用写法.html">
            
                <a href="../base/lambada/labada常用写法.html">
            
                    
                        <b>1.2.2.12.</b>
                    
                    labada常用写法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                        <b>1.2.3.</b>
                    
                    String
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../base/string/StringBuffer和StringBuilder.html">
            
                <a href="../base/string/StringBuffer和StringBuilder.html">
            
                    
                        <b>1.2.3.1.</b>
                    
                    集合StringBuffer和StringBuilder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../base/string/string源码.html">
            
                <a href="../base/string/string源码.html">
            
                    
                        <b>1.2.3.2.</b>
                    
                    string源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="../base/string/string源码学习.html">
            
                <a href="../base/string/string源码学习.html">
            
                    
                        <b>1.2.3.3.</b>
                    
                    string源码学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.4" data-path="../base/string/字符串string学习.html">
            
                <a href="../base/string/字符串string学习.html">
            
                    
                        <b>1.2.3.4.</b>
                    
                    字符串string学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.5" data-path="../base/string/字符串string学习2-lg.html">
            
                <a href="../base/string/字符串string学习2-lg.html">
            
                    
                        <b>1.2.3.5.</b>
                    
                    字符串string学习2-lg
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <span>
            
                    
                        <b>1.2.4.</b>
                    
                    基本类型
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../base/基本类型/BigDecimal问题.html">
            
                <a href="../base/基本类型/BigDecimal问题.html">
            
                    
                        <b>1.2.4.1.</b>
                    
                    BigDecimal问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../base/基本类型/IntegerCache源码.html">
            
                <a href="../base/基本类型/IntegerCache源码.html">
            
                    
                        <b>1.2.4.2.</b>
                    
                    IntegerCache源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../base/基本类型/Integer源码.html">
            
                <a href="../base/基本类型/Integer源码.html">
            
                    
                        <b>1.2.4.3.</b>
                    
                    Integer源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../base/基本类型/Integer装箱拆箱int比较必看.html">
            
                <a href="../base/基本类型/Integer装箱拆箱int比较必看.html">
            
                    
                        <b>1.2.4.4.</b>
                    
                    Integer装箱拆箱int比较必看
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="../base/基本类型/java强引用软引用弱引用虚引用.html">
            
                <a href="../base/基本类型/java强引用软引用弱引用虚引用.html">
            
                    
                        <b>1.2.4.5.</b>
                    
                    java强引用软引用弱引用虚引用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.6" data-path="../base/基本类型/原码反码补码.html">
            
                <a href="../base/基本类型/原码反码补码.html">
            
                    
                        <b>1.2.4.6.</b>
                    
                    原码反码补码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="../base/基本类型/基本类型装箱拆箱.html">
            
                <a href="../base/基本类型/基本类型装箱拆箱.html">
            
                    
                        <b>1.2.4.7.</b>
                    
                    集合基本类型装箱拆箱
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.8" data-path="../base/基本类型/基本类型装箱拆箱2.html">
            
                <a href="../base/基本类型/基本类型装箱拆箱2.html">
            
                    
                        <b>1.2.4.8.</b>
                    
                    基本类型装箱拆箱2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.9" data-path="../base/基本类型/基本运算.html">
            
                <a href="../base/基本类型/基本运算.html">
            
                    
                        <b>1.2.4.9.</b>
                    
                    基本运算i++
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.10" data-path="../base/基本类型/日期学习.html">
            
                <a href="../base/基本类型/日期学习.html">
            
                    
                        <b>1.2.4.10.</b>
                    
                    日期学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.11" data-path="../base/基本类型/枚举类Enum学习.html">
            
                <a href="../base/基本类型/枚举类Enum学习.html">
            
                    
                        <b>1.2.4.11.</b>
                    
                    枚举类Enum学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.12" data-path="../base/基本类型/浅拷贝和深拷贝.html">
            
                <a href="../base/基本类型/浅拷贝和深拷贝.html">
            
                    
                        <b>1.2.4.12.</b>
                    
                    浅拷贝和深拷贝
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.13" data-path="../base/基本类型/静态static学习.html">
            
                <a href="../base/基本类型/静态static学习.html">
            
                    
                        <b>1.2.4.13.</b>
                    
                    静态static学习
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" >
            
                <span>
            
                    
                        <b>1.2.5.</b>
                    
                    异常
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../base/异常/异常处理.html">
            
                <a href="../base/异常/异常处理.html">
            
                    
                        <b>1.2.5.1.</b>
                    
                    异常处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../base/异常/异常学习.html">
            
                <a href="../base/异常/异常学习.html">
            
                    
                        <b>1.2.5.2.</b>
                    
                    异常学习
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" >
            
                <span>
            
                    
                        <b>1.2.6.</b>
                    
                    算法
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" >
            
                <span>
            
                    
                        <b>1.2.6.1.</b>
                    
                    排序
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1.1" data-path="../base/算法/排序/冒泡排序和选择排序.html">
            
                <a href="../base/算法/排序/冒泡排序和选择排序.html">
            
                    
                        <b>1.2.6.1.1.</b>
                    
                    冒泡排序和选择排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.1.2" data-path="../base/算法/排序/堆排序.html">
            
                <a href="../base/算法/排序/堆排序.html">
            
                    
                        <b>1.2.6.1.2.</b>
                    
                    堆排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.1.3" data-path="../base/算法/排序/快速排序.html">
            
                <a href="../base/算法/排序/快速排序.html">
            
                    
                        <b>1.2.6.1.3.</b>
                    
                    快速排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.1.4" data-path="../base/算法/排序/插入排序和归并排序.html">
            
                <a href="../base/算法/排序/插入排序和归并排序.html">
            
                    
                        <b>1.2.6.1.4.</b>
                    
                    插入排序和归并排序
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" data-path="../base/算法/二分查找.html">
            
                <a href="../base/算法/二分查找.html">
            
                    
                        <b>1.2.6.2.</b>
                    
                    二分查找
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" data-path="../base/算法/数据结构-树-基础.html">
            
                <a href="../base/算法/数据结构-树-基础.html">
            
                    
                        <b>1.2.6.3.</b>
                    
                    数据结构-树-基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.4" data-path="../base/算法/数据结构-链表.html">
            
                <a href="../base/算法/数据结构-链表.html">
            
                    
                        <b>1.2.6.4.</b>
                    
                    数据结构-链表
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" >
            
                <span>
            
                    
                        <b>1.2.7.</b>
                    
                    网络
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../base/网络/http和tcp.html">
            
                <a href="../base/网络/http和tcp.html">
            
                    
                        <b>1.2.7.1.</b>
                    
                    http和tcp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.2" data-path="../base/网络/time_wait问题.html">
            
                <a href="../base/网络/time_wait问题.html">
            
                    
                        <b>1.2.7.2.</b>
                    
                    time_wait问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.8" >
            
                <span>
            
                    
                        <b>1.2.8.</b>
                    
                    设计
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.8.1" data-path="../base/设计/接口相关.html">
            
                <a href="../base/设计/接口相关.html">
            
                    
                        <b>1.2.8.1.</b>
                    
                    接口相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8.2" data-path="../base/设计/接口返回统一封装.html">
            
                <a href="../base/设计/接口返回统一封装.html">
            
                    
                        <b>1.2.8.2.</b>
                    
                    接口返回统一封装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8.3" data-path="../base/设计/权限相关-security.html">
            
                <a href="../base/设计/权限相关-security.html">
            
                    
                        <b>1.2.8.3.</b>
                    
                    权限相关-security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8.4" data-path="../base/设计/权限相关-shrio.html">
            
                <a href="../base/设计/权限相关-shrio.html">
            
                    
                        <b>1.2.8.4.</b>
                    
                    权限相关-shrio
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../base/面试题/面试题.html">
            
                <a href="../base/面试题/面试题.html">
            
                    
                        <b>1.2.9.</b>
                    
                    面试题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../base/test.html">
            
                <a href="../base/test.html">
            
                    
                        <b>1.2.10.</b>
                    
                    Test
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                        <b>1.3.</b>
                    
                    Database
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                        <b>1.3.1.</b>
                    
                    sql题
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../database/sql题/常见sql用法.html">
            
                <a href="../database/sql题/常见sql用法.html">
            
                    
                        <b>1.3.1.1.</b>
                    
                    常见sql用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../database/sql题/数据库去重.html">
            
                <a href="../database/sql题/数据库去重.html">
            
                    
                        <b>1.3.1.2.</b>
                    
                    数据库去重
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../database/sql题/行转列.html">
            
                <a href="../database/sql题/行转列.html">
            
                    
                        <b>1.3.1.3.</b>
                    
                    行转列
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../database/mysql事务.html">
            
                <a href="../database/mysql事务.html">
            
                    
                        <b>1.3.2.</b>
                    
                    mysql事务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../database/mysql存储引擎.html">
            
                <a href="../database/mysql存储引擎.html">
            
                    
                        <b>1.3.3.</b>
                    
                    mysql存储引擎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../database/mysql学习.html">
            
                <a href="../database/mysql学习.html">
            
                    
                        <b>1.3.4.</b>
                    
                    mysql学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../database/MySQL的ACID原理.html">
            
                <a href="../database/MySQL的ACID原理.html">
            
                    
                        <b>1.3.5.</b>
                    
                    MySQL的ACID原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../database/mysql聚簇索引和非聚簇索引.html">
            
                <a href="../database/mysql聚簇索引和非聚簇索引.html">
            
                    
                        <b>1.3.6.</b>
                    
                    mysql聚簇索引和非聚簇索引.md
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../database/MySQL读写分离主从复制原理.html">
            
                <a href="../database/MySQL读写分离主从复制原理.html">
            
                    
                        <b>1.3.7.</b>
                    
                    MySQL读写分离主从复制原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../database/postgres和mysql.html">
            
                <a href="../database/postgres和mysql.html">
            
                    
                        <b>1.3.8.</b>
                    
                    postgres和mysql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../database/sql优化.html">
            
                <a href="../database/sql优化.html">
            
                    
                        <b>1.3.9.</b>
                    
                    sql优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../database/数据库学习.html">
            
                <a href="../database/数据库学习.html">
            
                    
                        <b>1.3.10.</b>
                    
                    数据库学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../database/索引种类.html">
            
                <a href="../database/索引种类.html">
            
                    
                        <b>1.3.11.</b>
                    
                    索引种类
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                        <b>1.4.</b>
                    
                    Design Patterns
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" >
            
                <span>
            
                    
                        <b>1.4.1.</b>
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../designPatterns/spring/spring享元模式.html">
            
                <a href="../designPatterns/spring/spring享元模式.html">
            
                    
                        <b>1.4.1.1.</b>
                    
                    spring享元模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../designPatterns/spring/spring代理模式.html">
            
                <a href="../designPatterns/spring/spring代理模式.html">
            
                    
                        <b>1.4.1.2.</b>
                    
                    spring代理模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../designPatterns/spring/spring工厂模式.html">
            
                <a href="../designPatterns/spring/spring工厂模式.html">
            
                    
                        <b>1.4.1.3.</b>
                    
                    spring工厂模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="../designPatterns/spring/spring策略模式.html">
            
                <a href="../designPatterns/spring/spring策略模式.html">
            
                    
                        <b>1.4.1.4.</b>
                    
                    spring策略模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" >
            
                <span>
            
                    
                        <b>1.4.2.</b>
                    
                    单例
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../designPatterns/单例/单例模式.html">
            
                <a href="../designPatterns/单例/单例模式.html">
            
                    
                        <b>1.4.2.1.</b>
                    
                    单例模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" >
            
                <span>
            
                    
                        <b>1.4.3.</b>
                    
                    策略
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../designPatterns/策略/jdk用到的策略模式.html">
            
                <a href="../designPatterns/策略/jdk用到的策略模式.html">
            
                    
                        <b>1.4.3.1.</b>
                    
                    jdk用到的策略模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../designPatterns/策略/mybatis用到的策略模式.html">
            
                <a href="../designPatterns/策略/mybatis用到的策略模式.html">
            
                    
                        <b>1.4.3.2.</b>
                    
                    mybatis用到的策略模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="../designPatterns/策略/策略模式-实战例子1.html">
            
                <a href="../designPatterns/策略/策略模式-实战例子1.html">
            
                    
                        <b>1.4.3.3.</b>
                    
                    策略模式-实战例子1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4" data-path="../designPatterns/策略/策略模式-实战例子2.html">
            
                <a href="../designPatterns/策略/策略模式-实战例子2.html">
            
                    
                        <b>1.4.3.4.</b>
                    
                    策略模式-实战例子2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.5" data-path="../designPatterns/策略/策略模式-实战例子3.html">
            
                <a href="../designPatterns/策略/策略模式-实战例子3.html">
            
                    
                        <b>1.4.3.5.</b>
                    
                    策略模式-实战例子3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                        <b>1.5.</b>
                    
                    Devops
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" >
            
                <span>
            
                    
                        <b>1.5.1.</b>
                    
                    Docker
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../devops/docker/k8s配置.html">
            
                <a href="../devops/docker/k8s配置.html">
            
                    
                        <b>1.5.1.1.</b>
                    
                    k8s配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                        <b>1.5.2.</b>
                    
                    Elasticsearch
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../devops/elasticsearch/elasticsearch学习.html">
            
                <a href="../devops/elasticsearch/elasticsearch学习.html">
            
                    
                        <b>1.5.2.1.</b>
                    
                    elasticsearch学习
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" >
            
                <span>
            
                    
                        <b>1.5.3.</b>
                    
                    Jenkins
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../devops/jenkins/jenkinsfile配置.html">
            
                <a href="../devops/jenkins/jenkinsfile配置.html">
            
                    
                        <b>1.5.3.1.</b>
                    
                    jenkinsfile配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                        <b>1.6.</b>
                    
                    Distributed
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../distributed/dubbo学习1.html">
            
                <a href="../distributed/dubbo学习1.html">
            
                    
                        <b>1.6.1.</b>
                    
                    dubbo学习1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../distributed/分布式事务.html">
            
                <a href="../distributed/分布式事务.html">
            
                    
                        <b>1.6.2.</b>
                    
                    分布式事务
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                        <b>1.7.</b>
                    
                    Jvm
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../jvm/jvm内存模型.html">
            
                <a href="../jvm/jvm内存模型.html">
            
                    
                        <b>1.7.1.</b>
                    
                    jvm内存模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../jvm/jvm参数.html">
            
                <a href="../jvm/jvm参数.html">
            
                    
                        <b>1.7.2.</b>
                    
                    jvm参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../jvm/jvm对象.html">
            
                <a href="../jvm/jvm对象.html">
            
                    
                        <b>1.7.3.</b>
                    
                    jvm对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../jvm/jvm相关.html">
            
                <a href="../jvm/jvm相关.html">
            
                    
                        <b>1.7.4.</b>
                    
                    jvm相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../jvm/垃圾收集算法和收集器.html">
            
                <a href="../jvm/垃圾收集算法和收集器.html">
            
                    
                        <b>1.7.5.</b>
                    
                    垃圾收集算法和收集器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../jvm/类加载过程.html">
            
                <a href="../jvm/类加载过程.html">
            
                    
                        <b>1.7.6.</b>
                    
                    类加载过程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                        <b>1.8.</b>
                    
                    Mq
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../mq/mq相关.html">
            
                <a href="../mq/mq相关.html">
            
                    
                        <b>1.8.1.</b>
                    
                    mq相关
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                        <b>1.9.</b>
                    
                    Muti Thread
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" >
            
                <span>
            
                    
                        <b>1.9.1.</b>
                    
                    源码
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="../mutiThread/源码/AbstractQueuedSynchronizer.html">
            
                <a href="../mutiThread/源码/AbstractQueuedSynchronizer.html">
            
                    
                        <b>1.9.1.1.</b>
                    
                    AbstractQueuedSynchronizer源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="../mutiThread/源码/ReadWriteLock.html">
            
                <a href="../mutiThread/源码/ReadWriteLock.html">
            
                    
                        <b>1.9.1.2.</b>
                    
                    ReadWriteLock源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.3" data-path="../mutiThread/源码/ReenTrantLock.html">
            
                <a href="../mutiThread/源码/ReenTrantLock.html">
            
                    
                        <b>1.9.1.3.</b>
                    
                    ReenTrantLock源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.4" data-path="../mutiThread/源码/ThreadLocal源码.html">
            
                <a href="../mutiThread/源码/ThreadLocal源码.html">
            
                    
                        <b>1.9.1.4.</b>
                    
                    ThreadLocal源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" >
            
                <span>
            
                    
                        <b>1.9.2.</b>
                    
                    生产者消费者案例
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="../mutiThread/生产者消费者案例/生产者消费者例子1.html">
            
                <a href="../mutiThread/生产者消费者案例/生产者消费者例子1.html">
            
                    
                        <b>1.9.2.1.</b>
                    
                    生产者消费者例子1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.2" data-path="../mutiThread/生产者消费者案例/生产者消费者例子2.html">
            
                <a href="../mutiThread/生产者消费者案例/生产者消费者例子2.html">
            
                    
                        <b>1.9.2.2.</b>
                    
                    生产者消费者例子2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2.3" data-path="../mutiThread/生产者消费者案例/生产者消费者例子3.html">
            
                <a href="../mutiThread/生产者消费者案例/生产者消费者例子3.html">
            
                    
                        <b>1.9.2.3.</b>
                    
                    生产者消费者例子3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../mutiThread/AQS.html">
            
                <a href="../mutiThread/AQS.html">
            
                    
                        <b>1.9.3.</b>
                    
                    AQS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../mutiThread/CAS.html">
            
                <a href="../mutiThread/CAS.html">
            
                    
                        <b>1.9.4.</b>
                    
                    CAS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../mutiThread/CountDownLatch和CyclicBarrier.html">
            
                <a href="../mutiThread/CountDownLatch和CyclicBarrier.html">
            
                    
                        <b>1.9.5.</b>
                    
                    CountDownLatch和CyclicBarrier
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../mutiThread/Executors.html">
            
                <a href="../mutiThread/Executors.html">
            
                    
                        <b>1.9.6.</b>
                    
                    Executors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../mutiThread/OOM.html">
            
                <a href="../mutiThread/OOM.html">
            
                    
                        <b>1.9.7.</b>
                    
                    OOM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../mutiThread/synchronized和ReentrantLock的实现原理.html">
            
                <a href="../mutiThread/synchronized和ReentrantLock的实现原理.html">
            
                    
                        <b>1.9.8.</b>
                    
                    synchronized和ReentrantLock的实现原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../mutiThread/ThreadLocal原理.html">
            
                <a href="../mutiThread/ThreadLocal原理.html">
            
                    
                        <b>1.9.9.</b>
                    
                    ThreadLocal原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../mutiThread/ThreadLocal原理2.html">
            
                <a href="../mutiThread/ThreadLocal原理2.html">
            
                    
                        <b>1.9.10.</b>
                    
                    ThreadLocal原理2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.11" data-path="../mutiThread/ThreadPoolExecutor-lg.html">
            
                <a href="../mutiThread/ThreadPoolExecutor-lg.html">
            
                    
                        <b>1.9.11.</b>
                    
                    ThreadPoolExecutor详解 ThreadPoolExecutor 的参数含义及源码执行流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.12" data-path="../mutiThread/ThreadPoolExecutor相关.html">
            
                <a href="../mutiThread/ThreadPoolExecutor相关.html">
            
                    
                        <b>1.9.12.</b>
                    
                    ThreadPoolExecutor相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.13" data-path="../mutiThread/Volatile实现原理.html">
            
                <a href="../mutiThread/Volatile实现原理.html">
            
                    
                        <b>1.9.13.</b>
                    
                    Volatiile实现原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.14" data-path="../mutiThread/死锁.html">
            
                <a href="../mutiThread/死锁.html">
            
                    
                        <b>1.9.14.</b>
                    
                    死锁
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.15" data-path="../mutiThread/线程学习1.html">
            
                <a href="../mutiThread/线程学习1.html">
            
                    
                        <b>1.9.15.</b>
                    
                    线程学习1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.16" data-path="../mutiThread/线程学习2.html">
            
                <a href="../mutiThread/线程学习2.html">
            
                    
                        <b>1.9.16.</b>
                    
                    线程学习2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.17" data-path="../mutiThread/线程的状态-lg.html">
            
                <a href="../mutiThread/线程的状态-lg.html">
            
                    
                        <b>1.9.17.</b>
                    
                    线程的状态-lg
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.18" data-path="../mutiThread/线程间通信的实现方式1.html">
            
                <a href="../mutiThread/线程间通信的实现方式1.html">
            
                    
                        <b>1.9.18.</b>
                    
                    线程间通信的几种实现方式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.19" data-path="../mutiThread/线程间通信的实现方式2.html">
            
                <a href="../mutiThread/线程间通信的实现方式2.html">
            
                    
                        <b>1.9.19.</b>
                    
                    线程间通信的实现方式2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                        <b>1.10.</b>
                    
                    Mybatis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" >
            
                <span>
            
                    
                        <b>1.10.1.</b>
                    
                    mybatis分页插件
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.1" data-path="../mybatis/mybatis分页插件/mybatis插件引入.html">
            
                <a href="../mybatis/mybatis分页插件/mybatis插件引入.html">
            
                    
                        <b>1.10.1.1.</b>
                    
                    mybatis插件引入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.2" data-path="../mybatis/mybatis分页插件/Page.html">
            
                <a href="../mybatis/mybatis分页插件/Page.html">
            
                    
                        <b>1.10.1.2.</b>
                    
                    Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.3" data-path="../mybatis/mybatis分页插件/PagePlugin.html">
            
                <a href="../mybatis/mybatis分页插件/PagePlugin.html">
            
                    
                        <b>1.10.1.3.</b>
                    
                    Page Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.4" data-path="../mybatis/mybatis分页插件/ReflectHelper.html">
            
                <a href="../mybatis/mybatis分页插件/ReflectHelper.html">
            
                    
                        <b>1.10.1.4.</b>
                    
                    Reflect Helper
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2" >
            
                <span>
            
                    
                        <b>1.10.2.</b>
                    
                    mybatis分页插件2
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="../mybatis/mybatis分页插件2/mybatis插件引入.html">
            
                <a href="../mybatis/mybatis分页插件2/mybatis插件引入.html">
            
                    
                        <b>1.10.2.1.</b>
                    
                    mybatis插件引入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="../mybatis/mybatis分页插件2/PageInterceptor.html">
            
                <a href="../mybatis/mybatis分页插件2/PageInterceptor.html">
            
                    
                        <b>1.10.2.2.</b>
                    
                    Page Interceptor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3" data-path="../mybatis/mybatis分页插件2/Pagination.html">
            
                <a href="../mybatis/mybatis分页插件2/Pagination.html">
            
                    
                        <b>1.10.2.3.</b>
                    
                    Pagination
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" >
            
                <span>
            
                    
                        <b>1.10.3.</b>
                    
                    mybatis源码解析
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.3.1" data-path="../mybatis/mybatis源码解析/mybatis源码-mapper接口流程分析.html">
            
                <a href="../mybatis/mybatis源码解析/mybatis源码-mapper接口流程分析.html">
            
                    
                        <b>1.10.3.1.</b>
                    
                    mybatis源码-mapper接口流程分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.2" data-path="../mybatis/mybatis源码解析/mybatis源码学习总结1.html">
            
                <a href="../mybatis/mybatis源码解析/mybatis源码学习总结1.html">
            
                    
                        <b>1.10.3.2.</b>
                    
                    mybatis源码学习总结1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.3" data-path="../mybatis/mybatis源码解析/mybatis源码学习总结2.html">
            
                <a href="../mybatis/mybatis源码解析/mybatis源码学习总结2.html">
            
                    
                        <b>1.10.3.3.</b>
                    
                    mybatis源码学习总结2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.4" data-path="../mybatis/mybatis源码解析/spring管理mybatis事务分析.html">
            
                <a href="../mybatis/mybatis源码解析/spring管理mybatis事务分析.html">
            
                    
                        <b>1.10.3.4.</b>
                    
                    spring管理mybatis事务分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.5" data-path="../mybatis/mybatis源码解析/SqlSessionFactoryBean源码分析.html">
            
                <a href="../mybatis/mybatis源码解析/SqlSessionFactoryBean源码分析.html">
            
                    
                        <b>1.10.3.5.</b>
                    
                    SqlSessionFactoryBean源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.4" >
            
                <span>
            
                    
                        <b>1.10.4.</b>
                    
                    源码
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.4.1" data-path="../mybatis/源码/SqlSessionManager源码.html">
            
                <a href="../mybatis/源码/SqlSessionManager源码.html">
            
                    
                        <b>1.10.4.1.</b>
                    
                    SqlSessionManager源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../mybatis/mybatis-view1.html">
            
                <a href="../mybatis/mybatis-view1.html">
            
                    
                        <b>1.10.5.</b>
                    
                    Mybatis View 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../mybatis/mybatis学习.html">
            
                <a href="../mybatis/mybatis学习.html">
            
                    
                        <b>1.10.6.</b>
                    
                    mybatis学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../mybatis/MyBatis框架面试常见问题.html">
            
                <a href="../mybatis/MyBatis框架面试常见问题.html">
            
                    
                        <b>1.10.7.</b>
                    
                    MyBatis框架面试常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../mybatis/mybatis用法.html">
            
                <a href="../mybatis/mybatis用法.html">
            
                    
                        <b>1.10.8.</b>
                    
                    mybatis用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="../mybatis/mybatis相关.html">
            
                <a href="../mybatis/mybatis相关.html">
            
                    
                        <b>1.10.9.</b>
                    
                    mybatis相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="../mybatis/常见mybatis用法.html">
            
                <a href="../mybatis/常见mybatis用法.html">
            
                    
                        <b>1.10.10.</b>
                    
                    常见mybatis用法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                        <b>1.11.</b>
                    
                    Mybatis Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../mybatis-spring/Mybatis-Spring源码分析.html">
            
                <a href="../mybatis-spring/Mybatis-Spring源码分析.html">
            
                    
                        <b>1.11.1.</b>
                    
                    Mybatis-Spring源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                        <b>1.12.</b>
                    
                    Redis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" >
            
                <span>
            
                    
                        <b>1.12.1.</b>
                    
                    redis命令
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1.1" data-path="../redis/redis命令/redis-set命令.html">
            
                <a href="../redis/redis命令/redis-set命令.html">
            
                    
                        <b>1.12.1.1.</b>
                    
                    redis-set命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.2" data-path="../redis/redis命令/redis-string命令.html">
            
                <a href="../redis/redis命令/redis-string命令.html">
            
                    
                        <b>1.12.1.2.</b>
                    
                    redis-string命令
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../redis/redis应用/redis应用.html">
            
                <a href="../redis/redis应用/redis应用.html">
            
                    
                        <b>1.12.2.</b>
                    
                    redis应用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.2.1" data-path="../redis/redis应用/cys-redis微信异步关注（队列）.html">
            
                <a href="../redis/redis应用/cys-redis微信异步关注（队列）.html">
            
                    
                        <b>1.12.2.1.</b>
                    
                    cys-redis队列实现微信异步关注
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.2" data-path="../redis/redis应用/cys-redis直播点击数（计数应用）.html">
            
                <a href="../redis/redis应用/cys-redis直播点击数（计数应用）.html">
            
                    
                        <b>1.12.2.2.</b>
                    
                    cys-redis直播点击数-计数应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.3" data-path="../redis/redis应用/cys-redis积分（列出今天项目或最新项目，最新评论的）.html">
            
                <a href="../redis/redis应用/cys-redis积分（列出今天项目或最新项目，最新评论的）.html">
            
                    
                        <b>1.12.2.3.</b>
                    
                    cys-redis积分-最新列表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.4" data-path="../redis/redis应用/cys-redis队列.html">
            
                <a href="../redis/redis应用/cys-redis队列.html">
            
                    
                        <b>1.12.2.4.</b>
                    
                    cys-redis队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.5" data-path="../redis/redis应用/cys-redis验证码（临时性的，设计过期时间的应用）.html">
            
                <a href="../redis/redis应用/cys-redis验证码（临时性的，设计过期时间的应用）.html">
            
                    
                        <b>1.12.2.5.</b>
                    
                    cys-redis验证码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.6" data-path="../redis/redis应用/redis-string应用.html">
            
                <a href="../redis/redis应用/redis-string应用.html">
            
                    
                        <b>1.12.2.6.</b>
                    
                    redis-string应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.7" data-path="../redis/redis应用/redis-zset应用.html">
            
                <a href="../redis/redis应用/redis-zset应用.html">
            
                    
                        <b>1.12.2.7.</b>
                    
                    redis-zset应用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../redis/redis数据结构.html">
            
                <a href="../redis/redis数据结构.html">
            
                    
                        <b>1.12.3.</b>
                    
                    redis数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../redis/jedis模板.html">
            
                <a href="../redis/jedis模板.html">
            
                    
                        <b>1.12.4.</b>
                    
                    jedis模板
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../redis/redis协议测试.html">
            
                <a href="../redis/redis协议测试.html">
            
                    
                        <b>1.12.5.</b>
                    
                    redis协议
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6" data-path="../redis/redis相关.html">
            
                <a href="../redis/redis相关.html">
            
                    
                        <b>1.12.6.</b>
                    
                    redis相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7" data-path="../redis/缓存.html">
            
                <a href="../redis/缓存.html">
            
                    
                        <b>1.12.7.</b>
                    
                    缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.8" data-path="../redis/缓存和数据库一致性问题.html">
            
                <a href="../redis/缓存和数据库一致性问题.html">
            
                    
                        <b>1.12.8.</b>
                    
                    缓存和数据库一致性问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                        <b>1.13.</b>
                    
                    Servlet
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" >
            
                <span>
            
                    
                        <b>1.13.1.</b>
                    
                    源码
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1.1" data-path="../servlet/源码/ServerProperites源码.html">
            
                <a href="../servlet/源码/ServerProperites源码.html">
            
                    
                        <b>1.13.1.1.</b>
                    
                    ServerProperites源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../servlet/nio-bio-aio学习.html">
            
                <a href="../servlet/nio-bio-aio学习.html">
            
                    
                        <b>1.13.2.</b>
                    
                    Nio Bio Aio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="../servlet/tomcat优化.html">
            
                <a href="../servlet/tomcat优化.html">
            
                    
                        <b>1.13.3.</b>
                    
                    Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="../servlet/tomcat原理.html">
            
                <a href="../servlet/tomcat原理.html">
            
                    
                        <b>1.13.4.</b>
                    
                    tomcat原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="../servlet/tomcat在springboot中配置.html">
            
                <a href="../servlet/tomcat在springboot中配置.html">
            
                    
                        <b>1.13.5.</b>
                    
                    tomcat在springboot中配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                        <b>1.14.</b>
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" >
            
                <span>
            
                    
                        <b>1.14.1.</b>
                    
                    Aop
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1.1" >
            
                <span>
            
                    
                        <b>1.14.1.1.</b>
                    
                    源码
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1.1.1" data-path="../spring/aop/源码/JdkDanymicAopProxy源码.html">
            
                <a href="../spring/aop/源码/JdkDanymicAopProxy源码.html">
            
                    
                        <b>1.14.1.1.1.</b>
                    
                    JdkDanymicAopProxy源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.1.2" data-path="../spring/aop/aop动态代理学习.html">
            
                <a href="../spring/aop/aop动态代理学习.html">
            
                    
                        <b>1.14.1.2.</b>
                    
                    aop动态代理学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.1.3" data-path="../spring/aop/aop学习.html">
            
                <a href="../spring/aop/aop学习.html">
            
                    
                        <b>1.14.1.3.</b>
                    
                    mybatis学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.1.4" data-path="../spring/aop/cglib代理.html">
            
                <a href="../spring/aop/cglib代理.html">
            
                    
                        <b>1.14.1.4.</b>
                    
                    cglib代理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.2" >
            
                <span>
            
                    
                        <b>1.14.2.</b>
                    
                    Ioc
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.2.1" data-path="../spring/ioc/bean实例化过程.html">
            
                <a href="../spring/ioc/bean实例化过程.html">
            
                    
                        <b>1.14.2.1.</b>
                    
                    bean实例化过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.2" data-path="../spring/ioc/spring-ioc原理.html">
            
                <a href="../spring/ioc/spring-ioc原理.html">
            
                    
                        <b>1.14.2.2.</b>
                    
                    spring-ioc原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2.3" data-path="../spring/ioc/spring循环依赖.html">
            
                <a href="../spring/ioc/spring循环依赖.html">
            
                    
                        <b>1.14.2.3.</b>
                    
                    spring循环依赖
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.3" >
            
                <span>
            
                    
                        <b>1.14.3.</b>
                    
                    Mvc
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.3.1" data-path="../spring/mvc/cookie.html">
            
                <a href="../spring/mvc/cookie.html">
            
                    
                        <b>1.14.3.1.</b>
                    
                    Cookie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.2" data-path="../spring/mvc/spring-controller单例问题.html">
            
                <a href="../spring/mvc/spring-controller单例问题.html">
            
                    
                        <b>1.14.3.2.</b>
                    
                    spring-controller单例问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3.3" data-path="../spring/mvc/spring-mvc.html">
            
                <a href="../spring/mvc/spring-mvc.html">
            
                    
                        <b>1.14.3.3.</b>
                    
                    Spring Mvc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.4" >
            
                <span>
            
                    
                        <b>1.14.4.</b>
                    
                    事务
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.4.1" data-path="../spring/事务/spring事务管理.html">
            
                <a href="../spring/事务/spring事务管理.html">
            
                    
                        <b>1.14.4.1.</b>
                    
                    spring事务管理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="../spring/动态数据源/动态数据源.html">
            
                <a href="../spring/动态数据源/动态数据源.html">
            
                    
                        <b>1.14.5.</b>
                    
                    动态数据源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.5.1" data-path="../spring/动态数据源/AbstractRoutingDataSource源码.html">
            
                <a href="../spring/动态数据源/AbstractRoutingDataSource源码.html">
            
                    
                        <b>1.14.5.1.</b>
                    
                    AbstractRoutingDataSource源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14.6" data-path="../spring/Spring和SpringAOP源码总结.html">
            
                <a href="../spring/Spring和SpringAOP源码总结.html">
            
                    
                        <b>1.14.6.</b>
                    
                    Spring和SpringAOP源码总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" >
            
                <span>
            
                    
                        <b>1.15.</b>
                    
                    Springboot
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" >
            
                <span>
            
                    
                        <b>1.15.1.</b>
                    
                    springboot配置
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1.1" data-path="../springboot/springboot配置/springboot配置文件加载分析.html">
            
                <a href="../springboot/springboot配置/springboot配置文件加载分析.html">
            
                    
                        <b>1.15.1.1.</b>
                    
                    springboot配置文件加载分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.1.2" data-path="../springboot/springboot配置/修改springboot默认加载application-properties文件.html">
            
                <a href="../springboot/springboot配置/修改springboot默认加载application-properties文件.html">
            
                    
                        <b>1.15.1.2.</b>
                    
                    修改springboot默认加载application.properties文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.2" >
            
                <span>
            
                    
                        <b>1.15.2.</b>
                    
                    监听器
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.2.1" data-path="../springboot/监听器/springboot监听器.html">
            
                <a href="../springboot/监听器/springboot监听器.html">
            
                    
                        <b>1.15.2.1.</b>
                    
                    springboot监听器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="../springboot/SpringApplication源码分析.html">
            
                <a href="../springboot/SpringApplication源码分析.html">
            
                    
                        <b>1.15.3.</b>
                    
                    SpringApplication源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="../springboot/springboot-run方法源码分析.html">
            
                <a href="../springboot/springboot-run方法源码分析.html">
            
                    
                        <b>1.15.4.</b>
                    
                    springboot-run方法源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="../springboot/springboot使用外部服务器的启动流程.html">
            
                <a href="../springboot/springboot使用外部服务器的启动流程.html">
            
                    
                        <b>1.15.5.</b>
                    
                    springboot使用外部服务器的启动流程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="../springboot/SpringBoot启动流程分析.html">
            
                <a href="../springboot/SpringBoot启动流程分析.html">
            
                    
                        <b>1.15.6.</b>
                    
                    SpringBoot启动流程分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.7" data-path="../springboot/springboot整合tomcat原理.html">
            
                <a href="../springboot/springboot整合tomcat原理.html">
            
                    
                        <b>1.15.7.</b>
                    
                    springboot整合Tomcat原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.8" data-path="../springboot/SpringBoot注解.html">
            
                <a href="../springboot/SpringBoot注解.html">
            
                    
                        <b>1.15.8.</b>
                    
                    SpringBoot注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.9" data-path="../springboot/springboot自动装配.html">
            
                <a href="../springboot/springboot自动装配.html">
            
                    
                        <b>1.15.9.</b>
                    
                    springboot自动装配
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.10" data-path="../springboot/springboot配置DispatcherServlet.html">
            
                <a href="../springboot/springboot配置DispatcherServlet.html">
            
                    
                        <b>1.15.10.</b>
                    
                    springboot配置DispatcherServlet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.11" data-path="../springboot/springboot配置类configuration解析.html">
            
                <a href="../springboot/springboot配置类configuration解析.html">
            
                    
                        <b>1.15.11.</b>
                    
                    springboot配置类configuration解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" >
            
                <span>
            
                    
                        <b>1.16.</b>
                    
                    Zother 1 Java Face Notes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../zother1-JavaFaceNotes/Dubbo.html">
            
                <a href="../zother1-JavaFaceNotes/Dubbo.html">
            
                    
                        <b>1.16.1.</b>
                    
                    Dubbo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="../zother1-JavaFaceNotes/IO&NIO.html">
            
                <a href="../zother1-JavaFaceNotes/IO&NIO.html">
            
                    
                        <b>1.16.2.</b>
                    
                    IO NIO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="../zother1-JavaFaceNotes/Java基础.html">
            
                <a href="../zother1-JavaFaceNotes/Java基础.html">
            
                    
                        <b>1.16.3.</b>
                    
                    Java基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="../zother1-JavaFaceNotes/java集合.html">
            
                <a href="../zother1-JavaFaceNotes/java集合.html">
            
                    
                        <b>1.16.4.</b>
                    
                    java集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="../zother1-JavaFaceNotes/JVM.html">
            
                <a href="../zother1-JavaFaceNotes/JVM.html">
            
                    
                        <b>1.16.5.</b>
                    
                    JVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="../zother1-JavaFaceNotes/Kafka.html">
            
                <a href="../zother1-JavaFaceNotes/Kafka.html">
            
                    
                        <b>1.16.6.</b>
                    
                    Kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="../zother1-JavaFaceNotes/Linux.html">
            
                <a href="../zother1-JavaFaceNotes/Linux.html">
            
                    
                        <b>1.16.7.</b>
                    
                    Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="../zother1-JavaFaceNotes/Mybatis.html">
            
                <a href="../zother1-JavaFaceNotes/Mybatis.html">
            
                    
                        <b>1.16.8.</b>
                    
                    Mybatis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="../zother1-JavaFaceNotes/MySql.html">
            
                <a href="../zother1-JavaFaceNotes/MySql.html">
            
                    
                        <b>1.16.9.</b>
                    
                    My Sql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="../zother1-JavaFaceNotes/Nginx.html">
            
                <a href="../zother1-JavaFaceNotes/Nginx.html">
            
                    
                        <b>1.16.10.</b>
                    
                    Nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.11" data-path="../zother1-JavaFaceNotes/Redis.html">
            
                <a href="../zother1-JavaFaceNotes/Redis.html">
            
                    
                        <b>1.16.11.</b>
                    
                    Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.12" data-path="../zother1-JavaFaceNotes/Spring.html">
            
                <a href="../zother1-JavaFaceNotes/Spring.html">
            
                    
                        <b>1.16.12.</b>
                    
                    Spring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.13" data-path="../zother1-JavaFaceNotes/SpringBoot.html">
            
                <a href="../zother1-JavaFaceNotes/SpringBoot.html">
            
                    
                        <b>1.16.13.</b>
                    
                    Spring Boot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.14" data-path="../zother1-JavaFaceNotes/SpringCloud.html">
            
                <a href="../zother1-JavaFaceNotes/SpringCloud.html">
            
                    
                        <b>1.16.14.</b>
                    
                    Spring Cloud
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.15" data-path="../zother1-JavaFaceNotes/多线程.html">
            
                <a href="../zother1-JavaFaceNotes/多线程.html">
            
                    
                        <b>1.16.15.</b>
                    
                    多线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.16" data-path="../zother1-JavaFaceNotes/异常&反射.html">
            
                <a href="../zother1-JavaFaceNotes/异常&反射.html">
            
                    
                        <b>1.16.16.</b>
                    
                    异常&反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.17" data-path="../zother1-JavaFaceNotes/简历.html">
            
                <a href="../zother1-JavaFaceNotes/简历.html">
            
                    
                        <b>1.16.17.</b>
                    
                    简历
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.17.</b>
                    
                    Zother 5 Java Interview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="Java基础学习.html">
            
                <a href="Java基础学习.html">
            
                    
                        <b>1.17.1.</b>
                    
                    Java基础学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="Java集合面试题及答案.html">
            
                <a href="Java集合面试题及答案.html">
            
                    
                        <b>1.17.2.</b>
                    
                    Java集合面试题及答案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="一、Java基础.html">
            
                <a href="一、Java基础.html">
            
                    
                        <b>1.17.3.</b>
                    
                    一、Java基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="七、JavaWeb.html">
            
                <a href="七、JavaWeb.html">
            
                    
                        <b>1.17.4.</b>
                    
                    七、JavaWeb
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.17.5" data-path="三、Java 集合.html">
            
                <a href="三、Java 集合.html">
            
                    
                        <b>1.17.5.</b>
                    
                    三、Java 集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.6" data-path="九、操作系统.html">
            
                <a href="九、操作系统.html">
            
                    
                        <b>1.17.6.</b>
                    
                    九、操作系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.7" data-path="二、设计模式.html">
            
                <a href="二、设计模式.html">
            
                    
                        <b>1.17.7.</b>
                    
                    二、设计模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.8" data-path="二十、Spring源码解析.html">
            
                <a href="二十、Spring源码解析.html">
            
                    
                        <b>1.17.8.</b>
                    
                    二十、Spring源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.9" data-path="二十一、Tomcat源码解析.html">
            
                <a href="二十一、Tomcat源码解析.html">
            
                    
                        <b>1.17.9.</b>
                    
                    二十一、Tomcat源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.10" data-path="五、JVM.html">
            
                <a href="五、JVM.html">
            
                    
                        <b>1.17.10.</b>
                    
                    五、JVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.11" data-path="八、Mysql.html">
            
                <a href="八、Mysql.html">
            
                    
                        <b>1.17.11.</b>
                    
                    八、Mysql
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" >
            
                <span>
            
                    
                        <b>1.18.</b>
                    
                    Zother 7 Java Interview
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" >
            
                <span>
            
                    
                        <b>1.18.1.</b>
                    
                    Data Structures Algorithms
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1.1" data-path="../zother7-JavaInterview/dataStructures-algorithms/算法面试真题汇总.html">
            
                <a href="../zother7-JavaInterview/dataStructures-algorithms/算法面试真题汇总.html">
            
                    
                        <b>1.18.1.1.</b>
                    
                    算法面试真题汇总
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.1.2" data-path="../zother7-JavaInterview/dataStructures-algorithms/算法题目难点题目总结.html">
            
                <a href="../zother7-JavaInterview/dataStructures-algorithms/算法题目难点题目总结.html">
            
                    
                        <b>1.18.1.2.</b>
                    
                    算法题目难点题目总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.1.3" data-path="../zother7-JavaInterview/dataStructures-algorithms/递归套路总结.html">
            
                <a href="../zother7-JavaInterview/dataStructures-algorithms/递归套路总结.html">
            
                    
                        <b>1.18.1.3.</b>
                    
                    递归套路总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.2" >
            
                <span>
            
                    
                        <b>1.18.2.</b>
                    
                    Interview
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.2.1" data-path="../zother7-JavaInterview/interview/已投公司情况.html">
            
                <a href="../zother7-JavaInterview/interview/已投公司情况.html">
            
                    
                        <b>1.18.2.1.</b>
                    
                    已投公司情况
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2.2" data-path="../zother7-JavaInterview/interview/自我介绍和项目介绍.html">
            
                <a href="../zother7-JavaInterview/interview/自我介绍和项目介绍.html">
            
                    
                        <b>1.18.2.2.</b>
                    
                    自我介绍和项目介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.3" >
            
                <span>
            
                    
                        <b>1.18.3.</b>
                    
                    Interview Experience
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.3.1" data-path="../zother7-JavaInterview/interview-experience/各大公司面经.html">
            
                <a href="../zother7-JavaInterview/interview-experience/各大公司面经.html">
            
                    
                        <b>1.18.3.1.</b>
                    
                    各大公司面经
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3.2" data-path="../zother7-JavaInterview/interview-experience/面试常见知识.html">
            
                <a href="../zother7-JavaInterview/interview-experience/面试常见知识.html">
            
                    
                        <b>1.18.3.2.</b>
                    
                    面试常见知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3.3" data-path="../zother7-JavaInterview/interview-experience/面试常见问题分类汇总.html">
            
                <a href="../zother7-JavaInterview/interview-experience/面试常见问题分类汇总.html">
            
                    
                        <b>1.18.3.3.</b>
                    
                    面试常见问题分类汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.4" >
            
                <span>
            
                    
                        <b>1.18.4.</b>
                    
                    Microservice
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.4.1" data-path="../zother7-JavaInterview/microservice/微服务相关资料.html">
            
                <a href="../zother7-JavaInterview/microservice/微服务相关资料.html">
            
                    
                        <b>1.18.4.1.</b>
                    
                    微服务相关资料
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.5" >
            
                <span>
            
                    
                        <b>1.18.5.</b>
                    
                    Network
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.5.1" data-path="../zother7-JavaInterview/network/http面试问题全解析.html">
            
                <a href="../zother7-JavaInterview/network/http面试问题全解析.html">
            
                    
                        <b>1.18.5.1.</b>
                    
                    http面试问题全解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.6" >
            
                <span>
            
                    
                        <b>1.18.6.</b>
                    
                    Operating System
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.6.1" data-path="../zother7-JavaInterview/operating-system/后端程序员必备的Linux基础知识.html">
            
                <a href="../zother7-JavaInterview/operating-system/后端程序员必备的Linux基础知识.html">
            
                    
                        <b>1.18.6.1.</b>
                    
                    后端程序员必备的Linux基础知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.6.2" data-path="../zother7-JavaInterview/operating-system/操作系统、计算机网络相关知识.html">
            
                <a href="../zother7-JavaInterview/operating-system/操作系统、计算机网络相关知识.html">
            
                    
                        <b>1.18.6.2.</b>
                    
                    操作系统、计算机网络相关知识
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.7" >
            
                <span>
            
                    
                        <b>1.18.7.</b>
                    
                    Project
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.7.1" data-path="../zother7-JavaInterview/project/消息中间件面试题.html">
            
                <a href="../zother7-JavaInterview/project/消息中间件面试题.html">
            
                    
                        <b>1.18.7.1.</b>
                    
                    消息中间件面试题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.7.2" data-path="../zother7-JavaInterview/project/秒杀项目总结.html">
            
                <a href="../zother7-JavaInterview/project/秒杀项目总结.html">
            
                    
                        <b>1.18.7.2.</b>
                    
                    秒杀项目总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" >
            
                <span>
            
                    
                        <b>1.19.</b>
                    
                    Zother 8 Java Book
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" >
            
                <span>
            
                    
                        <b>1.19.1.</b>
                    
                    Basics
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1.1" data-path="../zother8-JavaBook/Basics/Java面试基础常见问题.html">
            
                <a href="../zother8-JavaBook/Basics/Java面试基础常见问题.html">
            
                    
                        <b>1.19.1.1.</b>
                    
                    Java面试基础常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.1.2" data-path="../zother8-JavaBook/Basics/Java面试基础知识.html">
            
                <a href="../zother8-JavaBook/Basics/Java面试基础知识.html">
            
                    
                        <b>1.19.1.2.</b>
                    
                    Java面试基础知识
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.2" >
            
                <span>
            
                    
                        <b>1.19.2.</b>
                    
                    Collections
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.2.1" data-path="../zother8-JavaBook/Collections/HashMap-ConcurrentHashMap面试必问.html">
            
                <a href="../zother8-JavaBook/Collections/HashMap-ConcurrentHashMap面试必问.html">
            
                    
                        <b>1.19.2.1.</b>
                    
                    HashMap-ConcurrentHashMap面试必问
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.2" data-path="../zother8-JavaBook/Collections/Java面经-ArrayList源码解析.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-ArrayList源码解析.html">
            
                    
                        <b>1.19.2.2.</b>
                    
                    Java面经-ArrayList源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.3" data-path="../zother8-JavaBook/Collections/Java面经-HashSet-HashMap源码解析.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-HashSet-HashMap源码解析.html">
            
                    
                        <b>1.19.2.3.</b>
                    
                    Java面经-HashSet-HashMap源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.4" data-path="../zother8-JavaBook/Collections/Java面经-Java集合框架.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-Java集合框架.html">
            
                    
                        <b>1.19.2.4.</b>
                    
                    Java面经-Java集合框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.5" data-path="../zother8-JavaBook/Collections/Java面经-LinkedHashSet-Map源码解析.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-LinkedHashSet-Map源码解析.html">
            
                    
                        <b>1.19.2.5.</b>
                    
                    Java面经-LinkedHashSet-Map源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.6" data-path="../zother8-JavaBook/Collections/Java面经-LinkedList源码解析.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-LinkedList源码解析.html">
            
                    
                        <b>1.19.2.6.</b>
                    
                    Java面经-LinkedList源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.7" data-path="../zother8-JavaBook/Collections/Java面经-PriorityQueue源码解析.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-PriorityQueue源码解析.html">
            
                    
                        <b>1.19.2.7.</b>
                    
                    Java面经-PriorityQueue源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.8" data-path="../zother8-JavaBook/Collections/Java面经-Stack-Queue源码解析.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-Stack-Queue源码解析.html">
            
                    
                        <b>1.19.2.8.</b>
                    
                    Java面经-Stack-Queue源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2.9" data-path="../zother8-JavaBook/Collections/Java面经-TreeSet-TreeMap源码解析.html">
            
                <a href="../zother8-JavaBook/Collections/Java面经-TreeSet-TreeMap源码解析.html">
            
                    
                        <b>1.19.2.9.</b>
                    
                    Java面经-TreeSet-TreeMap源码解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3" >
            
                <span>
            
                    
                        <b>1.19.3.</b>
                    
                    Interview
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.1" >
            
                <span>
            
                    
                        <b>1.19.3.1.</b>
                    
                    Bishi
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.1.1" data-path="../zother8-JavaBook/Interview/bishi/pdd.html">
            
                <a href="../zother8-JavaBook/Interview/bishi/pdd.html">
            
                    
                        <b>1.19.3.1.1.</b>
                    
                    Pdd
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2" >
            
                <span>
            
                    
                        <b>1.19.3.2.</b>
                    
                    Codes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.1" >
            
                <span>
            
                    
                        <b>1.19.3.2.1.</b>
                    
                    Basics
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.1.1" data-path="../zother8-JavaBook/Interview/codes/basics/equals和hashcode.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/equals和hashcode.html">
            
                    
                        <b>1.19.3.2.1.1.</b>
                    
                    equals和hashcode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.2" data-path="../zother8-JavaBook/Interview/codes/basics/IO的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/IO的一些问题.html">
            
                    
                        <b>1.19.3.2.1.2.</b>
                    
                    IO的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.3" data-path="../zother8-JavaBook/Interview/codes/basics/Java值传递的问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/Java值传递的问题.html">
            
                    
                        <b>1.19.3.2.1.3.</b>
                    
                    Java值传递的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.4" data-path="../zother8-JavaBook/Interview/codes/basics/String的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/String的一些问题.html">
            
                    
                        <b>1.19.3.2.1.4.</b>
                    
                    String的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.5" data-path="../zother8-JavaBook/Interview/codes/basics/反射的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/反射的一些问题.html">
            
                    
                        <b>1.19.3.2.1.5.</b>
                    
                    反射的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.6" data-path="../zother8-JavaBook/Interview/codes/basics/常见关键字问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/常见关键字问题.html">
            
                    
                        <b>1.19.3.2.1.6.</b>
                    
                    常见关键字问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.7" data-path="../zother8-JavaBook/Interview/codes/basics/异常的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/异常的一些问题.html">
            
                    
                        <b>1.19.3.2.1.7.</b>
                    
                    异常的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.8" data-path="../zother8-JavaBook/Interview/codes/basics/浅拷贝和深拷贝例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/浅拷贝和深拷贝例子.html">
            
                    
                        <b>1.19.3.2.1.8.</b>
                    
                    浅拷贝和深拷贝例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.9" data-path="../zother8-JavaBook/Interview/codes/basics/类型转换的问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/类型转换的问题.html">
            
                    
                        <b>1.19.3.2.1.9.</b>
                    
                    类型转换的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.1.10" data-path="../zother8-JavaBook/Interview/codes/basics/面向对象的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/basics/面向对象的一些问题.html">
            
                    
                        <b>1.19.3.2.1.10.</b>
                    
                    面向对象的一些问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2" >
            
                <span>
            
                    
                        <b>1.19.3.2.2.</b>
                    
                    Bus
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.2.1" data-path="../zother8-JavaBook/Interview/codes/bus/Redis的key过期事件.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/Redis的key过期事件.html">
            
                    
                        <b>1.19.3.2.2.1.</b>
                    
                    Redis的key过期事件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.2" data-path="../zother8-JavaBook/Interview/codes/bus/Redis绑定Token.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/Redis绑定Token.html">
            
                    
                        <b>1.19.3.2.2.2.</b>
                    
                    Redis绑定Token
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.3" data-path="../zother8-JavaBook/Interview/codes/bus/RocketMQ最终一致性.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/RocketMQ最终一致性.html">
            
                    
                        <b>1.19.3.2.2.3.</b>
                    
                    RocketMQ最终一致性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.4" data-path="../zother8-JavaBook/Interview/codes/bus/上线遇到的bug.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/上线遇到的bug.html">
            
                    
                        <b>1.19.3.2.2.4.</b>
                    
                    上线遇到的bug
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.5" data-path="../zother8-JavaBook/Interview/codes/bus/业务逻辑SQL语句.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/业务逻辑SQL语句.html">
            
                    
                        <b>1.19.3.2.2.5.</b>
                    
                    业务逻辑SQL语句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.6" data-path="../zother8-JavaBook/Interview/codes/bus/支付服务.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/支付服务.html">
            
                    
                        <b>1.19.3.2.2.6.</b>
                    
                    支付服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.7" data-path="../zother8-JavaBook/Interview/codes/bus/环境搭建文档.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/环境搭建文档.html">
            
                    
                        <b>1.19.3.2.2.7.</b>
                    
                    环境搭建文档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.8" data-path="../zother8-JavaBook/Interview/codes/bus/班车服务.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/班车服务.html">
            
                    
                        <b>1.19.3.2.2.8.</b>
                    
                    班车服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.9" data-path="../zother8-JavaBook/Interview/codes/bus/用户服务.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/用户服务.html">
            
                    
                        <b>1.19.3.2.2.9.</b>
                    
                    用户服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.2.10" data-path="../zother8-JavaBook/Interview/codes/bus/订单服务.html">
            
                <a href="../zother8-JavaBook/Interview/codes/bus/订单服务.html">
            
                    
                        <b>1.19.3.2.2.10.</b>
                    
                    订单服务
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.3" >
            
                <span>
            
                    
                        <b>1.19.3.2.3.</b>
                    
                    Collection
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.3.1" data-path="../zother8-JavaBook/Interview/codes/collection/ArrayList的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/collection/ArrayList的一些问题.html">
            
                    
                        <b>1.19.3.2.3.1.</b>
                    
                    ArrayList的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.3.2" data-path="../zother8-JavaBook/Interview/codes/collection/BlockingQueue的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/collection/BlockingQueue的一些问题.html">
            
                    
                        <b>1.19.3.2.3.2.</b>
                    
                    BlockingQueue的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.3.3" data-path="../zother8-JavaBook/Interview/codes/collection/ConcurrentHashMap的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/collection/ConcurrentHashMap的一些问题.html">
            
                    
                        <b>1.19.3.2.3.3.</b>
                    
                    ConcurrentHashMap的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.3.4" data-path="../zother8-JavaBook/Interview/codes/collection/HashMap的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/collection/HashMap的一些问题.html">
            
                    
                        <b>1.19.3.2.3.4.</b>
                    
                    HashMap的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.3.5" data-path="../zother8-JavaBook/Interview/codes/collection/LinkedList的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/collection/LinkedList的一些问题.html">
            
                    
                        <b>1.19.3.2.3.5.</b>
                    
                    LinkedList的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.3.6" data-path="../zother8-JavaBook/Interview/codes/collection/手写LRU算法.html">
            
                <a href="../zother8-JavaBook/Interview/codes/collection/手写LRU算法.html">
            
                    
                        <b>1.19.3.2.3.6.</b>
                    
                    手写LRU算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.3.7" data-path="../zother8-JavaBook/Interview/codes/collection/集合总览.html">
            
                <a href="../zother8-JavaBook/Interview/codes/collection/集合总览.html">
            
                    
                        <b>1.19.3.2.3.7.</b>
                    
                    集合总览
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.4" >
            
                <span>
            
                    
                        <b>1.19.3.2.4.</b>
                    
                    Jvm
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.4.1" data-path="../zother8-JavaBook/Interview/codes/jvm/堆溢出的小例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/jvm/堆溢出的小例子.html">
            
                    
                        <b>1.19.3.2.4.1.</b>
                    
                    堆溢出的小例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.4.2" data-path="../zother8-JavaBook/Interview/codes/jvm/循环引用的小例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/jvm/循环引用的小例子.html">
            
                    
                        <b>1.19.3.2.4.2.</b>
                    
                    循环引用的小例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.4.3" data-path="../zother8-JavaBook/Interview/codes/jvm/查看反编译源码.html">
            
                <a href="../zother8-JavaBook/Interview/codes/jvm/查看反编译源码.html">
            
                    
                        <b>1.19.3.2.4.3.</b>
                    
                    查看反编译源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.4.4" data-path="../zother8-JavaBook/Interview/codes/jvm/栈溢出的小例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/jvm/栈溢出的小例子.html">
            
                    
                        <b>1.19.3.2.4.4.</b>
                    
                    栈溢出的小例子
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.5" >
            
                <span>
            
                    
                        <b>1.19.3.2.5.</b>
                    
                    Modes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.5.1" data-path="../zother8-JavaBook/Interview/codes/modes/代理模式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/modes/代理模式.html">
            
                    
                        <b>1.19.3.2.5.1.</b>
                    
                    代理模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.5.2" data-path="../zother8-JavaBook/Interview/codes/modes/单例模式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/modes/单例模式.html">
            
                    
                        <b>1.19.3.2.5.2.</b>
                    
                    单例模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.5.3" data-path="../zother8-JavaBook/Interview/codes/modes/工厂模式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/modes/工厂模式.html">
            
                    
                        <b>1.19.3.2.5.3.</b>
                    
                    工厂模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.5.4" data-path="../zother8-JavaBook/Interview/codes/modes/模板方法模式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/modes/模板方法模式.html">
            
                    
                        <b>1.19.3.2.5.4.</b>
                    
                    模板方法模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.5.5" data-path="../zother8-JavaBook/Interview/codes/modes/装饰器模式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/modes/装饰器模式.html">
            
                    
                        <b>1.19.3.2.5.5.</b>
                    
                    装饰器模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.5.6" data-path="../zother8-JavaBook/Interview/codes/modes/观察者模式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/modes/观察者模式.html">
            
                    
                        <b>1.19.3.2.5.6.</b>
                    
                    观察者模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6" >
            
                <span>
            
                    
                        <b>1.19.3.2.6.</b>
                    
                    Mysql
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.6.1" data-path="../zother8-JavaBook/Interview/codes/mysql/InnoDB和MyISAM.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/InnoDB和MyISAM.html">
            
                    
                        <b>1.19.3.2.6.1.</b>
                    
                    InnoDB和MyISAM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.2" data-path="../zother8-JavaBook/Interview/codes/mysql/MVCC的缺点.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/MVCC的缺点.html">
            
                    
                        <b>1.19.3.2.6.2.</b>
                    
                    MVCC的缺点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.3" data-path="../zother8-JavaBook/Interview/codes/mysql/MySQL是如何执行一条SQL语句的.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/MySQL是如何执行一条SQL语句的.html">
            
                    
                        <b>1.19.3.2.6.3.</b>
                    
                    MySQL是如何执行一条SQL语句的
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.4" data-path="../zother8-JavaBook/Interview/codes/mysql/MySQL的ACID原理.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/MySQL的ACID原理.html">
            
                    
                        <b>1.19.3.2.6.4.</b>
                    
                    MySQL的ACID原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.5" data-path="../zother8-JavaBook/Interview/codes/mysql/MySQL读写分离主从复制原理.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/MySQL读写分离主从复制原理.html">
            
                    
                        <b>1.19.3.2.6.5.</b>
                    
                    MySQL读写分离主从复制原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.6" data-path="../zother8-JavaBook/Interview/codes/mysql/并发事务带来的问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/并发事务带来的问题.html">
            
                    
                        <b>1.19.3.2.6.6.</b>
                    
                    并发事务带来的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.7" data-path="../zother8-JavaBook/Interview/codes/mysql/数据库结构优化.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/数据库结构优化.html">
            
                    
                        <b>1.19.3.2.6.7.</b>
                    
                    数据库结构优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.8" data-path="../zother8-JavaBook/Interview/codes/mysql/数据库范式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/数据库范式.html">
            
                    
                        <b>1.19.3.2.6.8.</b>
                    
                    数据库范式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.9" data-path="../zother8-JavaBook/Interview/codes/mysql/索引种类.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/索引种类.html">
            
                    
                        <b>1.19.3.2.6.9.</b>
                    
                    索引种类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.6.10" data-path="../zother8-JavaBook/Interview/codes/mysql/红黑树、B树和B+树.html">
            
                <a href="../zother8-JavaBook/Interview/codes/mysql/红黑树、B树和B+树.html">
            
                    
                        <b>1.19.3.2.6.10.</b>
                    
                    红黑树、B树和B+树
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.7" >
            
                <span>
            
                    
                        <b>1.19.3.2.7.</b>
                    
                    Other
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.7.1" data-path="../zother8-JavaBook/Interview/codes/other/Sentinel相关概念.html">
            
                <a href="../zother8-JavaBook/Interview/codes/other/Sentinel相关概念.html">
            
                    
                        <b>1.19.3.2.7.1.</b>
                    
                    Sentinel相关概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.8" >
            
                <span>
            
                    
                        <b>1.19.3.2.8.</b>
                    
                    Redis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.8.1" data-path="../zother8-JavaBook/Interview/codes/redis/Redis做延迟队列.html">
            
                <a href="../zother8-JavaBook/Interview/codes/redis/Redis做延迟队列.html">
            
                    
                        <b>1.19.3.2.8.1.</b>
                    
                    Redis做延迟队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.8.2" data-path="../zother8-JavaBook/Interview/codes/redis/深究Redis的底层结构.html">
            
                <a href="../zother8-JavaBook/Interview/codes/redis/深究Redis的底层结构.html">
            
                    
                        <b>1.19.3.2.8.2.</b>
                    
                    深究Redis的底层结构
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.9" >
            
                <span>
            
                    
                        <b>1.19.3.2.9.</b>
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.9.1" data-path="../zother8-JavaBook/Interview/codes/spring/手写SpringAOP代码.html">
            
                <a href="../zother8-JavaBook/Interview/codes/spring/手写SpringAOP代码.html">
            
                    
                        <b>1.19.3.2.9.1.</b>
                    
                    手写SpringAOP代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.9.2" data-path="../zother8-JavaBook/Interview/codes/spring/手写SpringIoc容器.html">
            
                <a href="../zother8-JavaBook/Interview/codes/spring/手写SpringIoc容器.html">
            
                    
                        <b>1.19.3.2.9.2.</b>
                    
                    手写SpringIoc容器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10" >
            
                <span>
            
                    
                        <b>1.19.3.2.10.</b>
                    
                    Thread
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.2.10.1" data-path="../zother8-JavaBook/Interview/codes/thread/AQS的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/AQS的一些问题.html">
            
                    
                        <b>1.19.3.2.10.1.</b>
                    
                    AQS的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.2" data-path="../zother8-JavaBook/Interview/codes/thread/CAS的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/CAS的一些问题.html">
            
                    
                        <b>1.19.3.2.10.2.</b>
                    
                    CAS的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.3" data-path="../zother8-JavaBook/Interview/codes/thread/Java锁的介绍.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/Java锁的介绍.html">
            
                    
                        <b>1.19.3.2.10.3.</b>
                    
                    Java锁的介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.4" data-path="../zother8-JavaBook/Interview/codes/thread/Runnable、Callable和FutureTask.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/Runnable、Callable和FutureTask.html">
            
                    
                        <b>1.19.3.2.10.4.</b>
                    
                    Runnable、Callable和FutureTask
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.5" data-path="../zother8-JavaBook/Interview/codes/thread/synchronized的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/synchronized的一些问题.html">
            
                    
                        <b>1.19.3.2.10.5.</b>
                    
                    synchronized的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.6" data-path="../zother8-JavaBook/Interview/codes/thread/ThreadLocal的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/ThreadLocal的一些问题.html">
            
                    
                        <b>1.19.3.2.10.6.</b>
                    
                    ThreadLocal的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.7" data-path="../zother8-JavaBook/Interview/codes/thread/volatile的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/volatile的一些问题.html">
            
                    
                        <b>1.19.3.2.10.7.</b>
                    
                    volatile的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.8" data-path="../zother8-JavaBook/Interview/codes/thread/主线程等待多个子线程的例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/主线程等待多个子线程的例子.html">
            
                    
                        <b>1.19.3.2.10.8.</b>
                    
                    主线程等待多个子线程的例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.9" data-path="../zother8-JavaBook/Interview/codes/thread/举个多线程的小例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/举个多线程的小例子.html">
            
                    
                        <b>1.19.3.2.10.9.</b>
                    
                    举个多线程的小例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.10" data-path="../zother8-JavaBook/Interview/codes/thread/死锁例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/死锁例子.html">
            
                    
                        <b>1.19.3.2.10.10.</b>
                    
                    死锁例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.11" data-path="../zother8-JavaBook/Interview/codes/thread/生产者和消费者的三种例子.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/生产者和消费者的三种例子.html">
            
                    
                        <b>1.19.3.2.10.11.</b>
                    
                    生产者和消费者的三种例子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.12" data-path="../zother8-JavaBook/Interview/codes/thread/线程池的一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/线程池的一些问题.html">
            
                    
                        <b>1.19.3.2.10.12.</b>
                    
                    线程池的一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.13" data-path="../zother8-JavaBook/Interview/codes/thread/线程生命周期一些问题.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/线程生命周期一些问题.html">
            
                    
                        <b>1.19.3.2.10.13.</b>
                    
                    线程生命周期一些问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.2.10.14" data-path="../zother8-JavaBook/Interview/codes/thread/线程的启动方式.html">
            
                <a href="../zother8-JavaBook/Interview/codes/thread/线程的启动方式.html">
            
                    
                        <b>1.19.3.2.10.14.</b>
                    
                    线程的启动方式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.3" >
            
                <span>
            
                    
                        <b>1.19.3.3.</b>
                    
                    Crazy
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.3.1" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Dubbo.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Dubbo.html">
            
                    
                        <b>1.19.3.3.1.</b>
                    
                    个人吐血系列-总结Dubbo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.2" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Java基础.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Java基础.html">
            
                    
                        <b>1.19.3.3.2.</b>
                    
                    个人吐血系列-总结Java基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.3" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Java多线程.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Java多线程.html">
            
                    
                        <b>1.19.3.3.3.</b>
                    
                    个人吐血系列-总结Java多线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.4" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Java集合.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Java集合.html">
            
                    
                        <b>1.19.3.3.4.</b>
                    
                    个人吐血系列-总结Java集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.5" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结JVM.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结JVM.html">
            
                    
                        <b>1.19.3.3.5.</b>
                    
                    个人吐血系列-总结JVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.6" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Mybatis.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Mybatis.html">
            
                    
                        <b>1.19.3.3.6.</b>
                    
                    个人吐血系列-总结Mybatis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.7" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结MySQL.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结MySQL.html">
            
                    
                        <b>1.19.3.3.7.</b>
                    
                    个人吐血系列-总结Mysql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.8" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Redis.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Redis.html">
            
                    
                        <b>1.19.3.3.8.</b>
                    
                    个人吐血系列-总结Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.9" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结RocketMQ.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结RocketMQ.html">
            
                    
                        <b>1.19.3.3.9.</b>
                    
                    个人吐血系列-总结RocketMQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.10" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Spring.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结Spring.html">
            
                    
                        <b>1.19.3.3.10.</b>
                    
                    个人吐血系列-总结Spring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.3.11" data-path="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结计算机网络.html">
            
                <a href="../zother8-JavaBook/Interview/crazy/个人吐血系列-总结计算机网络.html">
            
                    
                        <b>1.19.3.3.11.</b>
                    
                    个人吐血系列-总结计算机网络
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.4" >
            
                <span>
            
                    
                        <b>1.19.3.4.</b>
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.4.1" data-path="../zother8-JavaBook/Interview/linux/linux-基础.html">
            
                <a href="../zother8-JavaBook/Interview/linux/linux-基础.html">
            
                    
                        <b>1.19.3.4.1.</b>
                    
                    linux-基础
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.5" >
            
                <span>
            
                    
                        <b>1.19.3.5.</b>
                    
                    Mianjing
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.1" >
            
                <span>
            
                    
                        <b>1.19.3.5.1.</b>
                    
                    Jingdong
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.1.1" data-path="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong01.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong01.html">
            
                    
                        <b>1.19.3.5.1.1.</b>
                    
                    Jingdong 01
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.1.2" data-path="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong02.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong02.html">
            
                    
                        <b>1.19.3.5.1.2.</b>
                    
                    Jingdong 02
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.1.3" data-path="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong03.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong03.html">
            
                    
                        <b>1.19.3.5.1.3.</b>
                    
                    Jingdong 03
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.1.4" data-path="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong04.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong04.html">
            
                    
                        <b>1.19.3.5.1.4.</b>
                    
                    Jingdong 04
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.1.5" data-path="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong05.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/jingdong/jingdong05.html">
            
                    
                        <b>1.19.3.5.1.5.</b>
                    
                    Jingdong 05
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.1.6" data-path="../zother8-JavaBook/Interview/mianjing/jingdong/京东所有问题汇总.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/jingdong/京东所有问题汇总.html">
            
                    
                        <b>1.19.3.5.1.6.</b>
                    
                    京东所有问题汇总
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.1.7" data-path="../zother8-JavaBook/Interview/mianjing/jingdong/本人京东面经.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/jingdong/本人京东面经.html">
            
                    
                        <b>1.19.3.5.1.7.</b>
                    
                    本人京东面经
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.2" >
            
                <span>
            
                    
                        <b>1.19.3.5.2.</b>
                    
                    Meituan
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.2.1" data-path="../zother8-JavaBook/Interview/mianjing/meituan/meituan01.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/meituan/meituan01.html">
            
                    
                        <b>1.19.3.5.2.1.</b>
                    
                    Meituan 01
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.2.2" data-path="../zother8-JavaBook/Interview/mianjing/meituan/meituan02.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/meituan/meituan02.html">
            
                    
                        <b>1.19.3.5.2.2.</b>
                    
                    Meituan 02
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.2.3" data-path="../zother8-JavaBook/Interview/mianjing/meituan/meituan03.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/meituan/meituan03.html">
            
                    
                        <b>1.19.3.5.2.3.</b>
                    
                    Meituan 03
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.2.4" data-path="../zother8-JavaBook/Interview/mianjing/meituan/meituan04.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/meituan/meituan04.html">
            
                    
                        <b>1.19.3.5.2.4.</b>
                    
                    Meituan 04
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.2.5" data-path="../zother8-JavaBook/Interview/mianjing/meituan/meituan05.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/meituan/meituan05.html">
            
                    
                        <b>1.19.3.5.2.5.</b>
                    
                    Meituan 05
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.2.6" data-path="../zother8-JavaBook/Interview/mianjing/meituan/美团所有问题汇总.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/meituan/美团所有问题汇总.html">
            
                    
                        <b>1.19.3.5.2.6.</b>
                    
                    美团所有问题汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.3" >
            
                <span>
            
                    
                        <b>1.19.3.5.3.</b>
                    
                    Pinxx
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.3.1" data-path="../zother8-JavaBook/Interview/mianjing/pinxx/拼多多所有问题汇总.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/pinxx/拼多多所有问题汇总.html">
            
                    
                        <b>1.19.3.5.3.1.</b>
                    
                    拼多多所有问题汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.4" data-path="../zother8-JavaBook/Interview/mianjing/sql/sql.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/sql/sql.html">
            
                    
                        <b>1.19.3.5.4.</b>
                    
                    Sql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.5" >
            
                <span>
            
                    
                        <b>1.19.3.5.5.</b>
                    
                    Wangyi
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.5.1" data-path="../zother8-JavaBook/Interview/mianjing/wangyi/网易所有问题汇总.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/wangyi/网易所有问题汇总.html">
            
                    
                        <b>1.19.3.5.5.1.</b>
                    
                    网易所有问题汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.6" >
            
                <span>
            
                    
                        <b>1.19.3.5.6.</b>
                    
                    Yuanjing
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.6.1" data-path="../zother8-JavaBook/Interview/mianjing/yuanjing/远景所有问题汇总.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/yuanjing/远景所有问题汇总.html">
            
                    
                        <b>1.19.3.5.6.1.</b>
                    
                    远景所有问题汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.7" >
            
                <span>
            
                    
                        <b>1.19.3.5.7.</b>
                    
                    Zhaoyin
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.7.1" data-path="../zother8-JavaBook/Interview/mianjing/zhaoyin/招银所有问题汇总.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/zhaoyin/招银所有问题汇总.html">
            
                    
                        <b>1.19.3.5.7.1.</b>
                    
                    招银所有问题汇总
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.7.2" data-path="../zother8-JavaBook/Interview/mianjing/zhaoyin/本人招银面经.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/zhaoyin/本人招银面经.html">
            
                    
                        <b>1.19.3.5.7.2.</b>
                    
                    本人招银面经
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.5.8" >
            
                <span>
            
                    
                        <b>1.19.3.5.8.</b>
                    
                    Zijie
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.5.8.1" data-path="../zother8-JavaBook/Interview/mianjing/zijie/字节所有问题汇总.html">
            
                <a href="../zother8-JavaBook/Interview/mianjing/zijie/字节所有问题汇总.html">
            
                    
                        <b>1.19.3.5.8.1.</b>
                    
                    字节所有问题汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.6" >
            
                <span>
            
                    
                        <b>1.19.3.6.</b>
                    
                    Mybatis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.6.1" data-path="../zother8-JavaBook/Interview/mybatis/MyBatis面试常见问题.html">
            
                <a href="../zother8-JavaBook/Interview/mybatis/MyBatis面试常见问题.html">
            
                    
                        <b>1.19.3.6.1.</b>
                    
                    MyBatis面试常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.7" >
            
                <span>
            
                    
                        <b>1.19.3.7.</b>
                    
                    Mysql
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.7.1" data-path="../zother8-JavaBook/Interview/mysql/Mysql-面试常见的问题.html">
            
                <a href="../zother8-JavaBook/Interview/mysql/Mysql-面试常见的问题.html">
            
                    
                        <b>1.19.3.7.1.</b>
                    
                    Mysql-面试常见的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.7.2" data-path="../zother8-JavaBook/Interview/mysql/Mysql中ACID的原理.html">
            
                <a href="../zother8-JavaBook/Interview/mysql/Mysql中ACID的原理.html">
            
                    
                        <b>1.19.3.7.2.</b>
                    
                    Mysql中ACID的原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.7.3" data-path="../zother8-JavaBook/Interview/mysql/MySQL面试常见问题.html">
            
                <a href="../zother8-JavaBook/Interview/mysql/MySQL面试常见问题.html">
            
                    
                        <b>1.19.3.7.3.</b>
                    
                    MySQL面试常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.7.4" data-path="../zother8-JavaBook/Interview/mysql/sql-存储引擎.html">
            
                <a href="../zother8-JavaBook/Interview/mysql/sql-存储引擎.html">
            
                    
                        <b>1.19.3.7.4.</b>
                    
                    sql-存储引擎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.7.5" data-path="../zother8-JavaBook/Interview/mysql/sql-数据库系统原理.html">
            
                <a href="../zother8-JavaBook/Interview/mysql/sql-数据库系统原理.html">
            
                    
                        <b>1.19.3.7.5.</b>
                    
                    sql-数据库系统原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.7.6" data-path="../zother8-JavaBook/Interview/mysql/sql-索引-B-树.html">
            
                <a href="../zother8-JavaBook/Interview/mysql/sql-索引-B-树.html">
            
                    
                        <b>1.19.3.7.6.</b>
                    
                    sql-索引-B-树
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.8" >
            
                <span>
            
                    
                        <b>1.19.3.8.</b>
                    
                    Network
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.8.1" data-path="../zother8-JavaBook/Interview/network/计算机网络原理-DNS是干什么的.html">
            
                <a href="../zother8-JavaBook/Interview/network/计算机网络原理-DNS是干什么的.html">
            
                    
                        <b>1.19.3.8.1.</b>
                    
                    计算机网络原理-DNS是干什么的
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.8.2" data-path="../zother8-JavaBook/Interview/network/计算机网络原理-http那些事儿.html">
            
                <a href="../zother8-JavaBook/Interview/network/计算机网络原理-http那些事儿.html">
            
                    
                        <b>1.19.3.8.2.</b>
                    
                    计算机网络原理-http那些事儿
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.3.8.3" data-path="../zother8-JavaBook/Interview/network/计算机网络面试常见问题.html">
            
                <a href="../zother8-JavaBook/Interview/network/计算机网络面试常见问题.html">
            
                    
                        <b>1.19.3.8.3.</b>
                    
                    计算机网络面试常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.9" >
            
                <span>
            
                    
                        <b>1.19.3.9.</b>
                    
                    Redis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.9.1" data-path="../zother8-JavaBook/Interview/redis/Redis-面试常见的问题.html">
            
                <a href="../zother8-JavaBook/Interview/redis/Redis-面试常见的问题.html">
            
                    
                        <b>1.19.3.9.1.</b>
                    
                    Redis-面试常见的问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.3.10" >
            
                <span>
            
                    
                        <b>1.19.3.10.</b>
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.3.10.1" data-path="../zother8-JavaBook/Interview/spring/Spring面试常见问题.html">
            
                <a href="../zother8-JavaBook/Interview/spring/Spring面试常见问题.html">
            
                    
                        <b>1.19.3.10.1.</b>
                    
                    Spring面试常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.4" >
            
                <span>
            
                    
                        <b>1.19.4.</b>
                    
                    Jvm
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.4.1" data-path="../zother8-JavaBook/Jvm/Java面经-JVM调优参数.html">
            
                <a href="../zother8-JavaBook/Jvm/Java面经-JVM调优参数.html">
            
                    
                        <b>1.19.4.1.</b>
                    
                    Java面经-JVM调优参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.2" data-path="../zother8-JavaBook/Jvm/Java面经-内存模型.html">
            
                <a href="../zother8-JavaBook/Jvm/Java面经-内存模型.html">
            
                    
                        <b>1.19.4.2.</b>
                    
                    Java面经-内存模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.3" data-path="../zother8-JavaBook/Jvm/Java面经-类加载机制.html">
            
                <a href="../zother8-JavaBook/Jvm/Java面经-类加载机制.html">
            
                    
                        <b>1.19.4.3.</b>
                    
                    Java面经-类加载机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.4" data-path="../zother8-JavaBook/Jvm/JVM-垃圾回收.html">
            
                <a href="../zother8-JavaBook/Jvm/JVM-垃圾回收.html">
            
                    
                        <b>1.19.4.4.</b>
                    
                    JVM-垃圾回收
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.5" data-path="../zother8-JavaBook/Jvm/JVM-对象创建.html">
            
                <a href="../zother8-JavaBook/Jvm/JVM-对象创建.html">
            
                    
                        <b>1.19.4.5.</b>
                    
                    JVM-对象创建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.6" data-path="../zother8-JavaBook/Jvm/JVM-类加载器.html">
            
                <a href="../zother8-JavaBook/Jvm/JVM-类加载器.html">
            
                    
                        <b>1.19.4.6.</b>
                    
                    JVM-类加载器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.7" data-path="../zother8-JavaBook/Jvm/JVM-类加载过程.html">
            
                <a href="../zother8-JavaBook/Jvm/JVM-类加载过程.html">
            
                    
                        <b>1.19.4.7.</b>
                    
                    JVM-类加载过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.8" data-path="../zother8-JavaBook/Jvm/JVM-类文件结构.html">
            
                <a href="../zother8-JavaBook/Jvm/JVM-类文件结构.html">
            
                    
                        <b>1.19.4.8.</b>
                    
                    JVM-类文件结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.4.9" data-path="../zother8-JavaBook/Jvm/JVM面试常见问题.html">
            
                <a href="../zother8-JavaBook/Jvm/JVM面试常见问题.html">
            
                    
                        <b>1.19.4.9.</b>
                    
                    JVM面试常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.5" data-path="../zother8-JavaBook/LeetCode/">
            
                <a href="../zother8-JavaBook/LeetCode/">
            
                    
                        <b>1.19.5.</b>
                    
                    Leet Code
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.5.1" data-path="../zother8-JavaBook/LeetCode/专题.html">
            
                <a href="../zother8-JavaBook/LeetCode/专题.html">
            
                    
                        <b>1.19.5.1.</b>
                    
                    专题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.2" data-path="../zother8-JavaBook/LeetCode/数据结构-二分法.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-二分法.html">
            
                    
                        <b>1.19.5.2.</b>
                    
                    数据结构-二分法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.3" data-path="../zother8-JavaBook/LeetCode/数据结构-位运算.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-位运算.html">
            
                    
                        <b>1.19.5.3.</b>
                    
                    数据结构-位运算
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.4" data-path="../zother8-JavaBook/LeetCode/数据结构-动态规划.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-动态规划.html">
            
                    
                        <b>1.19.5.4.</b>
                    
                    数据结构-动态规划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.5" data-path="../zother8-JavaBook/LeetCode/数据结构-双指针.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-双指针.html">
            
                    
                        <b>1.19.5.5.</b>
                    
                    数据结构-双指针
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.6" data-path="../zother8-JavaBook/LeetCode/数据结构-哈希表.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-哈希表.html">
            
                    
                        <b>1.19.5.6.</b>
                    
                    数据结构-哈希表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.7" data-path="../zother8-JavaBook/LeetCode/数据结构-排序.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-排序.html">
            
                    
                        <b>1.19.5.7.</b>
                    
                    数据结构-排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.8" data-path="../zother8-JavaBook/LeetCode/数据结构-栈和队列.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-栈和队列.html">
            
                    
                        <b>1.19.5.8.</b>
                    
                    数据结构-栈和队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.9" data-path="../zother8-JavaBook/LeetCode/数据结构-树-基础.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-树-基础.html">
            
                    
                        <b>1.19.5.9.</b>
                    
                    数据结构-树-基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.5.10" data-path="../zother8-JavaBook/LeetCode/数据结构-链表.html">
            
                <a href="../zother8-JavaBook/LeetCode/数据结构-链表.html">
            
                    
                        <b>1.19.5.10.</b>
                    
                    数据结构-链表
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19.6" data-path="../zother8-JavaBook/Multithread/">
            
                <a href="../zother8-JavaBook/Multithread/">
            
                    
                        <b>1.19.6.</b>
                    
                    Multithread
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.6.1" data-path="../zother8-JavaBook/Multithread/CAS底层解析.html">
            
                <a href="../zother8-JavaBook/Multithread/CAS底层解析.html">
            
                    
                        <b>1.19.6.1.</b>
                    
                    CAS底层解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.2" data-path="../zother8-JavaBook/Multithread/Java多线程-AQS.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程-AQS.html">
            
                    
                        <b>1.19.6.2.</b>
                    
                    Java多线程-AQS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.3" data-path="../zother8-JavaBook/Multithread/Java多线程-Atomic原子类.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程-Atomic原子类.html">
            
                    
                        <b>1.19.6.3.</b>
                    
                    Java多线程-Atomic原子类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.4" data-path="../zother8-JavaBook/Multithread/Java多线程-synchronized.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程-synchronized.html">
            
                    
                        <b>1.19.6.4.</b>
                    
                    Java多线程-synchronized
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.5" data-path="../zother8-JavaBook/Multithread/Java多线程-ThreadLocal.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程-ThreadLocal.html">
            
                    
                        <b>1.19.6.5.</b>
                    
                    Java多线程-ThreadLocal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.6" data-path="../zother8-JavaBook/Multithread/Java多线程-并发基础常见面试题总结.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程-并发基础常见面试题总结.html">
            
                    
                        <b>1.19.6.6.</b>
                    
                    Java多线程-并发基础常见面试题总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.7" data-path="../zother8-JavaBook/Multithread/Java多线程-并发进阶常见面试题总结.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程-并发进阶常见面试题总结.html">
            
                    
                        <b>1.19.6.7.</b>
                    
                    Java多线程-并发进阶常见面试题总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.8" data-path="../zother8-JavaBook/Multithread/Java多线程-线程池.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程-线程池.html">
            
                    
                        <b>1.19.6.8.</b>
                    
                    Java多线程-线程池
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.9" data-path="../zother8-JavaBook/Multithread/Java多线程常见问题.html">
            
                <a href="../zother8-JavaBook/Multithread/Java多线程常见问题.html">
            
                    
                        <b>1.19.6.9.</b>
                    
                    Java多线程常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.10" data-path="../zother8-JavaBook/Multithread/Java锁机制.html">
            
                <a href="../zother8-JavaBook/Multithread/Java锁机制.html">
            
                    
                        <b>1.19.6.10.</b>
                    
                    Java锁机制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.11" data-path="../zother8-JavaBook/Multithread/为什么说ArrayList是线程不安全.html">
            
                <a href="../zother8-JavaBook/Multithread/为什么说ArrayList是线程不安全.html">
            
                    
                        <b>1.19.6.11.</b>
                    
                    为什么说ArrayList是线程不安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.6.12" data-path="../zother8-JavaBook/Multithread/深刻理解volatile的一切.html">
            
                <a href="../zother8-JavaBook/Multithread/深刻理解volatile的一切.html">
            
                    
                        <b>1.19.6.12.</b>
                    
                    深刻理解volatile的一切
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../学习路线.html">
            
                <a href="../学习路线.html">
            
                    
                        <b>1.20.</b>
                    
                    学习路线
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >三、Java 集合</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <ul>
<li>&#x672C;github&#x6700;&#x521D;&#x7684;&#x7248;&#x672C;&#x662F;&#x4E00;&#x4EFD;word&#x6587;&#x6863;&#xFF0C;&#x76EE;&#x524D;&#x53EA;&#x662F;&#x628A;word&#x521A;&#x521A;&#x642C;&#x4E0A;&#x6765;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x56FE;&#x7247;&#x3001;&#x6392;&#x7248;&#x8FD8;&#x6CA1;&#x6765;&#x5F97;&#x6025;&#x6574;&#x7406;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x6709;&#x70B9;&#x56F0;&#x96BE;</li>
<li>&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5148;&#x5173;&#x6CE8;&#x4E00;&#x4E0B;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x5728;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x540E;&#x53F0;&#x56DE;&#x590D; <strong>888</strong> &#x83B7;&#x53D6;&#x8FD9;&#x4E2A;github&#x4ED3;&#x5E93;&#x7684;PDF&#x7248;&#x672C;&#xFF0C;&#x5DE6;&#x4FA7;&#x6709;&#x5BFC;&#x822A;&#x680F;&#xFF0C;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x9605;&#x8BFB;&#x3002;</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/007s8HJUly1g0fkgcpy8cj30760760t7.jpg" alt=""></p>
<h1 id="&#x96C6;&#x5408;&#x6846;&#x67B6;"><a name="&#x96C6;&#x5408;&#x6846;&#x67B6;" class="plugin-anchor" href="#&#x96C6;&#x5408;&#x6846;&#x67B6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x96C6;&#x5408;&#x6846;&#x67B6;</h1>
<ul>
<li><h1 id="31-&#x63A5;&#x53E3;"><a name="31-&#x63A5;&#x53E3;" class="plugin-anchor" href="#31-&#x63A5;&#x53E3;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1 &#x63A5;&#x53E3;</h1>
<h2 id="&#x5E38;&#x89C1;&#x63A5;&#x53E3;"><a name="&#x5E38;&#x89C1;&#x63A5;&#x53E3;" class="plugin-anchor" href="#&#x5E38;&#x89C1;&#x63A5;&#x53E3;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5E38;&#x89C1;&#x63A5;&#x53E3;</h2>
</li>
<li>Map &#x63A5;&#x53E3;&#x548C; Collection &#x63A5;&#x53E3;&#x662F;&#x6240;&#x6709;&#x96C6;&#x5408;&#x6846;&#x67B6;&#x7684;&#x7236;&#x63A5;&#x53E3;&#xFF1B;</li>
<li>Collection &#x63A5;&#x53E3;&#x7684;&#x5B50;&#x63A5;&#x53E3;&#x5305;&#x62EC;&#xFF1A;Set &#x63A5;&#x53E3;&#x3001;List &#x63A5;&#x53E3;&#x548C;Queue&#x63A5;&#x53E3;&#xFF1B;</li>
<li>Map &#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4E3B;&#x8981;&#x6709;&#xFF1A;HashMap&#x3001;TreeMap&#x3001;LinkedHashMap&#x3001;Hashtable&#x3001;ConcurrentHashMap &#x4EE5;&#x53CA; Properties &#x7B49;&#xFF1B;</li>
<li>Set &#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4E3B;&#x8981;&#x6709;&#xFF1A;HashSet&#x3001;TreeSet&#x3001;LinkedHashSet &#x7B49;&#xFF1B;</li>
<li>List &#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4E3B;&#x8981;&#x6709;&#xFF1A;ArrayList&#x3001;LinkedList&#x3001;Stack &#x3001;Vector&#x4EE5;&#x53CA;CopyOnWriteArrayList &#x7B49;&#xFF1B;</li>
<li>Queue&#x63A5;&#x53E3;&#x7684;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x7C7B;&#x6709;&#xFF1A;ArrayDeque&#x3001;ArrayBlockingQueue&#x3001;LinkedBlockingQueue&#x3001;PriorityQueue&#x7B49;&#xFF1B;</li>
</ul>
<h2 id="list&#x63A5;&#x53E3;&#x548C;set&#x63A5;&#x53E3;&#x7684;&#x533A;&#x522B;"><a name="list&#x63A5;&#x53E3;&#x548C;set&#x63A5;&#x53E3;&#x7684;&#x533A;&#x522B;" class="plugin-anchor" href="#list&#x63A5;&#x53E3;&#x548C;set&#x63A5;&#x53E3;&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>List&#x63A5;&#x53E3;&#x548C;Set&#x63A5;&#x53E3;&#x7684;&#x533A;&#x522B;</h2>
<ul>
<li>List &#x5143;&#x7D20;&#x662F;&#x6709;&#x5E8F;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#xFF1B;Set &#x5143;&#x7D20;&#x662F;&#x65E0;&#x5E8F;&#x7684;&#xFF0C;&#x4E0D;&#x53EF;&#x4EE5;&#x91CD;&#x590D;&#x3002;<h2 id="&#x961F;&#x5217;&#x3001;set&#x3001;map-&#x533A;&#x522B;"><a name="&#x961F;&#x5217;&#x3001;set&#x3001;map-&#x533A;&#x522B;" class="plugin-anchor" href="#&#x961F;&#x5217;&#x3001;set&#x3001;map-&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x961F;&#x5217;&#x3001;Set&#x3001;Map &#x533A;&#x522B;</h2>
</li>
<li>List &#x6709;&#x5E8F;&#x5217;&#x8868;</li>
<li>Set&#x65E0;&#x5E8F;&#x96C6;&#x5408;</li>
<li>Map&#x952E;&#x503C;&#x5BF9;&#x7684;&#x96C6;&#x5408;</li>
<li><p>Queue&#x961F;&#x5217;FlFO </p>
</li>
<li></li>
</ul>
<h1 id="32-list"><a name="32-list" class="plugin-anchor" href="#32-list"><i class="fa fa-link" aria-hidden="true"></i></a>3.2 List</h1>
<ul>
<li>&#x6709;&#x987A;&#x5E8F;&#xFF0C;&#x53EF;&#x91CD;&#x590D;<h2 id="arraylist"><a name="arraylist" class="plugin-anchor" href="#arraylist"><i class="fa fa-link" aria-hidden="true"></i></a>ArrayList</h2>
</li>
<li>&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#xFF0C;&#x65E0;&#x5BB9;&#x91CF;&#x7684;&#x9650;&#x5236;&#x3002;</li>
<li>&#x5728;&#x6267;&#x884C;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x65F6;&#x53EF;&#x80FD;&#x8981;&#x6269;&#x5BB9;&#xFF0C;&#x5728;&#x5220;&#x9664;&#x5143;&#x7D20;&#x65F6;&#x5E76;&#x4E0D;&#x4F1A;&#x51CF;&#x5C0F;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x5728;&#x67E5;&#x627E;&#x5143;&#x7D20;&#x65F6;&#x8981;&#x904D;&#x5386;&#x6570;&#x7EC4;&#xFF0C;&#x5BF9;&#x4E8E;&#x975E;null&#x7684;&#x5143;&#x7D20;&#x91C7;&#x53D6;equals&#x7684;&#x65B9;&#x5F0F;&#x5BFB;&#x627E;&#x3002;</li>
<li>&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</li>
<li>&#x6CE8;&#x610F;&#x70B9;&#xFF1A;<ul>
<li>&#xFF08;1)ArrayList&#x968F;&#x673A;&#x5143;&#x7D20;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;O(1)&#xFF0C;&#x63D2;&#x5165;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x9700;&#x5927;&#x91CF;&#x79FB;&#x52A8;&#x5143;&#x7D20;&#xFF0C;&#x6548;&#x7387;&#x8F83;&#x4F4E;</li>
<li>&#xFF08;2)&#x4E3A;&#x4E86;&#x8282;&#x7EA6;&#x5185;&#x5B58;&#xFF0C;&#x5F53;&#x65B0;&#x5EFA;&#x5BB9;&#x5668;&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;&#x4F1A;&#x5171;&#x4EAB;Object[] EMPTY_ELEMENTDATA = {}&#x548C; Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {}&#x7A7A;&#x6570;&#x7EC4;</li>
<li>&#xFF08;3)&#x5BB9;&#x5668;&#x5E95;&#x5C42;&#x91C7;&#x7528;&#x6570;&#x7EC4;&#x5B58;&#x50A8;&#xFF0C;&#x6BCF;&#x6B21;&#x6269;&#x5BB9;&#x4E3A;1.5&#x500D;</li>
<li>&#xFF08;4)ArrayList&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#x5927;&#x91CF;&#x5730;&#x8C03;&#x7528;&#x4E86;Arrays.copyof()&#x548C;System.arraycopy()&#x65B9;&#x6CD5;&#xFF0C;&#x5176;&#x5B9E;Arrays.copyof()&#x5185;&#x90E8;&#x4E5F;&#x662F;&#x8C03;&#x7528;System.arraycopy()&#x3002;System.arraycopy()&#x4E3A;Native&#x65B9;&#x6CD5;</li>
<li>&#xFF08;5)&#x4E24;&#x4E2A;ToArray&#x65B9;&#x6CD5;</li>
</ul>
</li>
<li>Object[] toArray()&#x65B9;&#x6CD5;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x629B;&#x51FA;java.lang.ClassCastException&#x5F02;&#x5E38;</li>
<li><t> T[] toArray(T[] a)&#x65B9;&#x6CD5;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5C06;ArrayList&#x8F6C;&#x6362;&#x5F97;&#x5230;&#x7684;Array&#x8FDB;&#x884C;&#x6574;&#x4F53;&#x5411;&#x4E0B;&#x8F6C;&#x578B;<ul>
<li>&#xFF08;6)ArrayList&#x53EF;&#x4EE5;&#x5B58;&#x50A8;null&#x503C;</li>
<li>&#xFF08;7)ArrayList&#x6BCF;&#x6B21;&#x4FEE;&#x6539;&#xFF08;&#x589E;&#x52A0;&#x3001;&#x5220;&#x9664;)&#x5BB9;&#x5668;&#x65F6;&#xFF0C;&#x90FD;&#x662F;&#x4FEE;&#x6539;&#x81EA;&#x8EAB;&#x7684;modCount&#xFF1B;&#x5728;&#x751F;&#x6210;&#x8FED;&#x4EE3;&#x5668;&#x65F6;&#xFF0C;&#x8FED;&#x4EE3;&#x5668;&#x4F1A;&#x4FDD;&#x5B58;&#x8BE5;modCount&#x503C;&#xFF0C;&#x8FED;&#x4EE3;&#x5668;&#x6BCF;&#x6B21;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x4F1A;&#x6BD4;&#x8F83;&#x81EA;&#x8EAB;&#x7684;modCount&#x4E0E;ArrayList&#x7684;modCount&#x662F;&#x5426;&#x76F8;&#x7B49;&#xFF0C;&#x6765;&#x5224;&#x65AD;&#x5BB9;&#x5668;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x5982;&#x679C;&#x88AB;&#x4FEE;&#x6539;&#x4E86;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF08;fast-fail&#x673A;&#x5236;)&#x3002;</li>
</ul>
</t></li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>/**
 * Default initial capacity.
 */
private static final int DEFAULT_CAPACITY = 10;

/**
 * Shared empty array instance used for empty instances.
 */
private static final Object[] EMPTY_ELEMENTDATA = {};

/**
 * Shared empty array instance used for default sized empty instances. We
 * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when
 * first element is added.
 */
private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};

/**
 * The array buffer into which the elements of the ArrayList are stored.
 * The capacity of the ArrayList is the length of this array buffer. Any
 * empty ArrayList with elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA
 * will be expanded to DEFAULT_CAPACITY when the first element is added.
 */
transient Object[] elementData; // non-private to simplify nested class access

/**
 * The size of the ArrayList (the number of elements it contains).
 *
 * @serial
 */
private int size;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public ArrayList(int initialCapacity) {
    if (initialCapacity &gt; 0) {
        this.elementData = new Object[initialCapacity];
    } else if (initialCapacity == 0) {
        this.elementData = EMPTY_ELEMENTDATA;
    } else {
        throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+
                                           initialCapacity);
    }
}
</code></pre><h3 id="&#x6DFB;&#x52A0;-adde"><a name="&#x6DFB;&#x52A0;-adde" class="plugin-anchor" href="#&#x6DFB;&#x52A0;-adde"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0; add(e)</h3>
<pre><code>public boolean add(E e) {
    ensureCapacityInternal(size + 1);  // Increments modCount!!
    elementData[size++] = e;
    return true;
}
</code></pre><ul>
<li>&#x5373;&#x4F7F;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x6307;&#x5B9A;&#x5927;&#x5C0F; &#x5C0F;&#x4E8E;10&#x4E2A;&#xFF0C;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x65F6;&#x4F1A;&#x8C03;&#x6574;&#x5927;&#x5C0F;&#xFF0C;&#x4FDD;&#x8BC1;capacity&#x4E0D;&#x4F1A;&#x5C11;&#x4E8E;10&#x4E2A;&#x3002;</li>
</ul>
<pre><code>private void ensureCapacityInternal(int minCapacity) {
    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);
    }

    ensureExplicitCapacity(minCapacity);
}
</code></pre><pre><code>private void ensureExplicitCapacity(int minCapacity) {
    modCount++;

    // overflow-conscious code
    if (minCapacity - elementData.length &gt; 0)
        grow(minCapacity);
}
</code></pre><h3 id="&#x6269;&#x5BB9;"><a name="&#x6269;&#x5BB9;" class="plugin-anchor" href="#&#x6269;&#x5BB9;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9;</h3>
<pre><code>private void grow(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);
    if (newCapacity - minCapacity &lt; 0)
        newCapacity = minCapacity;
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = hugeCapacity(minCapacity);
    // minCapacity is usually close to size, so this is a win:
    elementData = Arrays.copyOf(elementData, newCapacity);
}
</code></pre><ul>
<li>Arrays.copyOf&#x5E95;&#x5C42;&#x662F;System.arrayCopy</li>
</ul>
<pre><code>public static &lt;T,U&gt; T[] copyOf(U[] original, int newLength, Class&lt;? extends T[]&gt; newType) {
    @SuppressWarnings(&quot;unchecked&quot;)
    T[] copy = ((Object)newType == (Object)Object[].class)
        ? (T[]) new Object[newLength]
        : (T[]) Array.newInstance(newType.getComponentType(), newLength);
    System.arraycopy(original, 0, copy, 0,
                     Math.min(original.length, newLength));
    return copy;
}
</code></pre><pre><code>public static native void arraycopy(Object src,  int  srcPos,
                                    Object dest, int destPos,
                                    int length);
</code></pre><h3 id="&#x6DFB;&#x52A0;-addindexe"><a name="&#x6DFB;&#x52A0;-addindexe" class="plugin-anchor" href="#&#x6DFB;&#x52A0;-addindexe"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0; add(index,e)</h3>
<pre><code>public void add(int index, E element) {
    rangeCheckForAdd(index);

    ensureCapacityInternal(size + 1);  // Increments modCount!!
    System.arraycopy(elementData, index, elementData, index + 1,
                     size - index);
    elementData[index] = element;
    size++;
}
</code></pre><pre><code>private void rangeCheckForAdd(int index) {
    if (index &gt; size || index &lt; 0)
        throw new IndexOutOfBoundsException(outOfBoundsMsg(index));
}
</code></pre><h3 id="&#x5220;&#x9664;-removeo"><a name="&#x5220;&#x9664;-removeo" class="plugin-anchor" href="#&#x5220;&#x9664;-removeo"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664; remove(o)</h3>
<pre><code>public boolean remove(Object o) {
    if (o == null) {
        for (int index = 0; index &lt; size; index++)
            if (elementData[index] == null) {
                fastRemove(index);
                return true;
            }
    } else {
        for (int index = 0; index &lt; size; index++)
            if (o.equals(elementData[index])) {
                fastRemove(index);
                return true;
            }
    }
    return false;
}
</code></pre><pre><code>private void fastRemove(int index) {
    modCount++;
    int numMoved = size - index - 1;
    if (numMoved &gt; 0)
        System.arraycopy(elementData, index+1, elementData, index,
                         numMoved);
    elementData[--size] = null; // clear to let GC do its work
}
</code></pre><h3 id="&#x5220;&#x9664;-removeindex"><a name="&#x5220;&#x9664;-removeindex" class="plugin-anchor" href="#&#x5220;&#x9664;-removeindex"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664; remove(index)</h3>
<pre><code>public E remove(int index) {
    rangeCheck(index);

    modCount++;
    E oldValue = elementData(index);

    int numMoved = size - index - 1;
    if (numMoved &gt; 0)
        System.arraycopy(elementData, index+1, elementData, index,
                         numMoved);
    elementData[--size] = null; // clear to let GC do its work

    return oldValue;
}
</code></pre><ul>
<li><h3 id="&#x83B7;&#x53D6;"><a name="&#x83B7;&#x53D6;" class="plugin-anchor" href="#&#x83B7;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x83B7;&#x53D6;</h3>
</li>
</ul>
<pre><code>public E get(int index) {
    rangeCheck(index);

    return elementData(index);
}
</code></pre><pre><code>private void rangeCheck(int index) {
    if (index &gt;= size)
        throw new IndexOutOfBoundsException(outOfBoundsMsg(index));
}
</code></pre><ul>
<li>E elementData(int index) {
  return (E) elementData[index];
}<h3 id="&#x66F4;&#x65B0;"><a name="&#x66F4;&#x65B0;" class="plugin-anchor" href="#&#x66F4;&#x65B0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x66F4;&#x65B0;</h3>
</li>
</ul>
<pre><code>public E set(int index, E element) {
    rangeCheck(index);

    E oldValue = elementData(index);
    elementData[index] = element;
    return oldValue;
}
</code></pre><h3 id="&#x904D;&#x5386;"><a name="&#x904D;&#x5386;" class="plugin-anchor" href="#&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;</h3>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return new Itr();
}

/**
 * An optimized version of AbstractList.Itr
 */
private class Itr implements Iterator&lt;E&gt; {
    int cursor;       // index of next element to return
    int lastRet = -1; // index of last element returned; -1 if no such
    int expectedModCount = modCount;

    public boolean hasNext() {
        return cursor != size;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E next() {
        checkForComodification();
        int i = cursor;
        if (i &gt;= size)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (i &gt;= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i + 1;
        return (E) elementData[lastRet = i];
    }

    public void remove() {
        if (lastRet &lt; 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            ArrayList.this.remove(lastRet);
            cursor = lastRet;
            lastRet = -1;
            expectedModCount = modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    @Override
    @SuppressWarnings(&quot;unchecked&quot;)
    public void forEachRemaining(Consumer&lt;? super E&gt; consumer) {
        Objects.requireNonNull(consumer);
        final int size = ArrayList.this.size;
        int i = cursor;
        if (i &gt;= size) {
            return;
        }
        final Object[] elementData = ArrayList.this.elementData;
        if (i &gt;= elementData.length) {
            throw new ConcurrentModificationException();
        }
        while (i != size &amp;&amp; modCount == expectedModCount) {
            consumer.accept((E) elementData[i++]);
        }
        // update once at end of iteration to reduce heap write traffic
        cursor = i;
        lastRet = i - 1;
        checkForComodification();
    }

    final void checkForComodification() {
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
    }
}
</code></pre><h3 id="&#x5305;&#x542B;"><a name="&#x5305;&#x542B;" class="plugin-anchor" href="#&#x5305;&#x542B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5305;&#x542B;</h3>
<pre><code>public boolean contains(Object o) {
    return indexOf(o) &gt;= 0;
}
</code></pre><pre><code>public int indexOf(Object o) {
    if (o == null) {
        for (int i = 0; i &lt; size; i++)
            if (elementData[i]==null)
                return i;
    } else {
        for (int i = 0; i &lt; size; i++)
            if (o.equals(elementData[i]))
                return i;
    }
    return -1;
}
</code></pre><h2 id="linkedlist"><a name="linkedlist" class="plugin-anchor" href="#linkedlist"><i class="fa fa-link" aria-hidden="true"></i></a>LinkedList</h2>
<ul>
<li>&#x57FA;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x673A;&#x5236;</li>
<li>&#x5728;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x987B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Entry&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5207;&#x6362;&#x76F8;&#x5E94;&#x5143;&#x7D20;&#x7684;&#x524D;&#x540E;&#x5143;&#x7D20;&#x7684;&#x5F15;&#x7528;&#xFF1B;&#x5728;&#x67E5;&#x627E;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x987B;&#x904D;&#x5386;&#x94FE;&#x8868;&#xFF1B;&#x5728;&#x5220;&#x9664;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x987B;&#x904D;&#x5386;&#x94FE;&#x8868;&#xFF0C;&#x627E;&#x5230;&#x8981;&#x5220;&#x9664;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x94FE;&#x8868;&#x4E0A;&#x5C06;&#x6B64;&#x5143;&#x7D20;&#x5220;&#x9664;&#x5373;&#x53EF;&#x3002;</li>
<li>&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</li>
<li>&#x6CE8;&#x610F;&#xFF1A;<ul>
<li>&#xFF08;1)LinkedList&#x6709;&#x4E24;&#x4E2A;&#x6784;&#x9020;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A;&#x4E3A;&#x65E0;&#x53C3;&#x6784;&#x9020;&#xFF0C;&#x53EA;&#x662F;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7A7A;&#x5BF9;&#x8C61;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x4E3A;&#x6709;&#x53C2;&#x6784;&#x9020;&#xFF0C;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x7A7A;&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6240;&#x6709;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x8FDB;&#x53BB;&#x3002;</li>
<li>&#xFF08;2)LinkedList&#x7684;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x4E3A;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;Node&#x7684;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x5305;&#x542B;pre&#x6307;&#x9488;&#xFF0C;next&#x6307;&#x9488;&#xFF0C;&#x548C;item&#x5143;&#x7D20;&#xFF0C;&#x5B9E;&#x73B0;&#x4E3A;&#x53CC;&#x5411;&#x94FE;&#x8868;</li>
<li>&#xFF08;3)LinkedList&#x7684;&#x5220;&#x9664;&#x3001;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(1)&#xFF0C;&#x67E5;&#x627E;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(n)&#xFF0C;&#x67E5;&#x627E;&#x51FD;&#x6570;&#x6709;&#x4E00;&#x5B9A;&#x4F18;&#x5316;&#xFF0C;&#x5BB9;&#x5668;&#x4F1A;&#x5148;&#x5224;&#x65AD;&#x67E5;&#x627E;&#x7684;&#x5143;&#x7D20;&#x662F;&#x79BB;&#x5934;&#x90E8;&#x8F83;&#x8FD1;&#xFF0C;&#x8FD8;&#x662F;&#x5C3E;&#x90E8;&#x8F83;&#x8FD1;&#xFF0C;&#x6765;&#x51B3;&#x5B9A;&#x4ECE;&#x5934;&#x90E8;&#x5F00;&#x59CB;&#x904D;&#x5386;&#x8FD8;&#x662F;&#x5C3E;&#x90E8;&#x5F00;&#x59CB;&#x904D;&#x5386;</li>
<li>&#xFF08;4)LinkedList&#x5B9E;&#x73B0;&#x4E86;Deque&#x63A5;&#x53E3;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x6808;&#x3001;&#x961F;&#x5217;&#x548C;&#x53CC;&#x7AEF;&#x961F;&#x5217;&#x6765;&#x4F7F;&#x7528;&#x3002;</li>
<li>&#xFF08;5)LinkedList&#x53EF;&#x4EE5;&#x5B58;&#x50A8;null&#x503C;<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
</li>
<li>transient int size = 0;
transient Node<e> first;
transient Node<e> last;<h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
</e></e></li>
</ul>
<pre><code>public LinkedList() {
}
</code></pre><h3 id="&#x6DFB;&#x52A0;-adde"><a name="&#x6DFB;&#x52A0;-adde" class="plugin-anchor" href="#&#x6DFB;&#x52A0;-adde"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0; add(e)</h3>
<pre><code>public boolean add(E e) {
    linkLast(e);
    return true;
}
</code></pre><ul>
<li>&#x628A;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x5230;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;</li>
<li>void linkLast(E e) {
  final Node<e> l = last;
  final Node<e> newNode = new Node&lt;&gt;(l, e, null);
  last = newNode;
  if (l == null)<pre><code>  first = newNode;
</code></pre>  else<pre><code>  l.next = newNode;
</code></pre>  size++;
  modCount++;
}</e></e></li>
</ul>
<h3 id="&#x6DFB;&#x52A0;-addindexe"><a name="&#x6DFB;&#x52A0;-addindexe" class="plugin-anchor" href="#&#x6DFB;&#x52A0;-addindexe"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0; add(index,e)</h3>
<pre><code>public void add(int index, E element) {
    checkPositionIndex(index);

    if (index == size)
        linkLast(element);
    else
        linkBefore(element, node(index));
}
</code></pre><pre><code>- Node&lt;E&gt; node(int index) {
// assert isElementIndex(index);

if (index &lt; (size &gt;&gt; 1)) {
    Node&lt;E&gt; x = first;
    for (int i = 0; i &lt; index; i++)
        x = x.next;
    return x;
} else {
    Node&lt;E&gt; x = last;
    for (int i = size - 1; i &gt; index; i--)
        x = x.prev;
    return x;
}
</code></pre><p>}</p>
<ul>
<li>void linkBefore(E e, Node<e> succ) {
  // assert succ != null;
  final Node<e> pred = succ.prev;
  final Node<e> newNode = new Node&lt;&gt;(pred, e, succ);
  succ.prev = newNode;
  if (pred == null)<pre><code>  first = newNode;
</code></pre>  else<pre><code>  pred.next = newNode;
</code></pre>  size++;
  modCount++;
}</e></e></e></li>
</ul>
<h3 id="&#x5220;&#x9664;-removeo"><a name="&#x5220;&#x9664;-removeo" class="plugin-anchor" href="#&#x5220;&#x9664;-removeo"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664; remove(o)</h3>
<pre><code>public boolean remove(Object o) {
    if (o == null) {
        for (Node&lt;E&gt; x = first; x != null; x = x.next) {
            if (x.item == null) {
                unlink(x);
                return true;
            }
        }
    } else {
        for (Node&lt;E&gt; x = first; x != null; x = x.next) {
            if (o.equals(x.item)) {
                unlink(x);
                return true;
            }
        }
    }
    return false;
}
</code></pre><ul>
<li><p>E unlink(Node<e> x) {
  // assert x != null;
  final E element = x.item;
  final Node<e> next = x.next;
  final Node<e> prev = x.prev;</e></e></e></p>
<p>  if (prev == null) {</p>
<pre><code>  first = next;
</code></pre><p>  } else {</p>
<pre><code>  prev.next = next;
  x.prev = null;
</code></pre><p>  }</p>
<p>  if (next == null) {</p>
<pre><code>  last = prev;
</code></pre><p>  } else {</p>
<pre><code>  next.prev = prev;
  x.next = null;
</code></pre><p>  }</p>
<p>  x.item = null;
  size--;
  modCount++;
  return element;
}</p>
</li>
</ul>
<h3 id="&#x5220;&#x9664;-removeindex"><a name="&#x5220;&#x9664;-removeindex" class="plugin-anchor" href="#&#x5220;&#x9664;-removeindex"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664; remove(index)</h3>
<pre><code>public E remove(int index) {
    checkElementIndex(index);
    return unlink(node(index));
}
</code></pre><h3 id="&#x83B7;&#x53D6;"><a name="&#x83B7;&#x53D6;" class="plugin-anchor" href="#&#x83B7;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x83B7;&#x53D6;</h3>
<pre><code>public E get(int index) {
    checkElementIndex(index);
    return node(index).item;
}
</code></pre><h3 id="&#x66F4;&#x65B0;"><a name="&#x66F4;&#x65B0;" class="plugin-anchor" href="#&#x66F4;&#x65B0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x66F4;&#x65B0;</h3>
<pre><code>public E set(int index, E element) {
    checkElementIndex(index);
    Node&lt;E&gt; x = node(index);
    E oldVal = x.item;
    x.item = element;
    return oldVal;
}
</code></pre><h3 id="&#x904D;&#x5386;"><a name="&#x904D;&#x5386;" class="plugin-anchor" href="#&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;</h3>
<pre><code>public ListIterator&lt;E&gt; listIterator(int index) {
    checkPositionIndex(index);
    return new ListItr(index);
}
</code></pre><pre><code>
private class ListItr implements ListIterator&lt;E&gt; {
    private Node&lt;E&gt; lastReturned;
    private Node&lt;E&gt; next;
    private int nextIndex;
    private int expectedModCount = modCount;

    ListItr(int index) {
        // assert isPositionIndex(index);
        next = (index == size) ? null : node(index);
        nextIndex = index;
    }

    public boolean hasNext() {
        return nextIndex &lt; size;
    }

    public E next() {
        checkForComodification();
        if (!hasNext())
            throw new NoSuchElementException();

        lastReturned = next;
        next = next.next;
        nextIndex++;
        return lastReturned.item;
    }

    public boolean hasPrevious() {
        return nextIndex &gt; 0;
    }

    public E previous() {
        checkForComodification();
        if (!hasPrevious())
            throw new NoSuchElementException();

        lastReturned = next = (next == null) ? last : next.prev;
        nextIndex--;
        return lastReturned.item;
    }

    public int nextIndex() {
        return nextIndex;
    }

    public int previousIndex() {
        return nextIndex - 1;
    }

    public void remove() {
        checkForComodification();
        if (lastReturned == null)
            throw new IllegalStateException();

        Node&lt;E&gt; lastNext = lastReturned.next;
        unlink(lastReturned);
        if (next == lastReturned)
            next = lastNext;
        else
            nextIndex--;
        lastReturned = null;
        expectedModCount++;
    }

    public void set(E e) {
        if (lastReturned == null)
            throw new IllegalStateException();
        checkForComodification();
        lastReturned.item = e;
    }

    public void add(E e) {
        checkForComodification();
        lastReturned = null;
        if (next == null)
            linkLast(e);
        else
            linkBefore(e, next);
        nextIndex++;
        expectedModCount++;
    }

    public void forEachRemaining(Consumer&lt;? super E&gt; action) {
        Objects.requireNonNull(action);
        while (modCount == expectedModCount &amp;&amp; nextIndex &lt; size) {
            action.accept(next.item);
            lastReturned = next;
            next = next.next;
            nextIndex++;
        }
        checkForComodification();
    }

    final void checkForComodification() {
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
    }
}
</code></pre><h3 id="&#x5305;&#x542B;"><a name="&#x5305;&#x542B;" class="plugin-anchor" href="#&#x5305;&#x542B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5305;&#x542B;</h3>
<pre><code>public boolean contains(Object o) {
    return indexOf(o) != -1;
}
</code></pre><pre><code>public int indexOf(Object o) {
    int index = 0;
    if (o == null) {
        for (Node&lt;E&gt; x = first; x != null; x = x.next) {
            if (x.item == null)
                return index;
            index++;
        }
    } else {
        for (Node&lt;E&gt; x = first; x != null; x = x.next) {
            if (o.equals(x.item))
                return index;
            index++;
        }
    }
    return -1;
}
</code></pre><h2 id="vector"><a name="vector" class="plugin-anchor" href="#vector"><i class="fa fa-link" aria-hidden="true"></i></a>Vector</h2>
<ul>
<li>&#x57FA;&#x4E8E;synchronized&#x5B9E;&#x73B0;&#x7684;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;ArrayList&#xFF0C;&#x4F46;&#x5728;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x65F6;&#x5BB9;&#x91CF;&#x6269;&#x5145;&#x7684;&#x673A;&#x5236;&#x548C;ArrayList&#x7A0D;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x5E76;&#x53EF;&#x901A;&#x8FC7;&#x4F20;&#x5165;capacityIncrement&#x6765;&#x63A7;&#x5236;&#x5BB9;&#x91CF;&#x7684;&#x6269;&#x5145;&#x3002;<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
<li>protected Object[] elementData;
protected int elementCount;
protected int capacityIncrement;</li>
</ul>
<h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public Vector(int initialCapacity) {
    this(initialCapacity, 0);
}
</code></pre><pre><code>public Vector() {
    this(10);
}
</code></pre><pre><code>public Vector(int initialCapacity, int capacityIncrement) {
    super();
    if (initialCapacity &lt; 0)
        throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+
                                           initialCapacity);
    this.elementData = new Object[initialCapacity];
    this.capacityIncrement = capacityIncrement;
}
</code></pre><h3 id="&#x6DFB;&#x52A0;"><a name="&#x6DFB;&#x52A0;" class="plugin-anchor" href="#&#x6DFB;&#x52A0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0;</h3>
<pre><code>public synchronized boolean add(E e) {
    modCount++;
    ensureCapacityHelper(elementCount + 1);
    elementData[elementCount++] = e;
    return true;
}
</code></pre><h3 id="&#x5220;&#x9664;"><a name="&#x5220;&#x9664;" class="plugin-anchor" href="#&#x5220;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664;</h3>
<pre><code>public boolean remove(Object o) {
    return removeElement(o);
}
</code></pre><pre><code>public synchronized boolean removeElement(Object obj) {
    modCount++;
    int i = indexOf(obj);
    if (i &gt;= 0) {
        removeElementAt(i);
        return true;
    }
    return false;
}
</code></pre><h3 id="&#x6269;&#x5BB9;"><a name="&#x6269;&#x5BB9;" class="plugin-anchor" href="#&#x6269;&#x5BB9;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9;</h3>
<pre><code>private void grow(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?
                                     capacityIncrement : oldCapacity);
    if (newCapacity - minCapacity &lt; 0)
        newCapacity = minCapacity;
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = hugeCapacity(minCapacity);
    elementData = Arrays.copyOf(elementData, newCapacity);
}
</code></pre><h3 id="&#x83B7;&#x53D6;"><a name="&#x83B7;&#x53D6;" class="plugin-anchor" href="#&#x83B7;&#x53D6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x83B7;&#x53D6;</h3>
<pre><code>public synchronized E get(int index) {
    if (index &gt;= elementCount)
        throw new ArrayIndexOutOfBoundsException(index);

    return elementData(index);
}
</code></pre><h3 id="&#x66F4;&#x65B0;"><a name="&#x66F4;&#x65B0;" class="plugin-anchor" href="#&#x66F4;&#x65B0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x66F4;&#x65B0;</h3>
<pre><code>public synchronized E set(int index, E element) {
    if (index &gt;= elementCount)
        throw new ArrayIndexOutOfBoundsException(index);

    E oldValue = elementData(index);
    elementData[index] = element;
    return oldValue;
}
</code></pre><h3 id="&#x5305;&#x542B;"><a name="&#x5305;&#x542B;" class="plugin-anchor" href="#&#x5305;&#x542B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5305;&#x542B;</h3>
<pre><code>public boolean contains(Object o) {
    return indexOf(o, 0) &gt;= 0;
}
</code></pre><pre><code>public synchronized int indexOf(Object o, int index) {
    if (o == null) {
        for (int i = index ; i &lt; elementCount ; i++)
            if (elementData[i]==null)
                return i;
    } else {
        for (int i = index ; i &lt; elementCount ; i++)
            if (o.equals(elementData[i]))
                return i;
    }
    return -1;
}
</code></pre><ul>
<li><h2 id="stack"><a name="stack" class="plugin-anchor" href="#stack"><i class="fa fa-link" aria-hidden="true"></i></a>Stack</h2>
</li>
<li>&#x57FA;&#x4E8E;Vector&#x5B9E;&#x73B0;&#xFF0C;&#x652F;&#x6301;LIFO&#x3002;<h3 id="&#x7C7B;&#x58F0;&#x660E;"><a name="&#x7C7B;&#x58F0;&#x660E;" class="plugin-anchor" href="#&#x7C7B;&#x58F0;&#x660E;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7C7B;&#x58F0;&#x660E;</h3>
</li>
</ul>
<pre><code>public class Stack&lt;E&gt; extends Vector&lt;E&gt; {}
</code></pre><h3 id="push"><a name="push" class="plugin-anchor" href="#push"><i class="fa fa-link" aria-hidden="true"></i></a>push</h3>
<pre><code>public E push(E item) {
    addElement(item);
    return item;
}
</code></pre><h3 id="pop"><a name="pop" class="plugin-anchor" href="#pop"><i class="fa fa-link" aria-hidden="true"></i></a>pop</h3>
<pre><code>public synchronized E pop() {
    E  obj;
    int len = size();
    obj = peek();
    removeElementAt(len - 1);
    return obj;
}
</code></pre><h3 id="peek"><a name="peek" class="plugin-anchor" href="#peek"><i class="fa fa-link" aria-hidden="true"></i></a>peek</h3>
<pre><code>public synchronized E peek() {
    int len = size();
    if (len == 0)
        throw new EmptyStackException();
    return elementAt(len - 1);
}
</code></pre><h2 id="copyonwritearraylist"><a name="copyonwritearraylist" class="plugin-anchor" href="#copyonwritearraylist"><i class="fa fa-link" aria-hidden="true"></i></a>CopyOnWriteArrayList</h2>
<ul>
<li>&#x662F;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3001;&#x5E76;&#x4E14;&#x5728;&#x8BFB;&#x64CD;&#x4F5C;&#x65F6;&#x65E0;&#x9501;&#x7684;ArrayList&#x3002;</li>
<li><p>&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x7CFB;&#x7EDF;&#x5E94;&#x5BF9;&#x7684;&#x90FD;&#x662F;&#x8BFB;&#x591A;&#x5199;&#x5C11;&#x7684;&#x5E76;&#x53D1;&#x573A;&#x666F;&#x3002;CopyOnWriteArrayList&#x5BB9;&#x5668;&#x5141;&#x8BB8;&#x5E76;&#x53D1;&#x8BFB;&#xFF0C;&#x8BFB;&#x64CD;&#x4F5C;&#x662F;&#x65E0;&#x9501;&#x7684;&#xFF0C;&#x6027;&#x80FD;&#x8F83;&#x9AD8;&#x3002;&#x81F3;&#x4E8E;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x5411;&#x5BB9;&#x5668;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x9996;&#x5148;&#x5C06;&#x5F53;&#x524D;&#x5BB9;&#x5668;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x65B0;&#x526F;&#x672C;&#x4E0A;&#x6267;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x7ED3;&#x675F;&#x4E4B;&#x540E;&#x518D;&#x5C06;&#x539F;&#x5BB9;&#x5668;&#x7684;&#x5F15;&#x7528;&#x6307;&#x5411;&#x65B0;&#x5BB9;&#x5668;&#x3002;</p>
</li>
<li><p>&#x4F18;&#x70B9;</p>
<ul>
<li>1)&#x91C7;&#x7528;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x65B9;&#x5F0F;&#xFF0C;&#x8BFB;&#x7684;&#x6548;&#x7387;&#x975E;&#x5E38;&#x9AD8;</li>
<li>2)CopyOnWriteArrayList&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x662F;&#x57FA;&#x4E8E;&#x521B;&#x5EFA;&#x65F6;&#x7684;&#x6570;&#x636E;&#x5FEB;&#x7167;&#x7684;&#xFF0C;&#x6545;&#x6570;&#x7EC4;&#x7684;&#x589E;&#x5220;&#x6539;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x8FED;&#x4EE3;&#x5668;</li>
</ul>
</li>
<li><p>&#x7F3A;&#x70B9;</p>
<ul>
<li>1)&#x5185;&#x5B58;&#x5360;&#x7528;&#x9AD8;&#xFF0C;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x8981;&#x5C06;&#x539F;&#x5BB9;&#x5668;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#xFF0C;&#x6570;&#x636E;&#x91CF;&#x5927;&#x65F6;&#xFF0C;&#x5BF9;&#x5185;&#x5B58;&#x538B;&#x529B;&#x8F83;&#x5927;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x8D77;&#x9891;&#x7E41;GC</li>
<li>2)&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5B9E;&#x65F6;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x5199;&#x548C;&#x8BFB;&#x5206;&#x522B;&#x4F5C;&#x7528;&#x5728;&#x65B0;&#x8001;&#x4E0D;&#x540C;&#x5BB9;&#x5668;&#x4E0A;&#xFF0C;&#x5728;&#x5199;&#x64CD;&#x4F5C;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x8BFB;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x4F46;&#x8BFB;&#x53D6;&#x5230;&#x7684;&#x5374;&#x662F;&#x8001;&#x5BB9;&#x5668;&#x7684;&#x6570;&#x636E;&#x3002;</li>
</ul>
</li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>/** The lock protecting all mutators */
final transient ReentrantLock lock = new ReentrantLock();

/** The array, accessed only via getArray/setArray. */
private transient volatile Object[] array;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public CopyOnWriteArrayList() {
    setArray(new Object[0]);
}
</code></pre><ul>
<li>final void setArray(Object[] a) {
  array = a;
}</li>
</ul>
<h3 id="&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><a name="&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;" class="plugin-anchor" href="#&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;)</h3>
<ul>
<li>final Object[] getArray() {
  return array;
}</li>
</ul>
<pre><code>public boolean add(E e) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;
        Object[] newElements = Arrays.copyOf(elements, len + 1);
        newElements[len] = e;
        setArray(newElements);
        return true;
    } finally {
        lock.unlock();
    }
}
</code></pre><h3 id="&#x5B58;&#x5728;&#x5219;&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><a name="&#x5B58;&#x5728;&#x5219;&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;" class="plugin-anchor" href="#&#x5B58;&#x5728;&#x5219;&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5B58;&#x5728;&#x5219;&#x6DFB;&#x52A0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;)</h3>
<ul>
<li>&#x5148;&#x4FDD;&#x5B58;&#x4E00;&#x4EFD;&#x6570;&#x7EC4;snapshot&#xFF0C;&#x5982;&#x679C;snapshot&#x4E2D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x3002;</li>
<li>&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x52A0;&#x9501;&#xFF0C;&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x6570;&#x7EC4;current&#xFF0C;&#x6BD4;&#x8F83;snapshot&#x4E0E;current&#xFF0C;&#x904D;&#x5386;&#x5B83;&#x4EEC;&#x5171;&#x540C;&#x957F;&#x5EA6;&#x5185;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;current&#x4E2D;&#x67D0;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7B49;&#x4E8E;e&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF08;&#x5F53;&#x7136;current&#x4E0E;snapshot&#x76F8;&#x540C;&#x5C31;&#x4E0D;&#x5FC5;&#x770B;&#x4E86;)&#xFF1B;</li>
<li>&#x4E4B;&#x540E;&#x518D;&#x904D;&#x5386;current&#x5355;&#x72EC;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;current&#x4E2D;&#x67D0;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7B49;&#x4E8E;e&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF1B;</li>
<li>&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x53BB;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;+1&#x7684;&#x65B0;&#x6570;&#x7EC4;&#xFF0C;&#x5C06;e&#x52A0;&#x5165;&#x3002;</li>
</ul>
<pre><code>public boolean addIfAbsent(E e) {
    Object[] snapshot = getArray();
    return indexOf(e, snapshot, 0, snapshot.length) &gt;= 0 ? false :
        addIfAbsent(e, snapshot);
}
</code></pre><pre><code>private boolean addIfAbsent(E e, Object[] snapshot) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] current = getArray();
        int len = current.length;
        if (snapshot != current) {
            // Optimize for lost race to another addXXX operation
            int common = Math.min(snapshot.length, len);
            for (int i = 0; i &lt; common; i++)
</code></pre><ul>
<li>//&#x5982;&#x679C;snapshot&#x4E0E;current&#x5143;&#x7D20;&#x4E0D;&#x540C;&#x4F46;current&#x4E0E;e&#x76F8;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF08;&#x626B;&#x63CF;0&#x5230;common)<pre><code>          if (current[i] != snapshot[i] &amp;&amp; eq(e, current[i]))
              return false;
</code></pre><ul>
<li>// &#x5982;&#x679C;current&#x4E2D;&#x5B58;&#x5728;e&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF08;&#x626B;&#x63CF;commen&#x5230;len)<pre><code>  if (indexOf(e, current, common, len) &gt;= 0)
          return false;
</code></pre>  }
  Object[] newElements = Arrays.copyOf(current, len + 1);
  newElements[len] = e;
  setArray(newElements);
  return true;
} finally {
  lock.unlock();
}
}</li>
</ul>
</li>
</ul>
<h3 id="&#x5220;&#x9664;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><a name="&#x5220;&#x9664;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;" class="plugin-anchor" href="#&#x5220;&#x9664;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;)</h3>
<pre><code>public E remove(int index) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        int len = elements.length;
        E oldValue = get(elements, index);
        int numMoved = len - index - 1;
        if (numMoved == 0)
            setArray(Arrays.copyOf(elements, len - 1));
        else {
            Object[] newElements = new Object[len - 1];
            System.arraycopy(elements, 0, newElements, 0, index);
            System.arraycopy(elements, index + 1, newElements, index,
                             numMoved);
            setArray(newElements);
        }
        return oldValue;
    } finally {
        lock.unlock();
    }
}
</code></pre><h3 id="&#x83B7;&#x53D6;&#xFF08;&#x65E0;&#x9501;"><a name="&#x83B7;&#x53D6;&#xFF08;&#x65E0;&#x9501;" class="plugin-anchor" href="#&#x83B7;&#x53D6;&#xFF08;&#x65E0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x83B7;&#x53D6;&#xFF08;&#x65E0;&#x9501;)</h3>
<pre><code>public E get(int index) {
    return get(getArray(), index);
}
</code></pre><pre><code>private E get(Object[] a, int index) {
    return (E) a[index];
}
</code></pre><h3 id="&#x66F4;&#x65B0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><a name="&#x66F4;&#x65B0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;" class="plugin-anchor" href="#&#x66F4;&#x65B0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x66F4;&#x65B0;&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x9501;&#x5185;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x6570;&#x7EC4;)</h3>
<pre><code>public E set(int index, E element) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        Object[] elements = getArray();
        E oldValue = get(elements, index);

        if (oldValue != element) {
            int len = elements.length;
            Object[] newElements = Arrays.copyOf(elements, len);
            newElements[index] = element;
            setArray(newElements);
        } else {
</code></pre><ul>
<li>// &#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x201C;volatile&#x201D;&#x7684;&#x8BED;&#x4E49;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8BFB;&#x64CD;&#x4F5C;&#x90FD;&#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x4E2A;&#x5199;&#x64CD;&#x4F5C;&#x7684;&#x7ED3;&#x679C;&#xFF0C;</li>
<li>&#x4E5F;&#x5C31;&#x662F;&#x8BFB;&#x64CD;&#x4F5C;&#x770B;&#x5230;&#x7684;&#x6570;&#x636E;&#x4E00;&#x5B9A;&#x662F;&#x67D0;&#x4E2A;&#x5199;&#x64CD;&#x4F5C;&#x7684;&#x7ED3;&#x679C;&#xFF08;&#x5C3D;&#x7BA1;&#x5199;&#x64CD;&#x4F5C;&#x6CA1;&#x6709;&#x6539;&#x53D8;&#x6570;&#x636E;&#x672C;&#x8EAB;)&#x3002;</li>
<li>&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x5373;&#x4F7F;&#x4E0D;&#x8BBE;&#x7F6E;&#x4E5F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4EC5;&#x4EC5;&#x662F;&#x4E3A;&#x4E86;&#x4E00;&#x4E2A;&#x8BED;&#x4E49;&#x4E0A;&#x7684;&#x8865;&#x5145;&#xFF08;&#x5C31;&#x5982;&#x6E90;&#x7801;&#x4E2D;&#x7684;&#x6CE8;&#x91CA;&#x6240;&#x8A00;)<pre><code>      // Not quite a no-op; ensures volatile write semantics
      setArray(elements);
  }
  return oldValue;
</code></pre>  } finally {<pre><code>  lock.unlock();
</code></pre>  }
}</li>
</ul>
<h3 id="&#x5305;&#x542B;&#xFF08;&#x65E0;&#x9501;"><a name="&#x5305;&#x542B;&#xFF08;&#x65E0;&#x9501;" class="plugin-anchor" href="#&#x5305;&#x542B;&#xFF08;&#x65E0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5305;&#x542B;&#xFF08;&#x65E0;&#x9501;)</h3>
<pre><code>public boolean contains(Object o) {
    Object[] elements = getArray();
    return indexOf(o, elements, 0, elements.length) &gt;= 0;
}
</code></pre><pre><code>private static int indexOf(Object o, Object[] elements,
                           int index, int fence) {
    if (o == null) {
        for (int i = index; i &lt; fence; i++)
            if (elements[i] == null)
                return i;
    } else {
        for (int i = index; i &lt; fence; i++)
            if (o.equals(elements[i]))
                return i;
    }
    return -1;
}
</code></pre><h3 id="&#x904D;&#x5386;&#xFF08;&#x904D;&#x5386;&#x7684;&#x662F;&#x83B7;&#x53D6;iterator&#x65F6;&#x7684;&#x6570;&#x7EC4;&#x5FEB;&#x7167;"><a name="&#x904D;&#x5386;&#xFF08;&#x904D;&#x5386;&#x7684;&#x662F;&#x83B7;&#x53D6;iterator&#x65F6;&#x7684;&#x6570;&#x7EC4;&#x5FEB;&#x7167;" class="plugin-anchor" href="#&#x904D;&#x5386;&#xFF08;&#x904D;&#x5386;&#x7684;&#x662F;&#x83B7;&#x53D6;iterator&#x65F6;&#x7684;&#x6570;&#x7EC4;&#x5FEB;&#x7167;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;&#xFF08;&#x904D;&#x5386;&#x7684;&#x662F;&#x83B7;&#x53D6;iterator&#x65F6;&#x7684;&#x6570;&#x7EC4;&#x5FEB;&#x7167;)</h3>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return new COWIterator&lt;E&gt;(getArray(), 0);
}
</code></pre><pre><code>static final class COWIterator&lt;E&gt; implements ListIterator&lt;E&gt; {
    /** Snapshot of the array */
    private final Object[] snapshot;
    /** Index of element to be returned by subsequent call to next.  */
    private int cursor;

    private COWIterator(Object[] elements, int initialCursor) {
        cursor = initialCursor;
        snapshot = elements;
    }

    public boolean hasNext() {
        return cursor &lt; snapshot.length;
    }

    public boolean hasPrevious() {
        return cursor &gt; 0;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E next() {
        if (! hasNext())
            throw new NoSuchElementException();
        return (E) snapshot[cursor++];
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E previous() {
        if (! hasPrevious())
            throw new NoSuchElementException();
        return (E) snapshot[--cursor];
    }

    public int nextIndex() {
        return cursor;
    }

    public int previousIndex() {
        return cursor-1;
    }

    /**
     * Not supported. Always throws UnsupportedOperationException.
     * @throws UnsupportedOperationException always; {@code remove}
     *         is not supported by this iterator.
     */
    public void remove() {
        throw new UnsupportedOperationException();
    }

    /**
     * Not supported. Always throws UnsupportedOperationException.
     * @throws UnsupportedOperationException always; {@code set}
     *         is not supported by this iterator.
     */
    public void set(E e) {
        throw new UnsupportedOperationException();
    }

    /**
     * Not supported. Always throws UnsupportedOperationException.
     * @throws UnsupportedOperationException always; {@code add}
     *         is not supported by this iterator.
     */
    public void add(E e) {
        throw new UnsupportedOperationException();
    }

    @Override
    public void forEachRemaining(Consumer&lt;? super E&gt; action) {
        Objects.requireNonNull(action);
        Object[] elements = snapshot;
        final int size = elements.length;
        for (int i = cursor; i &lt; size; i++) {
            @SuppressWarnings(&quot;unchecked&quot;) E e = (E) elements[i];
            action.accept(e);
        }
        cursor = size;
    }
}
</code></pre><ul>
<li><h2 id="list&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;"><a name="list&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;" class="plugin-anchor" href="#list&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>List&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;</h2>
<ul>
<li>(1) &#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x5FEB;&#x901F;&#x63D2;&#x5165;&#xFF0C;&#x5220;&#x9664;&#x5143;&#x7D20;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;LinkedList&#x3002;</li>
<li>(2) &#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x5FEB;&#x901F;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x5143;&#x7D20;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;ArrayList&#x3002;</li>
<li>(3) &#x5BF9;&#x4E8E;&#x201C;&#x5355;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x201D; &#x6216;&#x8005; &#x201C;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#xFF0C;&#x4F46;List&#x4EC5;&#x4EC5;&#x53EA;&#x4F1A;&#x88AB;&#x5355;&#x4E2A;&#x7EBF;&#x7A0B;&#x64CD;&#x4F5C;&#x201D;&#xFF0C;&#x6B64;&#x65F6;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x975E;&#x540C;&#x6B65;&#x7684;&#x7C7B;(&#x5982;ArrayList)&#x3002;</li>
</ul>
</li>
<li>&#x5BF9;&#x4E8E;&#x201C;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#xFF0C;&#x4E14;List&#x53EF;&#x80FD;&#x540C;&#x65F6;&#x88AB;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x64CD;&#x4F5C;&#x201D;&#xFF0C;&#x6B64;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x540C;&#x6B65;&#x7684;&#x7C7B;(&#x5982;Vector&#x3001;CopyOnWriteArrayList)&#x3002;</li>
</ul>
<ul>
<li><h1 id="33-set"><a name="33-set" class="plugin-anchor" href="#33-set"><i class="fa fa-link" aria-hidden="true"></i></a>3.3 Set</h1>
</li>
<li>&#x6CA1;&#x6709;&#x987A;&#x5E8F;&#xFF0C;&#x4E0D;&#x53EF;&#x91CD;&#x590D;<h2 id="hashset&#xFF08;&#x5E95;&#x5C42;&#x662F;hashmap"><a name="hashset&#xFF08;&#x5E95;&#x5C42;&#x662F;hashmap" class="plugin-anchor" href="#hashset&#xFF08;&#x5E95;&#x5C42;&#x662F;hashmap"><i class="fa fa-link" aria-hidden="true"></i></a>HashSet&#xFF08;&#x5E95;&#x5C42;&#x662F;HashMap)</h2>
</li>
<li>Set&#x4E0D;&#x5141;&#x8BB8;&#x5143;&#x7D20;&#x91CD;&#x590D;&#x3002;</li>
<li>&#x57FA;&#x4E8E;HashMap&#x5B9E;&#x73B0;&#xFF0C;&#x65E0;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#x3002;</li>
<li>&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>private transient HashMap&lt;E,Object&gt; map;

// Dummy value to associate with an Object in the backing Map
private static final Object PRESENT = new Object();
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>/**
 * Constructs a new, empty set; the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance has
 * default initial capacity (16) and load factor (0.75).
 */
public HashSet() {
    map = new HashMap&lt;&gt;();
}
</code></pre><pre><code>public HashSet(int initialCapacity) {
    map = new HashMap&lt;&gt;(initialCapacity);
}
</code></pre><pre><code>public HashSet(int initialCapacity, float loadFactor) {
    map = new HashMap&lt;&gt;(initialCapacity, loadFactor);
}
</code></pre><h3 id="&#x6DFB;&#x52A0;"><a name="&#x6DFB;&#x52A0;" class="plugin-anchor" href="#&#x6DFB;&#x52A0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0;</h3>
<pre><code>public boolean add(E e) {
    return map.put(e, PRESENT)==null;
}
</code></pre><h3 id="&#x5220;&#x9664;"><a name="&#x5220;&#x9664;" class="plugin-anchor" href="#&#x5220;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664;</h3>
<pre><code>public boolean remove(Object o) {
    return map.remove(o)==PRESENT;
}
</code></pre><h3 id="&#x904D;&#x5386;"><a name="&#x904D;&#x5386;" class="plugin-anchor" href="#&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;</h3>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return map.keySet().iterator();
}
</code></pre><h3 id="&#x5305;&#x542B;"><a name="&#x5305;&#x542B;" class="plugin-anchor" href="#&#x5305;&#x542B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5305;&#x542B;</h3>
<pre><code>public boolean contains(Object o) {
    return map.containsKey(o);
}
</code></pre><ul>
<li><h2 id="treeset&#xFF08;&#x5E95;&#x5C42;&#x662F;treemap"><a name="treeset&#xFF08;&#x5E95;&#x5C42;&#x662F;treemap" class="plugin-anchor" href="#treeset&#xFF08;&#x5E95;&#x5C42;&#x662F;treemap"><i class="fa fa-link" aria-hidden="true"></i></a>TreeSet&#xFF08;&#x5E95;&#x5C42;&#x662F;TreeMap)</h2>
</li>
<li>&#x57FA;&#x4E8E;TreeMap&#x5B9E;&#x73B0;&#xFF0C;&#x652F;&#x6301;&#x6392;&#x5E8F;&#xFF08;&#x81EA;&#x7136;&#x6392;&#x5E8F; &#x6216;&#x8005; &#x6839;&#x636E;&#x521B;&#x5EFA;TreeSet &#x65F6;&#x63D0;&#x4F9B;&#x7684; Comparator &#x8FDB;&#x884C;&#x6392;&#x5E8F;)&#x3002;</li>
<li>&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>/**
 * The backing map.
 */
private transient NavigableMap&lt;E,Object&gt; m;

// Dummy value to associate with an Object in the backing Map
private static final Object PRESENT = new Object();
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public TreeSet() {
    this(new TreeMap&lt;E,Object&gt;());
}
</code></pre><pre><code>public TreeSet(Comparator&lt;? super E&gt; comparator) {
    this(new TreeMap&lt;&gt;(comparator));
}
</code></pre><h3 id="&#x6DFB;&#x52A0;"><a name="&#x6DFB;&#x52A0;" class="plugin-anchor" href="#&#x6DFB;&#x52A0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0;</h3>
<pre><code>public boolean add(E e) {
    return m.put(e, PRESENT)==null;
}
</code></pre><h3 id="&#x5220;&#x9664;"><a name="&#x5220;&#x9664;" class="plugin-anchor" href="#&#x5220;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664;</h3>
<pre><code>public boolean remove(Object o) {
    return m.remove(o)==PRESENT;
}
</code></pre><h3 id="&#x904D;&#x5386;"><a name="&#x904D;&#x5386;" class="plugin-anchor" href="#&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;</h3>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return m.navigableKeySet().iterator();
}
</code></pre><h3 id="&#x5305;&#x542B;"><a name="&#x5305;&#x542B;" class="plugin-anchor" href="#&#x5305;&#x542B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5305;&#x542B;</h3>
<pre><code>public boolean contains(Object o) {
    return m.containsKey(o);
}
</code></pre><h3 id="&#x83B7;&#x53D6;&#x5F00;&#x5934;"><a name="&#x83B7;&#x53D6;&#x5F00;&#x5934;" class="plugin-anchor" href="#&#x83B7;&#x53D6;&#x5F00;&#x5934;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x83B7;&#x53D6;&#x5F00;&#x5934;</h3>
<pre><code>public E first() {
    return m.firstKey();
}
</code></pre><h3 id="&#x83B7;&#x53D6;&#x7ED3;&#x5C3E;"><a name="&#x83B7;&#x53D6;&#x7ED3;&#x5C3E;" class="plugin-anchor" href="#&#x83B7;&#x53D6;&#x7ED3;&#x5C3E;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x83B7;&#x53D6;&#x7ED3;&#x5C3E;</h3>
<pre><code>public E last() {
    return m.lastKey();
}
</code></pre><h3 id="&#x5B50;&#x96C6;"><a name="&#x5B50;&#x96C6;" class="plugin-anchor" href="#&#x5B50;&#x96C6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5B50;&#x96C6;</h3>
<pre><code>public NavigableSet&lt;E&gt; subSet(E fromElement, boolean fromInclusive,
                              E toElement,   boolean toInclusive) {
    return new TreeSet&lt;&gt;(m.subMap(fromElement, fromInclusive,
                                   toElement,   toInclusive));
}
</code></pre><ul>
<li>&#x9ED8;&#x8BA4;&#x662F;&#x542B;&#x5934;&#x4E0D;&#x542B;&#x5C3E;</li>
</ul>
<pre><code>public SortedSet&lt;E&gt; subSet(E fromElement, E toElement) {
    return subSet(fromElement, true, toElement, false);
}
</code></pre><ul>
<li><h2 id="linkedhashset&#xFF08;&#x7EE7;&#x627F;&#x81EA;hashset&#xFF0C;&#x5E95;&#x5C42;&#x662F;linkedhashmap"><a name="linkedhashset&#xFF08;&#x7EE7;&#x627F;&#x81EA;hashset&#xFF0C;&#x5E95;&#x5C42;&#x662F;linkedhashmap" class="plugin-anchor" href="#linkedhashset&#xFF08;&#x7EE7;&#x627F;&#x81EA;hashset&#xFF0C;&#x5E95;&#x5C42;&#x662F;linkedhashmap"><i class="fa fa-link" aria-hidden="true"></i></a>LinkedHashSet&#xFF08;&#x7EE7;&#x627F;&#x81EA;HashSet&#xFF0C;&#x5E95;&#x5C42;&#x662F;LinkedHashMap)</h2>
</li>
<li>LinkedHashSet&#x7EE7;&#x627F;&#x81EA;HashSet&#xFF0C;&#x6E90;&#x7801;&#x66F4;&#x5C11;&#x3001;&#x66F4;&#x7B80;&#x5355;&#xFF0C;&#x552F;&#x4E00;&#x7684;&#x533A;&#x522B;&#x662F;LinkedHashSet&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x7684;&#x662F;LinkHashMap&#x3002;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x610F;&#x4E49;&#x6216;&#x8005;&#x597D;&#x5904;&#x5C31;&#x662F;LinkedHashSet&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x987A;&#x5E8F;&#x662F;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x904D;&#x5386;&#x5E8F;&#x548C;&#x63D2;&#x5165;&#x5E8F;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;<h3 id="&#x7C7B;&#x58F0;&#x660E;"><a name="&#x7C7B;&#x58F0;&#x660E;" class="plugin-anchor" href="#&#x7C7B;&#x58F0;&#x660E;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7C7B;&#x58F0;&#x660E;</h3>
</li>
</ul>
<pre><code>public class LinkedHashSet&lt;E&gt;
    extends HashSet&lt;E&gt;
    implements Set&lt;E&gt;, Cloneable, java.io.Serializable {}
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public LinkedHashSet(int initialCapacity, float loadFactor) {
    super(initialCapacity, loadFactor, true);
}

/**
 * Constructs a new, empty linked hash set with the specified initial
 * capacity and the default load factor (0.75).
 *
 * @param   initialCapacity   the initial capacity of the LinkedHashSet
 * @throws  IllegalArgumentException if the initial capacity is less
 *              than zero
 */
public LinkedHashSet(int initialCapacity) {
    super(initialCapacity, .75f, true);
}

/**
 * Constructs a new, empty linked hash set with the default initial
 * capacity (16) and load factor (0.75).
 */
public LinkedHashSet() {
    super(16, .75f, true);
}
</code></pre><ul>
<li>super&#x6307;&#x7684;&#x662F;HashSet&#x7684;default&#x8BBF;&#x95EE;&#x7EA7;&#x522B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li>
</ul>
<pre><code>/**
 * Constructs a new, empty linked hash set.  (This package private
 * constructor is only used by LinkedHashSet.) The backing
 * HashMap instance is a LinkedHashMap with the specified initial
 * capacity and the specified load factor.
 *
 * @param      initialCapacity   the initial capacity of the hash map
 * @param      loadFactor        the load factor of the hash map
 * @param      dummy             ignored (distinguishes this
 *             constructor from other int, float constructor.)
 * @throws     IllegalArgumentException if the initial capacity is less
 *             than zero, or if the load factor is nonpositive
 */
HashSet(int initialCapacity, float loadFactor, boolean dummy) {
    map = new LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);
}
</code></pre><h2 id="bitset&#xFF08;&#x4F4D;&#x96C6;&#xFF0C;&#x5E95;&#x5C42;&#x662F;long&#x6570;&#x7EC4;&#xFF0C;&#x7528;&#x4E8E;&#x66FF;&#x4EE3;list"><a name="bitset&#xFF08;&#x4F4D;&#x96C6;&#xFF0C;&#x5E95;&#x5C42;&#x662F;long&#x6570;&#x7EC4;&#xFF0C;&#x7528;&#x4E8E;&#x66FF;&#x4EE3;list" class="plugin-anchor" href="#bitset&#xFF08;&#x4F4D;&#x96C6;&#xFF0C;&#x5E95;&#x5C42;&#x662F;long&#x6570;&#x7EC4;&#xFF0C;&#x7528;&#x4E8E;&#x66FF;&#x4EE3;list"><i class="fa fa-link" aria-hidden="true"></i></a>BitSet&#xFF08;&#x4F4D;&#x96C6;&#xFF0C;&#x5E95;&#x5C42;&#x662F;long&#x6570;&#x7EC4;&#xFF0C;&#x7528;&#x4E8E;&#x66FF;&#x4EE3;List<boolean>)</boolean></h2>
<ul>
<li>BitSet&#x662F;&#x4F4D;&#x64CD;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x503C;&#x53EA;&#x6709;0&#x6216;1&#x5373;false&#x548C;true&#xFF0C;&#x5185;&#x90E8;&#x7EF4;&#x62A4;&#x4E86;&#x4E00;&#x4E2A;long&#x6570;&#x7EC4;&#xFF0C;&#x521D;&#x59CB;&#x53EA;&#x6709;&#x4E00;&#x4E2A;long&#xFF0C;&#x6240;&#x4EE5;BitSet&#x6700;&#x5C0F;&#x7684;size&#x662F;64&#xFF08;8&#x4E2A;&#x5B57;&#x8282;64&#x4E2A;&#x4F4D;&#xFF0C;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;64&#x4E2A;&#x6570;&#x5B57;)&#xFF0C;&#x5F53;&#x968F;&#x7740;&#x5B58;&#x50A8;&#x7684;&#x5143;&#x7D20;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;BitSet&#x5185;&#x90E8;&#x4F1A;&#x52A8;&#x6001;&#x6269;&#x5145;&#xFF0C;&#x6700;&#x7EC8;&#x5185;&#x90E8;&#x662F;&#x7531;N&#x4E2A;long&#x6765;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x4E9B;&#x9488;&#x5BF9;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x900F;&#x660E;&#x7684;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;BitSet&#x7684;&#x6240;&#x6709;&#x4F4D;&#x90FD;&#x662F;false&#x5373;0&#x3002;</li>
<li>&#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</li>
<li><p>&#x7528;1&#x4F4D;&#x6765;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x662F;&#x5426;&#x51FA;&#x73B0;&#x8FC7;&#xFF0C;0&#x4E3A;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x8FC7;&#xFF0C;1&#x8868;&#x793A;&#x51FA;&#x73B0;&#x8FC7;&#x3002;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#x65E2;&#x53EF;&#x6839;&#x636E;&#x67D0;&#x4E00;&#x4E2A;&#x662F;&#x5426;&#x4E3A;0&#x8868;&#x793A;&#xFF0C;&#x6B64;&#x6570;&#x662F;&#x5426;&#x51FA;&#x73B0;&#x8FC7;&#x3002;</p>
</li>
<li><p>&#x4E00;&#x4E2A;1GB&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x6709;8<em>1024</em>1024<em>1024 = 8.58</em>10^9bit&#xFF0C;&#x4E5F;&#x5C31;&#x662F;1GB&#x7684;&#x7A7A;&#x95F4;&#x53EF;&#x4EE5;&#x8868;&#x793A;85&#x4EBF;&#x591A;&#x4E2A;&#x6570;&#x3002;</p>
</li>
<li><p>&#x5E38;&#x89C1;&#x7684;&#x5E94;&#x7528;&#x662F;&#x90A3;&#x4E9B;&#x9700;&#x8981;&#x5BF9;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x7EDF;&#x8BA1;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BD4;&#x5982;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x3001;&#x7528;&#x6237;&#x6570;&#x7EDF;&#x8BA1;&#x7B49;&#x7B49;&#xFF0C;&#x5982;&#x7EDF;&#x8BA1;40&#x4EBF;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5C06;40&#x4EBF;&#x4E2A;&#x4E0D;&#x540C;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x53BB;&#x91CD;&#x7B49;&#x7B49;&#x3002;</p>
</li>
<li><p>JDK&#x9009;&#x62E9;long&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;BitSet&#x7684;&#x5185;&#x90E8;&#x5B58;&#x50A8;&#x7ED3;&#x6784;&#x662F;&#x51FA;&#x4E8E;&#x6027;&#x80FD;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x56E0;&#x4E3A;BitSet&#x63D0;&#x4F9B;and&#x548C;or&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x4E24;&#x4E2A;BitSet&#x4E2D;&#x7684;&#x6240;&#x6709;bit&#x4F4D;&#x505A;and&#x6216;&#x8005;or&#xFF0C;&#x5B9E;&#x73B0;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x3002;&#x4F7F;&#x7528;long&#x80FD;&#x591F;&#x4F7F;&#x5F97;&#x5FAA;&#x73AF;&#x7684;&#x6B21;&#x6570;&#x964D;&#x5230;&#x6700;&#x4F4E;&#xFF0C;&#x6240;&#x4EE5;Java&#x9009;&#x62E9;&#x4F7F;&#x7528;long&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;BitSet&#x7684;&#x5185;&#x90E8;&#x5B58;&#x50A8;&#x7ED3;&#x6784;&#x3002;
BitSet()</p>
<pre><code>    &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x4F4D; set&#x3002;
</code></pre><p>BitSet(int nbits)</p>
<pre><code>    &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4F4D; set&#xFF0C;&#x5B83;&#x7684;&#x521D;&#x59CB;&#x5927;&#x5C0F;&#x8DB3;&#x4EE5;&#x663E;&#x5F0F;&#x8868;&#x793A;&#x7D22;&#x5F15;&#x8303;&#x56F4;&#x5728; 0 &#x5230; nbits-1 &#x7684;&#x4F4D;&#x3002;
</code></pre><p>void    and(BitSet set)</p>
<pre><code>    &#x5BF9;&#x6B64;&#x76EE;&#x6807;&#x4F4D; set &#x548C;&#x53C2;&#x6570;&#x4F4D; set &#x6267;&#x884C;&#x903B;&#x8F91;&#x4E0E;&#x64CD;&#x4F5C;&#x3002;
</code></pre><p>void    andNot(BitSet set)</p>
<pre><code>    &#x6E05;&#x9664;&#x6B64; BitSet &#x4E2D;&#x6240;&#x6709;&#x7684;&#x4F4D;&#xFF0C;&#x5176;&#x76F8;&#x5E94;&#x7684;&#x4F4D;&#x5728;&#x6307;&#x5B9A;&#x7684; BitSet &#x4E2D;&#x5DF2;&#x8BBE;&#x7F6E;&#x3002;
</code></pre><p>int    cardinality()</p>
<pre><code>    &#x8FD4;&#x56DE;&#x6B64; BitSet &#x4E2D;&#x8BBE;&#x7F6E;&#x4E3A; true &#x7684;&#x4F4D;&#x6570;&#x3002;
</code></pre><p>void    clear()</p>
<pre><code>    &#x5C06;&#x6B64; BitSet &#x4E2D;&#x7684;&#x6240;&#x6709;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A; false&#x3002;
</code></pre><p>void    clear(int bitIndex)</p>
<pre><code>    &#x5C06;&#x7D22;&#x5F15;&#x6307;&#x5B9A;&#x5904;&#x7684;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A; false&#x3002;
</code></pre><p>void    clear(int fromIndex, int toIndex)</p>
<pre><code>    &#x5C06;&#x6307;&#x5B9A;&#x7684; fromIndex&#xFF08;&#x5305;&#x62EC;)&#x5230;&#x6307;&#x5B9A;&#x7684; toIndex&#xFF08;&#x4E0D;&#x5305;&#x62EC;)&#x8303;&#x56F4;&#x5185;&#x7684;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A; false&#x3002;
</code></pre><p>Object    clone()</p>
<pre><code>    &#x590D;&#x5236;&#x6B64; BitSet&#xFF0C;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x4E0E;&#x4E4B;&#x76F8;&#x7B49;&#x7684;&#x65B0; BitSet&#x3002;
</code></pre><p>boolean    equals(Object obj)</p>
<pre><code>    &#x5C06;&#x6B64;&#x5BF9;&#x8C61;&#x4E0E;&#x6307;&#x5B9A;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;
</code></pre><p>void    flip(int bitIndex)</p>
<pre><code>    &#x5C06;&#x6307;&#x5B9A;&#x7D22;&#x5F15;&#x5904;&#x7684;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A;&#x5176;&#x5F53;&#x524D;&#x503C;&#x7684;&#x8865;&#x7801;&#x3002;
</code></pre><p>void    flip(int fromIndex, int toIndex)</p>
<pre><code>    &#x5C06;&#x6307;&#x5B9A;&#x7684; fromIndex&#xFF08;&#x5305;&#x62EC;)&#x5230;&#x6307;&#x5B9A;&#x7684; toIndex&#xFF08;&#x4E0D;&#x5305;&#x62EC;)&#x8303;&#x56F4;&#x5185;&#x7684;&#x6BCF;&#x4E2A;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A;&#x5176;&#x5F53;&#x524D;&#x503C;&#x7684;&#x8865;&#x7801;&#x3002;
</code></pre><p>boolean    get(int bitIndex)</p>
<pre><code>    &#x8FD4;&#x56DE;&#x6307;&#x5B9A;&#x7D22;&#x5F15;&#x5904;&#x7684;&#x4F4D;&#x503C;&#x3002;
</code></pre><p>BitSet    get(int fromIndex, int toIndex)</p>
<pre><code>    &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684; BitSet&#xFF0C;&#x5B83;&#x7531;&#x6B64; BitSet &#x4E2D;&#x4ECE; fromIndex&#xFF08;&#x5305;&#x62EC;)&#x5230; toIndex&#xFF08;&#x4E0D;&#x5305;&#x62EC;)&#x8303;&#x56F4;&#x5185;&#x7684;&#x4F4D;&#x7EC4;&#x6210;&#x3002;
</code></pre><p>int    hashCode()</p>
<pre><code>    &#x8FD4;&#x56DE;&#x6B64;&#x4F4D; set &#x7684;&#x54C8;&#x5E0C;&#x7801;&#x503C;&#x3002;
</code></pre><p>boolean    intersects(BitSet set)</p>
<pre><code>    &#x5982;&#x679C;&#x6307;&#x5B9A;&#x7684; BitSet &#x4E2D;&#x6709;&#x8BBE;&#x7F6E;&#x4E3A; true &#x7684;&#x4F4D;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6B64; BitSet &#x4E2D;&#x4E5F;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;true&#xFF0C;&#x5219;&#x8FD4;&#x56DE; ture&#x3002;
</code></pre><p>boolean    isEmpty()</p>
<pre><code>    &#x5982;&#x679C;&#x6B64; BitSet &#x4E2D;&#x6CA1;&#x6709;&#x5305;&#x542B;&#x4EFB;&#x4F55;&#x8BBE;&#x7F6E;&#x4E3A; true &#x7684;&#x4F4D;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; ture&#x3002;
</code></pre><p>int    length()</p>
<pre><code>    &#x8FD4;&#x56DE;&#x6B64; BitSet &#x7684;&#x201C;&#x903B;&#x8F91;&#x5927;&#x5C0F;&#x201D;&#xFF1A;BitSet &#x4E2D;&#x6700;&#x9AD8;&#x8BBE;&#x7F6E;&#x4F4D;&#x7684;&#x7D22;&#x5F15;&#x52A0; 1&#x3002;
</code></pre><p>int    nextClearBit(int fromIndex)</p>
<pre><code>    &#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;&#x4E3A; false &#x7684;&#x4F4D;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x8FD9;&#x53D1;&#x751F;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x8D77;&#x59CB;&#x7D22;&#x5F15;&#x6216;&#x4E4B;&#x540E;&#x7684;&#x7D22;&#x5F15;&#x4E0A;&#x3002;
</code></pre><p>int    nextSetBit(int fromIndex)</p>
<pre><code>    &#x8FD4;&#x56DE;&#x7B2C;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;&#x4E3A; true &#x7684;&#x4F4D;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x8FD9;&#x53D1;&#x751F;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x8D77;&#x59CB;&#x7D22;&#x5F15;&#x6216;&#x4E4B;&#x540E;&#x7684;&#x7D22;&#x5F15;&#x4E0A;&#x3002;
</code></pre><p>void    or(BitSet set)</p>
<pre><code>    &#x5BF9;&#x6B64;&#x4F4D; set &#x548C;&#x4F4D; set &#x53C2;&#x6570;&#x6267;&#x884C;&#x903B;&#x8F91;&#x6216;&#x64CD;&#x4F5C;&#x3002;
</code></pre><p>void    set(int bitIndex)</p>
<pre><code>    &#x5C06;&#x6307;&#x5B9A;&#x7D22;&#x5F15;&#x5904;&#x7684;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A; true&#x3002;
</code></pre><p>void    set(int bitIndex, boolean value)</p>
<pre><code>    &#x5C06;&#x6307;&#x5B9A;&#x7D22;&#x5F15;&#x5904;&#x7684;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A;&#x6307;&#x5B9A;&#x7684;&#x503C;&#x3002;
</code></pre><p>void    set(int fromIndex, int toIndex)</p>
<pre><code>    &#x5C06;&#x6307;&#x5B9A;&#x7684; fromIndex&#xFF08;&#x5305;&#x62EC;)&#x5230;&#x6307;&#x5B9A;&#x7684; toIndex&#xFF08;&#x4E0D;&#x5305;&#x62EC;)&#x8303;&#x56F4;&#x5185;&#x7684;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A; true&#x3002;
</code></pre><p>void    set(int fromIndex, int toIndex, boolean value)</p>
<pre><code>    &#x5C06;&#x6307;&#x5B9A;&#x7684; fromIndex&#xFF08;&#x5305;&#x62EC;)&#x5230;&#x6307;&#x5B9A;&#x7684; toIndex&#xFF08;&#x4E0D;&#x5305;&#x62EC;)&#x8303;&#x56F4;&#x5185;&#x7684;&#x4F4D;&#x8BBE;&#x7F6E;&#x4E3A;&#x6307;&#x5B9A;&#x7684;&#x503C;&#x3002;
</code></pre><p>int    size()</p>
<pre><code>    &#x8FD4;&#x56DE;&#x6B64; BitSet &#x8868;&#x793A;&#x4F4D;&#x503C;&#x65F6;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x7A7A;&#x95F4;&#x7684;&#x4F4D;&#x6570;&#x3002;
</code></pre><p>String    toString()</p>
<pre><code>    &#x8FD4;&#x56DE;&#x6B64;&#x4F4D; set &#x7684;&#x5B57;&#x7B26;&#x4E32;&#x8868;&#x793A;&#x5F62;&#x5F0F;&#x3002;
</code></pre><p>void    xor(BitSet set)</p>
<pre><code>    &#x5BF9;&#x6B64;&#x4F4D; set &#x548C;&#x4F4D; set &#x53C2;&#x6570;&#x6267;&#x884C;&#x903B;&#x8F91;&#x5F02;&#x6216;&#x64CD;&#x4F5C;&#x3002;
</code></pre></li>
</ul>
<h3 id="&#x53BB;&#x91CD;&#x793A;&#x4F8B;"><a name="&#x53BB;&#x91CD;&#x793A;&#x4F8B;" class="plugin-anchor" href="#&#x53BB;&#x91CD;&#x793A;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x53BB;&#x91CD;&#x793A;&#x4F8B;</h3>
<pre><code>public static void containChars(String str) {
    BitSet used = new BitSet();
    for (int i = 0; i &lt; str.length(); i++)
        used.set(str.charAt(i)); // set bit for char  
    StringBuilder sb = new StringBuilder();
    sb.append(&quot;[&quot;);
    int size = used.size();
    for (int i = 0; i &lt; size; i++) {
        if (used.get(i)) {
            sb.append((char) i);
        }
    }
    sb.append(&quot;]&quot;);
    System.out.println(sb.toString());
}

public static void main(String[] args) {
    containChars(&quot;abcdfab&quot;);
}
</code></pre><ul>
<li>[abcdf]</li>
</ul>
<h3 id="&#x6392;&#x5E8F;&#x793A;&#x4F8B;"><a name="&#x6392;&#x5E8F;&#x793A;&#x4F8B;" class="plugin-anchor" href="#&#x6392;&#x5E8F;&#x793A;&#x4F8B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6392;&#x5E8F;&#x793A;&#x4F8B;</h3>
<pre><code>public static void sortArray(int[] array) {

    BitSet bitSet = new BitSet(2 &lt;&lt; 13);
    // &#x867D;&#x7136;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x6269;&#x5BB9;&#xFF0C;&#x4F46;&#x5C3D;&#x91CF;&#x5728;&#x6784;&#x9020;&#x65F6;&#x6307;&#x5B9A;&#x4F30;&#x7B97;&#x5927;&#x5C0F;,&#x9ED8;&#x8BA4;&#x4E3A;64  
    System.out.println(&quot;BitSet size: &quot; + bitSet.size());

    for (int i = 0; i &lt; array.length; i++) {
        bitSet.set(array[i]);
    }
    //&#x5254;&#x9664;&#x91CD;&#x590D;&#x6570;&#x5B57;&#x540E;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;  
    int bitLen = bitSet.cardinality();

    //&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x5373;&#x628A;bit&#x4E3A;true&#x7684;&#x5143;&#x7D20;&#x590D;&#x5236;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;  
    int[] orderedArray = new int[bitLen];
    int k = 0;
    for (int i = bitSet.nextSetBit(0); i &gt;= 0; i = bitSet.nextSetBit(i + 1)) {
        orderedArray[k++] = i;
    }

    System.out.println(&quot;After ordering: &quot;);
    for (int i = 0; i &lt; bitLen; i++) {
        System.out.print(orderedArray[i] + &quot;\t&quot;);
    }
}

public static void main(String[] args) {
    int[] array = new int[]{423, 700, 9999, 2323, 356, 6400, 1, 2, 3, 2, 2, 2, 2};
    sortArray(array);
}
</code></pre><ul>
<li>BitSet size: 16384</li>
<li>After ordering: </li>
<li>1    2    3    356    423    700    2323    6400    9999    </li>
</ul>
<h2 id="copyonwritearrayset&#xFF08;&#x5E95;&#x5C42;&#x662F;copyonwritearraylist"><a name="copyonwritearrayset&#xFF08;&#x5E95;&#x5C42;&#x662F;copyonwritearraylist" class="plugin-anchor" href="#copyonwritearrayset&#xFF08;&#x5E95;&#x5C42;&#x662F;copyonwritearraylist"><i class="fa fa-link" aria-hidden="true"></i></a>CopyOnWriteArraySet&#xFF08;&#x5E95;&#x5C42;&#x662F;CopyOnWriteArrayList)</h2>
<ul>
<li>&#x57FA;&#x4E8E;CopyOnWriteArrayList&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x552F;&#x4E00;&#x7684;&#x4E0D;&#x540C;&#x662F;&#x5728;add&#x65F6;&#x8C03;&#x7528;&#x7684;&#x662F;CopyOnWriteArrayList&#x7684;addIfAbsent&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x5728;&#x6BCF;&#x6B21;add&#x7684;&#x65F6;&#x5019;&#x90FD;&#x8981;&#x8FDB;&#x884C;&#x6570;&#x7EC4;&#x7684;&#x904D;&#x5386;&#xFF0C;&#x56E0;&#x6B64;&#x5176;&#x6027;&#x80FD;&#x4F1A;&#x7565;&#x4F4E;&#x4E8E;CopyOnWriteArrayList&#x3002;<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
<pre><code>private final CopyOnWriteArrayList&lt;E&gt; al;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public CopyOnWriteArraySet() {
    al = new CopyOnWriteArrayList&lt;E&gt;();
}
</code></pre><h3 id="&#x6DFB;&#x52A0;"><a name="&#x6DFB;&#x52A0;" class="plugin-anchor" href="#&#x6DFB;&#x52A0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0;</h3>
<pre><code>public boolean add(E e) {
    return al.addIfAbsent(e);
}
</code></pre><h3 id="&#x5220;&#x9664;"><a name="&#x5220;&#x9664;" class="plugin-anchor" href="#&#x5220;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5220;&#x9664;</h3>
<pre><code>public boolean remove(Object o) {
    return al.remove(o);
}
</code></pre><h3 id="&#x904D;&#x5386;"><a name="&#x904D;&#x5386;" class="plugin-anchor" href="#&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;</h3>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return al.iterator();
}
</code></pre><h3 id="&#x5305;&#x542B;"><a name="&#x5305;&#x542B;" class="plugin-anchor" href="#&#x5305;&#x542B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5305;&#x542B;</h3>
<pre><code>public boolean contains(Object o) {
    return al.contains(o);
}
</code></pre><ul>
<li><h1 id="34-queue"><a name="34-queue" class="plugin-anchor" href="#34-queue"><i class="fa fa-link" aria-hidden="true"></i></a>3.4 Queue</h1>
</li>
<li>&#x5148;&#x8FDB;&#x5148;&#x51FA;&#x201D;&#xFF08;FIFO&#x2014;first in first out)&#x7684;&#x7EBF;&#x6027;&#x8868;</li>
<li>LinkedList&#x7C7B;&#x5B9E;&#x73B0;&#x4E86;Queue&#x63A5;&#x53E3;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;LinkedList&#x5F53;&#x6210;Queue&#x6765;&#x7528;&#x3002;</li>
<li><p>Java&#x91CC;&#x6709;&#x4E00;&#x4E2A;&#x53EB;&#x505A;Stack&#x7684;&#x7C7B;&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x53EB;&#x505A;Queue&#x7684;&#x7C7B;&#xFF08;&#x5B83;&#x662F;&#x4E2A;&#x63A5;&#x53E3;&#x540D;&#x5B57;)&#x3002;&#x5F53;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6808;&#x65F6;&#xFF0C;Java&#x5DF2;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;Stack&#xFF0C;&#x800C;&#x662F;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x66F4;&#x9AD8;&#x6548;&#x7684;ArrayDeque&#xFF1B;&#x65E2;&#x7136;Queue&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x961F;&#x5217;&#x65F6;&#x4E5F;&#x5C31;&#x9996;&#x9009;ArrayDeque&#x4E86;&#xFF08;&#x6B21;&#x9009;&#x662F;LinkedList)&#x3002;</p>
</li>
<li></li>
<li><p>Deque&#x65E2;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x6808;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x961F;&#x5217;&#x4F7F;&#x7528;&#x3002;
Queue Method    Equivalent Deque Method    &#x8BF4;&#x660E;
add(e)    addLast(e)    &#x5411;&#x961F;&#x5C3E;&#x63D2;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;
remove()    removeFirst()    &#x83B7;&#x53D6;&#x5E76;&#x5220;&#x9664;&#x961F;&#x9996;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;</p>
</li>
</ul>
<p>element()    getFirst()    &#x83B7;&#x53D6;&#x4F46;&#x4E0D;&#x5220;&#x9664;&#x961F;&#x9996;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;
offer(e)    offerLast(e)    &#x5411;&#x961F;&#x5C3E;&#x63D2;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x8FD4;&#x56DE;false
poll()    pollFirst()    &#x83B7;&#x53D6;&#x5E76;&#x5220;&#x9664;&#x961F;&#x9996;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x8FD4;&#x56DE;null
peek()    peekFirst()    &#x83B7;&#x53D6;&#x4F46;&#x4E0D;&#x5220;&#x9664;&#x961F;&#x9996;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x8FD4;&#x56DE;null</p>
<p>Stack Method    Equivalent Deque Method    &#x8BF4;&#x660E;
push(e)    addFirst(e)    &#x5411;&#x6808;&#x9876;&#x63D2;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;
&#x65E0;    offerFirst(e)    &#x5411;&#x6808;&#x9876;&#x63D2;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x8FD4;&#x56DE;false
pop()    removeFirst()    &#x83B7;&#x53D6;&#x5E76;&#x5220;&#x9664;&#x6808;&#x9876;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;
&#x65E0;    pollFirst()    &#x83B7;&#x53D6;&#x5E76;&#x5220;&#x9664;&#x6808;&#x9876;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x8FD4;&#x56DE;null
peek()    peekFirst()    &#x83B7;&#x53D6;&#x4F46;&#x4E0D;&#x5220;&#x9664;&#x6808;&#x9876;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;
&#x65E0;    peekFirst()    &#x83B7;&#x53D6;&#x4F46;&#x4E0D;&#x5220;&#x9664;&#x6808;&#x9876;&#x5143;&#x7D20;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x8FD4;&#x56DE;null</p>
<ul>
<li><p>ArrayDeque&#x548C;LinkedList&#x662F;Deque&#x7684;&#x4E24;&#x4E2A;&#x901A;&#x7528;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
<li></li>
</ul>
<h2 id="1arraydeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#xFF0C;&#x6709;&#x754C;&#x961F;&#x5217;"><a name="1arraydeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#xFF0C;&#x6709;&#x754C;&#x961F;&#x5217;" class="plugin-anchor" href="#1arraydeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#xFF0C;&#x6709;&#x754C;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>1)ArrayDeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#xFF0C;&#x6709;&#x754C;&#x961F;&#x5217;)</h2>
<ul>
<li>head&#x6307;&#x5411;&#x9996;&#x7AEF;&#x7B2C;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x5143;&#x7D20;&#xFF0C;tail&#x6307;&#x5411;&#x5C3E;&#x7AEF;&#x7B2C;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x7684;&#x7A7A;&#x4F4D;&#x3002;&#x56E0;&#x4E3A;&#x662F;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#xFF0C;&#x6240;&#x4EE5;head&#x4E0D;&#x4E00;&#x5B9A;&#x603B;&#x7B49;&#x4E8E;0&#xFF0C;tail&#x4E5F;&#x4E0D;&#x4E00;&#x5B9A;&#x603B;&#x662F;&#x6BD4;head&#x5927;&#x3002;<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
<pre><code>transient Object[] elements; // non-private to simplify nested class access
transient int head;
transient int tail;
private static final int MIN_INITIAL_CAPACITY = 8;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public ArrayDeque() {
    elements = new Object[16];
}
</code></pre><pre><code>public ArrayDeque(int numElements) {
    allocateElements(numElements);
}
</code></pre><pre><code>/**
 * Allocates empty array to hold the given number of elements.
 *
 * @param numElements  the number of elements to hold
 */
private void allocateElements(int numElements) {
    int initialCapacity = MIN_INITIAL_CAPACITY;
    // Find the best power of two to hold elements.
    // Tests &quot;&lt;=&quot; because arrays aren&apos;t kept full.
    if (numElements &gt;= initialCapacity) {
        initialCapacity = numElements;
        initialCapacity |= (initialCapacity &gt;&gt;&gt;  1);
        initialCapacity |= (initialCapacity &gt;&gt;&gt;  2);
        initialCapacity |= (initialCapacity &gt;&gt;&gt;  4);
        initialCapacity |= (initialCapacity &gt;&gt;&gt;  8);
        initialCapacity |= (initialCapacity &gt;&gt;&gt; 16);
        initialCapacity++;

        if (initialCapacity &lt; 0)   // Too many elements, must back off
            initialCapacity &gt;&gt;&gt;= 1;// Good luck allocating 2 ^ 30 elements
    }
    elements = new Object[initialCapacity];
}
</code></pre><ul>
<li><h3 id="&#x6269;&#x5BB9;"><a name="&#x6269;&#x5BB9;" class="plugin-anchor" href="#&#x6269;&#x5BB9;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9;</h3>
</li>
</ul>
<pre><code>/**
 * Doubles the capacity of this deque.  Call only when full, i.e.,
 * when head and tail have wrapped around to become equal.
 */
private void doubleCapacity() {
    assert head == tail;
    int p = head;
    int n = elements.length;
    int r = n - p; // number of elements to the right of p
    int newCapacity = n &lt;&lt; 1;
    if (newCapacity &lt; 0)
        throw new IllegalStateException(&quot;Sorry, deque too big&quot;);
    Object[] a = new Object[newCapacity];
    System.arraycopy(elements, p, a, 0, r);
    System.arraycopy(elements, 0, a, r, p);
    elements = a;
    head = 0;
    tail = n;
}
</code></pre><h3 id="offer"><a name="offer" class="plugin-anchor" href="#offer"><i class="fa fa-link" aria-hidden="true"></i></a>offer</h3>
<pre><code>public boolean offer(E e) {
    return offerLast(e);
}
</code></pre><pre><code>public boolean offerLast(E e) {
    addLast(e);
    return true;
}
</code></pre><pre><code>public void addLast(E e) {
    if (e == null)
        throw new NullPointerException();
    elements[tail] = e;
    if ( (tail = (tail + 1) &amp; (elements.length - 1)) == head)
        doubleCapacity();
}
</code></pre><h3 id="poll"><a name="poll" class="plugin-anchor" href="#poll"><i class="fa fa-link" aria-hidden="true"></i></a>poll</h3>
<pre><code>public E poll() {
    return pollFirst();
}
</code></pre><pre><code>public E pollFirst() {
    int h = head;
    @SuppressWarnings(&quot;unchecked&quot;)
    E result = (E) elements[h];
    // Element is null if deque empty
    if (result == null)
        return null;
    elements[h] = null;     // Must null out slot
    head = (h + 1) &amp; (elements.length - 1);
    return result;
}
</code></pre><h3 id="peek"><a name="peek" class="plugin-anchor" href="#peek"><i class="fa fa-link" aria-hidden="true"></i></a>peek</h3>
<pre><code>public E peek() {
    return peekFirst();
}
</code></pre><pre><code>public E peekFirst() {
    // elements[head] is null if deque empty
    return (E) elements[head];
}
</code></pre><ul>
<li><h2 id="concurrentlinkedqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;cas&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;"><a name="concurrentlinkedqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;cas&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;" class="plugin-anchor" href="#concurrentlinkedqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;cas&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>ConcurrentLinkedQueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;CAS&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;)</h2>
</li>
<li><p>ConcurrentLinkedQueue&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x94FE;&#x63A5;&#x8282;&#x70B9;&#x7684;&#x65E0;&#x754C;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x961F;&#x5217;&#xFF0C;&#x5B83;&#x91C7;&#x7528;&#x5148;&#x8FDB;&#x5148;&#x51FA;&#x7684;&#x89C4;&#x5219;&#x5BF9;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;&#x7684;&#x5C3E;&#x90E8;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x8FD4;&#x56DE;&#x961F;&#x5217;&#x5934;&#x90E8;&#x7684;&#x5143;&#x7D20;&#x3002;&#x5B83;&#x91C7;&#x7528;&#x4E86;&#x201C;wait&#xFF0D;free&#x201D;&#x7B97;&#x6CD5;&#xFF08;&#x975E;&#x963B;&#x585E;)&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
<li><p>1 . &#x4F7F;&#x7528; CAS &#x539F;&#x5B50;&#x6307;&#x4EE4;&#x6765;&#x5904;&#x7406;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#xFF0C;&#x8FD9;&#x662F;&#x975E;&#x963B;&#x585E;&#x7B97;&#x6CD5;&#x5F97;&#x4EE5;&#x5B9E;&#x73B0;&#x7684;&#x57FA;&#x7840;&#x3002; </p>
</li>
<li><ol>
<li>head/tail &#x5E76;&#x975E;&#x603B;&#x662F;&#x6307;&#x5411;&#x961F;&#x5217;&#x7684;&#x5934; / &#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5141;&#x8BB8;&#x961F;&#x5217;&#x5904;&#x4E8E;&#x4E0D;&#x4E00;&#x81F4;&#x72B6;&#x6001;&#x3002; &#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x628A;&#x5165;&#x961F; / &#x51FA;&#x961F;&#x65F6;&#xFF0C;&#x539F;&#x672C;&#x9700;&#x8981;&#x4E00;&#x8D77;&#x539F;&#x5B50;&#x5316;&#x6267;&#x884C;&#x7684;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#x5206;&#x79BB;&#x5F00;&#x6765;&#xFF0C;&#x4ECE;&#x800C;&#x7F29;&#x5C0F;&#x4E86;&#x5165;&#x961F; / &#x51FA;&#x961F;&#x65F6;&#x9700;&#x8981;&#x539F;&#x5B50;&#x5316;&#x66F4;&#x65B0;&#x503C;&#x7684;&#x8303;&#x56F4;&#x5230;&#x552F;&#x4E00;&#x53D8;&#x91CF;&#x3002;&#x8FD9;&#x662F;&#x975E;&#x963B;&#x585E;&#x7B97;&#x6CD5;&#x5F97;&#x4EE5;&#x5B9E;&#x73B0;&#x7684;&#x5173;&#x952E;&#x3002; </li>
</ol>
</li>
<li><ol>
<li>&#x4EE5;&#x6279;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x6765;&#x66F4;&#x65B0;head/tail&#xFF0C;&#x4ECE;&#x6574;&#x4F53;&#x4E0A;&#x51CF;&#x5C11;&#x5165;&#x961F; / &#x51FA;&#x961F;&#x64CD;&#x4F5C;&#x7684;&#x5F00;&#x9500;&#x3002;</li>
</ol>
</li>
<li><ol>
<li>ConcurrentLinkedQueue&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x662F;&#x5F31;&#x4E00;&#x81F4;&#x6027;&#x7684;&#xFF0C;&#x8FD9;&#x5728;&#x5E76;&#x53D1;&#x5BB9;&#x5668;&#x4E2D;&#x662F;&#x6BD4;&#x8F83;&#x666E;&#x904D;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x6307;&#x5728;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x904D;&#x5386;&#x961F;&#x5217;&#x7ED3;&#x70B9;&#x800C;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5C1D;&#x8BD5;&#x5BF9;&#x67D0;&#x4E2A;&#x961F;&#x5217;&#x7ED3;&#x70B9;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x7684;&#x8BDD;&#x4E0D;&#x4F1A;&#x629B;&#x51FA;ConcurrentModificationException&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x9020;&#x6210;&#x5728;&#x904D;&#x5386;&#x67D0;&#x4E2A;&#x5C1A;&#x672A;&#x88AB;&#x4FEE;&#x6539;&#x7684;&#x7ED3;&#x70B9;&#x65F6;&#xFF0C;&#x5728;next&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x65F6;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8BE5;&#x7ED3;&#x70B9;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x4F46;&#x5728;&#x904D;&#x5386;&#x540E;&#x518D;&#x5BF9;&#x8BE5;&#x7ED3;&#x70B9;&#x4FEE;&#x6539;&#x65F6;&#x5C31;&#x770B;&#x4E0D;&#x5230;&#x8FD9;&#x79CD;&#x53D8;&#x5316;&#x3002;</li>
</ol>
</li>
<li><ol>
<li>&#x5728;&#x5165;&#x961F;&#x65F6;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x4E2D;&#x7684;next&#x57DF;&#x4E3A;null</li>
</ol>
</li>
<li><ol>
<li>&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x672A;&#x5220;&#x9664;&#x7ED3;&#x70B9;&#x7684;item&#x57DF;&#x4E0D;&#x80FD;&#x4E3A;null&#x4E14;&#x4ECE;head&#x90FD;&#x53EF;&#x4EE5;&#x5728;O(N)&#x65F6;&#x95F4;&#x5185;&#x904D;&#x5386;&#x5230;</li>
</ol>
</li>
<li><ol>
<li>&#x5BF9;&#x4E8E;&#x8981;&#x5220;&#x9664;&#x7684;&#x7ED3;&#x70B9;&#xFF0C;&#x4E0D;&#x662F;&#x5C06;&#x5176;&#x5F15;&#x7528;&#x76F4;&#x63A5;&#x7F6E;&#x4E3A;&#x7A7A;&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x5176;&#x7684;item&#x57DF;&#x5148;&#x7F6E;&#x4E3A;null(&#x8FED;&#x4EE3;&#x5668;&#x5728;&#x904D;&#x5386;&#x662F;&#x4F1A;&#x8DF3;&#x8FC7;item&#x4E3A;null&#x7684;&#x7ED3;&#x70B9;)</li>
</ol>
</li>
<li><ol>
<li>&#x5141;&#x8BB8;head&#x548C;tail&#x6EDE;&#x540E;&#x66F4;&#x65B0;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0A;&#x6587;&#x63D0;&#x5230;&#x7684;head/tail&#x5E76;&#x975E;&#x603B;&#x662F;&#x6307;&#x5411;&#x961F;&#x5217;&#x7684;&#x5934; / &#x5C3E;&#x8282;&#x70B9;&#xFF08;&#x8FD9;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;CAS&#x6307;&#x4EE4;&#x6267;&#x884C;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4F1A;&#x589E;&#x52A0;volatile&#x8BFB;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x6D88;&#x8017;&#x8F83;&#x5C0F;)&#x3002;&#x5177;&#x4F53;&#x800C;&#x8A00;&#x5C31;&#x662F;&#xFF0C;&#x5F53;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#xFF0C;&#x4F1A;&#x68C0;&#x6D4B;tail&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x4E4B;&#x95F4;&#x7684;&#x8DDD;&#x79BB;&#x662F;&#x5426;&#x5728;&#x4E24;&#x4E2A;&#x7ED3;&#x70B9;&#x53CA;&#x4EE5;&#x4E0A;(&#x5185;&#x90E8;&#x79F0;&#x4E4B;&#x4E3A;hop)&#xFF1B;&#x800C;&#x5728;&#x51FA;&#x961F;&#x65F6;&#xFF0C;&#x5BF9;head&#x7684;&#x68C0;&#x6D4B;&#x5C31;&#x662F;&#x4E0E;&#x961F;&#x5217;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x7684;&#x8DDD;&#x79BB;&#x662F;&#x5426;&#x8FBE;&#x5230;&#x4E24;&#x4E2A;&#xFF0C;&#x6709;&#x5219;&#x5C06;head&#x6307;&#x5411;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x5E76;&#x5C06;head&#x539F;&#x6765;&#x6307;&#x5411;&#x7684;&#x7ED3;&#x70B9;&#x7684;next&#x57DF;&#x6307;&#x5411;&#x81EA;&#x5DF1;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x65AD;&#x5F00;&#x4E0E;&#x961F;&#x5217;&#x7684;&#x8054;&#x7CFB;&#x4ECE;&#x800C;&#x5E2E;&#x52A9;GC</li>
</ol>
</li>
<li><p>head&#x8282;&#x70B9;&#x5E76;&#x4E0D;&#x662F;&#x603B;&#x6307;&#x5411;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#xFF0C;tail&#x4E5F;&#x5E76;&#x4E0D;&#x662F;&#x603B;&#x6307;&#x5411;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>
</li>
<li><p>&#x6E90;&#x7801;&#x8FC7;&#x4E8E;&#x590D;&#x6742;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x8DF3;&#x8FC7;&#x3002;</p>
</li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>private transient volatile Node&lt;E&gt; head;
private transient volatile Node&lt;E&gt; tail;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public ConcurrentLinkedQueue() {
    head = tail = new Node&lt;E&gt;(null);
}
</code></pre><ul>
<li>Node#CAS&#x64CD;&#x4F5C;</li>
<li>&#x5728;obj&#x7684;offset&#x4F4D;&#x7F6E;&#x6BD4;&#x8F83;object field&#x548C;&#x671F;&#x671B;&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x76F8;&#x540C;&#x5219;&#x66F4;&#x65B0;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x64CD;&#x4F5C;&#x5E94;&#x8BE5;&#x662F;&#x539F;&#x5B50;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x65B9;&#x5F0F;&#x66F4;&#x65B0;object field&#x3002;</li>
</ul>
<ul>
<li>&#x5982;&#x679C;node&#x7684;next&#x503C;&#x4E3A;cmp&#xFF0C;&#x5219;&#x5C06;&#x5176;&#x66F4;&#x65B0;&#x4E3A;val</li>
<li><p>boolean casNext(Node<e> cmp, Node<e> val) {
  return UNSAFE.compareAndSwapObject(this, nextOffset, cmp, val);
}</e></e></p>
</li>
<li><p>boolean casItem(E cmp, E val) {
  return UNSAFE.compareAndSwapObject(this, itemOffset, cmp, val);
}</p>
</li>
</ul>
<pre><code>private boolean casHead(Node&lt;E&gt; cmp, Node&lt;E&gt; val) {
    return UNSAFE.compareAndSwapObject(this, headOffset, cmp, val);
}
</code></pre><ul>
<li>void lazySetNext(Node<e> val) {
  UNSAFE.putOrderedObject(this, nextOffset, val);
}</e></li>
</ul>
<h3 id="offer&#xFF08;&#x65E0;&#x9501;"><a name="offer&#xFF08;&#x65E0;&#x9501;" class="plugin-anchor" href="#offer&#xFF08;&#x65E0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>offer&#xFF08;&#x65E0;&#x9501;)</h3>
<pre><code>/**
 * Inserts the specified element at the tail of this queue.
 * As the queue is unbounded, this method will never return {@code false}.
 *
 * @return {@code true} (as specified by {@link Queue#offer})
 * @throws NullPointerException if the specified element is null
 */
public boolean offer(E e) {
    checkNotNull(e);
    final Node&lt;E&gt; newNode = new Node&lt;E&gt;(e);

    for (Node&lt;E&gt; t = tail, p = t;;) {
        Node&lt;E&gt; q = p.next;
</code></pre><ul>
<li>// q/p.next/tail.next&#x4E3A;null&#xFF0C;&#x5219;&#x8BF4;&#x660E;p&#x662F;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x63D2;&#x5165;<pre><code>  if (q == null) {
      // CAS&#x63D2;&#x5165; p.next = newNode&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x6210;&#x529F;
</code></pre></li>
<li>// &#x6B64;&#x65F6; tail.next = newNode<pre><code>      if (p.casNext(null, newNode)) {
</code></pre></li>
<li>// CAS&#x6210;&#x529F;&#x8BF4;&#x660E;&#x65B0;&#x8282;&#x70B9;&#x5DF2;&#x7ECF;&#x653E;&#x5165;&#x94FE;&#x8868; </li>
<li>// &#x5982;&#x679C;p&#x4E0D;&#x4E3A;t&#xFF0C;&#x8BF4;&#x660E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x662F;&#x4E4B;&#x524D;CAS&#x5931;&#x8D25;&#x540E;&#x53C8;&#x91CD;&#x8BD5;CAS&#x6210;&#x529F;&#x7684;&#xFF0C;tail = newNode<pre><code>          if (p != t) // hop two nodes at a time
</code></pre></li>
<li>casTail(t, newNode);  // Failure is OK.<pre><code>         return true;
     }
     // Lost CAS race to another thread; re-read next
 }
 else if (p == q)
</code></pre></li>
<li>//&#x591A;&#x7EBF;&#x7A0B;&#x64CD;&#x4F5C;&#x65F6;&#x5019;&#xFF0C;&#x7531;&#x4E8E;poll&#x65F6;&#x5019;&#x4F1A;&#x628A;&#x8001;&#x7684;head&#x53D8;&#x4E3A;&#x81EA;&#x5F15;&#x7528;&#xFF0C;&#x7136;&#x540E;head&#x7684;next&#x53D8;&#x4E3A;&#x65B0;head&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x627E;&#x65B0;&#x7684;head&#xFF0C;&#x56E0;&#x4E3A;&#x65B0;&#x7684;head&#x540E;&#x9762;&#x7684;&#x8282;&#x70B9;&#x624D;&#x662F;&#x6FC0;&#x6D3B;&#x7684;&#x8282;&#x70B9;<pre><code>      // p = head , t = tail
</code></pre></li>
<li>p = (t != (t = tail)) ? t : head;<pre><code>  else
</code></pre></li>
<li>// &#x5BF9;&#x4E0A;&#x4E00;&#x6B21;CAS&#x5931;&#x8D25;&#x7684;&#x7EBF;&#x7A0B;&#x800C;&#x8A00;&#xFF0C;t.next/p.next/tail.next/q &#x4E0D;&#x662F;null&#x4E86;</li>
<li>// &#x526F;&#x4F5C;&#x7528;&#x662F;p = q&#xFF0C;p&#x548C;q&#x90FD;&#x6307;&#x5411;&#x4E86;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x6B21;&#x5FAA;&#x73AF;<pre><code>      p = (p != t &amp;&amp; t != (t = tail)) ? t : q;
</code></pre>  }
}</li>
</ul>
<h3 id="poll&#xFF08;&#x65E0;&#x9501;"><a name="poll&#xFF08;&#x65E0;&#x9501;" class="plugin-anchor" href="#poll&#xFF08;&#x65E0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>poll&#xFF08;&#x65E0;&#x9501;)</h3>
<pre><code>public E poll() {
    restartFromHead:
    for (;;) {
        for (Node&lt;E&gt; h = head, p = h, q;;) {
</code></pre><ul>
<li>// &#x4FDD;&#x5B58;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7684;&#x503C;<pre><code>      E item = p.item;
      // &#x5F53;&#x524D;&#x8282;&#x70B9;&#x6709;&#x503C;&#x5219;CAS&#x7F6E;&#x4E3A;null, p.item = null
      if (item != null &amp;&amp; p.casItem(item, null)) {
</code></pre></li>
<li>// CAS&#x6210;&#x529F;&#x4EE3;&#x8868;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x5DF2;&#x7ECF;&#x4ECE;&#x94FE;&#x8868;&#x4E2D;&#x79FB;&#x9664;</li>
<li><pre><code>          if (p != h) // hop two nodes at a time
              updateHead(h, ((q = p.next) != null) ? q : p);
          return item;
      } // &#x5F53;&#x524D;&#x961F;&#x5217;&#x4E3A;&#x7A7A;&#x65F6;&#x5219;&#x8FD4;&#x56DE;null
      else if ((q = p.next) == null) {
          updateHead(h, p);
          return null;
      } // &#x81EA;&#x5F15;&#x7528;&#x4E86;&#xFF0C;&#x5219;&#x91CD;&#x65B0;&#x627E;&#x65B0;&#x7684;&#x961F;&#x5217;&#x5934;&#x8282;&#x70B9;
      else if (p == q)
          continue restartFromHead;
      else
          p = q;
  }
</code></pre><p>  }
}</p>
</li>
<li><p>final void updateHead(Node<e> h, Node<e> p) {
  if (h != p &amp;&amp; casHead(h, p))</e></e></p>
<pre><code>  h.lazySetNext(h);
</code></pre><p>}</p>
</li>
</ul>
<h3 id="peek&#xFF08;&#x65E0;&#x9501;"><a name="peek&#xFF08;&#x65E0;&#x9501;" class="plugin-anchor" href="#peek&#xFF08;&#x65E0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>peek&#xFF08;&#x65E0;&#x9501;)</h3>
<pre><code>public E peek() {
    restartFromHead:
    for (;;) {
        for (Node&lt;E&gt; h = head, p = h, q;;) {
            E item = p.item;
            if (item != null || (q = p.next) == null) {
                updateHead(h, p);
                return item;
            }
            else if (p == q)
                continue restartFromHead;
            else
                p = q;
        }
    }
}
</code></pre><h3 id="size&#xFF08;&#x904D;&#x5386;&#x8BA1;&#x7B97;&#x5927;&#x5C0F;&#xFF0C;&#x6548;&#x7387;&#x4F4E;"><a name="size&#xFF08;&#x904D;&#x5386;&#x8BA1;&#x7B97;&#x5927;&#x5C0F;&#xFF0C;&#x6548;&#x7387;&#x4F4E;" class="plugin-anchor" href="#size&#xFF08;&#x904D;&#x5386;&#x8BA1;&#x7B97;&#x5927;&#x5C0F;&#xFF0C;&#x6548;&#x7387;&#x4F4E;"><i class="fa fa-link" aria-hidden="true"></i></a>size&#xFF08;&#x904D;&#x5386;&#x8BA1;&#x7B97;&#x5927;&#x5C0F;&#xFF0C;&#x6548;&#x7387;&#x4F4E;)</h3>
<pre><code>public int size() {
    int count = 0;
    for (Node&lt;E&gt; p = first(); p != null; p = succ(p))
        if (p.item != null)
            // Collection.size() spec says to max out
            if (++count == Integer.MAX_VALUE)
                break;
    return count;
}
</code></pre><ul>
<li><h3 id="concurrentlinkeddeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;cas&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;"><a name="concurrentlinkeddeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;cas&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;" class="plugin-anchor" href="#concurrentlinkeddeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;cas&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>ConcurrentLinkedDeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x57FA;&#x4E8E;CAS&#x7684;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;)</h3>
<h2 id="2priorityqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x903B;&#x8F91;&#x4E0A;&#x662F;&#x5C0F;&#x9876;&#x5806;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;"><a name="2priorityqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x903B;&#x8F91;&#x4E0A;&#x662F;&#x5C0F;&#x9876;&#x5806;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;" class="plugin-anchor" href="#2priorityqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x903B;&#x8F91;&#x4E0A;&#x662F;&#x5C0F;&#x9876;&#x5806;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>2)PriorityQueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x903B;&#x8F91;&#x4E0A;&#x662F;&#x5C0F;&#x9876;&#x5806;&#xFF0C;&#x65E0;&#x754C;&#x961F;&#x5217;)</h2>
</li>
<li>PriorityQueue&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x201C;&#x5806;&#x201D;&#xFF0C;&#x5806;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x6027;&#x8D28;&#xFF1A;</li>
<li><p>&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x503C;&#x603B;&#x662F;&#x4E0D;&#x5927;&#x4E8E;&#xFF08;&#x6700;&#x5927;&#x5806;)&#x6216;&#x8005;&#x4E0D;&#x5C0F;&#x4E8E;&#xFF08;&#x6700;&#x5C0F;&#x5806;)&#x5176;&#x7236;&#x8282;&#x70B9;&#x7684;&#x503C;&#xFF1B;&#x5806;&#x662F;&#x4E00;&#x68F5;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;</p>
<ul>
<li><p>&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x7684;&#x4E8C;&#x53C9;&#x5806;&#xFF0C;&#x5BF9;&#x4E8E;&#x6570;&#x7EC4;&#x4E2D;&#x4EFB;&#x610F;&#x4F4D;&#x7F6E;&#x7684;n&#x4E0A;&#x5143;&#x7D20;&#xFF0C;&#x5176;&#x5DE6;&#x5B69;&#x5B50;&#x5728;[2n+1]&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x53F3;&#x5B69;&#x5B50;[2(n+1)]&#x4F4D;&#x7F6E;&#xFF0C;&#x5B83;&#x7684;&#x7236;&#x4EB2;&#x5219;&#x5728;[(n-1)/2]&#x4E0A;&#xFF0C;&#x800C;&#x6839;&#x7684;&#x4F4D;&#x7F6E;&#x5219;&#x662F;[0]&#x3002;</p>
</li>
<li><p>1)&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;remove()&#x65B9;&#x6CD5;&#x548C;add()&#x65B9;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(logn)&#xFF0C;remove(Object obj)&#x548C;contains()&#x65B9;&#x6CD5;&#x9700;&#x8981;O(n)&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x53D6;&#x961F;&#x5934;&#x5219;&#x9700;&#x8981;O(1)&#x65F6;&#x95F4;</p>
</li>
<li>2)&#x5728;&#x521D;&#x59CB;&#x5316;&#x9636;&#x6BB5;&#x4F1A;&#x6267;&#x884C;&#x5EFA;&#x5806;&#x51FD;&#x6570;&#xFF0C;&#x6700;&#x7EC8;&#x5EFA;&#x7ACB;&#x7684;&#x662F;&#x6700;&#x5C0F;&#x5806;&#xFF0C;&#x6BCF;&#x6B21;&#x51FA;&#x961F;&#x548C;&#x5165;&#x961F;&#x64CD;&#x4F5C;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x961F;&#x5217;&#x5143;&#x7D20;&#x7684;&#x6709;&#x5E8F;&#x6027;&#xFF0C;&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x961F;&#x5934;&#x5143;&#x7D20;&#x548C;&#x65B0;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x7684;&#x6709;&#x5E8F;&#x6027;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x6709;&#x5E8F;&#x8F93;&#x51FA;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x53EA;&#x8981;&#x8C03;&#x7528;Arrays.sort()&#x65B9;&#x6CD5;&#x5373;&#x53EF;</li>
<li>3)&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Iterator&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x65B9;&#x6CD5;&#x8F93;&#x51FA;&#x961F;&#x5217;&#x4E2D;&#x5143;&#x7D20;</li>
<li>4)PriorityQueue&#x662F;&#x975E;&#x540C;&#x6B65;&#x7684;&#xFF0C;&#x8981;&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x9700;&#x8981;&#x8C03;&#x7528;java.util.concurrent&#x5305;&#x4E0B;&#x7684;PriorityBlockingQueue&#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x540C;&#x6B65;</li>
<li>5)&#x5728;&#x961F;&#x5217;&#x4E2D;&#x4E0D;&#x5141;&#x8BB8;&#x4F7F;&#x7528;null&#x5143;&#x7D20;</li>
<li>6)PriorityQueue&#x9ED8;&#x8BA4;&#x662F;&#x4E00;&#x4E2A;&#x5C0F;&#x9876;&#x5806;&#xFF0C;&#x7136;&#x800C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F20;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Comparator&#x51FD;&#x6570;&#x6765;&#x5B9E;&#x73B0;&#x5927;&#x9876;&#x5806;</li>
</ul>
</li>
<li><p>&#x66FF;&#x4EE3;&#xFF1A;&#x7528;TreeMap&#x590D;&#x6742;&#x5EA6;&#x592A;&#x9AD8;&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#x3002;hash&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x961F;&#x5217;&#x4E0D;&#x662F;&#x5B9A;&#x957F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x6539;&#x53D8;&#x4E86;&#x5927;&#x5C0F;&#x8981;rehash&#x4EE3;&#x4EF7;&#x592A;&#x5927;&#xFF0C;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x65B9;&#x6CD5;&#xFF1F;&#x7528;&#x5806;&#x5B9E;&#x73B0;&#xFF0C;&#x90A3;&#x6BCF;&#x6B21;get put&#x590D;&#x6742;&#x5EA6;&#x662F;&#x591A;&#x5C11;&#xFF08;lgN)</p>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
<pre><code>transient Object[] queue; // non-private to simplify nested class access

/**
 * The number of elements in the priority queue.
 */
private int size = 0;

/**
 * The comparator, or null if priority queue uses elements&apos;
 * natural ordering.
 */
private final Comparator&lt;? super E&gt; comparator;

/**
 * The number of times this priority queue has been
 * &lt;i&gt;structurally modified&lt;/i&gt;.  See AbstractList for gory details.
 */
transient int modCount = 0; // non-private to simplify nested class access
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public PriorityQueue() {
    this(DEFAULT_INITIAL_CAPACITY, null);
}

/**
 * Creates a {@code PriorityQueue} with the specified initial
 * capacity that orders its elements according to their
 * {@linkplain Comparable natural ordering}.
 *
 * @param initialCapacity the initial capacity for this priority queue
 * @throws IllegalArgumentException if {@code initialCapacity} is less
 *         than 1
 */
public PriorityQueue(int initialCapacity) {
    this(initialCapacity, null);
}

/**
 * Creates a {@code PriorityQueue} with the default initial capacity and
 * whose elements are ordered according to the specified comparator.
 *
 * @param  comparator the comparator that will be used to order this
 *         priority queue.  If {@code null}, the {@linkplain Comparable
 *         natural ordering} of the elements will be used.
 * @since 1.8
 */
public PriorityQueue(Comparator&lt;? super E&gt; comparator) {
    this(DEFAULT_INITIAL_CAPACITY, comparator);
}

/**
 * Creates a {@code PriorityQueue} with the specified initial capacity
 * that orders its elements according to the specified comparator.
 *
 * @param  initialCapacity the initial capacity for this priority queue
 * @param  comparator the comparator that will be used to order this
 *         priority queue.  If {@code null}, the {@linkplain Comparable
 *         natural ordering} of the elements will be used.
 * @throws IllegalArgumentException if {@code initialCapacity} is
 *         less than 1
 */
public PriorityQueue(int initialCapacity,
                     Comparator&lt;? super E&gt; comparator) {
    // Note: This restriction of at least one is not actually needed,
    // but continues for 1.5 compatibility
    if (initialCapacity &lt; 1)
        throw new IllegalArgumentException();
    this.queue = new Object[initialCapacity];
    this.comparator = comparator;
}
</code></pre><h3 id="&#x6269;&#x5BB9;"><a name="&#x6269;&#x5BB9;" class="plugin-anchor" href="#&#x6269;&#x5BB9;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9;</h3>
<ul>
<li>Double size if small; else grow by 50%</li>
</ul>
<pre><code>private void grow(int minCapacity) {
    int oldCapacity = queue.length;
    // Double size if small; else grow by 50%
    int newCapacity = oldCapacity + ((oldCapacity &lt; 64) ?
                                     (oldCapacity + 2) :
                                     (oldCapacity &gt;&gt; 1));
    // overflow-conscious code
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = hugeCapacity(minCapacity);
    queue = Arrays.copyOf(queue, newCapacity);
}
</code></pre><pre><code>private static int hugeCapacity(int minCapacity) {
    if (minCapacity &lt; 0) // overflow
        throw new OutOfMemoryError();
    return (minCapacity &gt; MAX_ARRAY_SIZE) ?
        Integer.MAX_VALUE :
        MAX_ARRAY_SIZE;
}
</code></pre><h3 id="offer"><a name="offer" class="plugin-anchor" href="#offer"><i class="fa fa-link" aria-hidden="true"></i></a>offer</h3>
<pre><code>public boolean offer(E e) {
    if (e == null)
        throw new NullPointerException();
    modCount++;
    int i = size;
    if (i &gt;= queue.length)
        grow(i + 1);
    size = i + 1;
    if (i == 0)
        queue[0] = e;
    else
        siftUp(i, e);
    return true;
}
</code></pre><pre><code>private void siftUp(int k, E x) {
    if (comparator != null)
        siftUpUsingComparator(k, x);
    else
        siftUpComparable(k, x);
}
</code></pre><pre><code>private void siftUpUsingComparator(int k, E x) {
    while (k &gt; 0) {
        int parent = (k - 1) &gt;&gt;&gt; 1;
        Object e = queue[parent];
        if (comparator.compare(x, (E) e) &gt;= 0)
            break;
        queue[k] = e;
        k = parent;
    }
    queue[k] = x;
}
</code></pre><pre><code>private void siftUpComparable(int k, E x) {
    Comparable&lt;? super E&gt; key = (Comparable&lt;? super E&gt;) x;
    while (k &gt; 0) {
        int parent = (k - 1) &gt;&gt;&gt; 1;
        Object e = queue[parent];
        if (key.compareTo((E) e) &gt;= 0)
            break;
        queue[k] = e;
        k = parent;
    }
    queue[k] = key;
}
</code></pre><h3 id="poll"><a name="poll" class="plugin-anchor" href="#poll"><i class="fa fa-link" aria-hidden="true"></i></a>poll</h3>
<pre><code>public E poll() {
    if (size == 0)
        return null;
    int s = --size;
    modCount++;
    E result = (E) queue[0];
    E x = (E) queue[s];
    queue[s] = null;
    if (s != 0)
        siftDown(0, x);
    return result;
}
</code></pre><pre><code>private void siftDown(int k, E x) {
    if (comparator != null)
        siftDownUsingComparator(k, x);
    else
        siftDownComparable(k, x);
}
</code></pre><pre><code>private void siftDownUsingComparator(int k, E x) {
    int half = size &gt;&gt;&gt; 1;
    while (k &lt; half) {
        int child = (k &lt;&lt; 1) + 1;
        Object c = queue[child];
        int right = child + 1;
        if (right &lt; size &amp;&amp;
            comparator.compare((E) c, (E) queue[right]) &gt; 0)
            c = queue[child = right];
        if (comparator.compare(x, (E) c) &lt;= 0)
            break;
        queue[k] = c;
        k = child;
    }
    queue[k] = x;
}
</code></pre><pre><code>private void siftDownComparable(int k, E x) {
    Comparable&lt;? super E&gt; key = (Comparable&lt;? super E&gt;)x;
    int half = size &gt;&gt;&gt; 1;        // loop while a non-leaf
    while (k &lt; half) {
        int child = (k &lt;&lt; 1) + 1; // assume left child is least
        Object c = queue[child];
        int right = child + 1;
        if (right &lt; size &amp;&amp;
            ((Comparable&lt;? super E&gt;) c).compareTo((E) queue[right]) &gt; 0)
            c = queue[child = right];
        if (key.compareTo((E) c) &lt;= 0)
            break;
        queue[k] = c;
        k = child;
    }
    queue[k] = key;
}
</code></pre><h3 id="peek"><a name="peek" class="plugin-anchor" href="#peek"><i class="fa fa-link" aria-hidden="true"></i></a>peek</h3>
<pre><code>public E peek() {
    return (size == 0) ? null : (E) queue[0];
}
</code></pre><ul>
<li><h2 id="3blockingqueue"><a name="3blockingqueue" class="plugin-anchor" href="#3blockingqueue"><i class="fa fa-link" aria-hidden="true"></i></a>3)BlockingQueue</h2>
</li>
<li>&#x5BF9;&#x4E8E;&#x8BB8;&#x591A;&#x591A;&#x7EBF;&#x7A0B;&#x95EE;&#x9898;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x961F;&#x5217;&#x4EE5;&#x4F18;&#x96C5;&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x5176;&#x5F62;&#x5F0F;&#x5316;</li>
<li>&#x751F;&#x4EA7;&#x8005;&#x7EBF;&#x7A0B;&#x5411;&#x961F;&#x5217;&#x63D2;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x7EBF;&#x7A0B;&#x5219;&#x53D6;&#x51FA;&#x5B83;&#x4EEC;&#x3002;&#x4F7F;&#x7528;&#x961F;&#x5217;&#xFF0C;&#x53EF;&#x4EE5;&#x5B89;&#x5168;&#x5730;&#x4ECE;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5411;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F20;&#x9012;&#x6570;&#x636E;&#x3002;</li>
<li>&#x6BD4;&#x5982;&#x8F6C;&#x8D26;</li>
<li>&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5C06;&#x8F6C;&#x8D26;&#x6307;&#x4EE4;&#x653E;&#x5165;&#x961F;&#x5217;</li>
<li><p>&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x53D6;&#x51FA;&#x6307;&#x4EE4;&#x6267;&#x884C;&#x8F6C;&#x8D26;&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x94F6;&#x884C;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x3002;&#x56E0;&#x6B64;&#x4E0D;&#x9700;&#x8981;&#x540C;&#x6B65;</p>
</li>
<li><p>&#x5F53;&#x8BD5;&#x56FE;&#x5411;&#x961F;&#x5217;&#x4E2D;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x800C;&#x961F;&#x5217;&#x5DF2;&#x6EE1;&#xFF0C;&#x6216;&#x662F;&#x60F3;&#x4ECE;&#x961F;&#x5217;&#x79FB;&#x51FA;&#x5143;&#x7D20;&#x800C;&#x961F;&#x5217;&#x4E3A;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#x5BFC;&#x81F4;&#x7EBF;&#x7A0B;&#x963B;&#x585E;</p>
</li>
<li>&#x5728;&#x534F;&#x8C03;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x5408;&#x4F5C;&#x65F6;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#x662F;&#x5F88;&#x6709;&#x7528;&#x7684;&#x3002;</li>
<li><p>&#x5DE5;&#x4F5C;&#x8005;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x5468;&#x671F;&#x6027;&#x5730;&#x5C06;&#x4E2D;&#x95F4;&#x7ED3;&#x679C;&#x653E;&#x5165;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x5176;&#x4ED6;&#x5DE5;&#x4F5C;&#x8005;&#x7EBF;&#x7A0B;&#x53D6;&#x51FA;&#x4E2D;&#x95F4;&#x7ED3;&#x679C;&#x5E76;&#x8FDB;&#x4E00;&#x6B65;&#x4FEE;&#x6539;&#x3002;&#x961F;&#x5217;&#x4F1A;&#x81EA;&#x52A8;&#x5E73;&#x8861;&#x8D1F;&#x8F7D;&#xFF0C;&#x5927;&#x6982;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x96C6;&#x6BD4;&#x7B2C;&#x4E8C;&#x4E2A;&#x8FD0;&#x884C;&#x7684;&#x6162;&#xFF0C;&#x90A3;&#x4E48;&#x7B2C;&#x4E8C;&#x4E2A;&#x7EBF;&#x7A0B;&#x96C6;&#x5728;&#x7B49;&#x5F85;&#x7ED3;&#x679C;&#x65F6;&#x4F1A;&#x963B;&#x585E;&#xFF0C;&#x53CD;&#x4E4B;&#x4EA6;&#x7136;</p>
<ul>
<li>1)LinkedBlockingQueue&#x7684;&#x5BB9;&#x91CF;&#x662F;&#x6CA1;&#x6709;&#x4E0A;&#x8FB9;&#x754C;&#x7684;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x961F;&#x5217;</li>
<li>2)ArrayBlockingQueue&#x5728;&#x6784;&#x9020;&#x65F6;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x5BB9;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6765;&#x6307;&#x5B9A;&#x662F;&#x5426;&#x9700;&#x8981;&#x516C;&#x5E73;&#x7B56;&#x7565;</li>
<li>3)PriorityBlockingQueue&#x662F;&#x4E00;&#x4E2A;&#x5E26;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;&#xFF0C;&#x5143;&#x7D20;&#x6309;&#x7167;&#x5B83;&#x4EEC;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x987A;&#x5E8F;&#x88AB;&#x79FB;&#x8D70;&#x3002;&#x8BE5;&#x961F;&#x5217;&#x6CA1;&#x6709;&#x5BB9;&#x91CF;&#x4E0A;&#x9650;&#x3002;</li>
<li>4)DelayQueue&#x5305;&#x542B;&#x5B9E;&#x73B0;&#x4E86;Delayed&#x63A5;&#x53E3;&#x7684;&#x5BF9;&#x8C61;</li>
<li>5)TransferQueue&#x63A5;&#x53E3;&#x5141;&#x8BB8;&#x751F;&#x4EA7;&#x8005;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x6D88;&#x8D39;&#x8005;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x3002;&#x5982;&#x679C;&#x751F;&#x4EA7;&#x8005;&#x8C03;&#x7528;transfer&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x8C03;&#x7528;&#x4F1A;&#x963B;&#x585E;&#xFF0C;&#x76F4;&#x5230;&#x63D2;&#x5165;&#x7684;&#x5143;&#x7D20;&#x88AB;&#x6D88;&#x8D39;&#x8005;&#x53D6;&#x51FA;&#x4E4B;&#x540E;&#x624D;&#x505C;&#x6B62;&#x963B;&#x585E;&#x3002;</li>
</ul>
</li>
<li><p>LinkedTransferQueue&#x7C7B;&#x5B9E;&#x73B0;&#x4E86;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;</p>
</li>
<li></li>
</ul>
<h2 id="arrayblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;condition&#xFF0C;&#x6709;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><a name="arrayblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;condition&#xFF0C;&#x6709;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;" class="plugin-anchor" href="#arrayblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;condition&#xFF0C;&#x6709;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>ArrayBlockingQueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;Condition&#xFF0C;&#x6709;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;)</h2>
<ul>
<li>&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x3001;&#x5148;&#x8FDB;&#x5148;&#x51FA;&#x3001;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x96C6;&#x5408;&#x7C7B;&#xFF0C;&#x7279;&#x70B9;&#x662F;&#x53EF;&#x5B9E;&#x73B0;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x7684;&#x963B;&#x585E;&#x8BFB;&#x5199;&#xFF0C;&#x5E76;&#x4E14;&#x5BB9;&#x91CF;&#x662F;&#x53EF;&#x9650;&#x5236;&#x7684;&#x3002;<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
<pre><code>/** The queued items */
final Object[] items;

/** items index for next take, poll, peek or remove */
int takeIndex;

/** items index for next put, offer, or add */
int putIndex;

/** Number of elements in the queue */
int count;

/*
 * Concurrency control uses the classic two-condition algorithm
 * found in any textbook.
 */

/** Main lock guarding all access */
final ReentrantLock lock;

/** Condition for waiting takes */
private final Condition notEmpty;

/** Condition for waiting puts */
private final Condition notFull;

/**
 * Shared state for currently active iterators, or null if there
 * are known not to be any.  Allows queue operations to update
 * iterator state.
 */
transient Itrs itrs = null;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public ArrayBlockingQueue(int capacity) {
    this(capacity, false);
}

/**
 * Creates an {@code ArrayBlockingQueue} with the given (fixed)
 * capacity and the specified access policy.
 *
 * @param capacity the capacity of this queue
 * @param fair if {@code true} then queue accesses for threads blocked
 *        on insertion or removal, are processed in FIFO order;
 *        if {@code false} the access order is unspecified.
 * @throws IllegalArgumentException if {@code capacity &lt; 1}
 */
public ArrayBlockingQueue(int capacity, boolean fair) {
    if (capacity &lt;= 0)
        throw new IllegalArgumentException();
    this.items = new Object[capacity];
    lock = new ReentrantLock(fair);
    notEmpty = lock.newCondition();
    notFull =  lock.newCondition();
}
</code></pre><h3 id="put&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;"><a name="put&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;" class="plugin-anchor" href="#put&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;"><i class="fa fa-link" aria-hidden="true"></i></a>put&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;)</h3>
<pre><code>public void put(E e) throws InterruptedException {
    checkNotNull(e);
    final ReentrantLock lock = this.lock;
    lock.lockInterruptibly();
    try {
        while (count == items.length)
            notFull.await();
        enqueue(e);
    } finally {
        lock.unlock();
    }
}
</code></pre><pre><code>private void enqueue(E x) {
    // assert lock.getHoldCount() == 1;
    // assert items[putIndex] == null;
    final Object[] items = this.items;
    items[putIndex] = x;
    if (++putIndex == items.length)
        putIndex = 0;
    count++;
    notEmpty.signal();
}
</code></pre><h3 id="take&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;"><a name="take&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;" class="plugin-anchor" href="#take&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;"><i class="fa fa-link" aria-hidden="true"></i></a>take&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;)</h3>
<pre><code>public E take() throws InterruptedException {
    final ReentrantLock lock = this.lock;
    lock.lockInterruptibly();
    try {
        while (count == 0)
            notEmpty.await();
        return dequeue();
    } finally {
        lock.unlock();
    }
}
</code></pre><pre><code>private E dequeue() {
    // assert lock.getHoldCount() == 1;
    // assert items[takeIndex] != null;
    final Object[] items = this.items;
    @SuppressWarnings(&quot;unchecked&quot;)
    E x = (E) items[takeIndex];
    items[takeIndex] = null;
    if (++takeIndex == items.length)
        takeIndex = 0;
    count--;
    if (itrs != null)
        itrs.elementDequeued();
    notFull.signal();
    return x;
}
</code></pre><h3 id="offer&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;"><a name="offer&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;" class="plugin-anchor" href="#offer&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>offer&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;)</h3>
<pre><code>public boolean offer(E e, long timeout, TimeUnit unit)
    throws InterruptedException {

    checkNotNull(e);
    long nanos = unit.toNanos(timeout);
    final ReentrantLock lock = this.lock;
    lock.lockInterruptibly();
    try {
        while (count == items.length) {
            if (nanos &lt;= 0)
                return false;
            nanos = notFull.awaitNanos(nanos);
        }
        enqueue(e);
        return true;
    } finally {
        lock.unlock();
    }
}
</code></pre><h3 id="poll&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;"><a name="poll&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;" class="plugin-anchor" href="#poll&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;"><i class="fa fa-link" aria-hidden="true"></i></a>poll&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;)</h3>
<pre><code>public E poll(long timeout, TimeUnit unit) throws InterruptedException {
    long nanos = unit.toNanos(timeout);
    final ReentrantLock lock = this.lock;
    lock.lockInterruptibly();
    try {
        while (count == 0) {
            if (nanos &lt;= 0)
                return null;
            nanos = notEmpty.awaitNanos(nanos);
        }
        return dequeue();
    } finally {
        lock.unlock();
    }
}
</code></pre><h3 id="peek&#xFF08;&#x6709;&#x9501;"><a name="peek&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#peek&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>peek&#xFF08;&#x6709;&#x9501;)</h3>
<pre><code>public E peek() {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        return itemAt(takeIndex); // null when queue is empty
    } finally {
        lock.unlock();
    }
</code></pre><ul>
<li>final E itemAt(int i) {
  return (E) items[i];
}</li>
</ul>
<h3 id="&#x904D;&#x5386;&#xFF08;&#x6784;&#x9020;&#x8FED;&#x4EE3;&#x5668;&#x52A0;&#x9501;&#xFF0C;&#x904D;&#x5386;&#x8FED;&#x4EE3;&#x5668;&#x4E5F;&#x52A0;&#x9501;"><a name="&#x904D;&#x5386;&#xFF08;&#x6784;&#x9020;&#x8FED;&#x4EE3;&#x5668;&#x52A0;&#x9501;&#xFF0C;&#x904D;&#x5386;&#x8FED;&#x4EE3;&#x5668;&#x4E5F;&#x52A0;&#x9501;" class="plugin-anchor" href="#&#x904D;&#x5386;&#xFF08;&#x6784;&#x9020;&#x8FED;&#x4EE3;&#x5668;&#x52A0;&#x9501;&#xFF0C;&#x904D;&#x5386;&#x8FED;&#x4EE3;&#x5668;&#x4E5F;&#x52A0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;&#xFF08;&#x6784;&#x9020;&#x8FED;&#x4EE3;&#x5668;&#x52A0;&#x9501;&#xFF0C;&#x904D;&#x5386;&#x8FED;&#x4EE3;&#x5668;&#x4E5F;&#x52A0;&#x9501;)</h3>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return new Itr();
}
</code></pre><pre><code>private class Itr implements Iterator&lt;E&gt; {
    /** Index to look for new nextItem; NONE at end */
    private int cursor;

    /** Element to be returned by next call to next(); null if none */
    private E nextItem;

    /** Index of nextItem; NONE if none, REMOVED if removed elsewhere */
    private int nextIndex;

    /** Last element returned; null if none or not detached. */
    private E lastItem;

    /** Index of lastItem, NONE if none, REMOVED if removed elsewhere */
    private int lastRet;

    /** Previous value of takeIndex, or DETACHED when detached */
    private int prevTakeIndex;

    /** Previous value of iters.cycles */
    private int prevCycles;

    /** Special index value indicating &quot;not available&quot; or &quot;undefined&quot; */
    private static final int NONE = -1;

    /**
     * Special index value indicating &quot;removed elsewhere&quot;, that is,
     * removed by some operation other than a call to this.remove().
     */
    private static final int REMOVED = -2;

    /** Special value for prevTakeIndex indicating &quot;detached mode&quot; */
    private static final int DETACHED = -3;

    Itr() {
        // assert lock.getHoldCount() == 0;
        lastRet = NONE;
        final ReentrantLock lock = ArrayBlockingQueue.this.lock;
        lock.lock();
        try {
            if (count == 0) {
                // assert itrs == null;
                cursor = NONE;
                nextIndex = NONE;
                prevTakeIndex = DETACHED;
            } else {
                final int takeIndex = ArrayBlockingQueue.this.takeIndex;
                prevTakeIndex = takeIndex;
                nextItem = itemAt(nextIndex = takeIndex);
                cursor = incCursor(takeIndex);
                if (itrs == null) {
                    itrs = new Itrs(this);
                } else {
                    itrs.register(this); // in this order
                    itrs.doSomeSweeping(false);
                }
                prevCycles = itrs.cycles;
                // assert takeIndex &gt;= 0;
                // assert prevTakeIndex == takeIndex;
                // assert nextIndex &gt;= 0;
                // assert nextItem != null;
            }
        } finally {
            lock.unlock();
        }
    }
</code></pre><ul>
<li><p>}</p>
</li>
<li></li>
</ul>
<h2 id="linkedblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E24;&#x628A;&#x9501;&#xFF0C;&#x5404;&#x81EA;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><a name="linkedblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E24;&#x628A;&#x9501;&#xFF0C;&#x5404;&#x81EA;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;" class="plugin-anchor" href="#linkedblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E24;&#x628A;&#x9501;&#xFF0C;&#x5404;&#x81EA;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>LinkedBlockingQueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E24;&#x628A;&#x9501;&#xFF0C;&#x5404;&#x81EA;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;Condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;)</h2>
<ul>
<li>&#x53E6;&#x4E00;&#x79CD;BlockingQueue&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#xFF0C;&#x6CA1;&#x6709;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#x3002;</li>
<li>&#x7531;&#x4E8E;&#x51FA;&#x961F;&#x53EA;&#x64CD;&#x4F5C;&#x961F;&#x5934;&#xFF0C;&#x5165;&#x961F;&#x53EA;&#x64CD;&#x4F5C;&#x961F;&#x5C3E;&#xFF0C;&#x8FD9;&#x91CC;&#x5DE7;&#x5999;&#x5730;&#x4F7F;&#x7528;&#x4E86;&#x4E24;&#x628A;&#x9501;&#xFF0C;&#x5BF9;&#x4E8E;put&#x548C;offer&#x5165;&#x961F;&#x64CD;&#x4F5C;&#x4F7F;&#x7528;&#x4E00;&#x628A;&#x9501;&#xFF0C;&#x5BF9;&#x4E8E;take&#x548C;poll&#x51FA;&#x961F;&#x64CD;&#x4F5C;&#x4F7F;&#x7528;&#x4E00;&#x628A;&#x9501;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x51FA;&#x961F;&#x3001;&#x5165;&#x961F;&#x65F6;&#x4E92;&#x76F8;&#x7ADE;&#x4E89;&#x9501;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x56E0;&#x6B64;LinkedBlockingQueue&#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x8BFB;&#x5199;&#x90FD;&#x591A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6027;&#x80FD;&#x4F1A;&#x8F83;ArrayBlockingQueue&#x597D;&#x5F88;&#x591A;&#xFF0C;&#x5728;&#x904D;&#x5386;&#x4EE5;&#x53CA;&#x5220;&#x9664;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5219;&#x8981;&#x4E24;&#x628A;&#x9501;&#x90FD;&#x8981;&#x9501;&#x4F4F;&#x3002;</li>
<li>&#x591A;CPU&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x65E2;&#x6D88;&#x8D39;&#x53C8;&#x751F;&#x4EA7;&#x3002;<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
<pre><code>/** The capacity bound, or Integer.MAX_VALUE if none */
private final int capacity;

/** Current number of elements */
private final AtomicInteger count = new AtomicInteger();

/**
 * Head of linked list.
 * Invariant: head.item == null
 */
transient Node&lt;E&gt; head;

/**
 * Tail of linked list.
 * Invariant: last.next == null
 */
private transient Node&lt;E&gt; last;

/** Lock held by take, poll, etc */
private final ReentrantLock takeLock = new ReentrantLock();

/** Wait queue for waiting takes */
private final Condition notEmpty = takeLock.newCondition();

/** Lock held by put, offer, etc */
private final ReentrantLock putLock = new ReentrantLock();

/** Wait queue for waiting puts */
private final Condition notFull = putLock.newCondition();
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public LinkedBlockingQueue() {
    this(Integer.MAX_VALUE);
}

/**
 * Creates a {@code LinkedBlockingQueue} with the given (fixed) capacity.
 *
 * @param capacity the capacity of this queue
 * @throws IllegalArgumentException if {@code capacity} is not greater
 *         than zero
 */
public LinkedBlockingQueue(int capacity) {
    if (capacity &lt;= 0) throw new IllegalArgumentException();
    this.capacity = capacity;
    last = head = new Node&lt;E&gt;(null);
}
</code></pre><h3 id="put&#xFF08;&#x52A0;putlock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;"><a name="put&#xFF08;&#x52A0;putlock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;" class="plugin-anchor" href="#put&#xFF08;&#x52A0;putlock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;"><i class="fa fa-link" aria-hidden="true"></i></a>put&#xFF08;&#x52A0;putLock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x5219;&#x963B;&#x585E;)</h3>
<pre><code>
/**
 * Inserts the specified element at the tail of this queue, waiting if
 * necessary for space to become available.
 *
 * @throws InterruptedException {@inheritDoc}
 * @throws NullPointerException {@inheritDoc}
 */
public void put(E e) throws InterruptedException {
    if (e == null) throw new NullPointerException();
    // Note: convention in all put/take/etc is to preset local var
    // holding count negative to indicate failure unless set.
    int c = -1;
    Node&lt;E&gt; node = new Node&lt;E&gt;(e);
    final ReentrantLock putLock = this.putLock;
    final AtomicInteger count = this.count;
    putLock.lockInterruptibly();
    try {
        /*
         * Note that count is used in wait guard even though it is
         * not protected by lock. This works because count can
         * only decrease at this point (all other puts are shut
         * out by lock), and we (or some other waiting put) are
         * signalled if it ever changes from capacity. Similarly
         * for all other uses of count in other wait guards.
         */
        while (count.get() == capacity) {
</code></pre><ul>
<li>// &#x963B;&#x585E;&#xFF0C;&#x76F4;&#x81F3;&#x6709;&#x5269;&#x4F59;&#x7A7A;&#x95F4;<pre><code>      notFull.await();
  }
  enqueue(node);
  c = count.getAndIncrement();
  if (c + 1 &lt; capacity)
</code></pre></li>
<li>// &#x8FD8;&#x6709;&#x5269;&#x4F59;&#x7A7A;&#x95F4;&#x65F6;&#xFF0C;&#x5524;&#x9192;&#x5176;&#x4ED6;&#x751F;&#x4EA7;&#x8005;<pre><code>      notFull.signal();
</code></pre>  } finally {<pre><code>  putLock.unlock();
</code></pre>  }
  if (c == 0)</li>
<li>// c&#x662F;&#x653E;&#x5165;&#x5F53;&#x524D;&#x5143;&#x7D20;&#x4E4B;&#x524D;&#x961F;&#x5217;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x73B0;&#x5728;&#x65B0;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x90A3;&#x4E48;&#x5524;&#x9192;&#x6D88;&#x8D39;&#x8005;&#x8FDB;&#x884C;&#x6D88;&#x8D39;</li>
<li>signalNotEmpty();
}</li>
</ul>
<pre><code>private void enqueue(Node&lt;E&gt; node) {
    // assert putLock.isHeldByCurrentThread();
    // assert last.next == null;
    last = last.next = node;
}
</code></pre><pre><code>private void signalNotEmpty() {
    final ReentrantLock takeLock = this.takeLock;
    takeLock.lock();
    try {
</code></pre><ul>
<li>// &#x5524;&#x9192;&#x6D88;&#x8D39;&#x7EBF;&#x7A0B;<pre><code>  notEmpty.signal();
</code></pre>  } finally {<pre><code>  takeLock.unlock();
</code></pre>  }
}</li>
</ul>
<h3 id="take&#xFF08;&#x52A0;takelock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;"><a name="take&#xFF08;&#x52A0;takelock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;" class="plugin-anchor" href="#take&#xFF08;&#x52A0;takelock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;"><i class="fa fa-link" aria-hidden="true"></i></a>take&#xFF08;&#x52A0;takeLock&#x9501;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;)</h3>
<pre><code>public E take() throws InterruptedException {
    E x;
    int c = -1;
    final AtomicInteger count = this.count;
    final ReentrantLock takeLock = this.takeLock;
    takeLock.lockInterruptibly();
    try {
        while (count.get() == 0) {
</code></pre><pre><code>- // &#x961F;&#x5217;&#x7A7A;&#x5219;&#x963B;&#x585E;
        notEmpty.await();
    }
    x = dequeue();
    c = count.getAndDecrement();
    if (c &gt; 1)
</code></pre><ul>
<li>// &#x8FD8;&#x6709;&#x5143;&#x7D20;&#x5219;&#x5524;&#x9192;&#x5176;&#x4ED6;&#x6D88;&#x8D39;&#x8005;<pre><code>      notEmpty.signal();
</code></pre>  } finally {<pre><code>  takeLock.unlock();
</code></pre>  }
  if (c == capacity)</li>
<li>// c&#x662F;&#x6D88;&#x8D39;&#x5F53;&#x524D;&#x5143;&#x7D20;&#x4E4B;&#x524D;&#x961F;&#x5217;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x73B0;&#x5728;&#x7684;&#x5BB9;&#x91CF;&#x662F;c-1&#xFF0C;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x653E;&#x5165;&#x5143;&#x7D20;&#xFF0C;&#x5524;&#x9192;&#x751F;&#x4EA7;&#x8005;&#x8FDB;&#x884C;&#x751F;&#x4EA7;<pre><code>  signalNotFull();
</code></pre>  return x;
}</li>
</ul>
<pre><code>private E dequeue() {
    // assert takeLock.isHeldByCurrentThread();
    // assert head.item == null;
    Node&lt;E&gt; h = head;
    Node&lt;E&gt; first = h.next;
    h.next = h; // help GC
    head = first;
    E x = first.item;
    first.item = null;
    return x;
}
</code></pre><pre><code>private void signalNotFull() {
    final ReentrantLock putLock = this.putLock;
    putLock.lock();
    try {
</code></pre><ul>
<li>// &#x5524;&#x9192;&#x751F;&#x4EA7;&#x8005;<pre><code>  notFull.signal();
</code></pre>  } finally {<pre><code>  putLock.unlock();
</code></pre>  }
}</li>
</ul>
<h3 id="peek&#xFF08;&#x52A0;takelock&#x9501;"><a name="peek&#xFF08;&#x52A0;takelock&#x9501;" class="plugin-anchor" href="#peek&#xFF08;&#x52A0;takelock&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>peek&#xFF08;&#x52A0;takeLock&#x9501;)</h3>
<pre><code>public E peek() {
    if (count.get() == 0)
        return null;
    final ReentrantLock takeLock = this.takeLock;
    takeLock.lock();
    try {
        Node&lt;E&gt; first = head.next;
        if (first == null)
            return null;
        else
            return first.item;
    } finally {
        takeLock.unlock();
    }
}
</code></pre><h3 id="remove&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;"><a name="remove&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;" class="plugin-anchor" href="#remove&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>remove&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;)</h3>
<pre><code>/**
 * Locks to prevent both puts and takes.
 */
void fullyLock() {
    putLock.lock();
    takeLock.lock();
}

/**
 * Unlocks to allow both puts and takes.
 */
void fullyUnlock() {
    takeLock.unlock();
    putLock.unlock();
}
</code></pre><pre><code>public boolean remove(Object o) {
    if (o == null) return false;
    fullyLock();
    try {
        for (Node&lt;E&gt; trail = head, p = trail.next;
             p != null;
             trail = p, p = p.next) {
            if (o.equals(p.item)) {
                unlink(p, trail);
                return true;
            }
        }
        return false;
    } finally {
        fullyUnlock();
    }
}
</code></pre><h3 id="&#x904D;&#x5386;&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;"><a name="&#x904D;&#x5386;&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;" class="plugin-anchor" href="#&#x904D;&#x5386;&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;&#xFF08;&#x52A0;&#x4E24;&#x628A;&#x9501;)</h3>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return new Itr();
}

private class Itr implements Iterator&lt;E&gt; {
    /*
     * Basic weakly-consistent iterator.  At all times hold the next
     * item to hand out so that if hasNext() reports true, we will
     * still have it to return even if lost race with a take etc.
     */

    private Node&lt;E&gt; current;
    private Node&lt;E&gt; lastRet;
    private E currentElement;

    Itr() {
        fullyLock();
        try {
            current = head.next;
            if (current != null)
                currentElement = current.item;
        } finally {
            fullyUnlock();
        }
    }

    public boolean hasNext() {
        return current != null;
    }

    /**
     * Returns the next live successor of p, or null if no such.
     *
     * Unlike other traversal methods, iterators need to handle both:
     * - dequeued nodes (p.next == p)
     * - (possibly multiple) interior removed nodes (p.item == null)
     */
    private Node&lt;E&gt; nextNode(Node&lt;E&gt; p) {
        for (;;) {
            Node&lt;E&gt; s = p.next;
            if (s == p)
                return head.next;
            if (s == null || s.item != null)
                return s;
            p = s;
        }
    }

    public E next() {
        fullyLock();
        try {
            if (current == null)
                throw new NoSuchElementException();
            E x = currentElement;
            lastRet = current;
            current = nextNode(current);
            currentElement = (current == null) ? null : current.item;
            return x;
        } finally {
            fullyUnlock();
        }
    }

    public void remove() {
        if (lastRet == null)
            throw new IllegalStateException();
        fullyLock();
        try {
            Node&lt;E&gt; node = lastRet;
            lastRet = null;
            for (Node&lt;E&gt; trail = head, p = trail.next;
                 p != null;
                 trail = p, p = p.next) {
                if (p == node) {
                    unlink(p, trail);
                    break;
                }
            }
        } finally {
            fullyUnlock();
        }
    }
}
</code></pre><ul>
<li><h3 id="linkedblockingdeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><a name="linkedblockingdeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;" class="plugin-anchor" href="#linkedblockingdeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>LinkedBlockingDeque&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E24;&#x4E2A;Condition&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;)</h3>
</li>
<li>LinkedBlockingDeque&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x7684;&#x53CC;&#x7AEF;&#x963B;&#x585E;&#x961F;&#x5217;&#x3002;&#x548C;LinkedBlockingQueue&#x7C7B;&#x4F3C;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x8BE5;&#x7C7B;&#x5B9E;&#x73B0;&#x4E86;Deque&#x63A5;&#x53E3;&#xFF0C;&#x800C;LinkedBlockingQueue&#x5B9E;&#x73B0;&#x4E86;Queue&#x63A5;&#x53E3;&#x3002;</li>
<li><p>LinkedBlockingDeque&#x5185;&#x90E8;&#x53EA;&#x6709;&#x4E00;&#x628A;&#x9501;&#x4EE5;&#x53CA;&#x8BE5;&#x9501;&#x4E0A;&#x5173;&#x8054;&#x7684;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x63A8;&#x65AD;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x5728;&#x961F;&#x5934;&#x6216;&#x8005;&#x961F;&#x5C3E;&#x6267;&#x884C;&#x5165;&#x961F;&#x6216;&#x51FA;&#x961F;&#x64CD;&#x4F5C;&#xFF08;&#x7C7B;&#x4F3C;&#x4E8E;ArrayBlockingQueue)&#x3002;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x8FD9;&#x70B9;&#x548C;LinkedBlockingQueue&#x4E0D;&#x540C;&#xFF0C;LinkedBlockingQueue&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6709;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x4E24;&#x7AEF;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
</li>
<li><p>LinkedBlockingDeque&#x548C;LinkedBlockingQueue&#x7684;&#x76F8;&#x540C;&#x70B9;&#x5728;&#x4E8E;&#xFF1A; </p>
</li>
<li><ol>
<li>&#x57FA;&#x4E8E;&#x94FE;&#x8868; </li>
</ol>
</li>
<li><ol>
<li>&#x5BB9;&#x91CF;&#x53EF;&#x9009;&#xFF0C;&#x4E0D;&#x8BBE;&#x7F6E;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x662F;Int&#x7684;&#x6700;&#x5927;&#x503C;</li>
</ol>
</li>
<li><p>&#x548C;LinkedBlockingQueue&#x7684;&#x4E0D;&#x540C;&#x70B9;&#x5728;&#x4E8E;&#xFF1A; </p>
</li>
<li><ol>
<li>&#x53CC;&#x7AEF;&#x94FE;&#x8868;&#x548C;&#x5355;&#x94FE;&#x8868; </li>
</ol>
</li>
<li><ol>
<li>&#x4E0D;&#x5B58;&#x5728;&#x54E8;&#x5175;&#x8282;&#x70B9; </li>
</ol>
</li>
<li><ol>
<li>&#x4E00;&#x628A;&#x9501;+&#x4E24;&#x4E2A;&#x6761;&#x4EF6;</li>
</ol>
</li>
<li><p>LinkedBlockingDeque&#x548C;ArrayBlockingQueue&#x7684;&#x76F8;&#x540C;&#x70B9;&#x5728;&#x4E8E;&#xFF1A;&#x4F7F;&#x7528;&#x4E00;&#x628A;&#x9501;+&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x7EF4;&#x6301;&#x961F;&#x5217;&#x7684;&#x540C;&#x6B65;&#x3002;</p>
</li>
<li></li>
</ul>
<h2 id="priorityblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x51FA;&#x961F;&#x65F6;&#x961F;&#x7A7A;&#x5219;&#x963B;&#x585E;&#xFF1B;&#x65E0;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x961F;&#x6EE1;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E00;&#x4E2A;condition"><a name="priorityblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x51FA;&#x961F;&#x65F6;&#x961F;&#x7A7A;&#x5219;&#x963B;&#x585E;&#xFF1B;&#x65E0;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x961F;&#x6EE1;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E00;&#x4E2A;condition" class="plugin-anchor" href="#priorityblockingqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x51FA;&#x961F;&#x65F6;&#x961F;&#x7A7A;&#x5219;&#x963B;&#x585E;&#xFF1B;&#x65E0;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x961F;&#x6EE1;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E00;&#x4E2A;condition"><i class="fa fa-link" aria-hidden="true"></i></a>PriorityBlockingQueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x51FA;&#x961F;&#x65F6;&#x961F;&#x7A7A;&#x5219;&#x963B;&#x585E;&#xFF1B;&#x65E0;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x961F;&#x6EE1;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x628A;&#x9501;&#x4E00;&#x4E2A;Condition)</h2>
<ul>
<li>&#x652F;&#x6301;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x65E0;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x5143;&#x7D20;&#x91C7;&#x7528;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x5347;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x5F53;&#x7136;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6765;&#x6307;&#x5B9A;Comparator&#x6765;&#x5BF9;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;PriorityBlockingQueue&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x540C;&#x4F18;&#x5148;&#x7EA7;&#x5143;&#x7D20;&#x7684;&#x987A;&#x5E8F;&#x3002;<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
<pre><code>private static final int DEFAULT_INITIAL_CAPACITY = 11;

/**
 * The maximum size of array to allocate.
 * Some VMs reserve some header words in an array.
 * Attempts to allocate larger arrays may result in
 * OutOfMemoryError: Requested array size exceeds VM limit
 */
private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;

/**
 * Priority queue represented as a balanced binary heap: the two
 * children of queue[n] are queue[2*n+1] and queue[2*(n+1)].  The
 * priority queue is ordered by comparator, or by the elements&apos;
 * natural ordering, if comparator is null: For each node n in the
 * heap and each descendant d of n, n &lt;= d.  The element with the
 * lowest value is in queue[0], assuming the queue is nonempty.
 */
private transient Object[] queue;

/**
 * The number of elements in the priority queue.
 */
private transient int size;

/**
 * The comparator, or null if priority queue uses elements&apos;
 * natural ordering.
 */
private transient Comparator&lt;? super E&gt; comparator;

/**
 * Lock used for all public operations
 */
private final ReentrantLock lock;

/**
 * Condition for blocking when empty
 */
private final Condition notEmpty;

/**
 * Spinlock for allocation, acquired via CAS.
 */
private transient volatile int allocationSpinLock;

/**
 * A plain PriorityQueue used only for serialization,
 * to maintain compatibility with previous versions
 * of this class. Non-null only during serialization/deserialization.
 */
private PriorityQueue&lt;E&gt; q;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public PriorityBlockingQueue() {
    this(DEFAULT_INITIAL_CAPACITY, null);
}

/**
 * Creates a {@code PriorityBlockingQueue} with the specified
 * initial capacity that orders its elements according to their
 * {@linkplain Comparable natural ordering}.
 *
 * @param initialCapacity the initial capacity for this priority queue
 * @throws IllegalArgumentException if {@code initialCapacity} is less
 *         than 1
 */
public PriorityBlockingQueue(int initialCapacity) {
    this(initialCapacity, null);
}

/**
 * Creates a {@code PriorityBlockingQueue} with the specified initial
 * capacity that orders its elements according to the specified
 * comparator.
 *
 * @param initialCapacity the initial capacity for this priority queue
 * @param  comparator the comparator that will be used to order this
 *         priority queue.  If {@code null}, the {@linkplain Comparable
 *         natural ordering} of the elements will be used.
 * @throws IllegalArgumentException if {@code initialCapacity} is less
 *         than 1
 */
public PriorityBlockingQueue(int initialCapacity,
                             Comparator&lt;? super E&gt; comparator) {
    if (initialCapacity &lt; 1)
        throw new IllegalArgumentException();
    this.lock = new ReentrantLock();
    this.notEmpty = lock.newCondition();
    this.comparator = comparator;
    this.queue = new Object[initialCapacity];
}
</code></pre><h3 id="&#x6269;&#x5BB9;&#xFF08;&#x57FA;&#x4E8E;caslock&#xFF0C;cas&#x63A7;&#x5236;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x539F;&#x5B50;&#x6267;&#x884C;&#xFF0C;lock&#x63A7;&#x5236;&#x6570;&#x7EC4;&#x66FF;&#x6362;&#x539F;&#x5B50;&#x6267;&#x884C;"><a name="&#x6269;&#x5BB9;&#xFF08;&#x57FA;&#x4E8E;caslock&#xFF0C;cas&#x63A7;&#x5236;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x539F;&#x5B50;&#x6267;&#x884C;&#xFF0C;lock&#x63A7;&#x5236;&#x6570;&#x7EC4;&#x66FF;&#x6362;&#x539F;&#x5B50;&#x6267;&#x884C;" class="plugin-anchor" href="#&#x6269;&#x5BB9;&#xFF08;&#x57FA;&#x4E8E;caslock&#xFF0C;cas&#x63A7;&#x5236;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x539F;&#x5B50;&#x6267;&#x884C;&#xFF0C;lock&#x63A7;&#x5236;&#x6570;&#x7EC4;&#x66FF;&#x6362;&#x539F;&#x5B50;&#x6267;&#x884C;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9;&#xFF08;&#x57FA;&#x4E8E;CAS+Lock&#xFF0C;CAS&#x63A7;&#x5236;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x539F;&#x5B50;&#x6267;&#x884C;&#xFF0C;Lock&#x63A7;&#x5236;&#x6570;&#x7EC4;&#x66FF;&#x6362;&#x539F;&#x5B50;&#x6267;&#x884C;)</h3>
<pre><code>private void tryGrow(Object[] array, int oldCap) {
    lock.unlock(); // must release and then re-acquire main lock
    Object[] newArray = null;
    if (allocationSpinLock == 0 &amp;&amp;
        UNSAFE.compareAndSwapInt(this, allocationSpinLockOffset,
                                 0, 1)) {
        try {
            int newCap = oldCap + ((oldCap &lt; 64) ?
                                   (oldCap + 2) : // grow faster if small
                                   (oldCap &gt;&gt; 1));
            if (newCap - MAX_ARRAY_SIZE &gt; 0) {    // possible overflow
                int minCap = oldCap + 1;
                if (minCap &lt; 0 || minCap &gt; MAX_ARRAY_SIZE)
                    throw new OutOfMemoryError();
                newCap = MAX_ARRAY_SIZE;
            }
            if (newCap &gt; oldCap &amp;&amp; queue == array)
                newArray = new Object[newCap];
        } finally {
            allocationSpinLock = 0;
        }
    }
    if (newArray == null) // back off if another thread is allocating
        Thread.yield();
    lock.lock();
    if (newArray != null &amp;&amp; queue == array) {
        queue = newArray;
        System.arraycopy(array, 0, newArray, 0, oldCap);
    }
}
</code></pre><h3 id="put&#xFF08;&#x6709;&#x9501;"><a name="put&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#put&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>put&#xFF08;&#x6709;&#x9501;)</h3>
<pre><code>public void put(E e) {
    offer(e); // never need to block
}
</code></pre><pre><code>public boolean offer(E e) {
    if (e == null)
        throw new NullPointerException();
    final ReentrantLock lock = this.lock;
    lock.lock();
    int n, cap;
    Object[] array;
    while ((n = size) &gt;= (cap = (array = queue).length))
        tryGrow(array, cap);
    try {
        Comparator&lt;? super E&gt; cmp = comparator;
        if (cmp == null)
            siftUpComparable(n, e, array);
        else
            siftUpUsingComparator(n, e, array, cmp);
        size = n + 1;
        notEmpty.signal();
    } finally {
        lock.unlock();
    }
    return true;
}
</code></pre><h3 id="take&#xFF08;&#x6709;&#x9501;"><a name="take&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#take&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>take&#xFF08;&#x6709;&#x9501;)</h3>
<pre><code>public E take() throws InterruptedException {
    final ReentrantLock lock = this.lock;
    lock.lockInterruptibly();
    E result;
    try {
        while ( (result = dequeue()) == null)
            notEmpty.await();
    } finally {
        lock.unlock();
    }
    return result;
}
</code></pre><pre><code>private E dequeue() {
    int n = size - 1;
    if (n &lt; 0)
        return null;
    else {
        Object[] array = queue;
        E result = (E) array[0];
        E x = (E) array[n];
        array[n] = null;
        Comparator&lt;? super E&gt; cmp = comparator;
        if (cmp == null)
            siftDownComparable(0, x, array, n);
        else
            siftDownUsingComparator(0, x, array, n, cmp);
        size = n;
        return result;
    }
}
</code></pre><h3 id="peek&#xFF08;&#x6709;&#x9501;"><a name="peek&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#peek&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>peek&#xFF08;&#x6709;&#x9501;)</h3>
<pre><code>public E peek() {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        return (size == 0) ? null : (E) queue[0];
    } finally {
        lock.unlock();
    }
}
</code></pre><ul>
<li><h2 id="delayqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;priorityqueue&#xFF0C;&#x65E0;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x8FC7;&#x671F;&#x5143;&#x7D20;&#x65B9;&#x53EF;&#x79FB;&#x9664;&#xFF0C;&#x57FA;&#x4E8E;lock"><a name="delayqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;priorityqueue&#xFF0C;&#x65E0;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x8FC7;&#x671F;&#x5143;&#x7D20;&#x65B9;&#x53EF;&#x79FB;&#x9664;&#xFF0C;&#x57FA;&#x4E8E;lock" class="plugin-anchor" href="#delayqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;priorityqueue&#xFF0C;&#x65E0;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x8FC7;&#x671F;&#x5143;&#x7D20;&#x65B9;&#x53EF;&#x79FB;&#x9664;&#xFF0C;&#x57FA;&#x4E8E;lock"><i class="fa fa-link" aria-hidden="true"></i></a>DelayQueue&#xFF08;&#x5E95;&#x5C42;&#x662F;PriorityQueue&#xFF0C;&#x65E0;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x8FC7;&#x671F;&#x5143;&#x7D20;&#x65B9;&#x53EF;&#x79FB;&#x9664;&#xFF0C;&#x57FA;&#x4E8E;Lock)</h2>
</li>
</ul>
<pre><code>public class DelayQueue&lt;E extends Delayed&gt; extends AbstractQueue&lt;E&gt;
    implements BlockingQueue&lt;E&gt; {

    private final transient ReentrantLock lock = new ReentrantLock();
    private final PriorityQueue&lt;E&gt; q = new PriorityQueue&lt;E&gt;();
</code></pre><ul>
<li>DelayQueue&#x961F;&#x5217;&#x4E2D;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x6709;&#x4E2A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x5E76;&#x4E14;&#x961F;&#x5217;&#x662F;&#x4E2A;&#x4F18;&#x5148;&#x7EA7;&#x961F;&#x5217;&#xFF0C;&#x5F53;&#x4ECE;&#x961F;&#x5217;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x6709;&#x8FC7;&#x671F;&#x5143;&#x7D20;&#x624D;&#x4F1A;&#x51FA;&#x961F;&#x5217;&#x3002;</li>
<li>&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Delayed&#x63A5;&#x53E3;</li>
</ul>
<pre><code>public interface Delayed extends Comparable&lt;Delayed&gt; {

    /**
     * Returns the remaining delay associated with this object, in the
     * given time unit.
     *
     * @param unit the time unit
     * @return the remaining delay; zero or negative values indicate
     * that the delay has already elapsed
     */
    long getDelay(TimeUnit unit);
}
</code></pre><ul>
<li>getDelay&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x7684;&#x6B8B;&#x7559;&#x5EF6;&#x8FDF;&#xFF0C;&#x8D1F;&#x503C;&#x8868;&#x793A;&#x5EF6;&#x8FDF;&#x7ED3;&#x675F;</li>
<li><p>&#x5143;&#x7D20;&#x53EA;&#x6709;&#x5728;&#x5EF6;&#x8FDF;&#x7528;&#x5B8C;&#x7684;&#x65F6;&#x5019;&#x624D;&#x80FD;&#x4ECE;DelayQueue&#x79FB;&#x51FA;&#x3002;&#x8FD8;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Comparable&#x63A5;&#x53E3;&#x3002;</p>
</li>
<li><p>&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x573A;&#x666F;&#x662F;&#x91CD;&#x8BD5;&#x673A;&#x5236;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6BD4;&#x5982;&#x5F53;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x5931;&#x8D25;&#x540E;&#xFF0C;&#x628A;&#x5F53;&#x524D;&#x8C03;&#x7528;&#x4FE1;&#x606F;&#x653E;&#x5165;delay=10s&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x5143;&#x7D20;&#x653E;&#x5165;&#x961F;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x961F;&#x5217;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x91CD;&#x8BD5;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x901A;&#x8FC7;take&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x9700;&#x8981;&#x91CD;&#x8BD5;&#x7684;&#x63A5;&#x53E3;&#xFF0C;take&#x8FD4;&#x56DE;&#x5219;&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x91CD;&#x8BD5;&#xFF0C;&#x5931;&#x8D25;&#x5219;&#x518D;&#x6B21;&#x653E;&#x5165;&#x961F;&#x5217;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x5143;&#x7D20;&#x52A0;&#x4E0A;&#x91CD;&#x8BD5;&#x6B21;&#x6570;&#x3002;</p>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
</li>
</ul>
<pre><code>private final transient ReentrantLock lock = new ReentrantLock();
private final PriorityQueue&lt;E&gt; q = new PriorityQueue&lt;E&gt;();

private Thread leader = null;

private final Condition available = lock.newCondition();
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public DelayQueue() {}
</code></pre><h3 id="put"><a name="put" class="plugin-anchor" href="#put"><i class="fa fa-link" aria-hidden="true"></i></a>put</h3>
<pre><code>public void put(E e) {
    offer(e);
}
</code></pre><pre><code>public boolean offer(E e) {
    final ReentrantLock lock = this.lock;
    lock.lock();
    try {
        q.offer(e);
        if (q.peek() == e) {
            leader = null;
</code></pre><ul>
<li>// &#x901A;&#x77E5;&#x6700;&#x5148;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;<pre><code>      available.signal();
  }
  return true;
</code></pre>  } finally {<pre><code>  lock.unlock();
</code></pre>  }
}</li>
</ul>
<h3 id="take"><a name="take" class="plugin-anchor" href="#take"><i class="fa fa-link" aria-hidden="true"></i></a>take</h3>
<ul>
<li>&#x83B7;&#x53D6;&#x5E76;&#x79FB;&#x9664;&#x961F;&#x5217;&#x9996;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x961F;&#x5217;&#x6CA1;&#x6709;&#x8FC7;&#x671F;&#x5143;&#x7D20;&#x5219;&#x7B49;&#x5F85;&#x3002;<ul>
<li>&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;take&#x65F6;&#x5019;&#x7531;&#x4E8E;&#x961F;&#x5217;&#x7A7A;&#xFF0C;&#x6240;&#x4EE5;&#x8C03;&#x7528;&#xFF08;2)&#x628A;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x653E;&#x5165;available&#x7684;&#x6761;&#x4EF6;&#x961F;&#x5217;&#x7B49;&#x5F85;&#xFF0C;&#x5F53;&#x6267;&#x884C;offer&#x5E76;&#x4E14;&#x6DFB;&#x52A0;&#x7684;&#x5143;&#x7D20;&#x5C31;&#x662F;&#x961F;&#x9996;&#x5143;&#x7D20;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x901A;&#x77E5;&#x6700;&#x5148;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#x6FC0;&#x6D3B;&#xFF0C;&#x5FAA;&#x73AF;&#x91CD;&#x65B0;&#x83B7;&#x53D6;&#x961F;&#x9996;&#x5143;&#x7D20;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;first&#x5047;&#x5982;&#x4E0D;&#x7A7A;&#xFF0C;&#x5219;&#x8C03;&#x7528;getdelay&#x65B9;&#x6CD5;&#x770B;&#x8BE5;&#x5143;&#x7D20;&#x6D77;&#x5269;&#x4E0B;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x5C31;&#x8FC7;&#x671F;&#x4E86;&#xFF0C;&#x5982;&#x679C;delay&lt;=0&#x5219;&#x8BF4;&#x660E;&#x5DF2;&#x7ECF;&#x8FC7;&#x671F;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x51FA;&#x961F;&#x8FD4;&#x56DE;&#x3002;&#x5426;&#x5219;&#x770B;leader&#x662F;&#x5426;&#x4E3A;null&#xFF0C;&#x4E0D;&#x4E3A;null&#x5219;&#x8BF4;&#x660E;&#x662F;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E5F;&#x5728;&#x6267;&#x884C;take&#x5219;&#x628A;&#x8BE5;&#x7EBF;&#x7A0B;&#x653E;&#x5165;&#x6761;&#x4EF6;&#x961F;&#x5217;&#xFF0C;&#x5426;&#x5219;&#x662F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x7684;take&#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x8C03;&#x7528;(5) await&#x76F4;&#x5230;&#x5269;&#x4F59;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x5230;&#xFF08;&#x8FD9;&#x671F;&#x95F4;&#x8BE5;&#x7EBF;&#x7A0B;&#x4F1A;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;offer&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;take&#x963B;&#x585E;&#x81EA;&#x5DF1;)&#xFF0C;&#x5269;&#x4F59;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x5230;&#x540E;&#xFF0C;&#x8BE5;&#x7EBF;&#x7A0B;&#x4F1A;&#x91CD;&#x65B0;&#x7ADE;&#x4E89;&#x5F97;&#x5230;&#x9501;&#xFF0C;&#x91CD;&#x65B0;&#x8FDB;&#x5165;&#x5FAA;&#x73AF;&#x3002;</li>
<li>&#xFF08;6)&#x8BF4;&#x660E;&#x5F53;&#x524D;take&#x8FD4;&#x56DE;&#x4E86;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;&#x961F;&#x5217;&#x8FD8;&#x6709;&#x5143;&#x7D20;&#x5219;&#x8C03;&#x7528;singal&#x6FC0;&#x6D3B;&#x6761;&#x4EF6;&#x961F;&#x5217;&#x91CC;&#x9762;&#x53EF;&#x80FD;&#x6709;&#x7684;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x3002;leader&#x90A3;&#x4E48;&#x4E3A;null&#xFF0C;&#x90A3;&#x4E48;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;take&#x83B7;&#x53D6;&#x8FC7;&#x671F;&#x5143;&#x7D20;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x8BBE;&#x7F6E;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x7684;await&#x65B9;&#x6CD5;&#x7B49;&#x5F85;&#x6570;&#x636E;&#x8FC7;&#x671F;&#xFF0C;&#x540E;&#x9762;&#x8C03;&#x7528;take&#x7684;&#x7EBF;&#x7A0B;&#x5219;&#x8C03;&#x7528;await&#x76F4;&#x5230;signal&#x3002;</li>
</ul>
</li>
</ul>
<pre><code>public E take() throws InterruptedException {
    final ReentrantLock lock = this.lock;
    lock.lockInterruptibly();
    try {
        for (;;) {
</code></pre><pre><code>- // 1)&#x83B7;&#x53D6;&#x4F46;&#x4E0D;&#x79FB;&#x9664;&#x961F;&#x9996;&#x5143;&#x7D20;
        E first = q.peek();
        if (first == null)
- // 2)&#x65E0;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x963B;&#x585E; 
            available.await();
        else {
            long delay = first.getDelay(NANOSECONDS);
- // 3)&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x4E14;&#x5DF2;&#x7ECF;&#x8FC7;&#x671F;&#xFF0C;&#x5219;&#x79FB;&#x9664;
            if (delay &lt;= 0)
                return q.poll();
            first = null; // don&apos;t retain ref while waiting
- // 4)
            if (leader != null)
                available.await();
            else {
                Thread thisThread = Thread.currentThread();
- // 5)
                leader = thisThread;
                try {
</code></pre><ul>
<li>// &#x7EE7;&#x7EED;&#x963B;&#x585E;&#x5EF6;&#x8FDF;&#x7684;&#x65F6;&#x95F4;<pre><code>                  available.awaitNanos(delay);
              } finally {
                  if (leader == thisThread)
                      leader = null;
              }
          }
      }
  }
</code></pre>  } finally {<pre><code>  if (leader == null &amp;&amp; q.peek() != null)
      available.signal();
  lock.unlock();
</code></pre>  }
}</li>
</ul>
<h3 id="peek"><a name="peek" class="plugin-anchor" href="#peek"><i class="fa fa-link" aria-hidden="true"></i></a>peek</h3>
<h2 id="synchronousqueue&#xFF08;&#x53EA;&#x5B58;&#x50A8;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x57FA;&#x4E8E;cas"><a name="synchronousqueue&#xFF08;&#x53EA;&#x5B58;&#x50A8;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x57FA;&#x4E8E;cas" class="plugin-anchor" href="#synchronousqueue&#xFF08;&#x53EA;&#x5B58;&#x50A8;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x57FA;&#x4E8E;cas"><i class="fa fa-link" aria-hidden="true"></i></a>SynchronousQueue&#xFF08;&#x53EA;&#x5B58;&#x50A8;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x57FA;&#x4E8E;CAS)</h2>
<ul>
<li>&#x5B9E;&#x73B0;&#x4E86;BlockingQueue&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x963B;&#x585E;&#x961F;&#x5217;&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x53EA;&#x5B58;&#x50A8;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x7684;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x6BCF;&#x4E2A;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x7B49;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x79FB;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x5426;&#x5219;&#x63D2;&#x5165;&#x4E00;&#x76F4;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#xFF0C;&#x541E;&#x5410;&#x91CF;&#x9AD8;&#x4E8E;LinkedBlockingQueue&#x3002;</li>
<li><p>SynchronousQueue&#x5185;&#x90E8;&#x5E76;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x4F60;&#x4E0D;&#x80FD;&#x8C03;&#x7528;peek()&#x65B9;&#x6CD5;&#x6765;&#x770B;&#x961F;&#x5217;&#x4E2D;&#x662F;&#x5426;&#x6709;&#x6570;&#x636E;&#x5143;&#x7D20;&#xFF0C;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x5143;&#x7D20;&#x53EA;&#x6709;&#x5F53;&#x4F60;&#x8BD5;&#x7740;&#x53D6;&#x8D70;&#x7684;&#x65F6;&#x5019;&#x624D;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#xFF0C;&#x4E0D;&#x53D6;&#x8D70;&#x800C;&#x53EA;&#x60F3;&#x5077;&#x7AA5;&#x4E00;&#x4E0B;&#x662F;&#x4E0D;&#x884C;&#x7684;&#xFF0C;&#x5F53;&#x7136;&#x904D;&#x5386;&#x8FD9;&#x4E2A;&#x961F;&#x5217;&#x7684;&#x64CD;&#x4F5C;&#x4E5F;&#x662F;&#x4E0D;&#x5141;&#x8BB8;&#x7684;&#x3002;&#x961F;&#x5217;&#x5934;&#x5143;&#x7D20;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x6392;&#x961F;&#x8981;&#x63D2;&#x5165;&#x6570;&#x636E;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8981;&#x4EA4;&#x6362;&#x7684;&#x6570;&#x636E;&#x3002;&#x6570;&#x636E;&#x662F;&#x5728;&#x914D;&#x5BF9;&#x7684;&#x751F;&#x4EA7;&#x8005;&#x548C;&#x6D88;&#x8D39;&#x8005;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x7684;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x6570;&#x636E;&#x5230;&#x961F;&#x5217;&#x4E2D;&#x3002;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x6765;&#x7406;&#x89E3;&#xFF1A;&#x751F;&#x4EA7;&#x8005;&#x548C;&#x6D88;&#x8D39;&#x8005;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#x5BF9;&#x65B9;&#xFF0C;&#x63E1;&#x624B;&#xFF0C;&#x7136;&#x540E;&#x4E00;&#x8D77;&#x79BB;&#x5F00;&#x3002;</p>
</li>
<li><p>// &#x5982;&#x679C;&#x4E3A; true&#xFF0C;&#x5219;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x4EE5; FIFO &#x7684;&#x987A;&#x5E8F;&#x7ADE;&#x4E89;&#x8BBF;&#x95EE;&#xFF1B;&#x5426;&#x5219;&#x987A;&#x5E8F;&#x662F;&#x672A;&#x6307;&#x5B9A;&#x7684;&#x3002;  </p>
</li>
<li>// SynchronousQueue<integer> sc =new SynchronousQueue&lt;&gt;(true);//fair -  </integer></li>
<li>SynchronousQueue<integer> sc = new SynchronousQueue&lt;&gt;(); // &#x9ED8;&#x8BA4;&#x4E0D;&#x6307;&#x5B9A;&#x7684;&#x8BDD;&#x662F;false&#xFF0C;&#x4E0D;&#x516C;&#x5E73;&#x7684;  </integer></li>
</ul>
<h2 id="4transferqueue&#xFF08;&#x7279;&#x6B8A;&#x7684;blockingqueue"><a name="4transferqueue&#xFF08;&#x7279;&#x6B8A;&#x7684;blockingqueue" class="plugin-anchor" href="#4transferqueue&#xFF08;&#x7279;&#x6B8A;&#x7684;blockingqueue"><i class="fa fa-link" aria-hidden="true"></i></a>4)TransferQueue&#xFF08;&#x7279;&#x6B8A;&#x7684;BlockingQueue)</h2>
<ul>
<li>&#x751F;&#x4EA7;&#x8005;&#x4F1A;&#x4E00;&#x76F4;&#x963B;&#x585E;&#x76F4;&#x5230;&#x6240;&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;&#x7684;&#x5143;&#x7D20;&#x88AB;&#x67D0;&#x4E00;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x6240;&#x6D88;&#x8D39;&#xFF08;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5217;&#x91CC;&#x5C31;&#x5B8C;&#x4E8B;)</li>
<li>&#x5F53;&#x6211;&#x4EEC;&#x4E0D;&#x60F3;&#x751F;&#x4EA7;&#x8005;&#x8FC7;&#x5EA6;&#x751F;&#x4EA7;&#x6D88;&#x606F;&#x65F6;&#xFF0C;TransferQueue&#x53EF;&#x80FD;&#x975E;&#x5E38;&#x6709;&#x7528;&#xFF0C;&#x53EF;&#x907F;&#x514D;&#x53D1;&#x751F;OutOfMemory&#x9519;&#x8BEF;&#x3002;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x8BBE;&#x8BA1;&#x4E2D;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x7684;&#x6D88;&#x8D39;&#x80FD;&#x529B;&#x5C06;&#x51B3;&#x5B9A;&#x751F;&#x4EA7;&#x8005;&#x4EA7;&#x751F;&#x6D88;&#x606F;&#x7684;&#x901F;&#x5EA6;&#x3002;</li>
</ul>
<pre><code>public interface TransferQueue&lt;E&gt; extends BlockingQueue&lt;E&gt; {
</code></pre><pre><code>    /**
</code></pre><ul>
<li><ul>
<li>&#x7ACB;&#x5373;&#x8F6C;&#x4EA4;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7ED9;&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x961F;&#x5217;&#x6CA1;&#x6709;&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x90A3;&#x5C31;false</li>
</ul>
</li>
<li>*/</li>
<li>boolean tryTransfer(E e);</li>
</ul>
<pre><code>    /**
</code></pre><ul>
<li><ul>
<li>&#x8F6C;&#x4EA4;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7ED9;&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x961F;&#x5217;&#x6CA1;&#x6709;&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x90A3;&#x5C31;&#x963B;&#x585E;</li>
</ul>
</li>
<li>*/</li>
<li>void transfer(E e) throws InterruptedException;</li>
</ul>
<pre><code>    /**
</code></pre><ul>
<li><ul>
<li>&#x5E26;&#x8D85;&#x65F6;&#x7684;tryTransfer</li>
</ul>
</li>
<li>*/</li>
<li>boolean tryTransfer(E e, long timeout, TimeUnit unit)</li>
<li>throws InterruptedException;</li>
</ul>
<pre><code>    /**
</code></pre><ul>
<li><ul>
<li>&#x662F;&#x5426;&#x6709;&#x6D88;&#x8D39;&#x8005;&#x7B49;&#x5F85;&#x63A5;&#x6536;&#x6570;&#x636E;&#xFF0C;&#x77AC;&#x65F6;&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x4E00;&#x5B9A;&#x51C6;</li>
</ul>
</li>
<li>*/</li>
<li>boolean hasWaitingConsumer();</li>
</ul>
<pre><code>    /**
</code></pre><ul>
<li><ul>
<li>&#x8FD4;&#x56DE;&#x8FD8;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x7B49;&#x5F85;&#x7684;&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x8DDF;&#x4E0A;&#x9762;&#x90A3;&#x4E2A;&#x4E00;&#x6837;&#xFF0C;&#x90FD;&#x662F;&#x4E00;&#x79CD;&#x77AC;&#x65F6;&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x4E00;&#x5B9A;&#x51C6;</li>
</ul>
</li>
<li>*/</li>
<li>int getWaitingConsumerCount();</li>
<li>}</li>
<li></li>
</ul>
<h3 id="linkedtransferqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><a name="linkedtransferqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;" class="plugin-anchor" href="#linkedtransferqueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;"><i class="fa fa-link" aria-hidden="true"></i></a>LinkedTransferQueue&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x65E0;&#x754C;&#x540C;&#x6B65;&#x961F;&#x5217;)</h3>
<ul>
<li>LinkedTransferQueue&#x5B9E;&#x73B0;&#x4E86;TransferQueue&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x7EE7;&#x627F;&#x4E86;BlockingQueue&#x3002;&#x4E4B;&#x524D;BlockingQueue&#x662F;&#x961F;&#x5217;&#x6EE1;&#x65F6;&#x518D;&#x5165;&#x961F;&#x4F1A;&#x963B;&#x585E;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x662F;&#x961F;&#x5217;&#x4E0D;&#x6EE1;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x963B;&#x585E;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x79CD;&#x6709;&#x963B;&#x585E;&#x7684;&#x5165;&#x961F;&#x529F;&#x80FD;&#x3002;</li>
<li>LinkedTransferQueue&#x5B9E;&#x9645;&#x4E0A;&#x662F;ConcurrentLinkedQueue&#x3001;SynchronousQueue&#xFF08;&#x516C;&#x5E73;&#x6A21;&#x5F0F;)&#x548C;LinkedBlockingQueue&#x7684;&#x8D85;&#x96C6;&#x3002;&#x800C;&#x4E14;LinkedTransferQueue&#x66F4;&#x597D;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0D;&#x4EC5;&#x4EC5;&#x7EFC;&#x5408;&#x4E86;&#x8FD9;&#x51E0;&#x4E2A;&#x7C7B;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
<li></li>
</ul>
<h2 id="5queue&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;"><a name="5queue&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;" class="plugin-anchor" href="#5queue&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>5)Queue&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;</h2>
<ul>
<li>&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1A;ArrayDeque&#x3001;LinkedList&#x3001;PriorityQueue</li>
<li>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1A;ConcurrentLinkedQueue&#x3001;ConcurrentLinkedDeque&#x3001;ArrayBlockingQueue&#x3001;LinkedBlockingQueue&#x3001;PriorityBlockingQueue</li>
<li>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x53C8;&#x5206;&#x4E3A;&#x963B;&#x585E;&#x961F;&#x5217;&#x548C;&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x963B;&#x585E;&#x961F;&#x5217;&#x63D0;&#x4F9B;&#x4E86;put&#x3001;take&#x7B49;&#x4F1A;&#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;ArrayBlockingQueue&#x3001;LinkedBlockingQueue&#x3001;PriorityBlockingQueue&#xFF0C;&#x4E5F;&#x6709;offer&#x3001;poll&#x7B49;&#x963B;&#x585E;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5019;&#x8FD4;&#x56DE;&#x7684;&#x65B9;&#x6CD5;&#xFF1B;</li>
<li>&#x975E;&#x963B;&#x585E;&#x961F;&#x5217;&#x662F;&#x4F7F;&#x7528;CAS&#x673A;&#x5236;&#x4FDD;&#x8BC1;offer&#x3001;poll&#x7B49;&#x53EF;&#x4EE5;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x5730;&#x5165;&#x961F;&#x51FA;&#x961F;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x52A0;&#x9501;&#xFF0C;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x6BD4;&#x5982;ConcurrentLinkedQueue&#x3001;ConcurrentLinkedDeque&#x3002;</li>
</ul>
<h3 id="arrayblockingqueue&#x548C;linkedblockingqueue-&#x533A;&#x522B;"><a name="arrayblockingqueue&#x548C;linkedblockingqueue-&#x533A;&#x522B;" class="plugin-anchor" href="#arrayblockingqueue&#x548C;linkedblockingqueue-&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>ArrayBlockingQueue&#x548C;LinkedBlockingQueue &#x533A;&#x522B;</h3>
<ul>
<li><ol>
<li>&#x961F;&#x5217;&#x4E2D;&#x9501;&#x7684;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;</li>
</ol>
</li>
<li>ArrayBlockingQueue&#x5B9E;&#x73B0;&#x7684;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x9501;&#x662F;&#x6CA1;&#x6709;&#x5206;&#x79BB;&#x7684;&#xFF0C;&#x5373;&#x751F;&#x4EA7;&#x548C;&#x6D88;&#x8D39;&#x7528;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x9501;&#xFF1B;</li>
<li>LinkedBlockingQueue&#x5B9E;&#x73B0;&#x7684;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x9501;&#x662F;&#x5206;&#x79BB;&#x7684;&#xFF0C;&#x5373;&#x751F;&#x4EA7;&#x7528;&#x7684;&#x662F;putLock&#xFF0C;&#x6D88;&#x8D39;&#x662F;takeLock</li>
<li><ol>
<li>&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;</li>
</ol>
</li>
<li>&#x524D;&#x8005;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#xFF0C;&#x540E;&#x8005;&#x57FA;&#x4E8E;&#x94FE;&#x8868;</li>
<li><ol>
<li>&#x961F;&#x5217;&#x8FB9;&#x754C;&#x4E0D;&#x540C;</li>
</ol>
</li>
<li>ArrayBlockingQueue&#x5B9E;&#x73B0;&#x7684;&#x961F;&#x5217;&#x4E2D;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x961F;&#x5217;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x662F;&#x6709;&#x754C;&#x961F;&#x5217;</li>
<li><p>LinkedBlockingQueue&#x5B9E;&#x73B0;&#x7684;&#x961F;&#x5217;&#x4E2D;&#x53EF;&#x4EE5;&#x4E0D;&#x6307;&#x5B9A;&#x961F;&#x5217;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4F46;&#x662F;&#x9ED8;&#x8BA4;&#x662F;Integer.MAX_VALUE&#xFF0C;&#x662F;&#x65E0;&#x754C;&#x961F;&#x5217;</p>
</li>
<li></li>
</ul>
<h1 id="35-map"><a name="35-map" class="plugin-anchor" href="#35-map"><i class="fa fa-link" aria-hidden="true"></i></a>3.5 Map</h1>
<h2 id="hashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x65E0;&#x5E8F;&#x952E;&#x503C;&#x5BF9;&#x96C6;&#x5408;&#xFF0C;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;"><a name="hashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x65E0;&#x5E8F;&#x952E;&#x503C;&#x5BF9;&#x96C6;&#x5408;&#xFF0C;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;" class="plugin-anchor" href="#hashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x65E0;&#x5E8F;&#x952E;&#x503C;&#x5BF9;&#x96C6;&#x5408;&#xFF0C;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;"><i class="fa fa-link" aria-hidden="true"></i></a>HashMap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;+&#x94FE;&#x8868;/&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x65E0;&#x5E8F;&#x952E;&#x503C;&#x5BF9;&#x96C6;&#x5408;&#xFF0C;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;)</h2>
<ul>
<li>&#x57FA;&#x4E8E;&#x54C8;&#x5E0C;&#x8868;&#x5B9E;&#x73B0;&#xFF0C;&#x94FE;&#x5730;&#x5740;&#x6CD5;&#x3002;</li>
<li>loadFactor&#x9ED8;&#x8BA4;&#x4E3A;0.75&#xFF0C;threshold&#xFF08;&#x9608;)&#x4E3A;12&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5927;&#x5C0F;&#x4E3A;16&#x7684;Entry&#x6570;&#x7EC4;&#x3002;</li>
<li>&#x5728;&#x904D;&#x5386;&#x65F6;&#x662F;&#x65E0;&#x5E8F;&#x7684;&#xFF0C;&#x5982;&#x9700;&#x6709;&#x5E8F;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;TreeMap&#x3002;</li>
<li>&#x91C7;&#x7528;&#x6570;&#x7EC4;&#x65B9;&#x5F0F;&#x5B58;&#x50A8;key&#x3001;value&#x6784;&#x6210;&#x7684;Entry&#x5BF9;&#x8C61;&#xFF0C;&#x65E0;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#x3002;</li>
<li>&#x57FA;&#x4E8E;key hash&#x5BFB;&#x627E;Entry&#x5BF9;&#x8C61;&#x5B58;&#x653E;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5BF9;&#x4E8E;hash&#x51B2;&#x7A81;&#x91C7;&#x7528;&#x94FE;&#x8868;/&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x89E3;&#x51B3;&#x3002;</li>
<li>HashMap&#x5728;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x65F6;&#x53EF;&#x80FD;&#x4F1A;&#x6269;&#x5927;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x5728;&#x6269;&#x5927;&#x5BB9;&#x91CF;&#x65F6;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;hash&#xFF0C;&#x5E76;&#x590D;&#x5236;&#x5BF9;&#x8C61;&#x5230;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x4E2D;&#x3002;</li>
<li><p>&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</p>
</li>
<li><p>// 1. &#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#x65F6;&#x91C7;&#x7528;&#x94FE;&#x8868;&#x6CD5;&#x7684;&#x7C7B;&#xFF0C;&#x4E00;&#x4E2A;&#x54C8;&#x5E0C;&#x6876;&#x591A;&#x4E8E;8&#x4E2A;&#x5143;&#x7D20;&#x6539;&#x4E3A;TreeNode</p>
</li>
<li>static class Node<k,v> implements Map.Entry<k,v></k,v></k,v></li>
<li>// 2. &#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#x65F6;&#x91C7;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x5B58;&#x50A8;&#x7684;&#x7C7B;&#xFF0C;&#x4E00;&#x4E2A;&#x54C8;&#x5E0C;&#x6876;&#x5C11;&#x4E8E;6&#x4E2A;&#x5143;&#x7D20;&#x6539;&#x4E3A;Node</li>
<li><p>static final class TreeNode<k,v> extends LinkedHashMap.Entry<k,v></k,v></k,v></p>
</li>
<li><p>&#x67D0;&#x4E2A;&#x6876;&#x5BF9;&#x5E94;&#x7684;&#x94FE;&#x8868;&#x8FC7;&#x957F;&#x7684;&#x8BDD;&#x641C;&#x7D22;&#x6548;&#x7387;&#x4F4E;&#xFF0C;&#x6539;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x6548;&#x7387;&#x4F1A;&#x63D0;&#x9AD8;&#x3002;</p>
</li>
<li><p>&#x4E3A;&#x4F55;&#x6309;&#x4F4D;&#x4E0E;&#x800C;&#x4E0D;&#x662F;&#x53D6;&#x6478; hashmap&#x7684;iterator&#x8BFB;&#x53D6;&#x65F6;&#x662F;&#x5426;&#x4F1A;&#x8BFB;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;put&#x7684;&#x6570;&#x636E; &#x7EA2;&#x9ED1;&#x6811;&#xFF1B;hashmap&#x62A5;ConcurrentModificationException&#x7684;&#x60C5;&#x51B5;</p>
</li>
<li><p>Hash&#x51B2;&#x7A81;&#x4E2D;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#x7684;&#x6570;&#x91CF;&#x5927;&#x4E8E;8&#x4E2A;&#xFF0C;&#x5219;&#x8C03;&#x7528;&#x6811;&#x5316;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x7ED3;&#x6784;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x67E5;&#x627E;&#x7A0D;&#x5FAE;&#x5FEB;&#x4E9B;&#xFF1B;&#x7EA2;&#x9ED1;&#x6811;&#x7ED3;&#x6784;&#x7684;&#x6570;&#x91CF;&#x5C0F;&#x4E8E;6&#x4E2A;&#x65F6;&#xFF0C;&#x5219;&#x8F6C;&#x4E3A;&#x94FE;&#x8868;&#x7ED3;&#x6784;</p>
</li>
<li>&#x5982;&#x679C;&#x52A0;&#x8F7D;&#x56E0;&#x5B50;&#x8D8A;&#x5927;&#xFF0C;&#x5BF9;&#x7A7A;&#x95F4;&#x7684;&#x5229;&#x7528;&#x66F4;&#x5145;&#x5206;&#xFF0C;&#x4F46;&#x662F;&#x67E5;&#x627E;&#x6548;&#x7387;&#x4F1A;&#x964D;&#x4F4E;&#xFF08;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x957F;)&#xFF1B;&#x5982;&#x679C;&#x52A0;&#x8F7D;&#x56E0;&#x5B50;&#x592A;&#x5C0F;&#xFF0C;&#x90A3;&#x4E48;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5C06;&#x8FC7;&#x4E8E;&#x7A00;&#x758F;&#xFF08;&#x5F88;&#x591A;&#x7A7A;&#x95F4;&#x8FD8;&#x6CA1;&#x7528;&#xFF0C;&#x5C31;&#x5F00;&#x59CB;&#x6269;&#x5BB9;&#x4E86;)&#xFF0C;&#x5BF9;&#x7A7A;&#x95F4;&#x9020;&#x6210;&#x4E25;&#x91CD;&#x6D6A;&#x8D39;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x4E0D;&#x6307;&#x5B9A;&#xFF0C;&#x5219;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x52A0;&#x8F7D;&#x56E0;&#x5B50;&#x4E3A;0.75&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x7406;&#x60F3;&#x7684;&#x503C;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x6211;&#x4EEC;&#x662F;&#x65E0;&#x9700;&#x4FEE;&#x6539;&#x7684;&#x3002;<ul>
<li>&#x4E00;&#x822C;&#x5BF9;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x6563;&#x5217;&#x5F88;&#x81EA;&#x7136;&#x5730;&#x4F1A;&#x60F3;&#x5230;&#x7528;hash&#x503C;&#x5BF9;length&#x53D6;&#x6A21;&#xFF08;&#x5373;&#x9664;&#x6CD5;&#x6563;&#x5217;&#x6CD5;)&#xFF0C;Hashtable&#x4E2D;&#x4E5F;&#x662F;&#x8FD9;&#x6837;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x57FA;&#x672C;&#x80FD;&#x4FDD;&#x8BC1;&#x5143;&#x7D20;&#x5728;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x6563;&#x5217;&#x7684;&#x6BD4;&#x8F83;&#x5747;&#x5300;&#xFF0C;&#x4F46;&#x53D6;&#x6A21;&#x4F1A;&#x7528;&#x5230;&#x9664;&#x6CD5;&#x8FD0;&#x7B97;&#xFF0C;&#x6548;&#x7387;&#x5F88;&#x4F4E;&#xFF0C;HashMap&#x4E2D;&#x5219;&#x901A;&#x8FC7;h&amp;(length-1)&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4EE3;&#x66FF;&#x53D6;&#x6A21;&#xFF0C;&#x540C;&#x6837;&#x5B9E;&#x73B0;&#x4E86;&#x5747;&#x5300;&#x7684;&#x6563;&#x5217;&#xFF0C;&#x4F46;&#x6548;&#x7387;&#x8981;&#x9AD8;&#x5F88;&#x591A;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;HashMap&#x5BF9;Hashtable&#x7684;&#x4E00;&#x4E2A;&#x6539;&#x8FDB;&#x3002;</li>
<li>&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x5BB9;&#x91CF;&#x4E00;&#x5B9A;&#x8981;&#x662F;2&#x7684;&#x6574;&#x6570;&#x6B21;&#x5E42;&#x3002;&#x9996;&#x5148;&#xFF0C;length&#x4E3A;2&#x7684;&#x6574;&#x6570;&#x6B21;&#x5E42;&#x7684;&#x8BDD;&#xFF0C;h&amp;(length-1)&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x5BF9;length&#x53D6;&#x6A21;&#xFF0C;&#x8FD9;&#x6837;&#x4FBF;&#x4FDD;&#x8BC1;&#x4E86;&#x6563;&#x5217;&#x7684;&#x5747;&#x5300;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x63D0;&#x5347;&#x4E86;&#x6548;&#x7387;&#xFF1B;&#x5176;&#x6B21;&#xFF0C;length&#x4E3A;2&#x7684;&#x6574;&#x6570;&#x6B21;&#x5E42;&#x7684;&#x8BDD;&#xFF0C;&#x4E3A;&#x5076;&#x6570;&#xFF0C;&#x8FD9;&#x6837;length-1&#x4E3A;&#x5947;&#x6570;&#xFF0C;&#x5947;&#x6570;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#x662F;1&#xFF0C;&#x8FD9;&#x6837;&#x4FBF;&#x4FDD;&#x8BC1;&#x4E86;h&amp;(length-1)&#x7684;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#x53EF;&#x80FD;&#x4E3A;0&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x4E3A;1&#xFF08;&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;h&#x7684;&#x503C;)&#xFF0C;&#x5373;&#x4E0E;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x53EF;&#x80FD;&#x4E3A;&#x5076;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x4E3A;&#x5947;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x4FBF;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6563;&#x5217;&#x7684;&#x5747;&#x5300;&#x6027;&#xFF0C;&#x800C;&#x5982;&#x679C;length&#x4E3A;&#x5947;&#x6570;&#x7684;&#x8BDD;&#xFF0C;&#x5F88;&#x660E;&#x663E;length-1&#x4E3A;&#x5076;&#x6570;&#xFF0C;&#x5B83;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#x662F;0&#xFF0C;&#x8FD9;&#x6837;h&amp;(length-1)&#x7684;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#x80AF;&#x5B9A;&#x4E3A;0&#xFF0C;&#x5373;&#x53EA;&#x80FD;&#x4E3A;&#x5076;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x4EFB;&#x4F55;hash&#x503C;&#x90FD;&#x53EA;&#x4F1A;&#x88AB;&#x6563;&#x5217;&#x5230;&#x6570;&#x7EC4;&#x7684;&#x5076;&#x6570;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x8FD9;&#x4FBF;&#x6D6A;&#x8D39;&#x4E86;&#x8FD1;&#x4E00;&#x534A;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;length&#x53D6;2&#x7684;&#x6574;&#x6570;&#x6B21;&#x5E42;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x4F7F;&#x4E0D;&#x540C;hash&#x503C;&#x53D1;&#x751F;&#x78B0;&#x649E;&#x7684;&#x6982;&#x7387;&#x8F83;&#x5C0F;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x4F7F;&#x5143;&#x7D20;&#x5728;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x5747;&#x5300;&#x5730;&#x6563;&#x5217;&#x3002;</li>
</ul>
</li>
<li>Map#Entry&#xFF08;&#x63A5;&#x53E3;)</li>
</ul>
<pre><code>interface Entry&lt;K,V&gt; {
    K getKey();

    V getValue();

    V setValue(V value);

    boolean equals(Object o);
    int hashCode();
    public static &lt;K extends Comparable&lt;? super K&gt;, V&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByKey() {
        return (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)
            (c1, c2) -&gt; c1.getKey().compareTo(c2.getKey());
    }

    public static &lt;K, V extends Comparable&lt;? super V&gt;&gt; Comparator&lt;Map.Entry&lt;K,V&gt;&gt; comparingByValue() {
        return (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)
            (c1, c2) -&gt; c1.getValue().compareTo(c2.getValue());
    }

    public static &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByKey(Comparator&lt;? super K&gt; cmp) {
        Objects.requireNonNull(cmp);
        return (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)
            (c1, c2) -&gt; cmp.compare(c1.getKey(), c2.getKey());
    }

    public static &lt;K, V&gt; Comparator&lt;Map.Entry&lt;K, V&gt;&gt; comparingByValue(Comparator&lt;? super V&gt; cmp) {
        Objects.requireNonNull(cmp);
        return (Comparator&lt;Map.Entry&lt;K, V&gt;&gt; &amp; Serializable)
            (c1, c2) -&gt; cmp.compare(c1.getValue(), c2.getValue());
    }
}
</code></pre><ul>
<li>HashMap#Node&#xFF08;Map.Entry&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x94FE;&#x8868;&#x7684;&#x57FA;&#x672C;&#x5143;&#x7D20;)</li>
</ul>
<pre><code>static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
    final int hash;
    final K key;
    V value;
    Node&lt;K,V&gt; next;

    Node(int hash, K key, V value, Node&lt;K,V&gt; next) {
        this.hash = hash;
        this.key = key;
        this.value = value;
        this.next = next;
    }

    public final K getKey()        { return key; }
    public final V getValue()      { return value; }
    public final String toString() { return key + &quot;=&quot; + value; }

    public final int hashCode() {
        return Objects.hashCode(key) ^ Objects.hashCode(value);
    }

    public final V setValue(V newValue) {
        V oldValue = value;
        value = newValue;
        return oldValue;
    }

    public final boolean equals(Object o) {
        if (o == this)
            return true;
        if (o instanceof Map.Entry) {
            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;
            if (Objects.equals(key, e.getKey()) &amp;&amp;
                Objects.equals(value, e.getValue()))
                return true;
        }
        return false;
    }
}
</code></pre><ul>
<li>HashMap#TreeNode&#xFF08;Map.Entry&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x57FA;&#x672C;&#x5143;&#x7D20;)</li>
<li>static final class TreeNode<k,v> extends LinkedHashMap.Entry<k,v> {
  TreeNode<k,v> parent;  // red-black tree links
  TreeNode<k,v> left;
  TreeNode<k,v> right;
  TreeNode<k,v> prev;    // needed to unlink next upon deletion
  boolean red;
  TreeNode(int hash, K key, V val, Node<k,v> next) {<pre><code>  super(hash, key, val, next);
</code></pre>  }</k,v></k,v></k,v></k,v></k,v></k,v></k,v></li>
<li>//...</li>
<li><p>}</p>
</li>
<li><p>LinkedHashMap#Entry</p>
</li>
<li><p>static class Entry<k,v> extends HashMap.Node<k,v> {
  Entry<k,v> before, after;
  Entry(int hash, K key, V value, Node<k,v> next) {</k,v></k,v></k,v></k,v></p>
<pre><code>  super(hash, key, value, next);
</code></pre><p>  }
}</p>
</li>
<li></li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>/**
 * The default initial capacity - MUST be a power of two.
 */
static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16

/**
 * The maximum capacity, used if a higher value is implicitly specified
 * by either of the constructors with arguments.
 * MUST be a power of two &lt;= 1&lt;&lt;30.
 */
static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;

/**
 * The load factor used when none specified in constructor.
 */
static final float DEFAULT_LOAD_FACTOR = 0.75f;

/**
 * The bin count threshold for using a tree rather than list for a
 * bin.  Bins are converted to trees when adding an element to a
 * bin with at least this many nodes. The value must be greater
 * than 2 and should be at least 8 to mesh with assumptions in
 * tree removal about conversion back to plain bins upon
 * shrinkage.
 */
static final int TREEIFY_THRESHOLD = 8;

/**
 * The bin count threshold for untreeifying a (split) bin during a
 * resize operation. Should be less than TREEIFY_THRESHOLD, and at
 * most 6 to mesh with shrinkage detection under removal.
 */
static final int UNTREEIFY_THRESHOLD = 6;

/**
 * The smallest table capacity for which bins may be treeified.
 * (Otherwise the table is resized if too many nodes in a bin.)
 * Should be at least 4 * TREEIFY_THRESHOLD to avoid conflicts
 * between resizing and treeification thresholds.
 */
static final int MIN_TREEIFY_CAPACITY = 64;
</code></pre><pre><code>/**
 * The table, initialized on first use, and resized as
 * necessary. When allocated, length is always a power of two.
 * (We also tolerate length zero in some operations to allow
 * bootstrapping mechanics that are currently not needed.)
 */
transient Node&lt;K,V&gt;[] table;

/**
 * Holds cached entrySet(). Note that AbstractMap fields are used
 * for keySet() and values().
 */
transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;

/**
 * The number of key-value mappings contained in this map.
 */
transient int size;

/**
 * The number of times this HashMap has been structurally modified
 * Structural modifications are those that change the number of mappings in
 * the HashMap or otherwise modify its internal structure (e.g.,
 * rehash).  This field is used to make iterators on Collection-views of
 * the HashMap fail-fast.  (See ConcurrentModificationException).
 */
transient int modCount;

/**
 * The next size value at which to resize (capacity * load factor).
 *
 * @serial
 */
// (The javadoc description is true upon serialization.
// Additionally, if the table array has not been allocated, this
// field holds the initial array capacity, or zero signifying
// DEFAULT_INITIAL_CAPACITY.)
</code></pre><pre><code>// HashMap&#x7684;&#x9608;&#x503C;&#xFF0C;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;&#x8C03;&#x6574;HashMap&#x7684;&#x5BB9;&#x91CF;&#xFF08;threshold = &#x5BB9;&#x91CF;*&#x88C5;&#x8F7D;&#x56E0;&#x5B50;)
int threshold;

/**
 * The load factor for the hash table.
 *
 * @serial
 */
final float loadFactor;
</code></pre><ul>
<li>AbstractMap</li>
<li>transient Set<k>        keySet;
transient Collection<v> values;</v></k></li>
</ul>
<h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<ul>
<li>&#x6CE8;&#x610F;&#x54EA;&#x6015;&#x662F;&#x6307;&#x5B9A;&#x4E86;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x76F4;&#x63A5;&#x521D;&#x59CB;&#x5316;table&#xFF0C;&#x800C;&#x662F;&#x5728;&#x7B2C;&#x4E00;&#x6B21;put&#x65F6;&#x8C03;&#x7528;resize&#x6765;&#x521D;&#x59CB;&#x5316;table&#xFF0C;resize&#x91CC;&#x4F1A;&#x5C06;threshold&#x89C6;&#x4E3A;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x3002;</li>
</ul>
<pre><code>public HashMap(int initialCapacity, float loadFactor) {
    if (initialCapacity &lt; 0)
        throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; +
                                           initialCapacity);
    if (initialCapacity &gt; MAXIMUM_CAPACITY)
        initialCapacity = MAXIMUM_CAPACITY;
    if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))
        throw new IllegalArgumentException(&quot;Illegal load factor: &quot; +
                                           loadFactor);
    this.loadFactor = loadFactor;
</code></pre><pre><code>// &#x9608;&#x503C;&#x4E3A;&#x4E0D;&#x5C0F;&#x4E8E;&#x5BB9;&#x91CF;&#x7684;2&#x7684;&#x5E42;&#x6B21;
    this.threshold = tableSizeFor(initialCapacity);
}

public HashMap(int initialCapacity) {
    this(initialCapacity, DEFAULT_LOAD_FACTOR);
}

/**
 * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the default initial capacity
 * (16) and the default load factor (0.75).
 */
public HashMap() {
    this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted
}
</code></pre><ul>
<li><h3 id="tablesizefor&#xFF08;&#x627E;&#x5230;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;initialcapacity&#x7684;&#x6700;&#x5C0F;&#x7684;2&#x7684;&#x5E42;&#x6B21;&#x4EE5;&#x53CA;&#x539F;&#x56E0;"><a name="tablesizefor&#xFF08;&#x627E;&#x5230;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;initialcapacity&#x7684;&#x6700;&#x5C0F;&#x7684;2&#x7684;&#x5E42;&#x6B21;&#x4EE5;&#x53CA;&#x539F;&#x56E0;" class="plugin-anchor" href="#tablesizefor&#xFF08;&#x627E;&#x5230;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;initialcapacity&#x7684;&#x6700;&#x5C0F;&#x7684;2&#x7684;&#x5E42;&#x6B21;&#x4EE5;&#x53CA;&#x539F;&#x56E0;"><i class="fa fa-link" aria-hidden="true"></i></a>tableSizeFor&#xFF08;&#x627E;&#x5230;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;initialCapacity&#x7684;&#x6700;&#x5C0F;&#x7684;2&#x7684;&#x5E42;&#x6B21;&#x4EE5;&#x53CA;&#x539F;&#x56E0;)</h3>
</li>
</ul>
<pre><code>/**
 * Returns a power of two size for the given target capacity.
 */
static final int tableSizeFor(int cap) {
    int n = cap - 1;
    n |= n &gt;&gt;&gt; 1;
    n |= n &gt;&gt;&gt; 2;
    n |= n &gt;&gt;&gt; 4;
    n |= n &gt;&gt;&gt; 8;
    n |= n &gt;&gt;&gt; 16;
    return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;
}
</code></pre><ul>
<li><h3 id="hash&#xFF08;hash&#x7B97;&#x6CD5;&#xFF0C;&#x7B97;&#x6CD5;&#x6BD4;&#x8F83;&#x9AD8;&#x6548;&#x3001;&#x5747;&#x5300;"><a name="hash&#xFF08;hash&#x7B97;&#x6CD5;&#xFF0C;&#x7B97;&#x6CD5;&#x6BD4;&#x8F83;&#x9AD8;&#x6548;&#x3001;&#x5747;&#x5300;" class="plugin-anchor" href="#hash&#xFF08;hash&#x7B97;&#x6CD5;&#xFF0C;&#x7B97;&#x6CD5;&#x6BD4;&#x8F83;&#x9AD8;&#x6548;&#x3001;&#x5747;&#x5300;"><i class="fa fa-link" aria-hidden="true"></i></a>hash&#xFF08;hash&#x7B97;&#x6CD5;&#xFF0C;&#x7B97;&#x6CD5;&#x6BD4;&#x8F83;&#x9AD8;&#x6548;&#x3001;&#x5747;&#x5300;)</h3>
<ul>
<li>static final int hash(Object key) {
int h;
return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);
}</li>
</ul>
</li>
<li><p>key&#x7684;hash&#x503C;&#x9AD8;16&#x4F4D;&#x4E0D;&#x53D8;&#xFF0C;&#x4F4E;16&#x4F4D;&#x4E0E;&#x9AD8;16&#x4F4D;&#x5F02;&#x6216;&#x4F5C;&#x4E3A;key&#x7684;&#x6700;&#x7EC8;hash&#x503C;&#x3002;&#xFF08;h &gt;&gt;&gt; 16&#xFF0C;&#x8868;&#x793A;&#x65E0;&#x7B26;&#x53F7;&#x53F3;&#x79FB;16&#x4F4D;&#xFF0C;&#x9AD8;&#x4F4D;&#x8865;0&#xFF0C;&#x4EFB;&#x4F55;&#x6570;&#x8DDF;0&#x5F02;&#x6216;&#x90FD;&#x662F;&#x5176;&#x672C;&#x8EAB;&#xFF0C;&#x56E0;&#x6B64;key&#x7684;hash&#x503C;&#x9AD8;16&#x4F4D;&#x4E0D;&#x53D8;&#x3002;) </p>
</li>
<li>&#x4FDD;&#x8BC1;&#x4E86;&#x5BF9;&#x8C61;&#x7684;hashCode&#x7684;&#x9AD8;16&#x4F4D;&#x7684;&#x53D8;&#x5316;&#x80FD;&#x53CD;&#x5E94;&#x5230;&#x4F4E;16&#x4F4D;&#x4E2D;&#xFF0C;</li>
</ul>
<h3 id="hash-to-index"><a name="hash-to-index" class="plugin-anchor" href="#hash-to-index"><i class="fa fa-link" aria-hidden="true"></i></a>hash to index</h3>
<ul>
<li>&#x5982;&#x4F55;&#x6839;&#x636E;hash&#x503C;&#x8BA1;&#x7B97;index&#xFF1F;&#xFF08;put&#x548C;get&#x4E2D;&#x7684;&#x4EE3;&#x7801;)</li>
<li><p>n = table.length;</p>
<ul>
<li><p>index = (n-1)&amp; hash;</p>
</li>
<li><p>&#x5F53;n&#x603B;&#x662F;2&#x7684;n&#x6B21;&#x65B9;&#x65F6;&#xFF0C;hash &amp; (n-1)&#x8FD0;&#x7B97;&#x7B49;&#x4EF7;&#x4E8E;h%n&#xFF0C;&#x4F46;&#x662F;&amp;&#x6BD4;%&#x5177;&#x6709;&#x66F4;&#x9AD8;&#x7684;&#x6548;&#x7387;&#x3002;</p>
</li>
</ul>
</li>
</ul>
<h3 id="put"><a name="put" class="plugin-anchor" href="#put"><i class="fa fa-link" aria-hidden="true"></i></a>put</h3>
<pre><code>public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}
</code></pre><ul>
<li>// onlyIfAbsent&#x5982;&#x679C;&#x4E3A;true&#xFF0C;&#x53EA;&#x6709;&#x5728;hashmap&#x6CA1;&#x6709;&#x8BE5;key&#x7684;&#x65F6;&#x5019;&#x624D;&#x6DFB;&#x52A0;</li>
<li>// evict&#x5982;&#x679C;&#x4E3A;false&#xFF0C;hashmap&#x4E3A;&#x521B;&#x5EFA;&#x6A21;&#x5F0F;&#xFF1B;&#x53EA;&#x6709;&#x5728;&#x4F7F;&#x7528;Map&#x96C6;&#x5408;&#x4F5C;&#x4E3A;&#x6784;&#x9020;&#x5668;&#x521B;&#x5EFA;LinkedHashMap&#x6216;HashMap&#x65F6;&#x624D;&#x4F1A;&#x4E3A;false&#x3002;</li>
<li>// &#x8FD9;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x5747;&#x4E3A;&#x5B9E;&#x73B0;java8&#x7684;&#x65B0;&#x63A5;&#x53E3;&#x800C;&#x8BBE;&#x7F6E;</li>
<li><p>Node<k,v> newNode(int hash, K key, V value, Node<k,v> next) {
  return new Node&lt;&gt;(hash, key, value, next);
}</k,v></k,v></p>
</li>
<li><p>final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</p>
<pre><code>         boolean evict) {
</code></pre><p>  Node<k,v>[] tab; // table</k,v></p>
</li>
<li>Node<k,v> p;  // node pointer</k,v></li>
<li>int n, i; // n &#x4E3A;length, i &#x4E3A; node index
  if ((tab = table) == null || (n = tab.length) == 0)<pre><code>  n = (tab = resize()).length;
</code></pre><ul>
<li>// index&#x5904;&#x6CA1;&#x6709;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x653E;&#x5165;&#x65B0;&#x8282;&#x70B9;
if ((p = tab[i = (n - 1) &amp; hash]) == null)
  tab[i] = newNode(hash, key, value, null);
else {</li>
</ul>
</li>
<li>// index&#x5904;&#x6709;&#x5143;&#x7D20;<pre><code>  Node&lt;K,V&gt; e; 
</code></pre></li>
<li>K k;<pre><code>  if (p.hash == hash &amp;&amp;
      ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))
</code></pre></li>
<li>// &#x5047;&#x5982;key&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x66FF;&#x6362;value&#x5373;&#x53EF;<pre><code>      e = p;
  else if (p instanceof TreeNode)
</code></pre></li>
<li>// key&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x5982;&#x679C;p&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x65B0;&#x8282;&#x70B9;&#x653E;&#x5165;&#x7EA2;&#x9ED1;&#x6811;<pre><code>      e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);
  else {
</code></pre></li>
<li>// key&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x5982;&#x679C;p&#x662F;&#x94FE;&#x8868;&#x5934;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x5224;&#x65AD;&#x94FE;&#x8868;&#x4E2D;&#x662F;&#x5426;&#x6709;&#x8BE5;&#x8282;&#x70B9;&#xFF0C;&#x5982;&#x6CA1;&#x6709;&#xFF0C;&#x5219;&#x5C06;&#x65B0;&#x8282;&#x70B9;&#x63D2;&#x5165;&#x5230;&#x94FE;&#x8868;&#x5C3E;&#x90E8;<pre><code>      for (int binCount = 0; ; ++binCount) {
          if ((e = p.next) == null) {
              p.next = newNode(hash, key, value, null);
</code></pre><ul>
<li>// &#x63D2;&#x5165;&#x540E;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x5DF2;&#x7ECF;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x5DF2;&#x7ECF;&#x9002;&#x5408;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x4E86;&#xFF0C;&#x5219;&#x8F6C;&#x6362;<pre><code>          if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
              treeifyBin(tab, hash);
          break;
      }
      // &#x94FE;&#x8868;&#x4E2D;&#x67D0;&#x5143;&#x7D20;key&#x548C;key&#x76F8;&#x540C;&#xFF0C;&#x5219;&#x66FF;&#x6362;value&#x5373;&#x53EF;
      if (e.hash == hash &amp;&amp;
          ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))
          break;
      p = e;
  }
</code></pre>  }
  if (e != null) { // existing mapping for key<pre><code>  V oldValue = e.value;
  if (!onlyIfAbsent || oldValue == null)
      e.value = value;
  afterNodeAccess(e);
  return oldValue;
</code></pre>  }
}
++modCount;</li>
</ul>
</li>
<li><p>  if (++size &gt; threshold)</p>
<pre><code>  resize();
</code></pre><p>  afterNodeInsertion(evict);
  return null;
}</p>
</li>
<li></li>
</ul>
<h3 id="&#x6269;&#x5BB9;-resize"><a name="&#x6269;&#x5BB9;-resize" class="plugin-anchor" href="#&#x6269;&#x5BB9;-resize"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9; resize</h3>
<ul>
<li>// &#x6269;&#x5BB9;&#x51FD;&#x6570;&#xFF0C;&#x5982;&#x679C;hash&#x6876;&#x4E3A;&#x7A7A;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x9ED8;&#x8BA4;&#x5927;&#x5C0F;&#xFF0C;&#x5426;&#x5219;&#x53CC;&#x500D;&#x6269;&#x5BB9;</li>
<li>// &#x6CE8;&#x610F;&#xFF01;&#xFF01;&#x56E0;&#x4E3A;&#x6269;&#x5BB9;&#x4E3A;2&#x7684;&#x500D;&#x6570;&#xFF0C;&#x6839;&#x636E;hash&#x6876;&#x7684;&#x8BA1;&#x7B97;&#x65B9;&#x6CD5;&#xFF0C;&#x5143;&#x7D20;&#x54C8;&#x5E0C;&#x503C;&#x4E0D;&#x53D8;</li>
<li>// &#x6240;&#x4EE5;&#x5143;&#x7D20;&#x5728;&#x65B0;&#x7684;hash&#x6876;&#x7684;&#x4E0B;&#x6807;&#xFF0C;&#x8981;&#x4E0D;&#x8DDF;&#x65E7;&#x7684;hash&#x6876;&#x4E0B;&#x6807;&#x4E00;&#x81F4;&#xFF0C;&#x8981;&#x4E0D;&#x589E;&#x52A0;1&#x500D;&#x3002;</li>
<li>cap&#xFF1A;capacity</li>
<li>thr&#xFF1A;threshold<ul>
<li>final Node<k,v>[] resize() {
Node<k,v>[] oldTab = table;
int oldCap = (oldTab == null) ? 0 : oldTab.length;
int oldThr = threshold;
int newCap, newThr = 0;
if (oldCap &gt; 0) {
  if (oldCap &gt;= MAXIMUM_CAPACITY) {<pre><code>  threshold = Integer.MAX_VALUE;
  return oldTab;
</code></pre>  }
  else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp;<pre><code>       oldCap &gt;= DEFAULT_INITIAL_CAPACITY)
  newThr = oldThr &lt;&lt; 1; // double threshold
</code></pre>}
else if (oldThr &gt; 0) // initial capacity was placed in threshold
  newCap = oldThr;
else {               // zero initial threshold signifies using defaults
  newCap = DEFAULT_INITIAL_CAPACITY;
  newThr = (int)(DEFAULT_LOAD_FACTOR <em> DEFAULT_INITIAL_CAPACITY);
}
if (newThr == 0) {
  float ft = (float)newCap </em> loadFactor;
  newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ?<pre><code>        (int)ft : Integer.MAX_VALUE);
</code></pre>}
threshold = newThr;
Node<k,v>[] newTab = (Node<k,v>[])new Node[newCap];
table = newTab;</k,v></k,v></k,v></k,v></li>
</ul>
</li>
<li></li>
<li><p>if (oldTab != null) {
  for (int j = 0; j &lt; oldCap; ++j) {</p>
<pre><code>  Node&lt;K,V&gt; e;
  if ((e = oldTab[j]) != null) {
</code></pre></li>
<li>// j&#x4F4D;&#x7F6E;&#x539F;&#x672C;&#x5143;&#x7D20;&#x5B58;&#x5728;<pre><code>          oldTab[j] = null;
          if (e.next == null)
</code></pre></li>
<li>// &#x5982;&#x679C;&#x8BE5;&#x4F4D;&#x7F6E;&#x6CA1;&#x6709;&#x5F62;&#x6210;&#x94FE;&#x8868;&#xFF0C;&#x5219;&#x518D;&#x6B21;&#x8BA1;&#x7B97;index&#xFF0C;&#x653E;&#x5165;&#x65B0;table</li>
<li>// &#x5047;&#x8BBE;&#x6269;&#x5BB9;&#x524D;&#x7684;table&#x5927;&#x5C0F;&#x4E3A;2&#x7684;N&#x6B21;&#x65B9;&#xFF0C;&#x6709;&#x4E0A;&#x8FF0;put&#x65B9;&#x6CD5;&#x89E3;&#x6790;&#x53EF;&#x77E5;&#xFF0C;&#x5143;&#x7D20;&#x7684;table&#x7D22;&#x5F15;&#x4E3A;&#x5176;hash&#x503C;&#x7684;&#x540E;N&#x4F4D;&#x786E;&#x5B9A;</li>
<li>&#x90A3;&#x4E48;&#x6269;&#x5BB9;&#x540E;&#x7684;table&#x5927;&#x5C0F;&#x5373;&#x4E3A;2&#x7684;N+1&#x6B21;&#x65B9;&#xFF0C;&#x5219;&#x5176;&#x4E2D;&#x5143;&#x7D20;&#x7684;table&#x7D22;&#x5F15;&#x4E3A;&#x5176;hash&#x503C;&#x7684;&#x540E;N+1&#x4F4D;&#x786E;&#x5B9A;&#xFF0C;&#x6BD4;&#x539F;&#x6765;&#x591A;&#x4E86;&#x4E00;&#x4F4D;</li>
<li>&#x56E0;&#x6B64;&#xFF0C;table&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x53EA;&#x6709;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;</li>
<li>&#x5143;&#x7D20;hash&#x503C;&#x7B2C;N+1&#x4F4D;&#x4E3A;0&#xFF1A;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4F4D;&#x7F6E;&#x8C03;&#x6574;<ul>
<li>&#x5143;&#x7D20;hash&#x503C;&#x7B2C;N+1&#x4F4D;&#x4E3A;1&#xFF1A;&#x8C03;&#x6574;&#x81F3;&#x539F;&#x7D22;&#x5F15;&#x7684;&#x4E24;&#x500D;&#x4F4D;&#x7F6E;<pre><code>          newTab[e.hash &amp; (newCap - 1)] = e;
      else if (e instanceof TreeNode)
</code></pre></li>
</ul>
</li>
<li>// &#x5982;&#x679C;&#x8BE5;&#x4F4D;&#x7F6E;&#x5F62;&#x6210;&#x4E86;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5219;split<pre><code>              ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap);
          else { // preserve order
</code></pre></li>
<li>// &#x5982;&#x679C;&#x8BE5;&#x4F4D;&#x7F6E;&#x5F62;&#x6210;&#x4E86;&#x94FE;&#x8868;&#xFF0C;&#x5219;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x94FE;&#x8868;&#xFF0C;&#x5206;&#x522B;&#x653E;&#x5728;0~oldCap,oldCap~oldCap*2&#x4F4D;&#x7F6E;&#x5904;<pre><code>              Node&lt;K,V&gt; loHead = null, loTail = null;
              Node&lt;K,V&gt; hiHead = null, hiTail = null;
              Node&lt;K,V&gt; next;
              do {
                  next = e.next;
</code></pre></li>
<li>// &#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x5143;&#x7D20;hash&#x503C;&#x7B2C;N+1&#x4F4D;&#x662F;&#x5426;&#x4E3A;0&#xFF1A;</li>
<li>&#x82E5;&#x4E3A;0&#xFF0C;&#x5219;&#x4F7F;&#x7528;loHead&#x4E0E;loTail&#xFF0C;&#x5C06;&#x5143;&#x7D20;&#x79FB;&#x81F3;&#x65B0;table&#x7684;&#x539F;&#x7D22;&#x5F15;&#x5904;</li>
<li>&#x82E5;&#x4E0D;&#x4E3A;0&#xFF0C;&#x5219;&#x4F7F;&#x7528;hiHead&#x4E0E;hiHead&#xFF0C;&#x5C06;&#x5143;&#x7D20;&#x79FB;&#x81F3;&#x65B0;table&#x7684;&#x4E24;&#x500D;&#x7D22;&#x5F15;&#x5904;<pre><code>                  if ((e.hash &amp; oldCap) == 0) {
                      if (loTail == null)
                          loHead = e;
                      else
                          loTail.next = e;
                      loTail = e;
                  }
                  else {
                      if (hiTail == null)
                          hiHead = e;
                      else
                          hiTail.next = e;
                      hiTail = e;
                  }
              } while ((e = next) != null);
              if (loTail != null) {
                  loTail.next = null;
                  newTab[j] = loHead;
              }
              if (hiTail != null) {
                  hiTail.next = null;
                  newTab[j + oldCap] = hiHead;
              }
          }
      }
  }
</code></pre>  }
  return newTab;
}<h3 id="get&#xFF08;ologn"><a name="get&#xFF08;ologn" class="plugin-anchor" href="#get&#xFF08;ologn"><i class="fa fa-link" aria-hidden="true"></i></a>get&#xFF08;O(logn))</h3>
</li>
</ul>
<pre><code>public V get(Object key) {
    Node&lt;K,V&gt; e;
    return (e = getNode(hash(key), key)) == null ? null : e.value;
}
</code></pre><pre><code>- final Node&lt;K,V&gt; getNode(int hash, Object key) {
Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k;
if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;
    (first = tab[(n - 1) &amp; hash]) != null) {
</code></pre><ul>
<li>// table&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E14;hash&#x5BF9;&#x5E94;index&#x5143;&#x7D20;&#x4E0D;&#x4E3A;&#x7A7A;</li>
<li>// &#x5982;&#x679C;index&#x4F4D;&#x7F6E;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x627E;&#x7684;key&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;<pre><code>  if (first.hash == hash &amp;&amp; // always check first node
      ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))
      return first;
</code></pre></li>
<li>// &#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x5219;&#x4ECE;&#x94FE;&#x8868;&#x6216;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x89D2;&#x5EA6;&#x7EE7;&#x7EED;&#x627E;<pre><code>  if ((e = first.next) != null) {
      if (first instanceof TreeNode)
          return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);
      do {
          if (e.hash == hash &amp;&amp;
              ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))
              return e;
      } while ((e = e.next) != null);
  }
</code></pre>  }
  return null;
}<h3 id="remove"><a name="remove" class="plugin-anchor" href="#remove"><i class="fa fa-link" aria-hidden="true"></i></a>remove</h3>
</li>
</ul>
<pre><code>public V remove(Object key) {
    Node&lt;K,V&gt; e;
    return (e = removeNode(hash(key), key, null, false, true)) == null ?
        null : e.value;
}
</code></pre><ul>
<li>value=null,matchValue=false,movable=true<ul>
<li>final Node<k,v> removeNode(int hash, Object key, Object value,<pre><code>                 boolean matchValue, boolean movable) {
</code></pre>Node<k,v>[] tab; Node<k,v> p; int n, index;
if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;
  (p = tab[index = (n - 1) &amp; hash]) != null) {
  Node<k,v> node = null, e; K k; V v;</k,v></k,v></k,v></k,v></li>
<li>// 1) &#x5982;&#x679C;hash &#x5BF9;&#x5E94;index&#x5373;&#x4E3A;&#x6211;&#x4EEC;&#x8981;&#x627E;&#x7684;key&#xFF0C;&#x5219;&#x627E;&#x5230;
  if (p.hash == hash &amp;&amp;<pre><code>  ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))
  node = p;
</code></pre></li>
<li>// 2) &#x4ECE;&#x94FE;&#x8868;&#x6216;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x89D2;&#x5EA6;&#x7EE7;&#x7EED;&#x627E;
  else if ((e = p.next) != null) {<pre><code>  if (p instanceof TreeNode)
      node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);
  else {
      do {
          if (e.hash == hash &amp;&amp;
              ((k = e.key) == key ||
               (key != null &amp;&amp; key.equals(k)))) {
              node = e;
              break;
          }
          p = e;
      } while ((e = e.next) != null);
  }
</code></pre>  }</li>
</ul>
</li>
<li>// &#x627E;&#x5230;&#x540E;&#xFF0C;&#x6839;&#x636E;&#x627E;&#x5230;&#x7684;&#x4F4D;&#x7F6E;&#x4E0D;&#x540C; &#x76F8;&#x5E94;&#x5730;&#x8FDB;&#x884C;&#x5220;&#x9664;<pre><code>  if (node != null &amp;&amp; (!matchValue || (v = node.value) == value ||
                       (value != null &amp;&amp; value.equals(v)))) {
      if (node instanceof TreeNode)
          ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable);
      else if (node == p)
          tab[index] = node.next;
      else
          p.next = node.next;
      ++modCount;
      --size;
      afterNodeRemoval(node);
      return node;
  }
</code></pre>  }
  return null;
}</li>
</ul>
<h3 id="containskey"><a name="containskey" class="plugin-anchor" href="#containskey"><i class="fa fa-link" aria-hidden="true"></i></a>containsKey</h3>
<pre><code>public boolean containsKey(Object key) {
    return getNode(hash(key), key) != null;
}
</code></pre><h3 id="containsvalue"><a name="containsvalue" class="plugin-anchor" href="#containsvalue"><i class="fa fa-link" aria-hidden="true"></i></a>containsValue</h3>
<pre><code>public boolean containsValue(Object value) {
    Node&lt;K,V&gt;[] tab; V v;
    if ((tab = table) != null &amp;&amp; size &gt; 0) {
        for (int i = 0; i &lt; tab.length; ++i) {
            for (Node&lt;K,V&gt; e = tab[i]; e != null; e = e.next) {
                if ((v = e.value) == value ||
                    (value != null &amp;&amp; value.equals(v)))
                    return true;
            }
        }
    }
    return false;
}
</code></pre><ul>
<li><h3 id="a&#x94FE;&#x8868;&#x8F6C;&#x7EA2;&#x9ED1;&#x6811;-treeifybin"><a name="a&#x94FE;&#x8868;&#x8F6C;&#x7EA2;&#x9ED1;&#x6811;-treeifybin" class="plugin-anchor" href="#a&#x94FE;&#x8868;&#x8F6C;&#x7EA2;&#x9ED1;&#x6811;-treeifybin"><i class="fa fa-link" aria-hidden="true"></i></a>a)&#x94FE;&#x8868;&#x8F6C;&#x7EA2;&#x9ED1;&#x6811; treeifyBin</h3>
</li>
</ul>
<pre><code>/**
 * Replaces all linked nodes in bin at index for given hash unless
 * table is too small, in which case resizes instead.
 */
final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) {
    int n, index; Node&lt;K,V&gt; e;
    if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)
        resize();
    else if ((e = tab[index = (n - 1) &amp; hash]) != null) {
        TreeNode&lt;K,V&gt; hd = null, tl = null;
        do {
            TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null);
            if (tl == null)
                hd = p;
            else {
                p.prev = tl;
                tl.next = p;
            }
            tl = p;
        } while ((e = e.next) != null);
        if ((tab[index] = hd) != null)
            hd.treeify(tab);
    }
}
</code></pre><ul>
<li>b)&#x7EA2;&#x9ED1;&#x6811;&#x8F6C;&#x94FE;&#x8868; TreeNode#untreeify</li>
<li>final Node<k,v> untreeify(HashMap<k,v> map) {
  Node<k,v> hd = null, tl = null;
  for (Node<k,v> q = this; q != null; q = q.next) {<pre><code>  Node&lt;K,V&gt; p = map.replacementNode(q, null);
  if (tl == null)
      hd = p;
  else
      tl.next = p;
  tl = p;
</code></pre>  }
  return hd;
}</k,v></k,v></k,v></k,v></li>
</ul>
<h3 id="c&#x7EA2;&#x9ED1;&#x6811;-&#x67E5;&#x627E;"><a name="c&#x7EA2;&#x9ED1;&#x6811;-&#x67E5;&#x627E;" class="plugin-anchor" href="#c&#x7EA2;&#x9ED1;&#x6811;-&#x67E5;&#x627E;"><i class="fa fa-link" aria-hidden="true"></i></a>c)&#x7EA2;&#x9ED1;&#x6811; &#x67E5;&#x627E;</h3>
<ul>
<li>final TreeNode<k,v> getTreeNode(int h, Object k) {
  return ((parent != null) ? root() : this).find(h, k, null);
}</k,v></li>
</ul>
<pre><code>/**
 * Finds the node starting at root p with the given hash and key.
 * The kc argument caches comparableClassFor(key) upon first use
 * comparing keys.
 */
final TreeNode&lt;K,V&gt; find(int h, Object k, Class&lt;?&gt; kc) {
    TreeNode&lt;K,V&gt; p = this;
    do {
        int ph, dir; K pk;
        TreeNode&lt;K,V&gt; pl = p.left, pr = p.right, q;
        if ((ph = p.hash) &gt; h)
            p = pl;
        else if (ph &lt; h)
            p = pr;
        else if ((pk = p.key) == k || (k != null &amp;&amp; k.equals(pk)))
            return p;
        else if (pl == null)
            p = pr;
        else if (pr == null)
            p = pl;
        else if ((kc != null ||
                  (kc = comparableClassFor(k)) != null) &amp;&amp;
                 (dir = compareComparables(kc, k, pk)) != 0)
            p = (dir &lt; 0) ? pl : pr;
        else if ((q = pr.find(h, k, kc)) != null)
            return q;
        else
            p = pl;
    } while (p != null);
    return null;
}
</code></pre><h3 id="d&#x7EA2;&#x9ED1;&#x6811;-&#x6DFB;&#x52A0;"><a name="d&#x7EA2;&#x9ED1;&#x6811;-&#x6DFB;&#x52A0;" class="plugin-anchor" href="#d&#x7EA2;&#x9ED1;&#x6811;-&#x6DFB;&#x52A0;"><i class="fa fa-link" aria-hidden="true"></i></a>d)&#x7EA2;&#x9ED1;&#x6811; &#x6DFB;&#x52A0;</h3>
<ul>
<li><p>final TreeNode<k,v> putTreeVal(HashMap<k,v> map, Node<k,v>[] tab,</k,v></k,v></k,v></p>
<pre><code>                         int h, K k, V v) {
</code></pre><p>  Class&lt;?&gt; kc = null;
  boolean searched = false;
  TreeNode<k,v> root = (parent != null) ? root() : this;
  for (TreeNode<k,v> p = root;;) {</k,v></k,v></p>
<pre><code>  int dir, ph; K pk;
  if ((ph = p.hash) &gt; h)
      dir = -1;
  else if (ph &lt; h)
      dir = 1;
  else if ((pk = p.key) == k || (k != null &amp;&amp; k.equals(pk)))
      return p;
  else if ((kc == null &amp;&amp;
            (kc = comparableClassFor(k)) == null) ||
           (dir = compareComparables(kc, k, pk)) == 0) {
      if (!searched) {
          TreeNode&lt;K,V&gt; q, ch;
          searched = true;
          if (((ch = p.left) != null &amp;&amp;
               (q = ch.find(h, k, kc)) != null) ||
              ((ch = p.right) != null &amp;&amp;
               (q = ch.find(h, k, kc)) != null))
              return q;
      }
      dir = tieBreakOrder(k, pk);
  }

  TreeNode&lt;K,V&gt; xp = p;
  if ((p = (dir &lt;= 0) ? p.left : p.right) == null) {
      Node&lt;K,V&gt; xpn = xp.next;
      TreeNode&lt;K,V&gt; x = map.newTreeNode(h, k, v, xpn);
      if (dir &lt;= 0)
          xp.left = x;
      else
          xp.right = x;
      xp.next = x;
      x.parent = x.prev = xp;
      if (xpn != null)
          ((TreeNode&lt;K,V&gt;)xpn).prev = x;
      moveRootToFront(tab, balanceInsertion(root, x));
      return null;
  }
</code></pre><p>  }
}</p>
</li>
</ul>
<h3 id="e&#x7EA2;&#x9ED1;&#x6811;-&#x5220;&#x9664;"><a name="e&#x7EA2;&#x9ED1;&#x6811;-&#x5220;&#x9664;" class="plugin-anchor" href="#e&#x7EA2;&#x9ED1;&#x6811;-&#x5220;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>e)&#x7EA2;&#x9ED1;&#x6811; &#x5220;&#x9664;</h3>
<pre><code>/**
 * Removes the given node, that must be present before this call.
 * This is messier than typical red-black deletion code because we
 * cannot swap the contents of an interior node with a leaf
 * successor that is pinned by &quot;next&quot; pointers that are accessible
 * independently during traversal. So instead we swap the tree
 * linkages. If the current tree appears to have too few nodes,
 * the bin is converted back to a plain bin. (The test triggers
 * somewhere between 2 and 6 nodes, depending on tree structure).
 */
final void removeTreeNode(HashMap&lt;K,V&gt; map, Node&lt;K,V&gt;[] tab,
                          boolean movable) {
    int n;
    if (tab == null || (n = tab.length) == 0)
        return;
    int index = (n - 1) &amp; hash;
    TreeNode&lt;K,V&gt; first = (TreeNode&lt;K,V&gt;)tab[index], root = first, rl;
    TreeNode&lt;K,V&gt; succ = (TreeNode&lt;K,V&gt;)next, pred = prev;
    if (pred == null)
        tab[index] = first = succ;
    else
        pred.next = succ;
    if (succ != null)
        succ.prev = pred;
    if (first == null)
        return;
    if (root.parent != null)
        root = root.root();
    if (root == null || root.right == null ||
        (rl = root.left) == null || rl.left == null) {
        tab[index] = first.untreeify(map);  // too small
        return;
    }
    TreeNode&lt;K,V&gt; p = this, pl = left, pr = right, replacement;
    if (pl != null &amp;&amp; pr != null) {
        TreeNode&lt;K,V&gt; s = pr, sl;
        while ((sl = s.left) != null) // find successor
            s = sl;
        boolean c = s.red; s.red = p.red; p.red = c; // swap colors
        TreeNode&lt;K,V&gt; sr = s.right;
        TreeNode&lt;K,V&gt; pp = p.parent;
        if (s == pr) { // p was s&apos;s direct parent
            p.parent = s;
            s.right = p;
        }
        else {
            TreeNode&lt;K,V&gt; sp = s.parent;
            if ((p.parent = sp) != null) {
                if (s == sp.left)
                    sp.left = p;
                else
                    sp.right = p;
            }
            if ((s.right = pr) != null)
                pr.parent = s;
        }
        p.left = null;
        if ((p.right = sr) != null)
            sr.parent = p;
        if ((s.left = pl) != null)
            pl.parent = s;
        if ((s.parent = pp) == null)
            root = s;
        else if (p == pp.left)
            pp.left = s;
        else
            pp.right = s;
        if (sr != null)
            replacement = sr;
        else
            replacement = p;
    }
    else if (pl != null)
        replacement = pl;
    else if (pr != null)
        replacement = pr;
    else
        replacement = p;
    if (replacement != p) {
        TreeNode&lt;K,V&gt; pp = replacement.parent = p.parent;
        if (pp == null)
            root = replacement;
        else if (p == pp.left)
            pp.left = replacement;
        else
            pp.right = replacement;
        p.left = p.right = p.parent = null;
    }

    TreeNode&lt;K,V&gt; r = p.red ? root : balanceDeletion(root, replacement);

    if (replacement == p) {  // detach
        TreeNode&lt;K,V&gt; pp = p.parent;
        p.parent = null;
        if (pp != null) {
            if (p == pp.left)
                pp.left = null;
            else if (p == pp.right)
                pp.right = null;
        }
    }
    if (movable)
        moveRootToFront(tab, r);
}
</code></pre><h3 id="f&#x7EA2;&#x9ED1;&#x6811;-&#x904D;&#x5386;"><a name="f&#x7EA2;&#x9ED1;&#x6811;-&#x904D;&#x5386;" class="plugin-anchor" href="#f&#x7EA2;&#x9ED1;&#x6811;-&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>f)&#x7EA2;&#x9ED1;&#x6811; &#x904D;&#x5386;</h3>
<ul>
<li>&#x4F7F;&#x7528;next&#x6307;&#x9488;&#xFF0C;&#x7C7B;&#x4F3C;&#x94FE;&#x8868;&#x65B9;&#x5F0F;&#xFF0C;&#x4FBF;&#x53EF;&#x904D;&#x5386;&#x7EA2;&#x9ED1;&#x6811;&#x3002;</li>
</ul>
<h3 id="&#x904D;&#x5386;&#xFF08;&#x5148;&#x8FED;&#x4EE3;table&#xFF0C;&#x518D;&#x8FED;&#x4EE3;bucket-&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;"><a name="&#x904D;&#x5386;&#xFF08;&#x5148;&#x8FED;&#x4EE3;table&#xFF0C;&#x518D;&#x8FED;&#x4EE3;bucket-&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;" class="plugin-anchor" href="#&#x904D;&#x5386;&#xFF08;&#x5148;&#x8FED;&#x4EE3;table&#xFF0C;&#x518D;&#x8FED;&#x4EE3;bucket-&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;&#xFF08;&#x5148;&#x8FED;&#x4EE3;table&#xFF0C;&#x518D;&#x8FED;&#x4EE3;bucket-&gt;&#x94FE;&#x8868;/&#x7EA2;&#x9ED1;&#x6811;)</h3>
<h4 id="keyset"><a name="keyset" class="plugin-anchor" href="#keyset"><i class="fa fa-link" aria-hidden="true"></i></a>keySet</h4>
<ul>
<li>keySet().iterator()</li>
</ul>
<pre><code>public Set&lt;K&gt; keySet() {
    Set&lt;K&gt; ks = keySet;
    if (ks == null) {
        ks = new KeySet();
        keySet = ks;
    }
    return ks;
}
</code></pre><pre><code>final class KeySet extends AbstractSet&lt;K&gt; {
    public final Iterator&lt;K&gt; iterator()     { return new KeyIterator(); }
}
</code></pre><ul>
<li>KeyIterator&#x5B9E;&#x73B0;&#x4E86;Iterator&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x7EE7;&#x627F;&#x4E86;HashIterator&#x3002;&#x524D;&#x8005;&#x4EC5;&#x9002;&#x7528;&#x4E8E;KeySet&#x7684;&#x8FED;&#x4EE3;&#xFF0C;&#x540E;&#x8005;&#x9002;&#x5408;&#x6240;&#x6709;&#x57FA;&#x4E8E;HashMap&#x7684;&#x8FED;&#x4EE3;&#x3002;</li>
<li>HashMap#HashIterator</li>
</ul>
<pre><code>abstract class HashIterator {
    Node&lt;K,V&gt; next;        // next entry to return
    Node&lt;K,V&gt; current;     // current entry
    int expectedModCount;  // for fast-fail
    int index;             // current slot

    HashIterator() {
        expectedModCount = modCount;
        Node&lt;K,V&gt;[] t = table;
        current = next = null;
        index = 0;
        if (t != null &amp;&amp; size &gt; 0) { // advance to first entry
            do {} while (index &lt; t.length &amp;&amp; (next = t[index++]) == null);
        }
    }

    public final boolean hasNext() {
        return next != null;
    }

    final Node&lt;K,V&gt; nextNode() {
        Node&lt;K,V&gt;[] t;
        Node&lt;K,V&gt; e = next;
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        if (e == null)
            throw new NoSuchElementException();
</code></pre><pre><code>// next&#x7684;next&#x4E3A;&#x7A7A;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x7EE7;&#x7EED;&#x904D;&#x5386;table&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x8FD4;&#x56DE;next&#x7684;next&#xFF08;&#x94FE;&#x8868;&#x6216;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x8282;&#x70B9;)
        if ((next = (current = e).next) == null &amp;&amp; (t = table) != null) {
            do {} while (index &lt; t.length &amp;&amp; (next = t[index++]) == null);
        }
        return e;
    }

    public final void remove() {
        Node&lt;K,V&gt; p = current;
        if (p == null)
            throw new IllegalStateException();
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        current = null;
        K key = p.key;
        removeNode(hash(key), key, null, false, false);
        expectedModCount = modCount;
    }
}
</code></pre><ul>
<li>HashMap#KeyIterator</li>
</ul>
<pre><code>final class KeyIterator extends HashIterator
    implements Iterator&lt;K&gt; {
    public final K next() { return nextNode().key; }
}
</code></pre><h4 id="entryset"><a name="entryset" class="plugin-anchor" href="#entryset"><i class="fa fa-link" aria-hidden="true"></i></a>entrySet</h4>
<pre><code>public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {
    Set&lt;Map.Entry&lt;K,V&gt;&gt; es;
    return (es = entrySet) == null ? (entrySet = new EntrySet()) : es;
}
</code></pre><ul>
<li>&#x4F7F;&#x7528;&#x7684;&#x662F;&#x8BE5;&#x8FED;&#x4EE3;&#x5668;&#xFF1A;</li>
</ul>
<pre><code>final class EntryIterator extends HashIterator
    implements Iterator&lt;Map.Entry&lt;K,V&gt;&gt; {
    public final Map.Entry&lt;K,V&gt; next() { return nextNode(); }
}
</code></pre><h3 id="&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x95EE;&#x9898;"><a name="&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x95EE;&#x9898;" class="plugin-anchor" href="#&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x95EE;&#x9898;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x95EE;&#x9898;</h3>
<ul>
<li><p>1.8&#x4E2D;hashmap&#x7684;&#x786E;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x591A;&#x7EBF;&#x7A0B;put&#x5BFC;&#x81F4;&#x6B7B;&#x5FAA;&#x73AF;&#xFF08;1.7&#x4EE3;&#x7801;&#x4E2D;&#x4F1A;&#x8FD9;&#x6837;&#x5B50;)&#xFF0C;&#x4F46;&#x662F;&#x4F9D;&#x7136;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x5F0A;&#x7AEF;&#xFF0C;&#x6BD4;&#x5982;&#x6570;&#x636E;&#x4E22;&#x5931;&#x7B49;&#x7B49;&#x3002;&#x56E0;&#x6B64;&#x591A;&#x7EBF;&#x7A0B;&#x60C5;&#x51B5;&#x4E0B;&#x8FD8;&#x662F;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;ConcurrentHashMap&#x3002;</p>
</li>
<li><p>&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF1A;&#x5F53;&#x591A;&#x7EBF;&#x7A0B;put&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F53;index&#x76F8;&#x540C;&#x800C;&#x53C8;&#x540C;&#x65F6;&#x8FBE;&#x5230;&#x94FE;&#x8868;&#x7684;&#x672B;&#x5C3E;&#x65F6;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;put&#x7684;&#x6570;&#x636E;&#x4F1A;&#x628A;&#x4E4B;&#x524D;&#x7EBF;&#x7A0B;put&#x7684;&#x6570;&#x636E;&#x8986;&#x76D6;&#x6389;&#xFF0C;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;</p>
</li>
<li>if ((e = p.next) == null) {<pre><code>            p.next = newNode(hash, key, value, null);
</code></pre></li>
<li>}</li>
</ul>
<h2 id="hashtable"><a name="hashtable" class="plugin-anchor" href="#hashtable"><i class="fa fa-link" aria-hidden="true"></i></a>Hashtable</h2>
<ul>
<li>Hashtable&#x540C;&#x6837;&#x662F;&#x57FA;&#x4E8E;&#x54C8;&#x5E0C;&#x8868;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x540C;&#x6837;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x4E00;&#x4E2A;key-value&#x5BF9;&#xFF0C;&#x5176;&#x5185;&#x90E8;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x5355;&#x94FE;&#x8868;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x95EE;&#x9898;&#xFF0C;&#x5BB9;&#x91CF;&#x4E0D;&#x8DB3;&#xFF08;&#x8D85;&#x8FC7;&#x4E86;&#x9608;&#x503C;)&#x65F6;&#xFF0C;&#x540C;&#x6837;&#x4F1A;&#x81EA;&#x52A8;&#x589E;&#x957F;&#x3002;</li>
<li>Hashtable&#x4E5F;&#x662F;JDK1.0&#x5F15;&#x5165;&#x7684;&#x7C7B;&#xFF0C;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x80FD;&#x7528;&#x4E8E;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E2D;&#x3002;</li>
<li>Hashtable&#x540C;&#x6837;&#x5B9E;&#x73B0;&#x4E86;Serializable&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x652F;&#x6301;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;Cloneable&#x63A5;&#x53E3;&#xFF0C;&#x80FD;&#x88AB;&#x514B;&#x9686;&#x3002;</li>
<li>Hashtable#Entry</li>
</ul>
<pre><code>private static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
    final int hash;
    final K key;
    V value;
    Entry&lt;K,V&gt; next;

    protected Entry(int hash, K key, V value, Entry&lt;K,V&gt; next) {
        this.hash = hash;
        this.key =  key;
        this.value = value;
        this.next = next;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    protected Object clone() {
        return new Entry&lt;&gt;(hash, key, value,
                              (next==null ? null : (Entry&lt;K,V&gt;) next.clone()));
    }

    // Map.Entry Ops

    public K getKey() {
        return key;
    }

    public V getValue() {
        return value;
    }

    public V setValue(V value) {
        if (value == null)
            throw new NullPointerException();

        V oldValue = this.value;
        this.value = value;
        return oldValue;
    }

    public boolean equals(Object o) {
        if (!(o instanceof Map.Entry))
            return false;
        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;

        return (key==null ? e.getKey()==null : key.equals(e.getKey())) &amp;&amp;
           (value==null ? e.getValue()==null : value.equals(e.getValue()));
    }

    public int hashCode() {
        return hash ^ Objects.hashCode(value);
    }

    public String toString() {
        return key.toString()+&quot;=&quot;+value.toString();
    }
}
</code></pre><h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>/**
 * The hash table data.
 */
private transient Entry&lt;?,?&gt;[] table;

/**
 * The total number of entries in the hash table.
 */
private transient int count;

/**
 * The table is rehashed when its size exceeds this threshold.  (The
 * value of this field is (int)(capacity * loadFactor).)
 *
 * @serial
 */
private int threshold;

/**
 * The load factor for the hashtable.
 *
 * @serial
 */
private float loadFactor;

/**
 * The number of times this Hashtable has been structurally modified
 * Structural modifications are those that change the number of entries in
 * the Hashtable or otherwise modify its internal structure (e.g.,
 * rehash).  This field is used to make iterators on Collection-views of
 * the Hashtable fail-fast.  (See ConcurrentModificationException).
 */
private transient int modCount = 0;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public Hashtable(int initialCapacity, float loadFactor) {
    if (initialCapacity &lt; 0)
        throw new IllegalArgumentException(&quot;Illegal Capacity: &quot;+
                                           initialCapacity);
    if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))
        throw new IllegalArgumentException(&quot;Illegal Load: &quot;+loadFactor);

    if (initialCapacity==0)
        initialCapacity = 1;
    this.loadFactor = loadFactor;
    table = new Entry&lt;?,?&gt;[initialCapacity];
    threshold = (int)Math.min(initialCapacity * loadFactor, MAX_ARRAY_SIZE + 1);
}

/**
 * Constructs a new, empty hashtable with the specified initial capacity
 * and default load factor (0.75).
 *
 * @param     initialCapacity   the initial capacity of the hashtable.
 * @exception IllegalArgumentException if the initial capacity is less
 *              than zero.
 */
public Hashtable(int initialCapacity) {
    this(initialCapacity, 0.75f);
}

/**
 * Constructs a new, empty hashtable with a default initial capacity (11)
 * and load factor (0.75).
 */
public Hashtable() {
    this(11, 0.75f);
}
</code></pre><ul>
<li>11&#xFF1F;</li>
<li>Hashtable &#x7684;&#x5BB9;&#x91CF;&#x589E;&#x52A0;&#x903B;&#x8F91;&#x662F;&#x4E58;2+1&#xFF0C;&#x4FDD;&#x8BC1;&#x5947;&#x6570;&#x3002;<ul>
<li>&#x5728;&#x5E94;&#x7528;&#x6570;&#x636E;&#x5206;&#x5E03;&#x5728;&#x7B49;&#x5DEE;&#x6570;&#x636E;&#x96C6;&#x5408;(&#x5982;&#x5076;&#x6570;)&#x4E0A;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x516C;&#x5DEE;&#x4E0E;&#x6876;&#x5BB9;&#x91CF;&#x6709;&#x516C;&#x7EA6;&#x6570;n&#xFF0C;&#x5219;&#x81F3;&#x5C11;&#x6709;(n-1)/n&#x6570;&#x91CF;&#x7684;&#x6876;&#x662F;&#x5229;&#x7528;&#x4E0D;&#x5230;&#x7684;&#x3002;<h3 id="hash-to-index"><a name="hash-to-index" class="plugin-anchor" href="#hash-to-index"><i class="fa fa-link" aria-hidden="true"></i></a>hash to index</h3>
</li>
</ul>
</li>
<li>int hash = key.hashCode();
int index = (hash &amp; 0x7FFFFFFF) % tab.length;</li>
<li>&#x53D6;&#x4E0E;&#x4E4B;&#x540E;&#x4E00;&#x5B9A;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x8D1F;&#x6570;</li>
<li>0x7FFFFFFF is 0111 1111 1111 1111 1111 1111 1111 1111 : all 1 except the sign bit.</li>
<li>(hash &amp; 0x7FFFFFFF) will result in a positive integer.</li>
<li>(hash &amp; 0x7FFFFFFF) % tab.length will be in the range of the tab length.<h3 id="put&#xFF08;&#x6709;&#x9501;"><a name="put&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#put&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>put&#xFF08;&#x6709;&#x9501;)</h3>
</li>
</ul>
<pre><code>public synchronized V put(K key, V value) {
    // Make sure the value is not null
    if (value == null) {
        throw new NullPointerException();
    }

    // Makes sure the key is not already in the hashtable.
    Entry&lt;?,?&gt; tab[] = table;
    int hash = key.hashCode();
    int index = (hash &amp; 0x7FFFFFFF) % tab.length;
    @SuppressWarnings(&quot;unchecked&quot;)
    Entry&lt;K,V&gt; entry = (Entry&lt;K,V&gt;)tab[index];
    for(; entry != null ; entry = entry.next) {
        if ((entry.hash == hash) &amp;&amp; entry.key.equals(key)) {
            V old = entry.value;
            entry.value = value;
            return old;
        }
    }

    addEntry(hash, key, value, index);
    return null;
}
</code></pre><pre><code>private void addEntry(int hash, K key, V value, int index) {
    modCount++;

    Entry&lt;?,?&gt; tab[] = table;
    if (count &gt;= threshold) {
        // Rehash the table if the threshold is exceeded
        rehash();

        tab = table;
        hash = key.hashCode();
        index = (hash &amp; 0x7FFFFFFF) % tab.length;
    }

    // Creates the new entry.
    @SuppressWarnings(&quot;unchecked&quot;)
    Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) tab[index];
    tab[index] = new Entry&lt;&gt;(hash, key, value, e);
    count++;
}
</code></pre><h3 id="&#x6269;&#x5BB9;-rehash"><a name="&#x6269;&#x5BB9;-rehash" class="plugin-anchor" href="#&#x6269;&#x5BB9;-rehash"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9; rehash</h3>
<pre><code>- protected void rehash() {
int oldCapacity = table.length;
Entry&lt;?,?&gt;[] oldMap = table;

// overflow-conscious code
int newCapacity = (oldCapacity &lt;&lt; 1) + 1;
if (newCapacity - MAX_ARRAY_SIZE &gt; 0) {
    if (oldCapacity == MAX_ARRAY_SIZE)
        // Keep running with MAX_ARRAY_SIZE buckets
        return;
    newCapacity = MAX_ARRAY_SIZE;
}
Entry&lt;?,?&gt;[] newMap = new Entry&lt;?,?&gt;[newCapacity];

modCount++;
threshold = (int)Math.min(newCapacity * loadFactor, MAX_ARRAY_SIZE + 1);
table = newMap;

for (int i = oldCapacity ; i-- &gt; 0 ;) {
    for (Entry&lt;K,V&gt; old = (Entry&lt;K,V&gt;)oldMap[i] ; old != null ; ) {
        Entry&lt;K,V&gt; e = old;
        old = old.next;
        // &#x6240;&#x6709;&#x5143;&#x7D20;&#x91CD;&#x65B0;&#x6563;&#x5217;
        int index = (e.hash &amp; 0x7FFFFFFF) % newCapacity;
        e.next = (Entry&lt;K,V&gt;)newMap[index];
        newMap[index] = e;
    }
}
</code></pre><p>}</p>
<h3 id="get&#xFF08;&#x6709;&#x9501;"><a name="get&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#get&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>get&#xFF08;&#x6709;&#x9501;)</h3>
<pre><code>public synchronized V get(Object key) {
    Entry&lt;?,?&gt; tab[] = table;
    int hash = key.hashCode();
    int index = (hash &amp; 0x7FFFFFFF) % tab.length;
    for (Entry&lt;?,?&gt; e = tab[index] ; e != null ; e = e.next) {
        if ((e.hash == hash) &amp;&amp; e.key.equals(key)) {
            return (V)e.value;
        }
    }
    return null;
}
</code></pre><ul>
<li><h3 id="remove&#xFF08;&#x6709;&#x9501;"><a name="remove&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#remove&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>remove&#xFF08;&#x6709;&#x9501;)</h3>
</li>
</ul>
<pre><code>public synchronized V remove(Object key) {
    Entry&lt;?,?&gt; tab[] = table;
    int hash = key.hashCode();
    int index = (hash &amp; 0x7FFFFFFF) % tab.length;
    @SuppressWarnings(&quot;unchecked&quot;)
    Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;)tab[index];
    for(Entry&lt;K,V&gt; prev = null ; e != null ; prev = e, e = e.next) {
        if ((e.hash == hash) &amp;&amp; e.key.equals(key)) {
            modCount++;
            if (prev != null) {
                prev.next = e.next;
            } else {
                tab[index] = e.next;
            }
            count--;
            V oldValue = e.value;
            e.value = null;
            return oldValue;
        }
    }
    return null;
}
</code></pre><ul>
<li><h2 id="linkedhashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x7EE7;&#x627F;&#x81EA;hashmap"><a name="linkedhashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x7EE7;&#x627F;&#x81EA;hashmap" class="plugin-anchor" href="#linkedhashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x7EE7;&#x627F;&#x81EA;hashmap"><i class="fa fa-link" aria-hidden="true"></i></a>LinkedHashMap&#xFF08;&#x5E95;&#x5C42;&#x662F;(&#x6570;&#x7EC4;+&#x94FE;&#x8868;/&#x7EA2;&#x9ED1;&#x6811;)+&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x7EE7;&#x627F;&#x81EA;HashMap)</h2>
</li>
<li>LinkedHashMap&#x662F;key&#x952E;&#x6709;&#x5E8F;&#x7684;HashMap&#x7684;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#x3002;&#x5B83;&#x9664;&#x4E86;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4F7F;&#x7528;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x6765;&#x4FDD;&#x8BC1;key&#x7684;&#x987A;&#x5E8F;&#x3002;</li>
<li><p>HashMap&#x662F;&#x65E0;&#x5E8F;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x8FED;&#x4EE3;HashMap&#x6240;&#x5F97;&#x5230;&#x7684;&#x5143;&#x7D20;&#x987A;&#x5E8F;&#x5E76;&#x4E0D;&#x662F;&#x5B83;&#x4EEC;&#x6700;&#x521D;&#x653E;&#x7F6E;&#x5230;HashMap&#x7684;&#x987A;&#x5E8F;&#x3002;HashMap&#x7684;&#x8FD9;&#x4E00;&#x7F3A;&#x70B9;&#x5F80;&#x5F80;&#x4F1A;&#x9020;&#x6210;&#x8BF8;&#x591A;&#x4E0D;&#x4FBF;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x6709;&#x4E9B;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x786E;&#x9700;&#x8981;&#x7528;&#x5230;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x4FDD;&#x6301;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x7684;Map&#x3002;&#x5E86;&#x5E78;&#x7684;&#x662F;&#xFF0C;JDK&#x4E3A;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5B83;&#x4E3A;HashMap&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B; &#x2014;&#x2014; LinkedHashMap&#x3002;&#x867D;&#x7136;LinkedHashMap&#x589E;&#x52A0;&#x4E86;&#x65F6;&#x95F4;&#x548C;&#x7A7A;&#x95F4;&#x4E0A;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x901A;&#x8FC7;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4FDD;&#x8BC1;&#x4E86;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x3002;&#x7279;&#x522B;&#x5730;&#xFF0C;&#x8BE5;&#x8FED;&#x4EE3;&#x987A;&#x5E8F;&#x53EF;&#x4EE5;&#x662F;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6839;&#x636E;&#x94FE;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x7684;&#x987A;&#x5E8F;&#x53EF;&#x4EE5;&#x5C06;LinkedHashMap&#x5206;&#x4E3A;&#xFF1A;&#x4FDD;&#x6301;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x7684;LinkedHashMap &#x548C; &#x4FDD;&#x6301;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#xFF08;LRU&#xFF0C;get&#x540E;&#x8C03;&#x6574;&#x94FE;&#x8868;&#x5E8F;&#xFF0C;&#x6700;&#x65B0;&#x83B7;&#x53D6;&#x7684;&#x653E;&#x5728;&#x6700;&#x540E;)&#x7684;LinkedHashMap&#xFF0C;&#x5176;&#x4E2D;LinkedHashMap&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;&#x6309;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x7684;&#x3002;</p>
</li>
<li><p>&#x7279;&#x70B9;&#xFF1A;</p>
</li>
<li><p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;Map&#x4E2D;&#x7684;key&#x65E0;&#x5E8F;&#xFF0C;&#x9009;&#x62E9;HashMap&#xFF1B;&#x5982;&#x679C;&#x8981;&#x6C42;key&#x6709;&#x5E8F;&#xFF0C;&#x5219;&#x9009;&#x62E9;TreeMap&#x3002;</p>
<ul>
<li>&#x4F46;&#x662F;&#x9009;&#x62E9;TreeMap&#x5C31;&#x4F1A;&#x6709;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;TreeMap&#x7684;get&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;O(log(n))&#x7684;&#xFF0C;&#x76F8;&#x6BD4;&#x4E8E;HashMap&#x7684;O(1)&#x8FD8;&#x662F;&#x5DEE;&#x4E0D;&#x5C11;&#x7684;&#xFF0C;LinkedHashMap&#x7684;&#x51FA;&#x73B0;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x5E73;&#x8861;&#x8FD9;&#x4E9B;&#x56E0;&#x7D20;&#xFF0C;&#x4F7F;&#x5F97;&#x80FD;&#x591F;&#x4EE5;O(1)&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x589E;&#x52A0;&#x67E5;&#x627E;&#x5143;&#x7D20;&#xFF0C;&#x53C8;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;key&#x7684;&#x6709;&#x5E8F;&#x6027;</li>
</ul>
</li>
<li><p>&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF1A;</p>
</li>
<li><p>&#x5C06;&#x6240;&#x6709;Entry&#x8282;&#x70B9;&#x94FE;&#x5165;&#x4E00;&#x4E2A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;HashMap&#x3002;&#x5728;LinkedHashMap&#x4E2D;&#xFF0C;&#x6240;&#x6709;put&#x8FDB;&#x6765;&#x7684;Entry&#x90FD;&#x4FDD;&#x5B58;&#x5728;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x5B83;&#x53C8;&#x989D;&#x5916;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x4EE5;head&#x4E3A;&#x5934;&#x7ED3;&#x70B9;&#x7684;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x4E8E;&#x6BCF;&#x6B21;put&#x8FDB;&#x6765;Entry&#xFF0C;&#x9664;&#x4E86;&#x5C06;&#x5176;&#x4FDD;&#x5B58;&#x5230;&#x54C8;&#x5E0C;&#x8868;&#x4E0A;&#x5916;&#xFF0C;&#x8FD8;&#x4F1A;&#x5C06;&#x5176;&#x63D2;&#x5165;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x90E8;&#x3002;</p>
</li>
<li><p>LinkedHashMap#Entry</p>
</li>
<li><p>static class Entry<k,v> extends HashMap.Node<k,v> {
  Entry<k,v> before, after;
  Entry(int hash, K key, V value, Node<k,v> next) {</k,v></k,v></k,v></k,v></p>
<pre><code>  super(hash, key, value, next);
</code></pre><p>  }
}</p>
</li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>/**
 * The head (eldest) of the doubly linked list.
 */
transient LinkedHashMap.Entry&lt;K,V&gt; head;

/**
 * The tail (youngest) of the doubly linked list.
 */
transient LinkedHashMap.Entry&lt;K,V&gt; tail;

/**
 * The iteration ordering method for this linked hash map: &lt;tt&gt;true&lt;/tt&gt;
 * for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order.
 *
 * @serial
 */
final boolean accessOrder;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public LinkedHashMap(int initialCapacity, float loadFactor) {
    super(initialCapacity, loadFactor);
    accessOrder = false;
}

/**
 * Constructs an empty insertion-ordered &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance
 * with the specified initial capacity and a default load factor (0.75).
 *
 * @param  initialCapacity the initial capacity
 * @throws IllegalArgumentException if the initial capacity is negative
 */
public LinkedHashMap(int initialCapacity) {
    super(initialCapacity);
    accessOrder = false;
}

/**
 * Constructs an empty insertion-ordered &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance
 * with the default initial capacity (16) and load factor (0.75).
 */
public LinkedHashMap() {
    super();
    accessOrder = false;
}
</code></pre><pre><code>/**
 * Constructs an empty &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance with the
 * specified initial capacity, load factor and ordering mode.
 *
 * @param  initialCapacity the initial capacity
 * @param  loadFactor      the load factor
 * @param  accessOrder     the ordering mode - &lt;tt&gt;true&lt;/tt&gt; for
 *         access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order
 * @throws IllegalArgumentException if the initial capacity is negative
 *         or the load factor is nonpositive
 */
public LinkedHashMap(int initialCapacity,
                     float loadFactor,
                     boolean accessOrder) {
    super(initialCapacity, loadFactor);
    this.accessOrder = accessOrder;
}
</code></pre><h3 id="put"><a name="put" class="plugin-anchor" href="#put"><i class="fa fa-link" aria-hidden="true"></i></a>put</h3>
<ul>
<li>&#x540C;HashMap&#xFF0C;&#x4F46;&#x91CD;&#x5199;&#x4E86;afterNodeInsertion&#x3002;</li>
<li>void afterNodeInsertion(boolean evict) { // possibly remove eldest
  LinkedHashMap.Entry<k,v> first;
  if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) {<pre><code>  K key = first.key;
  removeNode(hash(key), key, null, false, true);
</code></pre>  }
}</k,v></li>
<li>//&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;</li>
<li>protected boolean removeEldestEntry(Map.Entry<k,v> eldest) {
  return false;
}</k,v></li>
</ul>
<pre><code>public class LRUHashMap&lt;K, V&gt; extends LinkedHashMap&lt;K, V&gt;{
</code></pre><pre><code>        private final int MAX_CACHE_SIZE;
</code></pre><pre><code>        public BaseLRUCache(int cacheSize) {
</code></pre><ul>
<li>super(cacheSize, 0.75f, true);</li>
<li>MAX_CACHE_SIZE = cacheSize;</li>
<li><p>}</p>
</li>
<li><p>@Override</p>
</li>
<li>protected boolean removeEldestEntry(Map.Entry eldest) {</li>
<li>return size() &gt; MAX_CACHE_SIZE;</li>
<li>}</li>
</ul>
<ul>
<li>}<h3 id="get"><a name="get" class="plugin-anchor" href="#get"><i class="fa fa-link" aria-hidden="true"></i></a>get</h3>
</li>
</ul>
<pre><code>public V get(Object key) {
    Node&lt;K,V&gt; e;
    if ((e = getNode(hash(key), key)) == null)
        return null;
    if (accessOrder)
        afterNodeAccess(e);
    return e.value;
}
</code></pre><ul>
<li>void afterNodeAccess(Node<k,v> e) { // move node to last
  LinkedHashMap.Entry<k,v> last;
  if (accessOrder &amp;&amp; (last = tail) != e) {<pre><code>  LinkedHashMap.Entry&lt;K,V&gt; p =
      (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;
  p.after = null;
  if (b == null)
      head = a;
  else
      b.after = a;
  if (a != null)
      a.before = b;
  else
      last = b;
  if (last == null)
      head = p;
  else {
      p.before = last;
      last.after = p;
  }
  tail = p;
  ++modCount;
</code></pre>  }
}<h3 id="remove"><a name="remove" class="plugin-anchor" href="#remove"><i class="fa fa-link" aria-hidden="true"></i></a>remove</h3>
</k,v></k,v></li>
<li>&#x540C;HashMap&#xFF0C;&#x4F46;&#x91CD;&#x5199;&#x4E86;afterNodeRemoval&#x3002;</li>
<li>void afterNodeRemoval(Node<k,v> e) { // unlink
  LinkedHashMap.Entry<k,v> p =<pre><code>  (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;
</code></pre>  p.before = p.after = null;
  if (b == null)<pre><code>  head = a;
</code></pre>  else<pre><code>  b.after = a;
</code></pre>  if (a == null)<pre><code>  tail = b;
</code></pre>  else<pre><code>  a.before = b;
</code></pre>}</k,v></k,v></li>
</ul>
<h3 id="&#x904D;&#x5386;&#xFF08;&#x8FED;&#x4EE3;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;"><a name="&#x904D;&#x5386;&#xFF08;&#x8FED;&#x4EE3;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;" class="plugin-anchor" href="#&#x904D;&#x5386;&#xFF08;&#x8FED;&#x4EE3;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;&#xFF08;&#x8FED;&#x4EE3;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;)</h3>
<h4 id="entryset"><a name="entryset" class="plugin-anchor" href="#entryset"><i class="fa fa-link" aria-hidden="true"></i></a>entrySet</h4>
<pre><code>public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {
    Set&lt;Map.Entry&lt;K,V&gt;&gt; es;
    return (es = entrySet) == null ? (entrySet = new LinkedEntrySet()) : es;
}
</code></pre><ul>
<li>&#x5B83;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x8BE5;&#x8FED;&#x4EE3;&#x5668;&#xFF1A;</li>
</ul>
<pre><code>abstract class LinkedHashIterator {
    LinkedHashMap.Entry&lt;K,V&gt; next;
    LinkedHashMap.Entry&lt;K,V&gt; current;
    int expectedModCount;

    LinkedHashIterator() {
        next = head;
        expectedModCount = modCount;
        current = null;
    }

    public final boolean hasNext() {
        return next != null;
    }

    final LinkedHashMap.Entry&lt;K,V&gt; nextNode() {
        LinkedHashMap.Entry&lt;K,V&gt; e = next;
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        if (e == null)
            throw new NoSuchElementException();
        current = e;
        next = e.after;
        return e;
    }

    public final void remove() {
        Node&lt;K,V&gt; p = current;
        if (p == null)
            throw new IllegalStateException();
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        current = null;
        K key = p.key;
        removeNode(hash(key), key, null, false, false);
        expectedModCount = modCount;
    }
}
</code></pre><pre><code>final class LinkedEntryIterator extends LinkedHashIterator
    implements Iterator&lt;Map.Entry&lt;K,V&gt;&gt; {
    public final Map.Entry&lt;K,V&gt; next() { return nextNode(); }
}
</code></pre><h2 id="treemap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x7EA2;&#x9ED1;&#x6811;"><a name="treemap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x7EA2;&#x9ED1;&#x6811;" class="plugin-anchor" href="#treemap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x7EA2;&#x9ED1;&#x6811;"><i class="fa fa-link" aria-hidden="true"></i></a>TreeMap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x7EA2;&#x9ED1;&#x6811;)</h2>
<ul>
<li>&#x652F;&#x6301;&#x6392;&#x5E8F;&#x7684;Map&#x5B9E;&#x73B0;&#x3002;</li>
<li>&#x57FA;&#x4E8E;&#x7EA2;&#x9ED1;&#x6811;&#x5B9E;&#x73B0;&#xFF0C;&#x65E0;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#x3002;</li>
<li><p>&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</p>
</li>
<li><p>TreeMap&#x662F;&#x6839;&#x636E;key&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x5B83;&#x7684;&#x6392;&#x5E8F;&#x548C;&#x5B9A;&#x4F4D;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x6BD4;&#x8F83;&#x5668;&#x6216;&#x8986;&#x5199;Comparable&#x63A5;&#x53E3;&#xFF0C;&#x4E5F;&#x56E0;&#x6B64;&#x4E0D;&#x9700;&#x8981;key&#x8986;&#x5199;hashCode&#x65B9;&#x6CD5;&#x548C;equals&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6392;&#x9664;&#x6389;&#x91CD;&#x590D;&#x7684;key&#xFF0C;&#x800C;HashMap&#x7684;key&#x5219;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x8986;&#x5199;hashCode&#x65B9;&#x6CD5;&#x548C;equals&#x65B9;&#x6CD5;&#x6765;&#x786E;&#x4FDD;&#x6CA1;&#x6709;&#x91CD;&#x590D;&#x7684;key</p>
</li>
<li>TreeMap&#x7684;&#x67E5;&#x8BE2;&#x3001;&#x63D2;&#x5165;&#x3001;&#x5220;&#x9664;&#x6548;&#x7387;&#x5747;&#x6CA1;&#x6709;HashMap&#x9AD8;&#xFF0C;&#x4E00;&#x822C;&#x53EA;&#x6709;&#x8981;&#x5BF9;key&#x6392;&#x5E8F;&#x65F6;&#x624D;&#x4F7F;&#x7528;TreeMap&#x3002;</li>
<li>TreeMap&#x7684;key&#x4E0D;&#x80FD;&#x4E3A;null&#xFF0C;&#x800C;HashMap&#x7684;key&#x53EF;&#x4EE5;&#x4E3A;null&#x3002;</li>
<li>TreeMap#Entry</li>
</ul>
<pre><code>static final class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
    K key;
    V value;
    Entry&lt;K,V&gt; left;
    Entry&lt;K,V&gt; right;
    Entry&lt;K,V&gt; parent;
    boolean color = BLACK;

    /**
     * Make a new cell with given key, value, and parent, and with
     * {@code null} child links, and BLACK color.
     */
    Entry(K key, V value, Entry&lt;K,V&gt; parent) {
        this.key = key;
        this.value = value;
        this.parent = parent;
    }

    /**
     * Returns the key.
     *
     * @return the key
     */
    public K getKey() {
        return key;
    }

    /**
     * Returns the value associated with the key.
     *
     * @return the value associated with the key
     */
    public V getValue() {
        return value;
    }

    /**
     * Replaces the value currently associated with the key with the given
     * value.
     *
     * @return the value associated with the key before this method was
     *         called
     */
    public V setValue(V value) {
        V oldValue = this.value;
        this.value = value;
        return oldValue;
    }

    public boolean equals(Object o) {
        if (!(o instanceof Map.Entry))
            return false;
        Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;

        return valEquals(key,e.getKey()) &amp;&amp; valEquals(value,e.getValue());
    }

    public int hashCode() {
        int keyHash = (key==null ? 0 : key.hashCode());
        int valueHash = (value==null ? 0 : value.hashCode());
        return keyHash ^ valueHash;
    }

    public String toString() {
        return key + &quot;=&quot; + value;
    }
}
</code></pre><h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>private final Comparator&lt;? super K&gt; comparator;

private transient Entry&lt;K,V&gt; root;

/**
 * The number of entries in the tree
 */
private transient int size = 0;

/**
 * The number of structural modifications to the tree.
 */
private transient int modCount = 0;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public TreeMap() {
    comparator = null;
}
</code></pre><pre><code>
public TreeMap(Comparator&lt;? super K&gt; comparator) {
    this.comparator = comparator;
}
</code></pre><h3 id="put"><a name="put" class="plugin-anchor" href="#put"><i class="fa fa-link" aria-hidden="true"></i></a>put</h3>
<pre><code>public V put(K key, V value) {
    Entry&lt;K,V&gt; t = root;
    if (t == null) {
        compare(key, key); // type (and possibly null) check

        root = new Entry&lt;&gt;(key, value, null);
        size = 1;
        modCount++;
        return null;
    }
    int cmp;
    Entry&lt;K,V&gt; parent;
    // split comparator and comparable paths
    Comparator&lt;? super K&gt; cpr = comparator;
    if (cpr != null) {
        do {
            parent = t;
            cmp = cpr.compare(key, t.key);
            if (cmp &lt; 0)
                t = t.left;
            else if (cmp &gt; 0)
                t = t.right;
            else
                return t.setValue(value);
        } while (t != null);
    }
    else {
        if (key == null)
            throw new NullPointerException();
        @SuppressWarnings(&quot;unchecked&quot;)
            Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;
        do {
            parent = t;
            cmp = k.compareTo(t.key);
            if (cmp &lt; 0)
                t = t.left;
            else if (cmp &gt; 0)
                t = t.right;
            else
                return t.setValue(value);
        } while (t != null);
    }
    Entry&lt;K,V&gt; e = new Entry&lt;&gt;(key, value, parent);
    if (cmp &lt; 0)
        parent.left = e;
    else
        parent.right = e;
    fixAfterInsertion(e);
    size++;
    modCount++;
    return null;
}
</code></pre><h3 id="get"><a name="get" class="plugin-anchor" href="#get"><i class="fa fa-link" aria-hidden="true"></i></a>get</h3>
<pre><code>public V get(Object key) {
    Entry&lt;K,V&gt; p = getEntry(key);
    return (p==null ? null : p.value);
}
</code></pre><ul>
<li><p>final Entry<k,v> getEntry(Object key) {
  // Offload comparator-based version for sake of performance
  if (comparator != null)</k,v></p>
<pre><code>  return getEntryUsingComparator(key);
</code></pre><p>  if (key == null)</p>
<pre><code>  throw new NullPointerException();
</code></pre><p>  @SuppressWarnings(&quot;unchecked&quot;)</p>
<pre><code>  Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;
</code></pre><p>  Entry<k,v> p = root;
  while (p != null) {</k,v></p>
<pre><code>  int cmp = k.compareTo(p.key);
  if (cmp &lt; 0)
      p = p.left;
  else if (cmp &gt; 0)
      p = p.right;
  else
      return p;
</code></pre><p>  }
  return null;
}</p>
</li>
<li><p>final Entry<k,v> getEntryUsingComparator(Object key) {
  @SuppressWarnings(&quot;unchecked&quot;)</k,v></p>
<pre><code>  K k = (K) key;
</code></pre><p>  Comparator&lt;? super K&gt; cpr = comparator;
  if (cpr != null) {</p>
<pre><code>  Entry&lt;K,V&gt; p = root;
  while (p != null) {
      int cmp = cpr.compare(k, p.key);
      if (cmp &lt; 0)
          p = p.left;
      else if (cmp &gt; 0)
          p = p.right;
      else
          return p;
  }
</code></pre><p>  }
  return null;
}</p>
</li>
</ul>
<h3 id="remove"><a name="remove" class="plugin-anchor" href="#remove"><i class="fa fa-link" aria-hidden="true"></i></a>remove</h3>
<pre><code>public V remove(Object key) {
    Entry&lt;K,V&gt; p = getEntry(key);
    if (p == null)
        return null;

    V oldValue = p.value;
    deleteEntry(p);
    return oldValue;
}
</code></pre><pre><code>private void deleteEntry(Entry&lt;K,V&gt; p) {
    modCount++;
    size--;

    // If strictly internal, copy successor&apos;s element to p and then make p
    // point to successor.
    if (p.left != null &amp;&amp; p.right != null) {
        Entry&lt;K,V&gt; s = successor(p);
        p.key = s.key;
        p.value = s.value;
        p = s;
    } // p has 2 children

    // Start fixup at replacement node, if it exists.
    Entry&lt;K,V&gt; replacement = (p.left != null ? p.left : p.right);

    if (replacement != null) {
        // Link replacement to parent
        replacement.parent = p.parent;
        if (p.parent == null)
            root = replacement;
        else if (p == p.parent.left)
            p.parent.left  = replacement;
        else
            p.parent.right = replacement;

        // Null out links so they are OK to use by fixAfterDeletion.
        p.left = p.right = p.parent = null;

        // Fix replacement
        if (p.color == BLACK)
            fixAfterDeletion(replacement);
    } else if (p.parent == null) { // return if we are the only node.
        root = null;
    } else { //  No children. Use self as phantom replacement and unlink.
        if (p.color == BLACK)
            fixAfterDeletion(p);

        if (p.parent != null) {
            if (p == p.parent.left)
                p.parent.left = null;
            else if (p == p.parent.right)
                p.parent.right = null;
            p.parent = null;
        }
    }
}
</code></pre><h3 id="containskey"><a name="containskey" class="plugin-anchor" href="#containskey"><i class="fa fa-link" aria-hidden="true"></i></a>containsKey</h3>
<pre><code>public boolean containsKey(Object key) {
    return getEntry(key) != null;
}
</code></pre><h3 id="containsvalue"><a name="containsvalue" class="plugin-anchor" href="#containsvalue"><i class="fa fa-link" aria-hidden="true"></i></a>containsValue</h3>
<pre><code>public boolean containsValue(Object value) {
    for (Entry&lt;K,V&gt; e = getFirstEntry(); e != null; e = successor(e))
        if (valEquals(value, e.value))
            return true;
    return false;
}
</code></pre><ul>
<li><p>final Entry<k,v> getFirstEntry() {
  Entry<k,v> p = root;
  if (p != null)</k,v></k,v></p>
<pre><code>  while (p.left != null)
      p = p.left;
</code></pre><p>  return p;
}</p>
</li>
<li><p>static <k,v> TreeMap.Entry<k,v> successor(Entry<k,v> t) {
  if (t == null)</k,v></k,v></k,v></p>
<pre><code>  return null;
</code></pre><p>  else if (t.right != null) {</p>
<pre><code>  Entry&lt;K,V&gt; p = t.right;
  while (p.left != null)
      p = p.left;
  return p;
</code></pre><p>  } else {</p>
<pre><code>  Entry&lt;K,V&gt; p = t.parent;
  Entry&lt;K,V&gt; ch = t;
  while (p != null &amp;&amp; ch == p.right) {
      ch = p;
      p = p.parent;
  }
  return p;
</code></pre><p>  }
}</p>
<ul>
<li>static final boolean valEquals(Object o1, Object o2) {
return (o1==null ? o2==null : o1.equals(o2));
}</li>
</ul>
</li>
</ul>
<h3 id="&#x904D;&#x5386;"><a name="&#x904D;&#x5386;" class="plugin-anchor" href="#&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;</h3>
<pre><code>public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {
    EntrySet es = entrySet;
    return (es != null) ? es : (entrySet = new EntrySet());
}
</code></pre><pre><code>class EntrySet extends AbstractSet&lt;Map.Entry&lt;K,V&gt;&gt; {
    public Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() {
        return new EntryIterator(getFirstEntry());
    }
</code></pre><ul>
<li>}</li>
</ul>
<pre><code>abstract class PrivateEntryIterator&lt;T&gt; implements Iterator&lt;T&gt; {
    Entry&lt;K,V&gt; next;
    Entry&lt;K,V&gt; lastReturned;
    int expectedModCount;

    PrivateEntryIterator(Entry&lt;K,V&gt; first) {
        expectedModCount = modCount;
        lastReturned = null;
        next = first;
    }

    public final boolean hasNext() {
        return next != null;
    }

    final Entry&lt;K,V&gt; nextEntry() {
        Entry&lt;K,V&gt; e = next;
        if (e == null)
            throw new NoSuchElementException();
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        next = successor(e);
        lastReturned = e;
        return e;
    }

    final Entry&lt;K,V&gt; prevEntry() {
        Entry&lt;K,V&gt; e = next;
        if (e == null)
            throw new NoSuchElementException();
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        next = predecessor(e);
        lastReturned = e;
        return e;
    }

    public void remove() {
        if (lastReturned == null)
            throw new IllegalStateException();
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
        // deleted entries are replaced by their successors
        if (lastReturned.left != null &amp;&amp; lastReturned.right != null)
            next = lastReturned;
        deleteEntry(lastReturned);
        expectedModCount = modCount;
        lastReturned = null;
    }
}
</code></pre><pre><code>final class EntryIterator extends PrivateEntryIterator&lt;Map.Entry&lt;K,V&gt;&gt; {
    EntryIterator(Entry&lt;K,V&gt; first) {
        super(first);
    }
    public Map.Entry&lt;K,V&gt; next() {
        return nextEntry();
    }
}
</code></pre><ul>
<li><h2 id="concurrenthashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x57FA;&#x4E8E;cassynchronized"><a name="concurrenthashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x57FA;&#x4E8E;cassynchronized" class="plugin-anchor" href="#concurrenthashmap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;&#x94FE;&#x8868;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x57FA;&#x4E8E;cassynchronized"><i class="fa fa-link" aria-hidden="true"></i></a>ConcurrentHashMap&#xFF08;&#x5E95;&#x5C42;&#x662F;&#x6570;&#x7EC4;+&#x94FE;&#x8868;/&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x57FA;&#x4E8E;CAS+synchronized)</h2>
</li>
<li>JDK1.7&#x524D;&#xFF1A;&#x5206;&#x6BB5;&#x9501;</li>
<li>&#x57FA;&#x4E8E;currentLevel&#x5212;&#x5206;&#x51FA;&#x4E86;&#x591A;&#x4E2A;Segment&#x6765;&#x5BF9;key-value&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x6BCF;&#x6B21;put&#x64CD;&#x4F5C;&#x90FD;&#x5F97;&#x9501;&#x4F4F;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x3002;&#x5728;&#x9ED8;&#x8BA4;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6700;&#x4F73;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x4EE5;&#x5141;&#x8BB8;16&#x4E2A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x65E0;&#x963B;&#x585E;&#x5730;&#x64CD;&#x4F5C;&#x96C6;&#x5408;&#x5BF9;&#x8C61;&#xFF0C;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x51CF;&#x5C11;&#x5E76;&#x53D1;&#x65F6;&#x7684;&#x963B;&#x585E;&#x73B0;&#x8C61;&#x3002;</li>
<li>put&#x3001;remove&#x4F1A;&#x52A0;&#x9501;&#x3002;get&#x548C;containsKey&#x4E0D;&#x4F1A;&#x52A0;&#x9501;&#x3002;</li>
<li>&#x8BA1;&#x7B97;size&#xFF1A;&#x5728;&#x4E0D;&#x52A0;&#x9501;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x904D;&#x5386;&#x6240;&#x6709;&#x7684;&#x6BB5;&#xFF0C;&#x8BFB;&#x53D6;&#x5176;count&#x4EE5;&#x53CA;modCount&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#x90FD;&#x662F;volatile&#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x7EDF;&#x8BA1;&#xFF0C;&#x518D;&#x904D;&#x5386;&#x4E00;&#x6B21;&#x6240;&#x6709;&#x7684;&#x6BB5;&#xFF0C;&#x6BD4;&#x8F83;modCount&#x662F;&#x5426;&#x6709;&#x6539;&#x53D8;&#x3002;&#x5982;&#x6709;&#x6539;&#x53D8;&#xFF0C;&#x5219;&#x518D;&#x5C1D;&#x8BD5;&#x4E24;&#x6B21;&#x673A;&#x4E0A;&#x52A8;&#x4F5C;&#x3002;</li>
<li><p>&#x5982;&#x6267;&#x884C;&#x4E86;&#x4E09;&#x6B21;&#x4E0A;&#x8FF0;&#x52A8;&#x4F5C;&#xFF0C;&#x4ECD;&#x7136;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x5219;&#x904D;&#x5386;&#x6240;&#x6709;&#x6BB5;&#xFF0C;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x8BA1;&#x7B97;&#xFF0C;&#x8BA1;&#x7B97;&#x5B8C;&#x6BD5;&#x540E;&#x91CA;&#x653E;&#x6240;&#x6709;&#x9501;&#xFF0C;&#x4ECE;&#x800C;&#x5B8C;&#x6210;&#x8BA1;&#x7B97;&#x52A8;&#x4F5C;&#x3002;</p>
</li>
<li><p>JDK1.8&#x540E;&#xFF1A;CAS+synchronized</p>
</li>
<li><p>bin&#x662F;&#x6876; bucket&#x7684;&#x610F;&#x601D;</p>
</li>
<li><p>ConcurrentHashMap&#x662F;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x6574;&#x4E2A;HashMap&#x624D;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x4E3A;2&#x7684;&#x6B21;&#x65B9;&#x5927;&#x5C0F;&#x4E2A;&#x6876;&#xFF08;bin)&#xFF0C;&#x6BCF;&#x4E2A;bin&#x5305;&#x542B;&#x54C8;&#x5E0C;&#x503C;&#x76F8;&#x540C;&#x7684;&#x4E00;&#x7CFB;&#x5217;Node&#xFF08;&#x4E00;&#x822C;&#x542B;&#x6709;0&#x6216;1&#x4E2A;Node)&#x3002;&#x6BCF;&#x4E2A;bin&#x7684;&#x7B2C;&#x4E00;&#x4E2A;Node&#x4F5C;&#x4E3A;&#x8FD9;&#x4E2A;bin&#x7684;&#x9501;&#xFF0C;Hash&#x503C;&#x4E3A;&#x96F6;&#x6216;&#x8005;&#x8D1F;&#x7684;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#xFF1B;</p>
</li>
<li>&#x6BCF;&#x4E2A;bin&#x7684;&#x7B2C;&#x4E00;&#x4E2A;Node&#x63D2;&#x5165;&#x7528;&#x5230;CAS&#x539F;&#x7406;&#xFF0C;&#x8FD9;&#x662F;&#x5728;ConcurrentHashMap&#x4E2D;&#x6700;&#x5E38;&#x53D1;&#x751F;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x4F59;&#x7684;&#x63D2;&#x5165;&#x3001;&#x5220;&#x9664;&#x3001;&#x66FF;&#x6362;&#x64CD;&#x4F5C;&#x5BF9;bin&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;Node&#x52A0;&#x9501;&#xFF0C;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;</li>
<li>ConcurrentHashMap&#x7684;size()&#x51FD;&#x6570;&#x4E00;&#x822C;&#x6BD4;&#x8F83;&#x5C11;&#x7528;&#xFF0C;&#x540C;&#x65F6;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x589E;&#x5220;&#x67E5;&#x6539;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x5BB9;&#x5668;&#x5E76;&#x672A;&#x5728;&#x5185;&#x90E8;&#x4FDD;&#x5B58;&#x4E00;&#x4E2A;size&#x503C;&#xFF0C;&#x800C;&#x4E14;&#x91C7;&#x7528;&#x6BCF;&#x6B21;&#x8C03;&#x7528;size()&#x51FD;&#x6570;&#x65F6;&#x7D2F;&#x52A0;&#x5404;&#x4E2A;bin&#x4E2D;Node&#x7684;&#x4E2A;&#x6570;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E00;&#x8FC7;&#x7A0B;&#x4E0D;&#x52A0;&#x9501;&#xFF0C;&#x5373;&#x5F97;&#x5230;&#x7684;size&#x503C;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x6700;&#x65B0;&#x7684;&#x3002;</li>
<li></li>
<li><p>ConcurrentHashMap#Node</p>
</li>
<li>Node&#x662F;&#x6700;&#x6838;&#x5FC3;&#x7684;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x5B83;&#x5305;&#x88C5;&#x4E86;key-value&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x6240;&#x6709;&#x63D2;&#x5165;ConcurrentHashMap&#x7684;&#x6570;&#x636E;&#x90FD;&#x5305;&#x88C5;&#x5728;&#x8FD9;&#x91CC;&#x9762;&#x3002;&#x5B83;&#x4E0E;HashMap&#x4E2D;&#x7684;&#x5B9A;&#x4E49;&#x5F88;&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x4E9B;&#x5DEE;&#x522B;&#xFF1A;&#x5B83;&#x5BF9;value&#x548C;next&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E86;volatile&#x5C5E;&#x6027;&#xFF1B;&#x2019;&#x5B83;&#x4E0D;&#x5141;&#x8BB8;&#x8C03;&#x7528;setValue&#x65B9;&#x6CD5;&#x76F4;&#x63A5;&#x6539;&#x53D8;Node&#x7684;value&#x57DF;&#xFF1B;&#x5B83;&#x589E;&#x52A0;&#x4E86;find&#x65B9;&#x6CD5;&#x8F85;&#x52A9;map.get()&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<pre><code>static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
    final int hash;
    final K key;
    volatile V val; // value&#x548C;next&#x662F;volatile&#x7684;
    volatile Node&lt;K,V&gt; next;

    Node(int hash, K key, V val, Node&lt;K,V&gt; next) {
        this.hash = hash;
        this.key = key;
        this.val = val;
        this.next = next;
    }

    public final K getKey()       { return key; }
    public final V getValue()     { return val; }
    public final int hashCode()   { return key.hashCode() ^ val.hashCode(); }
    public final String toString(){ return key + &quot;=&quot; + val; }
    public final V setValue(V value) {
        throw new UnsupportedOperationException();
    }

    public final boolean equals(Object o) {
        Object k, v, u; Map.Entry&lt;?,?&gt; e;
        return ((o instanceof Map.Entry) &amp;&amp;
                (k = (e = (Map.Entry&lt;?,?&gt;)o).getKey()) != null &amp;&amp;
                (v = e.getValue()) != null &amp;&amp;
                (k == key || k.equals(key)) &amp;&amp;
                (v == (u = val) || v.equals(u)));
    }

    /**
     * Virtualized support for map.get(); overridden in subclasses.
     */
    Node&lt;K,V&gt; find(int h, Object k) {
        Node&lt;K,V&gt; e = this;
        if (k != null) {
            do {
                K ek;
                if (e.hash == h &amp;&amp;
                    ((ek = e.key) == k || (ek != null &amp;&amp; k.equals(ek))))
                    return e;
            } while ((e = e.next) != null);
        }
        return null;
    }
}
</code></pre><ul>
<li>ConcurrentHashMap#TreeNode</li>
<li>&#x5F53;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x8FC7;&#x957F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x8F6C;&#x6362;&#x4E3A;TreeNode&#x3002;&#x4F46;&#x662F;&#x4E0E;HashMap&#x4E0D;&#x76F8;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x5B83;&#x5E76;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x8F6C;&#x6362;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x800C;&#x662F;&#x628A;&#x8FD9;&#x4E9B;&#x7ED3;&#x70B9;&#x5305;&#x88C5;&#x6210;TreeNode&#x653E;&#x5728;TreeBin&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x7531;TreeBin&#x5B8C;&#x6210;&#x5BF9;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x5305;&#x88C5;&#x3002;&#x800C;&#x4E14;TreeNode&#x5728;ConcurrentHashMap&#x7EE7;&#x627F;&#x81EA;Node&#x7C7B;&#xFF0C;&#x800C;&#x5E76;&#x975E;HashMap&#x4E2D;&#x7684;&#x7EE7;&#x627F;&#x81EA;LinkedHashMap.Entry<k,v>&#x7C7B;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;TreeNode&#x5E26;&#x6709;next&#x6307;&#x9488;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x76EE;&#x7684;&#x662F;&#x65B9;&#x4FBF;&#x57FA;&#x4E8E;TreeBin&#x7684;&#x8BBF;&#x95EE;&#x3002;</k,v></li>
</ul>
<pre><code>static final class TreeNode&lt;K,V&gt; extends Node&lt;K,V&gt; {
    TreeNode&lt;K,V&gt; parent;  // red-black tree links
    TreeNode&lt;K,V&gt; left;
    TreeNode&lt;K,V&gt; right;
    TreeNode&lt;K,V&gt; prev;    // needed to unlink next upon deletion
    boolean red;

    TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next,
             TreeNode&lt;K,V&gt; parent) {
        super(hash, key, val, next);
        this.parent = parent;
    }

    Node&lt;K,V&gt; find(int h, Object k) {
        return findTreeNode(h, k, null);
    }

    /**
     * Returns the TreeNode (or null if not found) for the given key
     * starting at given root.
     */
    final TreeNode&lt;K,V&gt; findTreeNode(int h, Object k, Class&lt;?&gt; kc) {
        if (k != null) {
            TreeNode&lt;K,V&gt; p = this;
            do  {
                int ph, dir; K pk; TreeNode&lt;K,V&gt; q;
                TreeNode&lt;K,V&gt; pl = p.left, pr = p.right;
                if ((ph = p.hash) &gt; h)
                    p = pl;
                else if (ph &lt; h)
                    p = pr;
                else if ((pk = p.key) == k || (pk != null &amp;&amp; k.equals(pk)))
                    return p;
                else if (pl == null)
                    p = pr;
                else if (pr == null)
                    p = pl;
                else if ((kc != null ||
                          (kc = comparableClassFor(k)) != null) &amp;&amp;
                         (dir = compareComparables(kc, k, pk)) != 0)
                    p = (dir &lt; 0) ? pl : pr;
                else if ((q = pr.findTreeNode(h, k, kc)) != null)
                    return q;
                else
                    p = pl;
            } while (p != null);
        }
        return null;
    }
}
</code></pre><ul>
<li>ConcurrentHashMap#TreeBin</li>
<li><p>&#x8FD9;&#x4E2A;&#x7C7B;&#x5E76;&#x4E0D;&#x8D1F;&#x8D23;&#x5305;&#x88C5;&#x7528;&#x6237;&#x7684;key&#x3001;value&#x4FE1;&#x606F;&#xFF0C;&#x800C;&#x662F;&#x5305;&#x88C5;&#x7684;&#x5F88;&#x591A;TreeNode&#x8282;&#x70B9;&#x3002;&#x5B83;&#x4EE3;&#x66FF;&#x4E86;TreeNode&#x7684;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x5B9E;&#x9645;&#x7684;ConcurrentHashMap&#x201C;&#x6570;&#x7EC4;&#x201D;&#x4E2D;&#xFF0C;&#x5B58;&#x653E;&#x7684;&#x662F;TreeBin&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x4E0D;&#x662F;TreeNode&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x662F;&#x4E0E;HashMap&#x7684;&#x533A;&#x522B;&#x3002;&#x53E6;&#x5916;&#x8FD9;&#x4E2A;&#x7C7B;&#x8FD8;&#x5E26;&#x6709;&#x4E86;&#x8BFB;&#x5199;&#x9501;&#x3002;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5728;&#x6784;&#x9020;TreeBin&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x4EC5;&#x4EC5;&#x6307;&#x5B9A;&#x4E86;&#x5B83;&#x7684;hash&#x503C;&#x4E3A;TREEBIN&#x5E38;&#x91CF;&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x4E2A;&#x6807;&#x8BC6;&#x4F4D;&#xFF1B;&#x540C;&#x65F6;&#x4E5F;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x719F;&#x6089;&#x7684;&#x7EA2;&#x9ED1;&#x6811;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
</ul>
<pre><code>/**
 * TreeNodes used at the heads of bins. TreeBins do not hold user
 * keys or values, but instead point to list of TreeNodes and
 * their root. They also maintain a parasitic read-write lock
 * forcing writers (who hold bin lock) to wait for readers (who do
 * not) to complete before tree restructuring operations.
 */
static final class TreeBin&lt;K,V&gt; extends Node&lt;K,V&gt; {
    TreeNode&lt;K,V&gt; root;
    volatile TreeNode&lt;K,V&gt; first;
    volatile Thread waiter;
    volatile int lockState;
    // values for lockState
    static final int WRITER = 1; // set while holding write lock
    static final int WAITER = 2; // set when waiting for write lock
    static final int READER = 4; // increment value for setting read lock

    /**
     * Tie-breaking utility for ordering insertions when equal
     * hashCodes and non-comparable. We don&apos;t require a total
     * order, just a consistent insertion rule to maintain
     * equivalence across rebalancings. Tie-breaking further than
     * necessary simplifies testing a bit.
     */
    static int tieBreakOrder(Object a, Object b) {
        int d;
        if (a == null || b == null ||
            (d = a.getClass().getName().
             compareTo(b.getClass().getName())) == 0)
            d = (System.identityHashCode(a) &lt;= System.identityHashCode(b) ?
                 -1 : 1);
        return d;
    }

    /**
     * Creates bin with initial set of nodes headed by b.
     */
    TreeBin(TreeNode&lt;K,V&gt; b) {
        super(TREEBIN, null, null, null);
        this.first = b;
        TreeNode&lt;K,V&gt; r = null;
        for (TreeNode&lt;K,V&gt; x = b, next; x != null; x = next) {
            next = (TreeNode&lt;K,V&gt;)x.next;
            x.left = x.right = null;
            if (r == null) {
                x.parent = null;
                x.red = false;
                r = x;
            }
            else {
                K k = x.key;
                int h = x.hash;
                Class&lt;?&gt; kc = null;
                for (TreeNode&lt;K,V&gt; p = r;;) {
                    int dir, ph;
                    K pk = p.key;
                    if ((ph = p.hash) &gt; h)
                        dir = -1;
                    else if (ph &lt; h)
                        dir = 1;
                    else if ((kc == null &amp;&amp;
                              (kc = comparableClassFor(k)) == null) ||
                             (dir = compareComparables(kc, k, pk)) == 0)
                        dir = tieBreakOrder(k, pk);
                        TreeNode&lt;K,V&gt; xp = p;
                    if ((p = (dir &lt;= 0) ? p.left : p.right) == null) {
                        x.parent = xp;
                        if (dir &lt;= 0)
                            xp.left = x;
                        else
                            xp.right = x;
                        r = balanceInsertion(r, x);
                        break;
                    }
                }
            }
        }
        this.root = r;
        assert checkInvariants(root);
    }
</code></pre><ul>
<li>}</li>
<li></li>
<li><p>ConcurrentHashMap#ForwardingNode</p>
</li>
</ul>
<pre><code>/**
 * A node inserted at head of bins during transfer operations.
 */
static final class ForwardingNode&lt;K,V&gt; extends Node&lt;K,V&gt; {
    final Node&lt;K,V&gt;[] nextTable;
    ForwardingNode(Node&lt;K,V&gt;[] tab) {
        super(MOVED, null, null, null);
        this.nextTable = tab;
    }

    Node&lt;K,V&gt; find(int h, Object k) {
        // loop to avoid arbitrarily deep recursion on forwarding nodes
        outer: for (Node&lt;K,V&gt;[] tab = nextTable;;) {
            Node&lt;K,V&gt; e; int n;
            if (k == null || tab == null || (n = tab.length) == 0 ||
                (e = tabAt(tab, (n - 1) &amp; h)) == null)
                return null;
            for (;;) {
                int eh; K ek;
                if ((eh = e.hash) == h &amp;&amp;
                    ((ek = e.key) == k || (ek != null &amp;&amp; k.equals(ek))))
                    return e;
                if (eh &lt; 0) {
                    if (e instanceof ForwardingNode) {
                        tab = ((ForwardingNode&lt;K,V&gt;)e).nextTable;
                        continue outer;
                    }
                    else
                        return e.find(h, k);
                }
                if ((e = e.next) == null)
                    return null;
            }
        }
    }
}
</code></pre><ul>
<li></li>
<li><p>ConcurrentHashMap#ReservationNode</p>
</li>
</ul>
<pre><code>/**
 * A place-holder node used in computeIfAbsent and compute
 */
static final class ReservationNode&lt;K,V&gt; extends Node&lt;K,V&gt; {
    ReservationNode() {
        super(RESERVED, null, null, null);
    }

    Node&lt;K,V&gt; find(int h, Object k) {
        return null;
    }
}
</code></pre><ul>
<li><h3 id="&#x8282;&#x70B9;&#x7C7B;&#x578B;"><a name="&#x8282;&#x70B9;&#x7C7B;&#x578B;" class="plugin-anchor" href="#&#x8282;&#x70B9;&#x7C7B;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8282;&#x70B9;&#x7C7B;&#x578B;</h3>
</li>
<li>hash&#x503C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;0&#xFF0C;&#x5219;&#x662F;&#x94FE;&#x8868;&#x8282;&#x70B9;&#xFF0C;Node</li>
<li>hash&#x503C;&#x4E3A;-1   MOVED&#xFF0C;&#x5219;&#x662F;forwarding nodes&#xFF0C;&#x5B58;&#x50A8;nextTable&#x7684;&#x5F15;&#x7528;&#x3002;&#x53EA;&#x6709;table&#x53D1;&#x751F;&#x6269;&#x5BB9;&#x7684;&#x65F6;&#x5019;&#xFF0C;ForwardingNode&#x624D;&#x4F1A;&#x53D1;&#x6325;&#x4F5C;&#x7528;&#xFF0C;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5360;&#x4F4D;&#x7B26;&#x653E;&#x5728;table&#x4E2D;&#x8868;&#x793A;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x4E3A;null&#x6216;&#x5219;&#x5DF2;&#x7ECF;&#x88AB;&#x79FB;&#x52A8;&#x3002;</li>
<li>hash&#x503C;&#x4E3A;-2   TREEBIN&#xFF0C;&#x5219;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#x6839;&#xFF0C;TreeBin&#x7C7B;&#x578B;</li>
<li><p>hash&#x503C;&#x4E3A;-3   RESERVED&#xFF0C;&#x5219;&#x662F;reservation nodes&#xFF0C;</p>
</li>
<li><p>static final int MOVED     = -1; // hash for forwarding nodes
static final int TREEBIN   = -2; // hash for roots of trees
static final int RESERVED  = -3; // hash for transient reservations</p>
</li>
<li></li>
</ul>
<h3 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<pre><code>/**
 * The largest possible table capacity.  This value must be
 * exactly 1&lt;&lt;30 to stay within Java array allocation and indexing
 * bounds for power of two table sizes, and is further required
 * because the top two bits of 32bit hash fields are used for
 * control purposes.
 */
private static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;

/**
 * The default initial table capacity.  Must be a power of 2
 * (i.e., at least 1) and at most MAXIMUM_CAPACITY.
 */
private static final int DEFAULT_CAPACITY = 16;

/**
 * The largest possible (non-power of two) array size.
 * Needed by toArray and related methods.
 */
static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;

/**
 * The default concurrency level for this table. Unused but
 * defined for compatibility with previous versions of this class.
 */
private static final int DEFAULT_CONCURRENCY_LEVEL = 16;

/**
 * The load factor for this table. Overrides of this value in
 * constructors affect only the initial table capacity.  The
 * actual floating point value isn&apos;t normally used -- it is
 * simpler to use expressions such as {@code n - (n &gt;&gt;&gt; 2)} for
 * the associated resizing threshold.
 */
private static final float LOAD_FACTOR = 0.75f;

/**
 * The bin count threshold for using a tree rather than list for a
 * bin.  Bins are converted to trees when adding an element to a
 * bin with at least this many nodes. The value must be greater
 * than 2, and should be at least 8 to mesh with assumptions in
 * tree removal about conversion back to plain bins upon
 * shrinkage.
 */
static final int TREEIFY_THRESHOLD = 8;

/**
 * The bin count threshold for untreeifying a (split) bin during a
 * resize operation. Should be less than TREEIFY_THRESHOLD, and at
 * most 6 to mesh with shrinkage detection under removal.
 */
static final int UNTREEIFY_THRESHOLD = 6;

/**
 * The smallest table capacity for which bins may be treeified.
 * (Otherwise the table is resized if too many nodes in a bin.)
 * The value should be at least 4 * TREEIFY_THRESHOLD to avoid
 * conflicts between resizing and treeification thresholds.
 */
static final int MIN_TREEIFY_CAPACITY = 64;

/**
 * Minimum number of rebinnings per transfer step. Ranges are
 * subdivided to allow multiple resizer threads.  This value
 * serves as a lower bound to avoid resizers encountering
 * excessive memory contention.  The value should be at least
 * DEFAULT_CAPACITY.
 */
private static final int MIN_TRANSFER_STRIDE = 16;

/**
 * The number of bits used for generation stamp in sizeCtl.
 * Must be at least 6 for 32bit arrays.
 */
private static int RESIZE_STAMP_BITS = 16;

/**
 * The maximum number of threads that can help resize.
 * Must fit in 32 - RESIZE_STAMP_BITS bits.
 */
private static final int MAX_RESIZERS = (1 &lt;&lt; (32 - RESIZE_STAMP_BITS)) - 1;

/**
 * The bit shift for recording size stamp in sizeCtl.
 */
private static final int RESIZE_STAMP_SHIFT = 32 - RESIZE_STAMP_BITS;
/*
 * Encodings for Node hash fields. See above for explanation.
 */
static final int MOVED     = -1; // hash for forwarding nodes
static final int TREEBIN   = -2; // hash for roots of trees
static final int RESERVED  = -3; // hash for transient reservations
static final int HASH_BITS = 0x7fffffff; // usable bits of normal node hash

/** Number of CPUS, to place bounds on some sizings */
static final int NCPU = Runtime.getRuntime().availableProcessors();
</code></pre><pre><code>/**
 * The array of bins. Lazily initialized upon first insertion.
 * Size is always a power of two. Accessed directly by iterators.
 */
transient volatile Node&lt;K,V&gt;[] table;

/**
 * The next table to use; non-null only while resizing.
 */
private transient volatile Node&lt;K,V&gt;[] nextTable;

/**
 * Base counter value, used mainly when there is no contention,
 * but also as a fallback during table initialization
 * races. Updated via CAS.
 */
private transient volatile long baseCount;

/**
 * Table initialization and resizing control.  When negative, the
 * table is being initialized or resized: -1 for initialization,
 * else -(1 + the number of active resizing threads).  Otherwise,
 * when table is null, holds the initial table size to use upon
 * creation, or 0 for default. After initialization, holds the
 * next element count value upon which to resize the table.
</code></pre><ul>
<li>&#x8D1F;&#x6570;&#x4EE3;&#x8868;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x6216;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;</li>
<li>-1&#x4EE3;&#x8868;&#x6B63;&#x5728;&#x521D;&#x59CB;&#x5316;</li>
<li>-N &#x8868;&#x793A;&#x6709;N-1&#x4E2A;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;</li>
</ul>
<pre><code>&#x6B63;&#x6570;&#x6216;0&#x4EE3;&#x8868;hash&#x8868;&#x8FD8;&#x6CA1;&#x6709;&#x88AB;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8FD9;&#x4E2A;&#x6570;&#x503C;&#x8868;&#x793A;&#x521D;&#x59CB;&#x5316;&#x6216;&#x4E0B;&#x4E00;&#x6B21;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x8FD8;&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5B83;&#x7684;&#x503C;&#x59CB;&#x7EC8;&#x662F;&#x5F53;&#x524D;ConcurrentHashMap&#x5BB9;&#x91CF;&#x7684;0.75&#x500D;&#xFF0C;&#x8FD9;&#x4E0E;loadfactor&#x662F;&#x5BF9;&#x5E94;&#x7684;&#x3002;
 */
private transient volatile int sizeCtl;

/**
 * The next table index (plus one) to split while resizing.
 */
private transient volatile int transferIndex;

/**
 * Spinlock (locked via CAS) used when resizing and/or creating CounterCells.
 */
private transient volatile int cellsBusy;

/**
 * Table of counter cells. When non-null, size is a power of 2.
 */
private transient volatile CounterCell[] counterCells;

// views
private transient KeySetView&lt;K,V&gt; keySet;
private transient ValuesView&lt;K,V&gt; values;
private transient EntrySetView&lt;K,V&gt; entrySet;
</code></pre><h3 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3>
<pre><code>public ConcurrentHashMap() {
}

/**
 * Creates a new, empty map with an initial table size
 * accommodating the specified number of elements without the need
 * to dynamically resize.
 *
 * @param initialCapacity The implementation performs internal
 * sizing to accommodate this many elements.
 * @throws IllegalArgumentException if the initial capacity of
 * elements is negative
 */
public ConcurrentHashMap(int initialCapacity) {
    if (initialCapacity &lt; 0)
        throw new IllegalArgumentException();
    int cap = ((initialCapacity &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ?
               MAXIMUM_CAPACITY :
               tableSizeFor(initialCapacity + (initialCapacity &gt;&gt;&gt; 1) + 1));
    this.sizeCtl = cap;
}

/**
 * Creates a new map with the same mappings as the given map.
 *
 * @param m the map
 */
public ConcurrentHashMap(Map&lt;? extends K, ? extends V&gt; m) {
    this.sizeCtl = DEFAULT_CAPACITY;
    putAll(m);
}

/**
 * Creates a new, empty map with an initial table size based on
 * the given number of elements ({@code initialCapacity}) and
 * initial table density ({@code loadFactor}).
 *
 * @param initialCapacity the initial capacity. The implementation
 * performs internal sizing to accommodate this many elements,
 * given the specified load factor.
 * @param loadFactor the load factor (table density) for
 * establishing the initial table size
 * @throws IllegalArgumentException if the initial capacity of
 * elements is negative or the load factor is nonpositive
 *
 * @since 1.6
 */
public ConcurrentHashMap(int initialCapacity, float loadFactor) {
    this(initialCapacity, loadFactor, 1);
}

/**
 * Creates a new, empty map with an initial table size based on
 * the given number of elements ({@code initialCapacity}), table
 * density ({@code loadFactor}), and number of concurrently
 * updating threads ({@code concurrencyLevel}).
 *
 * @param initialCapacity the initial capacity. The implementation
 * performs internal sizing to accommodate this many elements,
 * given the specified load factor.
 * @param loadFactor the load factor (table density) for
 * establishing the initial table size
 * @param concurrencyLevel the estimated number of concurrently
 * updating threads. The implementation may use this value as
 * a sizing hint.
 * @throws IllegalArgumentException if the initial capacity is
 * negative or the load factor or concurrencyLevel are
 * nonpositive
 */
public ConcurrentHashMap(int initialCapacity,
                         float loadFactor, int concurrencyLevel) {
    if (!(loadFactor &gt; 0.0f) || initialCapacity &lt; 0 || concurrencyLevel &lt;= 0)
        throw new IllegalArgumentException();
    if (initialCapacity &lt; concurrencyLevel)   // Use at least as many bins
        initialCapacity = concurrencyLevel;   // as estimated threads
    long size = (long)(1.0 + (long)initialCapacity / loadFactor);
    int cap = (size &gt;= (long)MAXIMUM_CAPACITY) ?
        MAXIMUM_CAPACITY : tableSizeFor((int)size);
    this.sizeCtl = cap;
}
</code></pre><h3 id="cas"><a name="cas" class="plugin-anchor" href="#cas"><i class="fa fa-link" aria-hidden="true"></i></a>CAS</h3>
<pre><code>private static final sun.misc.Unsafe U;
</code></pre><ul>
<li>Unsafe&#x7C7B;&#x7684;&#x51E0;&#x4E2A;CAS&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x539F;&#x5B50;&#x6027;&#x5730;&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x7684;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x503C;</li>
</ul>
<pre><code>/**
 * Atomically update Java variable to &lt;tt&gt;x&lt;/tt&gt; if it is currently
 * holding &lt;tt&gt;expected&lt;/tt&gt;.
 * @return &lt;tt&gt;true&lt;/tt&gt; if successful
 */
public final native boolean compareAndSwapObject(Object o, long offset,
                                                 Object expected,
                                                 Object x);

/**
 * Atomically update Java variable to &lt;tt&gt;x&lt;/tt&gt; if it is currently
 * holding &lt;tt&gt;expected&lt;/tt&gt;.
 * @return &lt;tt&gt;true&lt;/tt&gt; if successful
 */
public final native boolean compareAndSwapInt(Object o, long offset,
                                              int expected,
                                              int x);

/**
 * Atomically update Java variable to &lt;tt&gt;x&lt;/tt&gt; if it is currently
 * holding &lt;tt&gt;expected&lt;/tt&gt;.
 * @return &lt;tt&gt;true&lt;/tt&gt; if successful
 */
public final native boolean compareAndSwapLong(Object o, long offset,
                                               long expected,
                                               long x);
</code></pre><pre><code>/**
 * Fetches a reference value from a given Java variable, with volatile
 * load semantics. Otherwise identical to {@link #getObject(Object, long)}
 */
public native Object getObjectVolatile(Object o, long offset);

/**
 * Stores a reference value into a given Java variable, with
 * volatile store semantics. Otherwise identical to {@link #putObject(Object, long, Object)}
 */
public native void    putObjectVolatile(Object o, long offset, Object x);
</code></pre><ul>
<li>Unsafe.getObjectVolatile&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x6BCF;&#x6B21;&#x62FF;&#x5230;&#x6570;&#x636E;&#x90FD;&#x662F;&#x6700;&#x65B0;&#x7684;&#x3002;<h3 id="&#x4E09;&#x4E2A;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;"><a name="&#x4E09;&#x4E2A;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x4E09;&#x4E2A;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E09;&#x4E2A;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;</h3>
</li>
<li>ConcurrentHashMap&#x5B9A;&#x4E49;&#x4E86;&#x4E09;&#x4E2A;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF0C;&#x7528;&#x4E8E;&#x5BF9;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x7684;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x6B63;&#x662F;&#x8FD9;&#x4E9B;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x4FDD;&#x8BC1;&#x4E86;ConcurrentHashMap&#x7684;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;    </li>
<li>static final <k,v> Node<k,v> tabAt(Node<k,v>[] tab, int i) {
  return (Node<k,v>)U.getObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);
}</k,v></k,v></k,v></k,v></li>
</ul>
<p>static final <k,v> boolean casTabAt(Node<k,v>[] tab, int i,
                                    Node<k,v> c, Node<k,v> v) {
    return U.compareAndSwapObject(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, c, v);
}</k,v></k,v></k,v></k,v></p>
<p>static final <k,v> void setTabAt(Node<k,v>[] tab, int i, Node<k,v> v) {
    U.putObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);
}</k,v></k,v></k,v></p>
<ul>
<li><h3 id="&#x521D;&#x59CB;&#x5316;"><a name="&#x521D;&#x59CB;&#x5316;" class="plugin-anchor" href="#&#x521D;&#x59CB;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x521D;&#x59CB;&#x5316;</h3>
</li>
<li><p>&#x5BF9;&#x4E8E;ConcurrentHashMap&#x6765;&#x8BF4;&#xFF0C;&#x8C03;&#x7528;&#x5B83;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4EC5;&#x4EC5;&#x662F;&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E9B;&#x53C2;&#x6570;&#x800C;&#x5DF2;&#x3002;&#x800C;&#x6574;&#x4E2A;table&#x7684;&#x521D;&#x59CB;&#x5316;&#x662F;&#x5728;&#x5411;ConcurrentHashMap&#x4E2D;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x7684;&#x65F6;&#x5019;&#x53D1;&#x751F;&#x7684;&#x3002;&#x5982;&#x8C03;&#x7528;put&#x3001;computeIfAbsent&#x3001;compute&#x3001;merge&#x7B49;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8C03;&#x7528;&#x65F6;&#x673A;&#x662F;&#x68C0;&#x67E5;table==null&#x3002;</p>
</li>
<li><p>&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x4E86;&#x5173;&#x952E;&#x5C5E;&#x6027;sizeCtl &#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x503C;&lt;0&#xFF0C;&#x8868;&#x793A;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5C31;&#x653E;&#x5F03;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x8FD9;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x51FA;ConcurrentHashMap&#x7684;&#x521D;&#x59CB;&#x5316;&#x53EA;&#x80FD;&#x7531;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x3002;&#x5982;&#x679C;&#x83B7;&#x5F97;&#x4E86;&#x521D;&#x59CB;&#x5316;&#x6743;&#x9650;&#xFF0C;&#x5C31;&#x7528;CAS&#x65B9;&#x6CD5;&#x5C06;sizeCtl&#x7F6E;&#x4E3A;-1&#xFF0C;&#x9632;&#x6B62;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x3002;&#x521D;&#x59CB;&#x5316;&#x6570;&#x7EC4;&#x540E;&#xFF0C;&#x5C06;sizeCtl&#x7684;&#x503C;&#x6539;&#x4E3A;0.75*n&#x3002;</p>
</li>
</ul>
<pre><code>private final Node&lt;K,V&gt;[] initTable() {
    Node&lt;K,V&gt;[] tab; int sc;
    while ((tab = table) == null || tab.length == 0) {
        if ((sc = sizeCtl) &lt; 0)
            Thread.yield(); // lost initialization race; just spin
</code></pre><pre><code>- // &#x5229;&#x7528;CAS&#x65B9;&#x6CD5;&#x628A;sizectl&#x7684;&#x503C;&#x7F6E;&#x4E3A;-1 &#x8868;&#x793A;&#x672C;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;  
    else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) {
        try {
            if ((tab = table) == null || tab.length == 0) {
                int n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY;
                @SuppressWarnings(&quot;unchecked&quot;)
                Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n];
                table = tab = nt;
- // &#x76F8;&#x5F53;&#x4E8E;0.75*n &#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6269;&#x5BB9;&#x7684;&#x9608;&#x503C;  
                sc = n - (n &gt;&gt;&gt; 2);
            }
        } finally {
            sizeCtl = sc;
        }
        break;
    }
}
return tab;
</code></pre><p>}</p>
<ul>
<li></li>
<li></li>
</ul>
<h3 id="spread&#xFF08;hash"><a name="spread&#xFF08;hash" class="plugin-anchor" href="#spread&#xFF08;hash"><i class="fa fa-link" aria-hidden="true"></i></a>spread&#xFF08;hash)</h3>
<ul>
<li><p>h&#x662F;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;hashCode&#x8FD4;&#x56DE;&#x503C;</p>
<ul>
<li>static final int spread(int h) {
return (h ^ (h &gt;&gt;&gt; 16)) &amp; HASH_BITS;
}</li>
</ul>
</li>
<li><p>static final int HASH_BITS = 0x7fffffff; // usable bits of normal node hash</p>
</li>
<li><p>&#x7C7B;&#x4F3C;&#x4E8E;Hashtable+HashMap&#x7684;hash&#x5B9E;&#x73B0;&#xFF0C;Hashtable&#x4E2D;&#x4E5F;&#x662F;&#x548C;&#x4E00;&#x4E2A;&#x9B54;&#x6CD5;&#x503C;&#x53D6;&#x4E0E;&#xFF0C;&#x4FDD;&#x8BC1;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x4E3A;&#x6B63;&#x6570;&#xFF1B;HashMap&#x4E2D;&#x4E5F;&#x662F;&#x5C06;hashCode&#x4E0E;&#x5176;&#x79FB;&#x52A8;&#x4F4E;n&#x4F4D;&#x7684;&#x7ED3;&#x679C;&#x518D;&#x53D6;&#x5F02;&#x6216;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x5BF9;&#x8C61;&#x7684;hashCode&#x7684;&#x9AD8;16&#x4F4D;&#x7684;&#x53D8;&#x5316;&#x80FD;&#x53CD;&#x5E94;&#x5230;&#x4F4E;16&#x4F4D;&#x4E2D;&#xFF0C;</p>
<h3 id="size&#x76F8;&#x5173;"><a name="size&#x76F8;&#x5173;" class="plugin-anchor" href="#size&#x76F8;&#x5173;"><i class="fa fa-link" aria-hidden="true"></i></a>size&#x76F8;&#x5173;</h3>
<h4 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h4>
</li>
<li>@sun.misc.Contended static final class CounterCell {
  volatile long value;
  CounterCell(long x) { value = x; }
}</li>
</ul>
<pre><code>/**
 * Base counter value, used mainly when there is no contention,
 * but also as a fallback during table initialization
 * races. Updated via CAS.
 */
private transient volatile long baseCount;
</code></pre><pre><code>/**
 * Spinlock (locked via CAS) used when resizing and/or creating CounterCells.
 */
private transient volatile int cellsBusy;

/**
 * Table of counter cells. When non-null, size is a power of 2.
 */
private transient volatile CounterCell[] counterCells;
</code></pre><ul>
<li>&#x6BCF;&#x4E2A;CounterCell&#x90FD;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;bucket&#xFF0C;CounterCell&#x4E2D;&#x7684;long&#x503C;&#x5C31;&#x662F;&#x5BF9;&#x5E94;bucket&#x7684;binCount&#x3002;</li>
<li>&#x8BA1;&#x7B97;&#x603B;&#x5927;&#x5C0F;&#x5C31;&#x662F;&#x5C06;&#x6240;&#x6709;bucket&#x7684;binCount&#x6C42;&#x548C;&#xFF0C;&#x800C;&#x6BCF;&#x4E2A;binCount&#x90FD;&#x5B58;&#x50A8;&#x5728;CounterCell#value&#x4E2D;&#xFF0C;&#x6BCF;&#x5F53;put&#x6216;&#x8005;remove&#x65F6;&#x90FD;&#x4F1A;&#x66F4;&#x65B0;&#x8282;&#x70B9;&#x6240;&#x5728;bucket&#x5BF9;&#x5E94;&#x7684;CounterCell#value&#x3002;</li>
</ul>
<h4 id="size"><a name="size" class="plugin-anchor" href="#size"><i class="fa fa-link" aria-hidden="true"></i></a>size()</h4>
<ul>
<li>&#x6CA1;&#x6709;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;baseCount &#x800C;&#x662F;&#x7EDF;&#x8BA1;&#x4E00;&#x6B21;&#x8FD9;&#x4E2A;&#x503C;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x503C;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5927;&#x6982;&#x7684;&#x6570;&#x503C;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x80FD;&#x5728;&#x7EDF;&#x8BA1;&#x7684;&#x65F6;&#x5019;&#x6709;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;&#x6267;&#x884C;&#x63D2;&#x5165;&#x6216;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x3002;</li>
</ul>
<pre><code>public int size() {
    long n = sumCount();
    return ((n &lt; 0L) ? 0 :
            (n &gt; (long)Integer.MAX_VALUE) ? Integer.MAX_VALUE :
            (int)n);
}
</code></pre><ul>
<li><p>&#x5728;baseCount&#x57FA;&#x7840;&#x4E0A;&#x518D;&#x52A0;&#x4E0A;&#x6240;&#x6709;counterCell&#x7684;&#x503C;&#x6C42;&#x548C;&#x3002;</p>
</li>
<li><p>&#x800C;&#x5728;addCount&#x65F6;&#xFF0C;&#x4F1A;&#x5148;&#x5C1D;&#x8BD5;CAS&#x66F4;&#x65B0;baseCount&#xFF0C;&#x5982;&#x679C;&#x6709;&#x51B2;&#x7A81;&#xFF0C;&#x5219;&#x518D;&#x5C1D;&#x8BD5;CAS&#x66F4;&#x65B0;&#x968F;&#x673A;&#x7684;&#x4E00;&#x4E2A;counterCell&#x4E2D;&#x7684;value&#xFF0C;&#x8FD9;&#x6837;&#x6C42;&#x548C;&#x5C31;&#x662F;&#x6B63;&#x786E;&#x7684;size&#x4E86;&#x3002;</p>
</li>
<li>final long sumCount() {
  CounterCell[] as = counterCells; </li>
<li>CounterCell a;
  long sum = baseCount;
  if (as != null) {<pre><code>  for (int i = 0; i &lt; as.length; ++i) {
      if ((a = as[i]) != null)
</code></pre></li>
<li>// &#x6240;&#x6709;counter&#x7684;&#x503C;&#x6C42;&#x548C;  <pre><code>          sum += a.value;
  }
</code></pre>  }
  return sum;
}</li>
<li></li>
</ul>
<h3 id="put&#xFF08;&#x82E5;bucket&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x63D2;&#x5165;&#x5219;&#x4F7F;&#x7528;cas&#xFF0C;&#x5426;&#x5219;&#x52A0;&#x9501;"><a name="put&#xFF08;&#x82E5;bucket&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x63D2;&#x5165;&#x5219;&#x4F7F;&#x7528;cas&#xFF0C;&#x5426;&#x5219;&#x52A0;&#x9501;" class="plugin-anchor" href="#put&#xFF08;&#x82E5;bucket&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x63D2;&#x5165;&#x5219;&#x4F7F;&#x7528;cas&#xFF0C;&#x5426;&#x5219;&#x52A0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>put&#xFF08;&#x82E5;bucket&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x63D2;&#x5165;&#x5219;&#x4F7F;&#x7528;CAS&#xFF0C;&#x5426;&#x5219;&#x52A0;&#x9501;)</h3>
<pre><code>public V put(K key, V value) {
    return putVal(key, value, false);
}
</code></pre><ul>
<li>&#x6574;&#x4F53;&#x6D41;&#x7A0B;&#x5C31;&#x662F;&#x9996;&#x5148;&#x5B9A;&#x4E49;&#x4E0D;&#x5141;&#x8BB8;key&#x6216;value&#x4E3A;null&#x7684;&#x60C5;&#x51B5;&#x653E;&#x5165; &#x3002;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x653E;&#x5165;&#x7684;&#x503C;&#xFF0C;&#x9996;&#x5148;&#x5229;&#x7528;spread&#x65B9;&#x6CD5;&#x5BF9;key&#x7684;hashcode&#x8FDB;&#x884C;&#x4E00;&#x6B21;hash&#x8BA1;&#x7B97;&#xFF0C;&#x7531;&#x6B64;&#x6765;&#x786E;&#x5B9A;&#x8FD9;&#x4E2A;&#x503C;&#x5728;table&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x3002;<ul>
<li>1)&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x653E;&#x5165;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x52A0;&#x9501;&#x64CD;&#x4F5C;&#x3002;</li>
<li>2)&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;&#x5B58;&#x5728;&#x7ED3;&#x70B9;&#xFF0C;&#x8BF4;&#x660E;&#x53D1;&#x751F;&#x4E86;hash&#x78B0;&#x649E;&#xFF0C;&#x9996;&#x5148;&#x5224;&#x65AD;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x7C7B;&#x578B;&#x3002;</li>
</ul>
</li>
<li>a)&#x5982;&#x679C;&#x662F;MOVED&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x8868;&#x793A;&#x6B63;&#x5728;&#x6269;&#x5BB9;&#xFF0C;&#x5E2E;&#x52A9;&#x8FDB;&#x884C;&#x6269;&#x5BB9;</li>
<li>b)&#x5982;&#x679C;&#x662F;&#x94FE;&#x8868;&#x8282;&#x70B9;(hash &gt;=0),&#x5219;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x70B9;&#x5C31;&#x662F;hash&#x503C;&#x76F8;&#x540C;&#x7684;&#x8282;&#x70B9;&#x7EC4;&#x6210;&#x7684;&#x94FE;&#x8868;&#x7684;&#x5934;&#x8282;&#x70B9;&#x3002;&#x9700;&#x8981;&#x4F9D;&#x6B21;&#x5411;&#x540E;&#x904D;&#x5386;&#x786E;&#x5B9A;&#x8FD9;&#x4E2A;&#x65B0;&#x52A0;&#x5165;&#x7684;&#x503C;&#x6240;&#x5728;&#x4F4D;&#x7F6E;&#x3002;&#x5982;&#x679C;&#x9047;&#x5230;hash&#x503C;&#x4E0E;key&#x503C;&#x90FD;&#x4E0E;&#x65B0;&#x52A0;&#x5165;&#x8282;&#x70B9;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5219;&#x53EA;&#x9700;&#x8981;&#x66F4;&#x65B0;value&#x503C;&#x5373;&#x53EF;&#x3002;&#x5426;&#x5219;&#x4F9D;&#x6B21;&#x5411;&#x540E;&#x904D;&#x5386;&#xFF0C;&#x76F4;&#x5230;&#x94FE;&#x8868;&#x5C3E;&#x63D2;&#x5165;&#x8FD9;&#x4E2A;&#x7ED3;&#x70B9;&#x3002; &#x5982;&#x679C;&#x52A0;&#x5165;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x4EE5;&#x540E;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x5927;&#x4E8E;8&#xFF0C;&#x5C31;&#x628A;&#x8FD9;&#x4E2A;&#x94FE;&#x8868;&#x8F6C;&#x6362;&#x6210;&#x7EA2;&#x9ED1;&#x6811;&#x3002;</li>
<li>c)&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x7C7B;&#x578B;&#x5DF2;&#x7ECF;&#x662F;&#x6811;&#x8282;&#x70B9;&#x7684;&#x8BDD;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x6811;&#x8282;&#x70B9;&#x7684;&#x63D2;&#x5165;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x65B0;&#x7684;&#x503C;&#x3002;<ul>
<li>3)addCount &#x589E;&#x52A0;&#x8BA1;&#x6570;&#x503C;</li>
</ul>
</li>
</ul>
<pre><code>/** Implementation for put and putIfAbsent */
final V putVal(K key, V value, boolean onlyIfAbsent) {
    if (key == null || value == null) throw new NullPointerException();
    int hash = spread(key.hashCode());
    int binCount = 0;
</code></pre><ul>
<li>// &#x6B7B;&#x5FAA;&#x73AF;&#xFF0C;&#x53EA;&#x6709;&#x63D2;&#x5165;&#x6210;&#x529F;&#x65F6;&#x624D;&#x4F1A;&#x8DF3;&#x51FA;
  for (Node<k,v>[] tab = table;;) {<pre><code>  Node&lt;K,V&gt; f; int n, i, fh;
  if (tab == null || (n = tab.length) == 0)
</code></pre><ul>
<li>// table&#x4E3A;&#x7A7A;&#x5219;&#x521D;&#x59CB;&#x5316;&#xFF08;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;)<pre><code>  tab = initTable();
</code></pre>  else if ((f = tabAt(tab, i = (n - 1) &amp; hash)) == null) {</li>
</ul>
</k,v></li>
<li>// hash to index&#x540E;&#x6B63;&#x597D;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;CAS&#x653E;&#x5165;&#xFF1B;&#x5982;&#x679C;&#x5931;&#x8D25;&#x90A3;&#x4E48;&#x8FDB;&#x5165;&#x4E0B;&#x6B21;&#x5FAA;&#x73AF;&#x7EE7;&#x7EED;&#x5C1D;&#x8BD5;<pre><code>      if (casTabAt(tab, i, null,
                   new Node&lt;K,V&gt;(hash, key, value, null)))
          break;                   // no lock when adding to empty bin
  }
</code></pre></li>
<li>// &#x5982;&#x679C;index&#x5904;&#x975E;&#x7A7A;&#xFF0C;&#x4E14;hash&#x4E3A;MOVED&#xFF08;&#x8868;&#x793A;&#x8BE5;&#x8282;&#x70B9;&#x662F;ForwardingNode)&#xFF0C;&#x5219;&#x8868;&#x793A;&#x6709;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;&#x6269;&#x5BB9;&#xFF0C;&#x5219;&#x4E00;&#x8D77;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x3002;        </li>
<li>else if ((fh = f.hash) == MOVED)<pre><code>      tab = helpTransfer(tab, f);
</code></pre></li>
<li>// &#x5982;&#x679C;index&#x5904;&#x975E;&#x7A7A;&#xFF0C;&#x4E14;&#x4E3A;&#x94FE;&#x8868;&#x8282;&#x70B9;&#x6216;&#x6811;&#x8282;&#x70B9;<pre><code>  else {
      V oldVal = null;
</code></pre></li>
<li>// &#x5BF9;&#x67D0;&#x4E2A;bucket&#x4E0A;&#x6267;&#x884C;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x4EC5;&#x9700;&#x8981;&#x9501;&#x4F4F;&#x7B2C;&#x4E00;&#x4E2A;Node&#x5373;&#x53EF;&#xFF08;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x4E0D;&#x4F1A;&#x591A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x5BF9;&#x67D0;&#x4E2A;bucket&#x8FDB;&#x884C;&#x5199;&#x5165;)<pre><code>      synchronized (f) {
          if (tabAt(tab, i) == f) {
</code></pre><ul>
<li>// 1) &#x5982;&#x679C;&#x662F;&#x94FE;&#x8868;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x63D2;&#x5165;&#x5230;&#x94FE;&#x8868;&#x4E2D;<pre><code>          if (fh &gt;= 0) {
</code></pre></li>
</ul>
</li>
<li>// binCount&#x662F;&#x8BE5;bucket&#x4E2D;&#x5143;&#x7D20;&#x4E2A;&#x6570;<pre><code>                  binCount = 1;
                  for (Node&lt;K,V&gt; e = f;; ++binCount) {
                      K ek;
                      if (e.hash == hash &amp;&amp;
                          ((ek = e.key) == key ||
                           (ek != null &amp;&amp; key.equals(ek)))) {
                          oldVal = e.val;
                          if (!onlyIfAbsent)
                              e.val = value;
                          break;
                      }
                      Node&lt;K,V&gt; pred = e;
                      if ((e = e.next) == null) {
                          pred.next = new Node&lt;K,V&gt;(hash, key,
                                                    value, null);
                          break;
                      }
                  }
              }
</code></pre><ul>
<li>// 2)&#x5982;&#x679C;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#x6811;&#x6839;&#xFF0C;&#x90A3;&#x4E48;&#x63D2;&#x5165;&#x5230;&#x7EA2;&#x9ED1;&#x6811;&#x4E2D;<pre><code>          else if (f instanceof TreeBin) {
              Node&lt;K,V&gt; p;
              binCount = 2;
              if ((p = ((TreeBin&lt;K,V&gt;)f).putTreeVal(hash, key,
                                             value)) != null) {
                  oldVal = p.val;
                  if (!onlyIfAbsent)
                      p.val = value;
              }
          }
      }
  }
</code></pre></li>
</ul>
</li>
<li>// &#x63D2;&#x5165;&#x8282;&#x70B9;/&#x91CA;&#x653E;&#x9501;&#x4E4B;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x5C0F;&#x5408;&#x9002;&#x8C03;&#x6574;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x94FE;&#x8868;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;<pre><code>      if (binCount != 0) {
          if (binCount &gt;= TREEIFY_THRESHOLD)
              treeifyBin(tab, i);
          if (oldVal != null)
              return oldVal;
          break;
      }
  }
</code></pre>  }</li>
<li>// &#x5C06;&#x5F53;&#x524D;ConcurrentHashMap&#x7684;&#x5143;&#x7D20;&#x6570;&#x91CF;+1 &#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x9608;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x8FDB;&#x884C;&#x6269;&#x5BB9; 
  addCount(1L, binCount);
  return null;
}<h3 id="treeifybin&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6570;&#x7EC4;&#x8F83;&#x5C0F;&#x5219;&#x6269;&#x5BB9;&#xFF0C;&#x8F83;&#x5927;&#x5219;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;"><a name="treeifybin&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6570;&#x7EC4;&#x8F83;&#x5C0F;&#x5219;&#x6269;&#x5BB9;&#xFF0C;&#x8F83;&#x5927;&#x5219;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;" class="plugin-anchor" href="#treeifybin&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6570;&#x7EC4;&#x8F83;&#x5C0F;&#x5219;&#x6269;&#x5BB9;&#xFF0C;&#x8F83;&#x5927;&#x5219;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;"><i class="fa fa-link" aria-hidden="true"></i></a>treeifyBin&#xFF08;&#x6709;&#x9501;&#xFF0C;&#x6570;&#x7EC4;&#x8F83;&#x5C0F;&#x5219;&#x6269;&#x5BB9;&#xFF0C;&#x8F83;&#x5927;&#x5219;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;)</h3>
</li>
</ul>
<pre><code>private final void treeifyBin(Node&lt;K,V&gt;[] tab, int index) {
    Node&lt;K,V&gt; b; int n, sc;
    if (tab != null) {
</code></pre><pre><code>- // &#x5982;&#x679C;&#x6570;&#x7EC4;&#x957F;&#x5EA6;n&#x5C0F;&#x4E8E;&#x9608;&#x503C;MIN_TREEIFY_CAPACITY&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;64&#xFF0C;&#x5219;&#x4F1A;&#x8C03;&#x7528;tryPresize&#x65B9;&#x6CD5;&#x628A;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x6269;&#x5927;&#x5230;&#x539F;&#x6765;&#x7684;&#x4E24;&#x500D;&#xFF0C;&#x5E76;&#x89E6;&#x53D1;transfer&#x65B9;&#x6CD5;&#xFF0C;&#x91CD;&#x65B0;&#x8C03;&#x6574;&#x8282;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;
    if ((n = tab.length) &lt; MIN_TREEIFY_CAPACITY)
        tryPresize(n &lt;&lt; 1);
    else if ((b = tabAt(tab, index)) != null &amp;&amp; b.hash &gt;= 0) {
        synchronized (b) {
            if (tabAt(tab, index) == b) {
                TreeNode&lt;K,V&gt; hd = null, tl = null;
                for (Node&lt;K,V&gt; e = b; e != null; e = e.next) {
                    TreeNode&lt;K,V&gt; p =
                        new TreeNode&lt;K,V&gt;(e.hash, e.key, e.val,
                                          null, null);
                    if ((p.prev = tl) == null)
                        hd = p;
                    else
                        tl.next = p;
                    tl = p;
                }
                setTabAt(tab, index, new TreeBin&lt;K,V&gt;(hd));
            }
        }
    }
}
</code></pre><p>}</p>
<ul>
<li>tryPreSize</li>
</ul>
<pre><code>/**
 * Tries to presize table to accommodate the given number of elements.
 *
 * @param size number of elements (doesn&apos;t need to be perfectly accurate)
 */
private final void tryPresize(int size) {
    int c = (size &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY :
        tableSizeFor(size + (size &gt;&gt;&gt; 1) + 1);
    int sc;
    while ((sc = sizeCtl) &gt;= 0) {
        Node&lt;K,V&gt;[] tab = table; int n;
        if (tab == null || (n = tab.length) == 0) {
            n = (sc &gt; c) ? sc : c;
            if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) {
                try {
                    if (table == tab) {
                        @SuppressWarnings(&quot;unchecked&quot;)
                        Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n];
                        table = nt;
                        sc = n - (n &gt;&gt;&gt; 2);
                    }
                } finally {
                    sizeCtl = sc;
                }
            }
        }
        else if (c &lt;= sc || n &gt;= MAXIMUM_CAPACITY)
            break;
        else if (tab == table) {
            int rs = resizeStamp(n);
            if (sc &lt; 0) {
                Node&lt;K,V&gt;[] nt;
                if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||
                    sc == rs + MAX_RESIZERS || (nt = nextTable) == null ||
                    transferIndex &lt;= 0)
                    break;
                if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1))
                    transfer(tab, nt);
            }
            else if (U.compareAndSwapInt(this, SIZECTL, sc,
                                         (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2))
                transfer(tab, null);
        }
    }
}
</code></pre><ul>
<li><h3 id="&#x6269;&#x5BB9;"><a name="&#x6269;&#x5BB9;" class="plugin-anchor" href="#&#x6269;&#x5BB9;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6269;&#x5BB9;</h3>
<h4 id="trypresize"><a name="trypresize" class="plugin-anchor" href="#trypresize"><i class="fa fa-link" aria-hidden="true"></i></a>tryPresize</h4>
</li>
<li>tryPresize&#x5728;putAll&#x4EE5;&#x53CA;treeifyBin&#x4E2D;&#x8C03;&#x7528;</li>
</ul>
<pre><code>private final void tryPresize(int size) {
</code></pre><pre><code>- // c&#x662F;&#x6269;&#x5BB9;&#x4E4B;&#x540E;&#x9884;&#x8BA1;&#x8868;&#x7684;&#x5927;&#x5C0F;
int c = (size &gt;= (MAXIMUM_CAPACITY &gt;&gt;&gt; 1)) ? MAXIMUM_CAPACITY :
    tableSizeFor(size + (size &gt;&gt;&gt; 1) + 1);
int sc;
</code></pre><ul>
<li>// &#x6CA1;&#x6709;&#x6B63;&#x5728;&#x521D;&#x59CB;&#x5316;&#x6216;&#x6269;&#x5BB9;
  while ((sc = sizeCtl) &gt;= 0) {<pre><code>  Node&lt;K,V&gt;[] tab = table; int n;
  if (tab == null || (n = tab.length) == 0) {
      n = (sc &gt; c) ? sc : c;
</code></pre><ul>
<li>// &#x671F;&#x95F4;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5BF9;&#x8868;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;CAS&#x5C06;SIZECTL&#x72B6;&#x6001;&#x7F6E;&#x4E3A;-1&#xFF0C;&#x8868;&#x793A;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;<pre><code>  if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) {
      try {
          if (table == tab) {
              @SuppressWarnings(&quot;unchecked&quot;)
              Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n];
              table = nt;
</code></pre></li>
<li>// &#x5373;0.75*n<pre><code>              sc = n - (n &gt;&gt;&gt; 2);
          }
      } finally {
          sizeCtl = sc;
      }
  }
</code></pre>  }</li>
</ul>
</li>
<li>// &#x82E5;&#x6B32;&#x6269;&#x5BB9;&#x503C;&#x4E0D;&#x5927;&#x4E8E;&#x539F;&#x9608;&#x503C;&#xFF0C;&#x6216;&#x73B0;&#x6709;&#x5BB9;&#x91CF;&gt;=&#x6700;&#x503C;&#xFF0C;&#x5219;do nothing<pre><code>  else if (c &lt;= sc || n &gt;= MAXIMUM_CAPACITY)
      break;
</code></pre><ul>
<li>// table&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E14;&#x5728;&#x6B64;&#x671F;&#x95F4;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x672A;&#x4FEE;&#x6539;table
  else if (tab == table) {<pre><code>  int rs = resizeStamp(n);
  if (sc &lt; 0) {
      Node&lt;K,V&gt;[] nt;
      if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||
          sc == rs + MAX_RESIZERS || (nt = nextTable) == null ||
          transferIndex &lt;= 0)
          break;
      if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1))
</code></pre></li>
<li>// &#x534F;&#x52A9;&#x6269;&#x5BB9;<pre><code>          transfer(tab, nt);
  }
  else if (U.compareAndSwapInt(this, SIZECTL, sc,
                               (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2))
</code></pre></li>
</ul>
</li>
<li>// &#x53D1;&#x8D77;&#x6269;&#x5BB9;<pre><code>          transfer(tab, null);
  }
</code></pre>  }
}</li>
</ul>
<h4 id="addcount"><a name="addcount" class="plugin-anchor" href="#addcount"><i class="fa fa-link" aria-hidden="true"></i></a>addCount</h4>
<ul>
<li>x=1&#xFF0C;check=bucketCount</li>
</ul>
<pre><code>private final void addCount(long x, int check) {
</code></pre><ul>
<li>// &#x8BA1;&#x6570;&#x503C;&#x52A0;x</li>
<li>// &#x5229;&#x7528;CAS&#x65B9;&#x6CD5;&#x66F4;&#x65B0;baseCount&#x7684;&#x503C;<br>  CounterCell[] as; long b, s;
  if ((as = counterCells) != null ||<pre><code>  !U.compareAndSwapLong(this, BASECOUNT, b = baseCount, s = b + x)) {
</code></pre></li>
<li>// &#x5982;&#x679C;CAS&#x66F4;&#x65B0;baseCount&#x5931;&#x8D25;&#x6216;&#x8005;counterCells&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x90A3;&#x4E48;&#x5C1D;&#x8BD5;CAS&#x66F4;&#x65B0;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;hashCode&#x5BF9;&#x5E94;&#x7684;bucket&#x7684;value<pre><code>  CounterCell a; long v; int m;
  boolean uncontended = true;
</code></pre><ul>
<li>if (as == null || (m = as.length - 1) &lt; 0 ||<pre><code> (a = as[ThreadLocalRandom.getProbe() &amp; m]) == null ||
 !(uncontended =
   U.compareAndSwapLong(a, CELLVALUE, v = a.value, v + x))) {
</code></pre></li>
<li>// &#x5982;&#x679C;&#x4E24;&#x6B21;CAS&#x90FD;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x8C03;&#x7528;fullAddCount&#x65B9;&#x6CD5;<pre><code>  fullAddCount(x, uncontended);
  return;
</code></pre>  }
  if (check &lt;= 1)<pre><code>  return;
</code></pre>  s = sumCount();
}</li>
</ul>
</li>
<li>// &#x4EE5;&#x4E0A;&#x4E0E;&#x6269;&#x5BB9;&#x65E0;&#x5173;&#xFF0C;&#x5982;&#x679C;check&#x503C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;0 &#x5219;&#x9700;&#x8981;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;<br>  if (check &gt;= 0) {<pre><code>  Node&lt;K,V&gt;[] tab, nt; int n, sc;
</code></pre></li>
<li>while (s &gt;= (long)(sc = sizeCtl) &amp;&amp; (tab = table) != null &amp;&amp;<pre><code>         (n = tab.length) &lt; MAXIMUM_CAPACITY) {
      int rs = resizeStamp(n);
</code></pre></li>
<li>// &#x5982;&#x679C;sizeCtl&#x662F;&#x5C0F;&#x4E8E;0&#x7684;&#xFF0C;&#x8BF4;&#x660E;&#x6709;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;&#x6267;&#x884C;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#xFF0C;nextTable&#x4E00;&#x5B9A;&#x4E0D;&#x4E3A;&#x7A7A;<pre><code>      if (sc &lt; 0) {
          if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||
              sc == rs + MAX_RESIZERS || (nt = nextTable) == null ||
              transferIndex &lt;= 0)
              break;
</code></pre></li>
<li>// &#x534F;&#x52A9;&#x6269;&#x5BB9;<ul>
<li>if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1))<pre><code>        transfer(tab, nt);
}
</code></pre></li>
<li>// &#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x662F;&#x552F;&#x4E00;&#x7684;&#x6216;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x53D1;&#x8D77;&#x6269;&#x5BB9;&#x7684;&#x7EBF;&#x7A0B;  &#x6B64;&#x65F6;nextTable=null <pre><code>else if (U.compareAndSwapInt(this, SIZECTL, sc,
                             (rs &lt;&lt; RESIZE_STAMP_SHIFT) + 2))
</code></pre></li>
</ul>
</li>
<li>// &#x53D1;&#x8D77;&#x6269;&#x5BB9;<pre><code>          transfer(tab, null);
      s = sumCount();
  }
</code></pre>  }
}</li>
</ul>
<pre><code>private final void fullAddCount(long x, boolean wasUncontended) {
    int h;
    if ((h = ThreadLocalRandom.getProbe()) == 0) {
        ThreadLocalRandom.localInit();      // force initialization
        h = ThreadLocalRandom.getProbe();
        wasUncontended = true;
    }
    boolean collide = false;                // True if last slot nonempty
    for (;;) {
        CounterCell[] as; CounterCell a; int n; long v;
        if ((as = counterCells) != null &amp;&amp; (n = as.length) &gt; 0) {
            if ((a = as[(n - 1) &amp; h]) == null) {
                if (cellsBusy == 0) {            // Try to attach new Cell
                    CounterCell r = new CounterCell(x); // Optimistic create
                    if (cellsBusy == 0 &amp;&amp;
                        U.compareAndSwapInt(this, CELLSBUSY, 0, 1)) {
                        boolean created = false;
                        try {               // Recheck under lock
                            CounterCell[] rs; int m, j;
                            if ((rs = counterCells) != null &amp;&amp;
                                (m = rs.length) &gt; 0 &amp;&amp;
                                rs[j = (m - 1) &amp; h] == null) {
                                rs[j] = r;
                                created = true;
                            }
                        } finally {
                            cellsBusy = 0;
                        }
                        if (created)
                            break;
                        continue;           // Slot is now non-empty
                    }
                }
                collide = false;
            }
            else if (!wasUncontended)       // CAS already known to fail
                wasUncontended = true;      // Continue after rehash
            else if (U.compareAndSwapLong(a, CELLVALUE, v = a.value, v + x))
                break;
            else if (counterCells != as || n &gt;= NCPU)
                collide = false;            // At max size or stale
            else if (!collide)
                collide = true;
            else if (cellsBusy == 0 &amp;&amp;
                     U.compareAndSwapInt(this, CELLSBUSY, 0, 1)) {
                try {
                    if (counterCells == as) {// Expand table unless stale
                        CounterCell[] rs = new CounterCell[n &lt;&lt; 1];
                        for (int i = 0; i &lt; n; ++i)
                            rs[i] = as[i];
                        counterCells = rs;
                    }
                } finally {
                    cellsBusy = 0;
                }
                collide = false;
                continue;                   // Retry with expanded table
            }
            h = ThreadLocalRandom.advanceProbe(h);
        }
        else if (cellsBusy == 0 &amp;&amp; counterCells == as &amp;&amp;
                 U.compareAndSwapInt(this, CELLSBUSY, 0, 1)) {
            boolean init = false;
            try {                           // Initialize table
                if (counterCells == as) {
                    CounterCell[] rs = new CounterCell[2];
                    rs[h &amp; 1] = new CounterCell(x);
                    counterCells = rs;
                    init = true;
                }
            } finally {
                cellsBusy = 0;
            }
            if (init)
                break;
        }
        else if (U.compareAndSwapLong(this, BASECOUNT, v = baseCount, v + x))
            break;                          // Fall back on using base
    }
}
</code></pre><ul>
<li><h4 id="transfer"><a name="transfer" class="plugin-anchor" href="#transfer"><i class="fa fa-link" aria-hidden="true"></i></a>transfer</h4>
</li>
<li><p>&#x5F53;table&#x5BB9;&#x91CF;&#x4E0D;&#x8DB3;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5373;table&#x7684;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x8FBE;&#x5230;&#x5BB9;&#x91CF;&#x9608;&#x503C;sizeCtl&#xFF0C;&#x9700;&#x8981;&#x5BF9;table&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x3002; &#x6574;&#x4E2A;&#x6269;&#x5BB9;&#x5206;&#x4E3A;&#x4E24;&#x90E8;&#x5206;&#xFF1A;</p>
<ul>
<li>1)&#x6784;&#x5EFA;&#x4E00;&#x4E2A;nextTable&#xFF0C;&#x5927;&#x5C0F;&#x4E3A;table&#x7684;&#x4E24;&#x500D;&#x3002;</li>
<li>2)&#x628A;table&#x7684;&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;nextTable&#x4E2D;&#x3002;</li>
</ul>
</li>
<li><p>&#x8FD9;&#x4E24;&#x4E2A;&#x8FC7;&#x7A0B;&#x5728;&#x5355;&#x7EBF;&#x7A0B;&#x4E0B;&#x5B9E;&#x73B0;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;ConcurrentHashMap&#x662F;&#x652F;&#x6301;&#x5E76;&#x53D1;&#x63D2;&#x5165;&#x7684;&#xFF0C;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x81EA;&#x7136;&#x4E5F;&#x4F1A;&#x6709;&#x5E76;&#x53D1;&#x7684;&#x51FA;&#x73B0;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B65;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x8282;&#x70B9;&#x7684;&#x5E76;&#x53D1;&#x590D;&#x5236;&#xFF0C;&#x8FD9;&#x6837;&#x6027;&#x80FD;&#x81EA;&#x7136;&#x63D0;&#x5347;&#x4E0D;&#x5C11;&#xFF0C;&#x4F46;&#x5B9E;&#x73B0;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E5F;&#x4E0A;&#x5347;&#x4E86;&#x4E00;&#x4E2A;&#x53F0;&#x9636;&#x3002;</p>
</li>
<li>&#x5148;&#x770B;&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x6784;&#x5EFA;nextTable&#xFF0C;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x53EA;&#x80FD;&#x6709;&#x5355;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;nextTable&#x7684;&#x521D;&#x59CB;&#x5316;&#x3002;</li>
<li>&#x901A;&#x8FC7;Unsafe.compareAndSwapInt&#x4FEE;&#x6539;sizeCtl&#x503C;&#xFF0C;&#x4FDD;&#x8BC1;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x80FD;&#x591F;&#x521D;&#x59CB;&#x5316;nextTable&#xFF0C;&#x6269;&#x5BB9;&#x540E;&#x7684;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x4E3A;&#x539F;&#x6765;&#x7684;&#x4E24;&#x500D;&#x3002;</li>
<li>&#x8282;&#x70B9;&#x4ECE;table&#x79FB;&#x52A8;&#x5230;nextTable&#xFF0C;&#x5927;&#x4F53;&#x601D;&#x60F3;&#x662F;&#x904D;&#x5386;&#x3001;&#x590D;&#x5236;&#x7684;&#x8FC7;&#x7A0B;&#x3002;<ul>
<li>1)&#x9996;&#x5148;&#x6839;&#x636E;&#x8FD0;&#x7B97;&#x5F97;&#x5230;&#x9700;&#x8981;&#x904D;&#x5386;&#x7684;&#x6B21;&#x6570;i&#xFF0C;&#x7136;&#x540E;&#x5229;&#x7528;tabAt&#x65B9;&#x6CD5;&#x83B7;&#x5F97;i&#x4F4D;&#x7F6E;&#x7684;&#x5143;&#x7D20;f&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;ForwardingNode&#x5B9E;&#x4F8B;fwd&#x3002;</li>
<li>2)&#x5982;&#x679C;f==null&#xFF0C;&#x5219;&#x5728;table&#x4E2D;&#x7684;i&#x4F4D;&#x7F6E;&#x653E;&#x5165;fwd&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x662F;&#x91C7;&#x7528;</li>
</ul>
</li>
<li><p>Unsafe.compareAndSwapObjectf&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5F88;&#x5DE7;&#x5999;&#x7684;&#x5B9E;&#x73B0;&#x4E86;&#x8282;&#x70B9;&#x7684;&#x5E76;&#x53D1;&#x79FB;&#x52A8;&#x3002;</p>
<ul>
<li>3)&#x5982;&#x679C;f&#x662F;&#x94FE;&#x8868;&#x7684;&#x5934;&#x8282;&#x70B9;&#xFF0C;&#x5C31;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x94FE;&#x8868;&#xFF0C;&#x628A;&#x4ED6;&#x4EEC;&#x5206;&#x522B;&#x653E;&#x5728;nextTable&#x7684;i&#x548C;i+n&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x79FB;&#x52A8;&#x5B8C;&#x6210;&#xFF0C;&#x91C7;&#x7528;Unsafe.putObjectVolatile&#x65B9;&#x6CD5;&#x7ED9;table&#x539F;&#x4F4D;&#x7F6E;&#x8D4B;&#x503C;fwd&#x3002;</li>
<li>4)&#x5982;&#x679C;f&#x662F;TreeBin&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x505A;&#x4E00;&#x4E2A;&#x53CD;&#x5E8F;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;untreeify&#xFF0C;&#x628A;&#x5904;&#x7406;&#x7684;&#x7ED3;&#x679C;&#x5206;&#x522B;&#x653E;&#x5728;nextTable&#x7684;i&#x548C;i+n&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x79FB;&#x52A8;&#x5B8C;&#x6210;&#xFF0C;&#x540C;&#x6837;&#x91C7;&#x7528;Unsafe.putObjectVolatile&#x65B9;&#x6CD5;&#x7ED9;table&#x539F;&#x4F4D;&#x7F6E;&#x8D4B;&#x503C;fwd&#x3002;</li>
<li>5)&#x904D;&#x5386;&#x8FC7;&#x6240;&#x6709;&#x7684;&#x8282;&#x70B9;&#x4EE5;&#x540E;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x590D;&#x5236;&#x5DE5;&#x4F5C;&#xFF0C;&#x628A;table&#x6307;&#x5411;nextTable&#xFF0C;&#x5E76;&#x66F4;&#x65B0;sizeCtl&#x4E3A;&#x65B0;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x7684;0.75&#x500D; &#xFF0C;&#x6269;&#x5BB9;&#x5B8C;&#x6210;&#x3002;</li>
</ul>
</li>
<li><p>&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;ConcurrentHashMap&#x7528;&#x4E24;&#x70B9;&#x6765;&#x4FDD;&#x8BC1;&#x6B63;&#x786E;&#x6027;&#xFF1A;ForwardingNode&#x548C;synchronized&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x904D;&#x5386;&#x5230;&#x7684;&#x8282;&#x70B9;&#x5982;&#x679C;&#x662F;ForwardingNode&#xFF0C;&#x5219;&#x7EE7;&#x7EED;&#x5F80;&#x540E;&#x904D;&#x5386;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x5219;&#x5C06;&#x8BE5;&#x8282;&#x70B9;&#x52A0;&#x9501;&#xFF0C;&#x9632;&#x6B62;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#xFF0C;&#x5B8C;&#x6210;&#x540E;&#x8BBE;&#x7F6E;ForwardingNode&#x8282;&#x70B9;&#xFF0C;&#x4EE5;&#x4FBF;&#x8981;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8BE5;&#x8282;&#x70B9;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x8FC7;&#x4E86;&#xFF0C;&#x5982;&#x6B64;&#x4EA4;&#x53C9;&#x8FDB;&#x884C;&#xFF0C;&#x9AD8;&#x6548;&#x800C;&#x53C8;&#x5B89;&#x5168;&#x3002;</p>
</li>
</ul>
<pre><code>/**
 * Moves and/or copies the nodes in each bin to new table. See
 * above for explanation.
 */
private final void transfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt;[] nextTab) {
    int n = tab.length, stride;
    if ((stride = (NCPU &gt; 1) ? (n &gt;&gt;&gt; 3) / NCPU : n) &lt; MIN_TRANSFER_STRIDE)
        stride = MIN_TRANSFER_STRIDE; // subdivide range
</code></pre><ul>
<li>// &#x6269;&#x5BB9;&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x521B;&#x5EFA;&#x4E24;&#x500D;&#x957F;&#x7684;&#x6570;&#x7EC4;nextTable&#xFF0C;&#x5355;&#x7EBF;&#x7A0B;&#x6267;&#x884C;</li>
<li>// initiating&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x6784;&#x9020;nextTable&#xFF0C;&#x5982;&#x679C;&#x522B;&#x7684;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x53D1;&#x73B0;&#x4E0D;&#x4E3A;&#x7A7A;&#x5C31;&#x4E0D;&#x7528;&#x6784;&#x9020;nextTable&#x4E86;
  if (nextTab == null) {            // initiating<pre><code>  try {
      @SuppressWarnings(&quot;unchecked&quot;)
      Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n &lt;&lt; 1];
      nextTab = nt;
  } catch (Throwable ex) {      // try to cope with OOME
      sizeCtl = Integer.MAX_VALUE;
      return;
  }
  nextTable = nextTab;
  // &#x539F;&#x5148;&#x6269;&#x5BB9;&#x5927;&#x5C0F;
  transferIndex = n;
</code></pre>  }</li>
<li>// &#x6269;&#x5BB9;&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x628A;table&#x7684;&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;nextTable&#x4E2D;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x8FDB;&#x884C;
  int nextn = nextTab.length;</li>
<li>// &#x6784;&#x9020;&#x4E00;&#x4E2A;ForwardingNode&#x7528;&#x4E8E;&#x591A;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x5171;&#x540C;&#x6269;&#x5BB9;&#x60C5;&#x51B5;
  ForwardingNode<k,v> fwd = new ForwardingNode<k,v>(nextTab);
  boolean advance = true;
  boolean finishing = false; // to ensure sweep before committing nextTab
  // &#x904D;&#x5386;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;</k,v></k,v></li>
<li>for (int i = 0, bound = 0;;) {<pre><code>  Node&lt;K,V&gt; f; int fh;
  while (advance) {
      int nextIndex, nextBound;
      if (--i &gt;= bound || finishing)
          advance = false;
      else if ((nextIndex = transferIndex) &lt;= 0) {
          i = -1;
          advance = false;
      }
      else if (U.compareAndSwapInt
               (this, TRANSFERINDEX, nextIndex,
                nextBound = (nextIndex &gt; stride ?
                             nextIndex - stride : 0))) {
          bound = nextBound;
          i = nextIndex - 1;
          advance = false;
      }
  }
</code></pre></li>
</ul>
<pre><code>// &#x5F97;&#x5230;&#x4E00;&#x4E2A;i&#xFF0C;i&#x6307;&#x5411;table&#x4E2D;&#x67D0;&#x4E00;&#x4E2A;&#x5C1A;&#x672A;&#x62F7;&#x8D1D;&#x7684;bucket&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x5BF9;i&#x5BF9;&#x5E94;&#x7684;bucket&#x8FDB;&#x884C;&#x62F7;&#x8D1D;&#xFF0C;&#x62F7;&#x8D1D;&#x5B8C;&#x540E;&#x5C06;bucket&#x8D4B;&#x503C;&#x4E3A;fwd&#xFF08;ForwadingNode)
        //**************************************************************//
</code></pre><ul>
<li>if (i &lt; 0 || i &gt;= n || i + n &gt;= nextn) {<pre><code>      int sc;
</code></pre></li>
<li>// &#x5982;&#x679C;&#x539F;table&#x5DF2;&#x7ECF;&#x590D;&#x5236;&#x7ED3;&#x675F;<pre><code>      if (finishing) {
          nextTable = null;
          table = nextTab;
</code></pre><ul>
<li>// &#x4FEE;&#x6539;&#x6269;&#x5BB9;&#x540E;&#x7684;&#x9600;&#x503C;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x73B0;&#x5728;&#x5BB9;&#x91CF;&#x7684;0.75&#x500D;<pre><code>      sizeCtl = (n &lt;&lt; 1) - (n &gt;&gt;&gt; 1);
      return;
  }
  // &#x91C7;&#x7528;CAS&#x7B97;&#x6CD5;&#x66F4;&#x65B0;SizeCtl&#xFF0C;&#x51CF;&#x4E00;&#xFF0C;&#x8868;&#x793A;&#x6709;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x53C2;&#x4E0E;&#x5230;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;
</code></pre></li>
<li>if (U.compareAndSwapInt(this, SIZECTL, sc = sizeCtl, sc - 1)) {<pre><code>  if ((sc - 2) != resizeStamp(n) &lt;&lt; RESIZE_STAMP_SHIFT)
      return;
  finishing = advance = true;
  i = n; // recheck before commit
</code></pre>  }
}
// CAS&#x7B97;&#x6CD5;&#x83B7;&#x53D6;&#x67D0;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x4E3A;&#x7A7A;&#x5C31;&#x8BBE;&#x4E3A;ForwordingNode
else if ((f = tabAt(tab, i)) == null)
  advance = casTabAt(tab, i, null, fwd);</li>
</ul>
</li>
<li>// &#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x7684;hash&#x503C;&#x662F;MOVED&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x662F;ForwordingNode&#x8282;&#x70B9;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x5DF2;&#x7ECF;&#x88AB;&#x5904;&#x7406;&#x8FC7;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;</li>
<li>else if ((fh = f.hash) == MOVED)
  advance = true; // already processed
else {
  synchronized (f) {<pre><code>  if (tabAt(tab, i) == f) {
      Node&lt;K,V&gt; ln, hn;
      if (fh &gt;= 0) {
</code></pre></li>
<li>//&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x786E;&#x662F;&#x94FE;&#x8868;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x62C6;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x5B50;&#x94FE;&#x8868;&#xFF0C;&#x5B58;&#x50A8;&#x5230;nextTable&#x76F8;&#x5E94;&#x7684;&#x4E24;&#x4E2A;&#x4F4D;&#x7F6E;<pre><code>                  int runBit = fh &amp; n;
                  Node&lt;K,V&gt; lastRun = f;
                  for (Node&lt;K,V&gt; p = f.next; p != null; p = p.next) {
                      int b = p.hash &amp; n;
                      if (b != runBit) {
                          runBit = b;
                          lastRun = p;
                      }
                  }
                  if (runBit == 0) {
                      ln = lastRun;
                      hn = null;
                  }
                  else {
                      hn = lastRun;
                      ln = null;
                  }
</code></pre></li>
<li>// <pre><code>                  for (Node&lt;K,V&gt; p = f; p != lastRun; p = p.next) {
                      int ph = p.hash; K pk = p.key; V pv = p.val;
                      if ((ph &amp; n) == 0)
                          ln = new Node&lt;K,V&gt;(ph, pk, pv, ln);
                      else
                          hn = new Node&lt;K,V&gt;(ph, pk, pv, hn);
                  }
</code></pre></li>
<li>// CAS&#x5B58;&#x50A8;&#x5728;nextTable&#x7684;i&#x4F4D;&#x7F6E;&#x4E0A;<pre><code>                  setTabAt(nextTab, i, ln);
</code></pre></li>
<li>// CAS&#x5B58;&#x50A8;&#x5728;nextTable&#x7684;i+n&#x4F4D;&#x7F6E;&#x4E0A;<pre><code>                  setTabAt(nextTab, i + n, hn);
</code></pre></li>
<li>// CAS&#x5728;&#x539F;table&#x7684;i&#x5904;&#x8BBE;&#x7F6E;forwordingNode&#x8282;&#x70B9;&#xFF0C;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x5B8C;&#x6BD5;<pre><code>                  setTabAt(tab, i, fwd);
                  advance = true;
              }
</code></pre></li>
<li>// &#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5219;&#x62C6;&#x5206;&#x4E3A;&#x4E24;&#x9897;&#x5B50;&#x6811;&#xFF0C;&#x4FDD;&#x5B58;&#x5230;nextTable&#x76F8;&#x5E94;&#x7684;&#x4E24;&#x4E2A;&#x4F4D;&#x7F6E;<pre><code>              else if (f instanceof TreeBin) {
                  TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f;
                  TreeNode&lt;K,V&gt; lo = null, loTail = null;
                  TreeNode&lt;K,V&gt; hi = null, hiTail = null;
                  int lc = 0, hc = 0;
                  for (Node&lt;K,V&gt; e = t.first; e != null; e = e.next) {
                      int h = e.hash;
                      TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt;
                          (h, e.key, e.val, null, null);
                      if ((h &amp; n) == 0) {
                          if ((p.prev = loTail) == null)
                              lo = p;
                          else
                              loTail.next = p;
                          loTail = p;
                          ++lc;
                      }
                      else {
                          if ((p.prev = hiTail) == null)
                              hi = p;
                          else
                              hiTail.next = p;
                          hiTail = p;
                          ++hc;
                      }
                  }
</code></pre></li>
<li>// &#x5982;&#x679C;&#x62C6;&#x5206;&#x540E;&#x7684;&#x6811;&#x7684;&#x8282;&#x70B9;&#x6570;&#x91CF;&#x5DF2;&#x7ECF;&#x5C11;&#x4E8E;6&#x4E2A;&#x5C31;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8F6C;&#x5316;&#x4E3A;&#x94FE;&#x8868;<pre><code>                  ln = (lc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(lo) :
                      (hc != 0) ? new TreeBin&lt;K,V&gt;(lo) : t;
                  hn = (hc &lt;= UNTREEIFY_THRESHOLD) ? untreeify(hi) :
                      (lc != 0) ? new TreeBin&lt;K,V&gt;(hi) : t;
</code></pre></li>
<li>// CAS&#x5B58;&#x50A8;&#x5728;nextTable&#x7684;i&#x4F4D;&#x7F6E;&#x4E0A;<pre><code>                  setTabAt(nextTab, i, ln);
</code></pre></li>
<li>// CAS&#x5B58;&#x50A8;&#x5728;nextTable&#x7684;i+n&#x4F4D;&#x7F6E;&#x4E0A;<pre><code>                  setTabAt(nextTab, i + n, hn);
</code></pre></li>
<li>// CAS&#x5728;&#x539F;table&#x7684;i&#x5904;&#x8BBE;&#x7F6E;forwordingNode&#x8282;&#x70B9;&#xFF0C;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x5B8C;&#x6BD5;</li>
<li>setTabAt(tab, i, fwd);<pre><code>                  advance = true;
              }
          }
      }
  }
</code></pre>  }
}</li>
</ul>
<h4 id="helptransfer"><a name="helptransfer" class="plugin-anchor" href="#helptransfer"><i class="fa fa-link" aria-hidden="true"></i></a>helpTransfer</h4>
<pre><code>- final Node&lt;K,V&gt;[] helpTransfer(Node&lt;K,V&gt;[] tab, Node&lt;K,V&gt; f) {
Node&lt;K,V&gt;[] nextTab; int sc;
if (tab != null &amp;&amp; (f instanceof ForwardingNode) &amp;&amp;
    (nextTab = ((ForwardingNode&lt;K,V&gt;)f).nextTable) != null) {
    int rs = resizeStamp(tab.length);
    while (nextTab == nextTable &amp;&amp; table == tab &amp;&amp;
           (sc = sizeCtl) &lt; 0) {
        if ((sc &gt;&gt;&gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||
            sc == rs + MAX_RESIZERS || transferIndex &lt;= 0)
            break;
        if (U.compareAndSwapInt(this, SIZECTL, sc, sc + 1)) {
</code></pre><ul>
<li>// &#x8C03;&#x7528;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;<pre><code>          transfer(tab, nextTab);
          break;
      }
  }
  return nextTab;
</code></pre>  }
  return table;
}<h3 id="putifabsent"><a name="putifabsent" class="plugin-anchor" href="#putifabsent"><i class="fa fa-link" aria-hidden="true"></i></a>putIfAbsent</h3>
</li>
</ul>
<pre><code>public V putIfAbsent(K key, V value) {
    return putVal(key, value, true);
}
</code></pre><h3 id="get&#xFF08;&#x65E0;&#x9501;"><a name="get&#xFF08;&#x65E0;&#x9501;" class="plugin-anchor" href="#get&#xFF08;&#x65E0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>get&#xFF08;&#x65E0;&#x9501;)</h3>
<pre><code>public V get(Object key) {
    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek;
    int h = spread(key.hashCode());
    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;
        (e = tabAt(tab, (n - 1) &amp; h)) != null) {
        if ((eh = e.hash) == h) {
</code></pre><ul>
<li>// bucket&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x627E;&#x7684;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;<pre><code>      if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))
          return e.val;
  }
  else if (eh &lt; 0)
</code></pre></li>
<li>// bucket&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#x6839;&#xFF0C;&#x5219;&#x8C03;&#x7528;find&#x65B9;&#x6CD5;&#x53BB;&#x627E;<pre><code>  return (p = e.find(h, key)) != null ? p.val : null;
</code></pre></li>
<li>// bucket&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x5219;&#x904D;&#x5386;&#x94FE;&#x8868;&#x67E5;&#x627E;<pre><code>  while ((e = e.next) != null) {
      if (e.hash == h &amp;&amp;
          ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))))
          return e.val;
  }
</code></pre>  }
  return null;
}</li>
<li></li>
</ul>
<h3 id="untreeify&#xFF08;&#x65E0;&#x9501;"><a name="untreeify&#xFF08;&#x65E0;&#x9501;" class="plugin-anchor" href="#untreeify&#xFF08;&#x65E0;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>untreeify&#xFF08;&#x65E0;&#x9501;)</h3>
<ul>
<li>static <k,v> Node<k,v> untreeify(Node<k,v> b) {
  Node<k,v> hd = null, tl = null;
  for (Node<k,v> q = b; q != null; q = q.next) {<pre><code>  Node&lt;K,V&gt; p = new Node&lt;K,V&gt;(q.hash, q.key, q.val, null);
  if (tl == null)
      hd = p;
  else
      tl.next = p;
  tl = p;
</code></pre>  }
  return hd;
}</k,v></k,v></k,v></k,v></k,v></li>
</ul>
<h3 id="remove&#xFF08;&#x6709;&#x9501;"><a name="remove&#xFF08;&#x6709;&#x9501;" class="plugin-anchor" href="#remove&#xFF08;&#x6709;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>remove&#xFF08;&#x6709;&#x9501;)</h3>
<pre><code>public boolean remove(Object key, Object value) {
    if (key == null)
        throw new NullPointerException();
    return value != null &amp;&amp; replaceNode(key, null, value) != null;
}
</code></pre><pre><code>/**
 * Implementation for the four public remove/replace methods:
 * Replaces node value with v, conditional upon match of cv if
 * non-null.  If resulting value is null, delete.
 */
final V replaceNode(Object key, V value, Object cv) {
    int hash = spread(key.hashCode());
    for (Node&lt;K,V&gt;[] tab = table;;) {
        Node&lt;K,V&gt; f; int n, i, fh;
        if (tab == null || (n = tab.length) == 0 ||
            (f = tabAt(tab, i = (n - 1) &amp; hash)) == null)
            break;
        else if ((fh = f.hash) == MOVED)
</code></pre><ul>
<li>// &#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x88AB;&#x79FB;&#x52A8;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5E2E;&#x52A9;&#x8FDB;&#x884C;&#x6269;&#x5BB9;<pre><code>      tab = helpTransfer(tab, f);
  else {
      V oldVal = null;
      boolean validated = false;
      synchronized (f) {
          if (tabAt(tab, i) == f) {
</code></pre></li>
<li>// &#x5982;&#x679C;&#x662F;&#x94FE;&#x8868;&#xFF0C;&#x5219;&#x5220;&#x9664;&#x94FE;&#x8868;&#x4E2D;&#x7684;&#x8282;&#x70B9;<pre><code>              if (fh &gt;= 0) {
                  validated = true;
                  for (Node&lt;K,V&gt; e = f, pred = null;;) {
                      K ek;
                      if (e.hash == hash &amp;&amp;
                          ((ek = e.key) == key ||
                           (ek != null &amp;&amp; key.equals(ek)))) {
                          V ev = e.val;
                          if (cv == null || cv == ev ||
                              (ev != null &amp;&amp; cv.equals(ev))) {
                              oldVal = ev;
                              if (value != null)
                                  e.val = value;
                              else if (pred != null)
                                  pred.next = e.next;
                              else
                                  setTabAt(tab, i, e.next);
                          }
                          break;
                      }
                      pred = e;
                      if ((e = e.next) == null)
                          break;
                  }
              }
</code></pre><ul>
<li>// &#x5982;&#x679C;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5219;&#x4ECE;&#x7EA2;&#x9ED1;&#x6811;&#x4E2D;&#x5220;&#x9664;&#x7ED3;&#x70B9;<pre><code>          else if (f instanceof TreeBin) {
              validated = true;
              TreeBin&lt;K,V&gt; t = (TreeBin&lt;K,V&gt;)f;
              TreeNode&lt;K,V&gt; r, p;
              if ((r = t.root) != null &amp;&amp;
                  (p = r.findTreeNode(hash, key, null)) != null) {
                  V pv = p.val;
                  if (cv == null || cv == pv ||
                      (pv != null &amp;&amp; cv.equals(pv))) {
                      oldVal = pv;
                      if (value != null)
                          p.val = value;
                      else if (t.removeTreeNode(p))
                          setTabAt(tab, i, untreeify(t.first));
                  }
              }
          }
      }
  }
  if (validated) {
      if (oldVal != null) {
          if (value == null)
              addCount(-1L, -1);
          return oldVal;
      }
      break;
  }
</code></pre>  }
}
return null;
}</li>
</ul>
</li>
</ul>
<h3 id="containskey"><a name="containskey" class="plugin-anchor" href="#containskey"><i class="fa fa-link" aria-hidden="true"></i></a>containsKey</h3>
<pre><code>public boolean containsKey(Object key) {
    return get(key) != null;
}
</code></pre><h3 id="containsvalue"><a name="containsvalue" class="plugin-anchor" href="#containsvalue"><i class="fa fa-link" aria-hidden="true"></i></a>containsValue</h3>
<pre><code>public boolean containsValue(Object value) {
    if (value == null)
        throw new NullPointerException();
    Node&lt;K,V&gt;[] t;
    if ((t = table) != null) {
        Traverser&lt;K,V&gt; it = new Traverser&lt;K,V&gt;(t, t.length, 0, t.length);
        for (Node&lt;K,V&gt; p; (p = it.advance()) != null; ) {
            V v;
            if ((v = p.val) == value || (v != null &amp;&amp; value.equals(v)))
                return true;
        }
    }
    return false;
}
</code></pre><pre><code>static class Traverser&lt;K,V&gt; {
    Node&lt;K,V&gt;[] tab;        // current table; updated if resized
    Node&lt;K,V&gt; next;         // the next entry to use
    TableStack&lt;K,V&gt; stack, spare; // to save/restore on ForwardingNodes
    int index;              // index of bin to use next
    int baseIndex;          // current index of initial table
    int baseLimit;          // index bound for initial table
    final int baseSize;     // initial table size

    Traverser(Node&lt;K,V&gt;[] tab, int size, int index, int limit) {
        this.tab = tab;
        this.baseSize = size;
        this.baseIndex = this.index = index;
        this.baseLimit = limit;
        this.next = null;
    }

    /**
     * Advances if possible, returning next valid node, or null if none.
     */
    final Node&lt;K,V&gt; advance() {
        Node&lt;K,V&gt; e;
        if ((e = next) != null)
            e = e.next;
        for (;;) {
            Node&lt;K,V&gt;[] t; int i, n;  // must use locals in checks
            if (e != null)
                return next = e;
            if (baseIndex &gt;= baseLimit || (t = tab) == null ||
                (n = t.length) &lt;= (i = index) || i &lt; 0)
                return next = null;
            if ((e = tabAt(t, i)) != null &amp;&amp; e.hash &lt; 0) {
                if (e instanceof ForwardingNode) {
                    tab = ((ForwardingNode&lt;K,V&gt;)e).nextTable;
                    e = null;
                    pushState(t, i, n);
                    continue;
                }
                else if (e instanceof TreeBin)
                    e = ((TreeBin&lt;K,V&gt;)e).first;
                else
                    e = null;
            }
            if (stack != null)
                recoverState(n);
            else if ((index = i + baseSize) &gt;= n)
                index = ++baseIndex; // visit upper slots if present
        }
    }

    /**
     * Saves traversal state upon encountering a forwarding node.
     */
    private void pushState(Node&lt;K,V&gt;[] t, int i, int n) {
        TableStack&lt;K,V&gt; s = spare;  // reuse if possible
        if (s != null)
            spare = s.next;
        else
            s = new TableStack&lt;K,V&gt;();
        s.tab = t;
        s.length = n;
        s.index = i;
        s.next = stack;
        stack = s;
    }

    /**
     * Possibly pops traversal state.
     *
     * @param n length of current table
     */
    private void recoverState(int n) {
        TableStack&lt;K,V&gt; s; int len;
        while ((s = stack) != null &amp;&amp; (index += (len = s.length)) &gt;= n) {
            n = len;
            index = s.index;
            tab = s.tab;
            s.tab = null;
            TableStack&lt;K,V&gt; next = s.next;
            s.next = spare; // save for reuse
            stack = next;
            spare = s;
        }
        if (s == null &amp;&amp; (index += baseSize) &gt;= n)
            index = ++baseIndex;
    }
}
</code></pre><h3 id="&#x904D;&#x5386;"><a name="&#x904D;&#x5386;" class="plugin-anchor" href="#&#x904D;&#x5386;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x904D;&#x5386;</h3>
<pre><code>public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {
    EntrySetView&lt;K,V&gt; es;
    return (es = entrySet) != null ? es : (entrySet = new EntrySetView&lt;K,V&gt;(this));
}
</code></pre><pre><code>public Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() {
    ConcurrentHashMap&lt;K,V&gt; m = map;
    Node&lt;K,V&gt;[] t;
    int f = (t = m.table) == null ? 0 : t.length;
    return new EntryIterator&lt;K,V&gt;(t, f, 0, f, m);
}
</code></pre><pre><code>static class BaseIterator&lt;K,V&gt; extends Traverser&lt;K,V&gt; {
    final ConcurrentHashMap&lt;K,V&gt; map;
    Node&lt;K,V&gt; lastReturned;
    BaseIterator(Node&lt;K,V&gt;[] tab, int size, int index, int limit,
                ConcurrentHashMap&lt;K,V&gt; map) {
        super(tab, size, index, limit);
        this.map = map;
        advance();
    }

    public final boolean hasNext() { return next != null; }
    public final boolean hasMoreElements() { return next != null; }

    public final void remove() {
        Node&lt;K,V&gt; p;
        if ((p = lastReturned) == null)
            throw new IllegalStateException();
        lastReturned = null;
        map.replaceNode(p.key, null, null);
    }
}
</code></pre><pre><code>static final class EntryIterator&lt;K,V&gt; extends BaseIterator&lt;K,V&gt;
    implements Iterator&lt;Map.Entry&lt;K,V&gt;&gt; {
    EntryIterator(Node&lt;K,V&gt;[] tab, int index, int size, int limit,
                  ConcurrentHashMap&lt;K,V&gt; map) {
        super(tab, index, size, limit, map);
    }

    public final Map.Entry&lt;K,V&gt; next() {
        Node&lt;K,V&gt; p;
        if ((p = next) == null)
            throw new NoSuchElementException();
        K k = p.key;
        V v = p.val;
        lastReturned = p;
        advance();
        return new MapEntry&lt;K,V&gt;(k, v, map);
    }
}
</code></pre><ul>
<li><h3 id="17-&#x5206;&#x6BB5;&#x9501;&#x5B9E;&#x73B0;"><a name="17-&#x5206;&#x6BB5;&#x9501;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#17-&#x5206;&#x6BB5;&#x9501;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>1.7 &#x5206;&#x6BB5;&#x9501;&#x5B9E;&#x73B0;</h3>
</li>
<li>&#x91C7;&#x7528; Segment + HashEntry&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;</li>
</ul>
<h4 id="put"><a name="put" class="plugin-anchor" href="#put"><i class="fa fa-link" aria-hidden="true"></i></a>put</h4>
<ul>
<li><p>&#x5F53;&#x6267;&#x884C; put&#x65B9;&#x6CD5;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x6839;&#x636E;key&#x7684;hash&#x503C;&#xFF0C;&#x5728; Segment&#x6570;&#x7EC4;&#x4E2D;&#x627E;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x7684; Segment&#x8FD8;&#x672A;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5219;&#x901A;&#x8FC7;CAS&#x8FDB;&#x884C;&#x8D4B;&#x503C;&#xFF0C;&#x63A5;&#x7740;&#x6267;&#x884C; Segment&#x5BF9;&#x8C61;&#x7684; put&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x52A0;&#x9501;&#x673A;&#x5236;&#x63D2;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
</li>
<li><p>&#x573A;&#x666F;&#xFF1A;&#x7EBF;&#x7A0B;A&#x548C;&#x7EBF;&#x7A0B;B&#x540C;&#x65F6;&#x6267;&#x884C;&#x76F8;&#x540C; Segment&#x5BF9;&#x8C61;&#x7684; put&#x65B9;&#x6CD5;</p>
</li>
<li><p>1&#x3001;&#x7EBF;&#x7A0B;A&#x6267;&#x884C; tryLock()&#x65B9;&#x6CD5;&#x6210;&#x529F;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x5219;&#x628A; HashEntry&#x5BF9;&#x8C61;&#x63D2;&#x5165;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x4F4D;&#x7F6E;&#xFF1B; </p>
</li>
<li><p>2&#x3001;&#x7EBF;&#x7A0B;B&#x83B7;&#x53D6;&#x9501;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x6267;&#x884C; scanAndLockForPut()&#x65B9;&#x6CD5;&#xFF0C;&#x5728; scanAndLockForPut&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x4F1A;&#x901A;&#x8FC7;&#x91CD;&#x590D;&#x6267;&#x884C; tryLock()&#x65B9;&#x6CD5;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x5728;&#x591A;&#x5904;&#x7406;&#x5668;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x91CD;&#x590D;&#x6B21;&#x6570;&#x4E3A;64&#xFF0C;&#x5355;&#x5904;&#x7406;&#x5668;&#x91CD;&#x590D;&#x6B21;&#x6570;&#x4E3A;1&#xFF0C;&#x5F53;&#x6267;&#x884C; tryLock()&#x65B9;&#x6CD5;&#x7684;&#x6B21;&#x6570;&#x8D85;&#x8FC7;&#x4E0A;&#x9650;&#x65F6;&#xFF0C;&#x5219;&#x6267;&#x884C; lock()&#x65B9;&#x6CD5;&#x6302;&#x8D77;&#x7EBF;&#x7A0B;B&#xFF1B; </p>
</li>
<li><p>3&#x3001;&#x5F53;&#x7EBF;&#x7A0B;A&#x6267;&#x884C;&#x5B8C;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4F1A;&#x901A;&#x8FC7; unlock()&#x65B9;&#x6CD5;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x63A5;&#x7740;&#x5524;&#x9192;&#x7EBF;&#x7A0B;B&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF1B;</p>
<h4 id="size"><a name="size" class="plugin-anchor" href="#size"><i class="fa fa-link" aria-hidden="true"></i></a>size</h4>
</li>
<li>&#x56E0;&#x4E3A; ConcurrentHashMap&#x662F;&#x53EF;&#x4EE5;&#x5E76;&#x53D1;&#x63D2;&#x5165;&#x6570;&#x636E;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x51C6;&#x786E;&#x8BA1;&#x7B97;&#x5143;&#x7D20;&#x65F6;&#x5B58;&#x5728;&#x4E00;&#x5B9A;&#x7684;&#x96BE;&#x5EA6;&#xFF0C;&#x4E00;&#x822C;&#x7684;&#x601D;&#x8DEF;&#x662F;&#x7EDF;&#x8BA1;&#x6BCF;&#x4E2A; Segment&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x7D2F;&#x52A0;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x7ED3;&#x679C;&#x5E76;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x51C6;&#x786E;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x8BA1;&#x7B97;&#x540E;&#x9762;&#x51E0;&#x4E2A; Segment&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x65F6;&#xFF0C;&#x5DF2;&#x7ECF;&#x8BA1;&#x7B97;&#x8FC7;&#x7684; Segment&#x540C;&#x65F6;&#x53EF;&#x80FD;&#x6709;&#x6570;&#x636E;&#x7684;&#x63D2;&#x5165;&#x6216;&#x5219;&#x5220;&#x9664;&#x3002;</li>
<li><p>&#x5148;&#x91C7;&#x7528;&#x4E0D;&#x52A0;&#x9501;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8FDE;&#x7EED;&#x8BA1;&#x7B97;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x6700;&#x591A;&#x8BA1;&#x7B97;3&#x6B21;&#xFF1A; 1&#x3001;&#x5982;&#x679C;&#x524D;&#x540E;&#x4E24;&#x6B21;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x76F8;&#x540C;&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x662F;&#x51C6;&#x786E;&#x7684;&#xFF1B; 2&#x3001;&#x5982;&#x679C;&#x524D;&#x540E;&#x4E24;&#x6B21;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x90FD;&#x4E0D;&#x540C;&#xFF0C;&#x5219;&#x7ED9;&#x6BCF;&#x4E2A; Segment&#x8FDB;&#x884C;&#x52A0;&#x9501;&#xFF0C;&#x518D;&#x8BA1;&#x7B97;&#x4E00;&#x6B21;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#xFF1B;</p>
</li>
<li></li>
</ul>
<h3 id="concurrentskiplistmap"><a name="concurrentskiplistmap" class="plugin-anchor" href="#concurrentskiplistmap"><i class="fa fa-link" aria-hidden="true"></i></a>ConcurrentSkipListMap</h3>
<ul>
<li>ConcurrentSkipListMap&#x6709;&#x51E0;&#x4E2A;ConcurrentHashMap &#x4E0D;&#x80FD;&#x6BD4;&#x62DF;&#x7684;&#x4F18;&#x70B9;&#xFF1A;</li>
<li>&#x3000;&#x3000;1&#x3001;ConcurrentSkipListMap &#x7684;key&#x662F;&#x6709;&#x5E8F;&#x7684;&#x3002;</li>
<li><p>2&#x3001;ConcurrentSkipListMap &#x652F;&#x6301;&#x66F4;&#x9AD8;&#x7684;&#x5E76;&#x53D1;&#x3002;ConcurrentSkipListMap &#x7684;&#x5B58;&#x53D6;&#x65F6;&#x95F4;&#x662F;log&#xFF08;N)&#xFF0C;&#x548C;&#x7EBF;&#x7A0B;&#x6570;&#x51E0;&#x4E4E;&#x65E0;&#x5173;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x6570;&#x636E;&#x91CF;&#x4E00;&#x5B9A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5E76;&#x53D1;&#x7684;&#x7EBF;&#x7A0B;&#x8D8A;&#x591A;&#xFF0C;ConcurrentSkipListMap&#x8D8A;&#x80FD;&#x4F53;&#x73B0;&#x51FA;&#x4ED6;&#x7684;&#x4F18;&#x52BF;&#x3002;</p>
</li>
<li><p>SkipList &#x8DF3;&#x8868;&#xFF1A;</p>
</li>
<li>&#x8DF3;&#x8868;&#x662F;&#x5E73;&#x8861;&#x6811;&#x7684;&#x4E00;&#x79CD;&#x66FF;&#x4EE3;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4F46;&#x662F;&#x548C;&#x7EA2;&#x9ED1;&#x6811;&#x4E0D;&#x76F8;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x8DF3;&#x8868;&#x5BF9;&#x4E8E;&#x6811;&#x7684;&#x5E73;&#x8861;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x57FA;&#x4E8E;&#x4E00;&#x79CD;&#x968F;&#x673A;&#x5316;&#x7684;&#x7B97;&#x6CD5;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x8DF3;&#x8868;&#x7684;&#x63D2;&#x5165;&#x548C;&#x5220;&#x9664;&#x7684;&#x5DE5;&#x4F5C;&#x662F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x3002;</li>
<li>&#x4E0B;&#x9762;&#x6765;&#x7814;&#x7A76;&#x4E00;&#x4E0B;&#x8DF3;&#x8868;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#xFF1A;</li>
<li>&#x5148;&#x4ECE;&#x94FE;&#x8868;&#x5F00;&#x59CB;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x94FE;&#x8868;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x5728;&#x94FE;&#x8868;&#x4E2D;&#x67E5;&#x627E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;I&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x6574;&#x4E2A;&#x94FE;&#x8868;&#x904D;&#x5386;&#x4E00;&#x6B21;&#x3002;</li>
<li></li>
<li><p>&#x5982;&#x679C;&#x662F;&#x8BF4;&#x94FE;&#x8868;&#x662F;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x8282;&#x70B9;&#x4E2D;&#x8FD8;&#x5B58;&#x50A8;&#x4E86;&#x6307;&#x5411;&#x524D;&#x9762;&#x7B2C;&#x4E8C;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6307;&#x9488;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x67E5;&#x627E;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x4EC5;&#x4EC5;&#x9700;&#x8981;&#x904D;&#x5386;N/2&#x4E2A;&#x8282;&#x70B9;&#x5373;&#x53EF;&#x3002;</p>
</li>
<li><p>&#x8FD9;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x662F;&#x8DF3;&#x8868;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x901A;&#x8FC7;&#x201C;&#x7A7A;&#x95F4;&#x6765;&#x6362;&#x53D6;&#x65F6;&#x95F4;&#x201D;&#x7684;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#xFF0C;&#x901A;&#x8FC7;&#x5728;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x5411;&#x524D;&#x7684;&#x6307;&#x9488;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x5347;&#x67E5;&#x627E;&#x7684;&#x6548;&#x7387;&#x3002;</p>
</li>
<li></li>
</ul>
<h2 id="map&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;"><a name="map&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;" class="plugin-anchor" href="#map&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>Map&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;</h2>
<h3 id="hashmap&#x4E0E;concurrenthashmap&#x533A;&#x522B;"><a name="hashmap&#x4E0E;concurrenthashmap&#x533A;&#x522B;" class="plugin-anchor" href="#hashmap&#x4E0E;concurrenthashmap&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>HashMap&#x4E0E;ConcurrentHashMap&#x533A;&#x522B;</h3>
<pre><code>- 1)&#x524D;&#x8005;&#x5141;&#x8BB8;key&#x6216;value&#x4E3A;null&#xFF0C;&#x540E;&#x8005;&#x4E0D;&#x5141;&#x8BB8;
- 2)&#x524D;&#x8005;&#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x540E;&#x8005;&#x662F;
</code></pre><h3 id="hashmap&#x3001;treemap&#x4E0E;linkedhashmap&#x533A;&#x522B;"><a name="hashmap&#x3001;treemap&#x4E0E;linkedhashmap&#x533A;&#x522B;" class="plugin-anchor" href="#hashmap&#x3001;treemap&#x4E0E;linkedhashmap&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>HashMap&#x3001;TreeMap&#x4E0E;LinkedHashMap&#x533A;&#x522B;</h3>
<pre><code>- 1)HashMap&#x904D;&#x5386;&#x65F6;&#xFF0C;&#x53D6;&#x5F97;&#x6570;&#x636E;&#x7684;&#x987A;&#x5E8F;&#x662F;&#x5B8C;&#x5168;&#x968F;&#x673A;&#x7684;&#xFF1B;
</code></pre><ul>
<li>TreeMap&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x81EA;&#x7136;&#x987A;&#x5E8F;&#x6216;Comparator&#x6392;&#x5E8F;&#xFF1B;<ul>
<li>LinkedHashMap&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6216;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x4E14;get&#x7684;&#x6548;&#x7387;&#xFF08;O(1))&#x6BD4;TreeMap&#xFF08;O(logn))&#x66F4;&#x9AD8;&#x3002;</li>
<li>2)HashMap&#x5E95;&#x5C42;&#x57FA;&#x4E8E;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x6570;&#x7EC4;+&#x94FE;&#x8868;/&#x7EA2;&#x9ED1;&#x6811;&#xFF1B;</li>
</ul>
</li>
<li>TreeMap&#x5E95;&#x5C42;&#x57FA;&#x4E8E;&#x7EA2;&#x9ED1;&#x6811;</li>
<li>LinkedHashMap&#x5E95;&#x5C42;&#x57FA;&#x4E8E;HashMap&#x4E0E;&#x73AF;&#x5F62;&#x53CC;&#x5411;&#x94FE;&#x8868;<ul>
<li>3)&#x5C31;get&#x548C;put&#x6548;&#x7387;&#x800C;&#x8A00;&#xFF0C;HashMap&#x662F;&#x6700;&#x9AD8;&#x7684;&#xFF0C;LinkedHashMap&#x6B21;&#x4E4B;&#xFF0C;TreeMap&#x6700;&#x6B21;&#x3002;<h3 id="hashmap&#x4E0E;hashtable&#x533A;&#x522B;"><a name="hashmap&#x4E0E;hashtable&#x533A;&#x522B;" class="plugin-anchor" href="#hashmap&#x4E0E;hashtable&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>HashMap&#x4E0E;Hashtable&#x533A;&#x522B;</h3>
</li>
<li><ol>
<li>&#x6269;&#x5BB9;&#x7B56;&#x7565;&#xFF1A;Hashtable&#x5728;&#x4E0D;&#x6307;&#x5B9A;&#x5BB9;&#x91CF;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x9ED8;&#x8BA4;&#x5BB9;&#x91CF;&#x4E3A;11&#xFF0C;&#x800C;HashMap&#x4E3A;16&#xFF0C;Hashtable&#x4E0D;&#x8981;&#x6C42;&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x4E00;&#x5B9A;&#x8981;&#x4E3A;2&#x7684;&#x6574;&#x6570;&#x6B21;&#x5E42;&#xFF08;<em>2+1)&#xFF0C;&#x800C;HashMap&#x5219;&#x8981;&#x6C42;&#x4E00;&#x5B9A;&#x4E3A;2&#x7684;&#x6574;&#x6570;&#x6B21;&#x5E42;&#xFF08;</em>2)&#x3002;</li>
</ol>
</li>
</ul>
</li>
<li><ol>
<li>&#x5141;&#x8BB8;null&#xFF1A;Hashtable&#x4E2D;key&#x548C;value&#x90FD;&#x4E0D;&#x5141;&#x8BB8;&#x4E3A;null&#xFF0C;&#x800C;HashMap&#x4E2D;key&#x548C;value&#x90FD;&#x5141;&#x8BB8;&#x4E3A;null&#xFF08;key&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x4E3A;null&#xFF0C;&#x800C;value&#x5219;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x4E3A;null)&#x3002;</li>
</ol>
</li>
<li><ol>
<li>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1A;&#x524D;&#x8005;&#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x540E;&#x8005;&#x662F;&#xFF1B;<h3 id="concurrenthashmap&#x3001;collectionssynchronizedmap&#x4E0E;hashtable&#x7684;&#x5F02;&#x540C;"><a name="concurrenthashmap&#x3001;collectionssynchronizedmap&#x4E0E;hashtable&#x7684;&#x5F02;&#x540C;" class="plugin-anchor" href="#concurrenthashmap&#x3001;collectionssynchronizedmap&#x4E0E;hashtable&#x7684;&#x5F02;&#x540C;"><i class="fa fa-link" aria-hidden="true"></i></a>ConcurrentHashMap&#x3001;Collections.synchronizedMap&#x4E0E;Hashtable&#x7684;&#x5F02;&#x540C;</h3>
</li>
</ol>
</li>
<li>&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x540C;&#x6B65;Map&#xFF0C;&#x4F46;&#x4E09;&#x8005;&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x7684;&#x673A;&#x5236;&#x4E0D;&#x540C;&#xFF1B;&#x540E;&#x4E24;&#x8005;&#x90FD;&#x662F;&#x7B80;&#x5355;&#x5730;&#x5728;&#x65B9;&#x6CD5;&#x4E0A;&#x52A0;synchronized&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x9501;&#x7684;&#x7C92;&#x5EA6;&#x8F83;&#x5927;&#xFF1B;&#x524D;&#x8005;&#x662F;&#x57FA;&#x4E8E;CAS&#x548C;synchronized&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x9501;&#x7684;&#x7C92;&#x5EA6;&#x8F83;&#x5C0F;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x662F;lock-free&#x65E0;&#x9501;&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x7684;&#x3002;</li>
<li>ConcurrentHashMap&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;putIfAbsent&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<h1 id="36-collections"><a name="36-collections" class="plugin-anchor" href="#36-collections"><i class="fa fa-link" aria-hidden="true"></i></a>3.6 Collections</h1>
<h2 id="&#x540C;&#x6B65;&#x96C6;&#x5408;&#x5305;&#x88C5;"><a name="&#x540C;&#x6B65;&#x96C6;&#x5408;&#x5305;&#x88C5;" class="plugin-anchor" href="#&#x540C;&#x6B65;&#x96C6;&#x5408;&#x5305;&#x88C5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x540C;&#x6B65;&#x96C6;&#x5408;&#x5305;&#x88C5;</h2>
<pre><code>public static &lt;K,V&gt; Map&lt;K,V&gt; synchronizedMap(Map&lt;K,V&gt; m) {
    return new SynchronizedMap&lt;&gt;(m);
}
</code></pre><pre><code>private static class SynchronizedMap&lt;K,V&gt;
    implements Map&lt;K,V&gt;, Serializable {
    private static final long serialVersionUID = 1978198479659022715L;

    private final Map&lt;K,V&gt; m;     // Backing Map
    final Object      mutex;        // Object on which to synchronize

    SynchronizedMap(Map&lt;K,V&gt; m) {
        this.m = Objects.requireNonNull(m);
        mutex = this;
    }

    SynchronizedMap(Map&lt;K,V&gt; m, Object mutex) {
        this.m = m;
        this.mutex = mutex;
    }

    public int size() {
        synchronized (mutex) {return m.size();}
    }
    public boolean isEmpty() {
        synchronized (mutex) {return m.isEmpty();}
    }
    public boolean containsKey(Object key) {
        synchronized (mutex) {return m.containsKey(key);}
    }
    public boolean containsValue(Object value) {
        synchronized (mutex) {return m.containsValue(value);}
    }
    public V get(Object key) {
        synchronized (mutex) {return m.get(key);}
    }

    public V put(K key, V value) {
        synchronized (mutex) {return m.put(key, value);}
    }
    public V remove(Object key) {
        synchronized (mutex) {return m.remove(key);}
    }
    public void putAll(Map&lt;? extends K, ? extends V&gt; map) {
        synchronized (mutex) {m.putAll(map);}
    }
    public void clear() {
        synchronized (mutex) {m.clear();}
    }

    private transient Set&lt;K&gt; keySet;
    private transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;
    private transient Collection&lt;V&gt; values;

    public Set&lt;K&gt; keySet() {
        synchronized (mutex) {
            if (keySet==null)
                keySet = new SynchronizedSet&lt;&gt;(m.keySet(), mutex);
            return keySet;
        }
    }

    public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {
        synchronized (mutex) {
            if (entrySet==null)
                entrySet = new SynchronizedSet&lt;&gt;(m.entrySet(), mutex);
            return entrySet;
        }
    }

    public Collection&lt;V&gt; values() {
        synchronized (mutex) {
            if (values==null)
                values = new SynchronizedCollection&lt;&gt;(m.values(), mutex);
            return values;
        }
    }

    public boolean equals(Object o) {
        if (this == o)
            return true;
        synchronized (mutex) {return m.equals(o);}
    }
    public int hashCode() {
        synchronized (mutex) {return m.hashCode();}
    }
    public String toString() {
        synchronized (mutex) {return m.toString();}
    }

    // Override default methods in Map
    @Override
    public V getOrDefault(Object k, V defaultValue) {
        synchronized (mutex) {return m.getOrDefault(k, defaultValue);}
    }
    @Override
    public void forEach(BiConsumer&lt;? super K, ? super V&gt; action) {
        synchronized (mutex) {m.forEach(action);}
    }
    @Override
    public void replaceAll(BiFunction&lt;? super K, ? super V, ? extends V&gt; function) {
        synchronized (mutex) {m.replaceAll(function);}
    }
    @Override
    public V putIfAbsent(K key, V value) {
        synchronized (mutex) {return m.putIfAbsent(key, value);}
    }
    @Override
    public boolean remove(Object key, Object value) {
        synchronized (mutex) {return m.remove(key, value);}
    }
    @Override
    public boolean replace(K key, V oldValue, V newValue) {
        synchronized (mutex) {return m.replace(key, oldValue, newValue);}
    }
    @Override
    public V replace(K key, V value) {
        synchronized (mutex) {return m.replace(key, value);}
    }
    @Override
    public V computeIfAbsent(K key,
            Function&lt;? super K, ? extends V&gt; mappingFunction) {
        synchronized (mutex) {return m.computeIfAbsent(key, mappingFunction);}
    }
    @Override
    public V computeIfPresent(K key,
            BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction) {
        synchronized (mutex) {return m.computeIfPresent(key, remappingFunction);}
    }
    @Override
    public V compute(K key,
            BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction) {
        synchronized (mutex) {return m.compute(key, remappingFunction);}
    }
    @Override
    public V merge(K key, V value,
            BiFunction&lt;? super V, ? super V, ? extends V&gt; remappingFunction) {
        synchronized (mutex) {return m.merge(key, value, remappingFunction);}
    }

    private void writeObject(ObjectOutputStream s) throws IOException {
        synchronized (mutex) {s.defaultWriteObject();}
    }
}
</code></pre><h2 id="&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5305;&#x88C5;"><a name="&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5305;&#x88C5;" class="plugin-anchor" href="#&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5305;&#x88C5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5305;&#x88C5;</h2>
<pre><code>public static &lt;K,V&gt; Map&lt;K,V&gt; unmodifiableMap(Map&lt;? extends K, ? extends V&gt; m) {
    return new UnmodifiableMap&lt;&gt;(m);
}
</code></pre><pre><code>private static class UnmodifiableMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Serializable {
    private static final long serialVersionUID = -1034234728574286014L;

    private final Map&lt;? extends K, ? extends V&gt; m;

    UnmodifiableMap(Map&lt;? extends K, ? extends V&gt; m) {
        if (m==null)
            throw new NullPointerException();
        this.m = m;
    }

    public int size()                        {return m.size();}
    public boolean isEmpty()                 {return m.isEmpty();}
    public boolean containsKey(Object key)   {return m.containsKey(key);}
    public boolean containsValue(Object val) {return m.containsValue(val);}
    public V get(Object key)                 {return m.get(key);}

    public V put(K key, V value) {
        throw new UnsupportedOperationException();
    }
    public V remove(Object key) {
        throw new UnsupportedOperationException();
    }
    public void putAll(Map&lt;? extends K, ? extends V&gt; m) {
        throw new UnsupportedOperationException();
    }
    public void clear() {
        throw new UnsupportedOperationException();
    }

    private transient Set&lt;K&gt; keySet;
    private transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;
    private transient Collection&lt;V&gt; values;

    public Set&lt;K&gt; keySet() {
        if (keySet==null)
            keySet = unmodifiableSet(m.keySet());
        return keySet;
    }

    public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet() {
        if (entrySet==null)
            entrySet = new UnmodifiableEntrySet&lt;&gt;(m.entrySet());
        return entrySet;
    }

    public Collection&lt;V&gt; values() {
        if (values==null)
            values = unmodifiableCollection(m.values());
        return values;
    }

    public boolean equals(Object o) {return o == this || m.equals(o);}
    public int hashCode()           {return m.hashCode();}
    public String toString()        {return m.toString();}

    // Override default methods in Map
    @Override
    @SuppressWarnings(&quot;unchecked&quot;)
    public V getOrDefault(Object k, V defaultValue) {
        // Safe cast as we don&apos;t change the value
        return ((Map&lt;K, V&gt;)m).getOrDefault(k, defaultValue);
    }

    @Override
    public void forEach(BiConsumer&lt;? super K, ? super V&gt; action) {
        m.forEach(action);
    }

    @Override
    public void replaceAll(BiFunction&lt;? super K, ? super V, ? extends V&gt; function) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V putIfAbsent(K key, V value) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean remove(Object key, Object value) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean replace(K key, V oldValue, V newValue) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V replace(K key, V value) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V computeIfAbsent(K key, Function&lt;? super K, ? extends V&gt; mappingFunction) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V computeIfPresent(K key,
            BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V compute(K key,
            BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V merge(K key, V value,
            BiFunction&lt;? super V, ? super V, ? extends V&gt; remappingFunction) {
        throw new UnsupportedOperationException();
    }
</code></pre><h2 id="&#x7A7A;&#x96C6;&#x5408;&#x5305;&#x88C5;"><a name="&#x7A7A;&#x96C6;&#x5408;&#x5305;&#x88C5;" class="plugin-anchor" href="#&#x7A7A;&#x96C6;&#x5408;&#x5305;&#x88C5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7A7A;&#x96C6;&#x5408;&#x5305;&#x88C5;</h2>
<pre><code>public static final &lt;K,V&gt; Map&lt;K,V&gt; emptyMap() {
    return (Map&lt;K,V&gt;) EMPTY_MAP;
}
</code></pre><pre><code>public static final Map EMPTY_MAP = new EmptyMap&lt;&gt;();
</code></pre><pre><code>private static class EmptyMap&lt;K,V&gt;
    extends AbstractMap&lt;K,V&gt;
    implements Serializable
{
    private static final long serialVersionUID = 6428348081105594320L;

    public int size()                          {return 0;}
    public boolean isEmpty()                   {return true;}
    public boolean containsKey(Object key)     {return false;}
    public boolean containsValue(Object value) {return false;}
    public V get(Object key)                   {return null;}
    public Set&lt;K&gt; keySet()                     {return emptySet();}
    public Collection&lt;V&gt; values()              {return emptySet();}
    public Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()      {return emptySet();}

    public boolean equals(Object o) {
        return (o instanceof Map) &amp;&amp; ((Map&lt;?,?&gt;)o).isEmpty();
    }

    public int hashCode()                      {return 0;}

    // Override default methods in Map
    @Override
    @SuppressWarnings(&quot;unchecked&quot;)
    public V getOrDefault(Object k, V defaultValue) {
        return defaultValue;
    }

    @Override
    public void forEach(BiConsumer&lt;? super K, ? super V&gt; action) {
        Objects.requireNonNull(action);
    }

    @Override
    public void replaceAll(BiFunction&lt;? super K, ? super V, ? extends V&gt; function) {
        Objects.requireNonNull(function);
    }

    @Override
    public V putIfAbsent(K key, V value) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean remove(Object key, Object value) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean replace(K key, V oldValue, V newValue) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V replace(K key, V value) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V computeIfAbsent(K key,
            Function&lt;? super K, ? extends V&gt; mappingFunction) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V computeIfPresent(K key,
            BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V compute(K key,
            BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction) {
        throw new UnsupportedOperationException();
    }

    @Override
    public V merge(K key, V value,
            BiFunction&lt;? super V, ? super V, ? extends V&gt; remappingFunction) {
        throw new UnsupportedOperationException();
    }

    // Preserves singleton property
    private Object readResolve() {
        return EMPTY_MAP;
    }
}
</code></pre><h2 id="collectionssort"><a name="collectionssort" class="plugin-anchor" href="#collectionssort"><i class="fa fa-link" aria-hidden="true"></i></a>Collections.sort</h2>
<pre><code>public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list) {
    list.sort(null);
}
</code></pre><ul>
<li>List#sort</li>
<li>default void sort(Comparator&lt;? super E&gt; c) {
  Object[] a = this.toArray();
  Arrays.sort(a, (Comparator) c);
  ListIterator<e> i = this.listIterator();
  for (Object e : a) {<pre><code>  i.next();
  i.set((E) e);
</code></pre>  }
}</e></li>
</ul>
<pre><code>public static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c) {
    if (c == null) {
        sort(a);
    } else {
        if (LegacyMergeSort.userRequested)
            legacyMergeSort(a, c);
        else
            TimSort.sort(a, 0, a.length, c, null, 0, 0);
    }
}
</code></pre><pre><code>public static void sort(Object[] a) {
    if (LegacyMergeSort.userRequested)
        legacyMergeSort(a);
    else
        ComparableTimSort.sort(a, 0, a.length, null, 0, 0);
}
</code></pre><h3 id="17&#xFF08;timsort"><a name="17&#xFF08;timsort" class="plugin-anchor" href="#17&#xFF08;timsort"><i class="fa fa-link" aria-hidden="true"></i></a>1.7&#xFF08;TimSort)</h3>
<ul>
<li>&#x7ED3;&#x5408;&#x4E86;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x548C;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x6DF7;&#x5408;&#x7B97;&#x6CD5;&#xFF0C;&#x5B83;&#x57FA;&#x4E8E;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E8B;&#x5B9E;&#xFF0C;&#x5B9E;&#x9645;&#x4E2D;&#x5927;&#x90E8;&#x5206;&#x6570;&#x636E;&#x90FD;&#x662F;&#x90E8;&#x5206;&#x6709;&#x5E8F;&#xFF08;&#x5347;&#x5E8F;&#x6216;&#x964D;&#x5E8F;)&#x7684;&#x3002;</li>
<li>TimSort &#x7B97;&#x6CD5;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x5BF9;&#x5347;&#x5E8F;&#x90E8;&#x5206;&#x7684;&#x56DE;&#x6EAF;&#x548C;&#x5BF9;&#x964D;&#x5E8F;&#x90E8;&#x5206;&#x7684;&#x6027;&#x80FD;&#x5012;&#x9000;&#xFF0C;&#x5C06;&#x8F93;&#x5165;&#x6309;&#x5176;&#x5347;&#x5E8F;&#x548C;&#x964D;&#x5E8F;&#x7279;&#x70B9;&#x8FDB;&#x884C;&#x4E86;&#x5206;&#x533A;&#x3002;&#x6392;&#x5E8F;&#x7684;&#x8F93;&#x5165;&#x7684;&#x5355;&#x4F4D;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6570;&#x5B57;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x5757;-&#x5206;&#x533A;&#x3002;&#x5176;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x53EB;&#x4E00;&#x4E2A;run&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x4E9B; run &#x5E8F;&#x5217;&#xFF0C;&#x6BCF;&#x6B21;&#x62FF;&#x4E00;&#x4E2A; run &#x51FA;&#x6765;&#x6309;&#x89C4;&#x5219;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x3002;&#x6BCF;&#x6B21;&#x5408;&#x5E76;&#x4F1A;&#x5C06;&#x4E24;&#x4E2A; run&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A; run&#x3002;&#x5408;&#x5E76;&#x7684;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x5230;&#x6808;&#x4E2D;&#x3002;&#x5408;&#x5E76;&#x76F4;&#x5230;&#x6D88;&#x8017;&#x6389;&#x6240;&#x6709;&#x7684; run&#xFF0C;&#x8FD9;&#x65F6;&#x5C06;&#x6808;&#x4E0A;&#x5269;&#x4F59;&#x7684; run&#x5408;&#x5E76;&#x5230;&#x53EA;&#x5269;&#x4E00;&#x4E2A; run &#x4E3A;&#x6B62;&#x3002;&#x8FD9;&#x65F6;&#x8FD9;&#x4E2A;&#x4EC5;&#x5269;&#x7684; run &#x4FBF;&#x662F;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x7ED3;&#x679C;&#x3002;</li>
<li>&#x7EFC;&#x4E0A;&#x8FF0;&#x8FC7;&#x7A0B;&#xFF0C;Timsort&#x7B97;&#x6CD5;&#x7684;&#x8FC7;&#x7A0B;&#x5305;&#x62EC;</li>
<li>&#xFF08;0)&#x5982;&#x679C;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;&#x67D0;&#x4E2A;&#x503C;&#xFF0C;&#x76F4;&#x63A5;&#x7528;&#x4E8C;&#x5206;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;<ul>
<li>&#xFF08;1)&#x627E;&#x5230;&#x5404;&#x4E2A;run&#xFF0C;&#x5E76;&#x5165;&#x6808;</li>
<li>&#xFF08;2)&#x6309;&#x89C4;&#x5219;&#x5408;&#x5E76;run</li>
</ul>
</li>
</ul>
<pre><code>/**
 * Sorts the given range, using the given workspace array slice
 * for temp storage when possible. This method is designed to be
 * invoked from public methods (in class Arrays) after performing
 * any necessary array bounds checks and expanding parameters into
 * the required forms.
 *
 * @param a the array to be sorted
 * @param lo the index of the first element, inclusive, to be sorted
 * @param hi the index of the last element, exclusive, to be sorted
 * @param work a workspace array (slice)
 * @param workBase origin of usable space in work array
 * @param workLen usable size of work array
 * @since 1.8
 */
static void sort(Object[] a, int lo, int hi, Object[] work, int workBase, int workLen) {
    assert a != null &amp;&amp; lo &gt;= 0 &amp;&amp; lo &lt;= hi &amp;&amp; hi &lt;= a.length;

    int nRemaining  = hi - lo;
    if (nRemaining &lt; 2)
        return;  // Arrays of size 0 and 1 are always sorted

    // If array is small, do a &quot;mini-TimSort&quot; with no merges
    if (nRemaining &lt; MIN_MERGE) {
        int initRunLen = countRunAndMakeAscending(a, lo, hi);
        binarySort(a, lo, hi, lo + initRunLen);
        return;
    }

    /**
     * March over the array once, left to right, finding natural runs,
     * extending short natural runs to minRun elements, and merging runs
     * to maintain stack invariant.
     */
    ComparableTimSort ts = new ComparableTimSort(a, work, workBase, workLen);
    int minRun = minRunLength(nRemaining);
    do {
        // Identify next run
        int runLen = countRunAndMakeAscending(a, lo, hi);

        // If run is short, extend to min(minRun, nRemaining)
        if (runLen &lt; minRun) {
            int force = nRemaining &lt;= minRun ? nRemaining : minRun;
            binarySort(a, lo, lo + force, lo + runLen);
            runLen = force;
        }

        // Push run onto pending-run stack, and maybe merge
        ts.pushRun(lo, runLen);
        ts.mergeCollapse();

        // Advance to find next run
        lo += runLen;
        nRemaining -= runLen;
    } while (nRemaining != 0);

    // Merge all remaining runs to complete sort
    assert lo == hi;
    ts.mergeForceCollapse();
    assert ts.stackSize == 1;
}
</code></pre><pre><code>/**
 * Creates a TimSort instance to maintain the state of an ongoing sort.
 *
 * @param a the array to be sorted
 * @param work a workspace array (slice)
 * @param workBase origin of usable space in work array
 * @param workLen usable size of work array
 */
private ComparableTimSort(Object[] a, Object[] work, int workBase, int workLen) {
    this.a = a;

    // Allocate temp storage (which may be increased later if necessary)
    int len = a.length;
    int tlen = (len &lt; 2 * INITIAL_TMP_STORAGE_LENGTH) ?
        len &gt;&gt;&gt; 1 : INITIAL_TMP_STORAGE_LENGTH;
    if (work == null || workLen &lt; tlen || workBase + tlen &gt; work.length) {
        tmp = new Object[tlen];
        tmpBase = 0;
        tmpLen = tlen;
    }
    else {
        tmp = work;
        tmpBase = workBase;
        tmpLen = workLen;
    }

    /*
     * Allocate runs-to-be-merged stack (which cannot be expanded).  The
     * stack length requirements are described in listsort.txt.  The C
     * version always uses the same stack length (85), but this was
     * measured to be too expensive when sorting &quot;mid-sized&quot; arrays (e.g.,
     * 100 elements) in Java.  Therefore, we use smaller (but sufficiently
     * large) stack lengths for smaller arrays.  The &quot;magic numbers&quot; in the
     * computation below must be changed if MIN_MERGE is decreased.  See
     * the MIN_MERGE declaration above for more information.
     * The maximum value of 49 allows for an array up to length
     * Integer.MAX_VALUE-4, if array is filled by the worst case stack size
     * increasing scenario. More explanations are given in section 4 of:
     * http://envisage-project.eu/wp-content/uploads/2015/02/sorting.pdf
     */
    int stackLen = (len &lt;    120  ?  5 :
                    len &lt;   1542  ? 10 :
                    len &lt; 119151  ? 24 : 49);
    runBase = new int[stackLen];
    runLen = new int[stackLen];
}
</code></pre><h3 id="16-&#xFF08;mergesort"><a name="16-&#xFF08;mergesort" class="plugin-anchor" href="#16-&#xFF08;mergesort"><i class="fa fa-link" aria-hidden="true"></i></a>1.6 &#xFF08;MergeSort)</h3>
<pre><code>private static void legacyMergeSort(Object[] a) {
    Object[] aux = a.clone();
    mergeSort(aux, a, 0, a.length, 0);
}
</code></pre><pre><code>private static void mergeSort(Object[] src,
                              Object[] dest,
                              int low,
                              int high,
                              int off) {
    int length = high - low;
    // 7
    // Insertion sort on smallest arrays
    if (length &lt; INSERTIONSORT_THRESHOLD) {
        for (int i=low; i&lt;high; i++)
            for (int j=i; j&gt;low &amp;&amp;
                     ((Comparable) dest[j-1]).compareTo(dest[j])&gt;0; j--)
                swap(dest, j, j-1);
        return;
    }

    // Recursively sort halves of dest into src
    int destLow  = low;
    int destHigh = high;
    low  += off;
    high += off;
    int mid = (low + high) &gt;&gt;&gt; 1;
    mergeSort(dest, src, low, mid, -off);
    mergeSort(dest, src, mid, high, -off);

    // If list is already sorted, just copy from src to dest.  This is an
    // optimization that results in faster sorts for nearly ordered lists.
    if (((Comparable)src[mid-1]).compareTo(src[mid]) &lt;= 0) {
        System.arraycopy(src, low, dest, destLow, length);
        return;
    }

    // Merge sorted halves (now in src) into dest
    for(int i = destLow, p = low, q = mid; i &lt; destHigh; i++) {
        if (q &gt;= high || p &lt; mid &amp;&amp; ((Comparable)src[p]).compareTo(src[q])&lt;=0)
            dest[i] = src[p++];
        else
            dest[i] = src[q++];
    }
}
</code></pre><h1 id="37-fail-fast"><a name="37-fail-fast" class="plugin-anchor" href="#37-fail-fast"><i class="fa fa-link" aria-hidden="true"></i></a>3.7 Fail-Fast</h1>
<ul>
<li>&#x5728;ArrayList,LinkedList,HashMap&#x7B49;&#x7B49;&#x7684;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x589E;&#xFF0C;&#x5220;&#xFF0C;&#x6539;&#x4E2D;&#x6211;&#x4EEC;&#x603B;&#x80FD;&#x770B;&#x5230;modCount&#x7684;&#x8EAB;&#x5F71;&#xFF0C;modCount&#x5B57;&#x9762;&#x610F;&#x601D;&#x5C31;&#x662F;&#x4FEE;&#x6539;&#x6B21;&#x6570;&#xFF0C;&#x4F46;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8BB0;&#x5F55;modCount&#x7684;&#x4FEE;&#x6539;&#x6B21;&#x6570;&#x5462;&#xFF1F; </li>
<li>&#x6240;&#x6709;&#x4F7F;&#x7528;modCount&#x5C5E;&#x6027;&#x96C6;&#x5408;&#x7684;&#x90FD;&#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x3002;</li>
<li><p>&#x5728;&#x4E00;&#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#x521D;&#x59CB;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x8D4B;&#x4E88;&#x5B83;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x5BF9;&#x8C61;&#x7684;modCount&#xFF0C;&#x5728;&#x8FED;&#x4EE3;&#x5668;&#x904D;&#x5386;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x73B0;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;modCount&#x548C;&#x8FED;&#x4EE3;&#x5668;&#x4E2D;&#x5B58;&#x50A8;&#x7684;modCount&#x4E0D;&#x4E00;&#x6837;&#x90A3;&#x5C31;&#x629B;&#x5F02;&#x5E38;&#x3002;</p>
</li>
<li><p>&#x5B83;&#x662F; java &#x96C6;&#x5408;&#x7684;&#x4E00;&#x79CD;&#x9519;&#x8BEF;&#x68C0;&#x6D4B;&#x673A;&#x5236;&#xFF0C;&#x5F53;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x5BF9;&#x96C6;&#x5408;&#x8FDB;&#x884C;&#x7ED3;&#x6784;&#x4E0A;&#x7684;&#x6539;&#x53D8;&#x7684;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x4EA7;&#x751F; fail-fast&#x3002;</p>
<ul>
<li>&#x4F8B;&#x5982; &#xFF1A;&#x5047;&#x8BBE;&#x5B58;&#x5728;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF08;&#x7EBF;&#x7A0B; 1&#x3001;&#x7EBF;&#x7A0B; 2)&#xFF0C;&#x7EBF;&#x7A0B; 1 &#x901A;&#x8FC7; Iterator &#x5728;&#x904D;&#x5386;&#x96C6;&#x5408; A &#x4E2D;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x5019;&#x7EBF;&#x7A0B; 2 &#x4FEE;&#x6539;&#x4E86;&#x96C6;&#x5408; A &#x7684;&#x7ED3;&#x6784;&#xFF08;&#x662F;&#x7ED3;&#x6784;&#x4E0A;&#x9762;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x4FEE;&#x6539;&#x96C6;&#x5408;&#x5143;&#x7D20;&#x7684;&#x5185;&#x5BB9;)&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x7A0B;&#x5E8F;&#x5C31;&#x4F1A;&#x629B;&#x51FA; ConcurrentModificationException &#x5F02;&#x5E38;&#xFF0C;&#x4ECE;&#x800C;&#x4EA7;&#x751F; fail-fast &#x673A;&#x5236;&#x3002;</li>
</ul>
</li>
<li><p>&#x539F;&#x56E0;&#xFF1A; &#x8FED;&#x4EE3;&#x5668;&#x5728;&#x904D;&#x5386;&#x65F6;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x904D;&#x5386;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x4E00;&#x4E2A; modCount &#x53D8;&#x91CF;&#x3002;&#x96C6;&#x5408;&#x5728;&#x88AB;&#x904D;&#x5386;&#x671F;&#x95F4;&#x5982;&#x679C;&#x5185;&#x5BB9;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x5C31;&#x4F1A;&#x6539;&#x53D8; modCount &#x7684;&#x503C;&#x3002;</p>
</li>
<li><p>&#x6BCF;&#x5F53;&#x8FED;&#x4EE3;&#x5668;&#x4F7F;&#x7528; hashNext()/next() &#x904D;&#x5386;&#x4E0B;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E4B;&#x524D;&#xFF0C;&#x90FD;&#x4F1A;&#x68C0;&#x6D4B; modCount &#x53D8;&#x91CF;&#x662F;&#x5426;&#x4E3A; expectedmodCount &#x503C;&#xFF0C;&#x662F;&#x7684;&#x8BDD;&#x5C31;&#x8FD4;&#x56DE;&#x904D;&#x5386;&#xFF1B;&#x5426;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x7EC8;&#x6B62;&#x904D;&#x5386;&#x3002;</p>
</li>
<li><p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#xFF1A;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x96C6;&#x5408;</p>
</li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>

<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="七、JavaWeb.html" class="navigation navigation-prev " aria-label="Previous page: 七、JavaWeb">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="九、操作系统.html" class="navigation navigation-next " aria-label="Next page: 九、操作系统">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"三、Java 集合","level":"1.17.5","depth":2,"next":{"title":"九、操作系统","level":"1.17.6","depth":2,"path":"zother5-Java-Interview/九、操作系统.md","ref":"zother5-Java-Interview/九、操作系统.md","articles":[]},"previous":{"title":"七、JavaWeb","level":"1.17.4","depth":2,"path":"zother5-Java-Interview/七、JavaWeb.md","ref":"zother5-Java-Interview/七、JavaWeb.md","articles":[]},"dir":"ltr"},"config":{"plugins":["github","-highlight","baidu","splitter","sitemap","back-to-top-button","code","splitter","-lunr","-search","search-pro","theme-comscore","popup","hide-element","anchors","nocache","page-toc-button"],"ignores":["friends","tags","categories","about"],"root":".deploy/content","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"nocache":{},"github":{"url":"https://github.com/zhaoda/webpack-handbook"},"editlink":{"base":"https://github.com/zhaoda/webpack-handbook/blob/master/content","label":"编辑本页"},"splitter":{},"search-pro":{},"popup":{},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"sitemap":{"hostname":"http://zhaoda.net/"},"theme-comscore":{},"page-toc-button":{"maxTocDepth":2,"minTocSize":2},"back-to-top-button":{},"baidu":{"token":"a9787f0ab45d5e237bab522431d0a7ec"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"SUMMARY.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"java实用笔记","language":"zh-hans","output.name":"site","catalog":["./source/_posts"],"links":{"sidebar":{"Home":"http://blog.liangqingxiang.top/"}},"gitbook":"3.2.3","description":"学习笔记"},"file":{"path":"zother5-Java-Interview/三、Java 集合.md","mtime":"2020-08-13T01:00:46.835Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-08-13T01:02:25.765Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-baidu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-nocache/nocache.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

