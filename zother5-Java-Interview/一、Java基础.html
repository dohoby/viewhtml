
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>一、Java基础 · java实用笔记</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="七、JavaWeb.html" />
    
    
    <link rel="prev" href="Java集合面试题及答案.html" />
    


    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://blog.liangqingxiang.top/" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                        <b>1.2.</b>
                    
                    Base
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                        <b>1.2.1.</b>
                    
                    Collection
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" >
            
                <span>
            
                    
                        <b>1.2.1.1.</b>
                    
                    Hashmap
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1.1" data-path="../base/collection/hashmap/HashMap相关.html">
            
                <a href="../base/collection/hashmap/HashMap相关.html">
            
                    
                        <b>1.2.1.1.1.</b>
                    
                    HashMap相关
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.2" data-path="../base/collection/hashmap/HashMap相关tx.html">
            
                <a href="../base/collection/hashmap/HashMap相关tx.html">
            
                    
                        <b>1.2.1.1.2.</b>
                    
                    HashMap相关tx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.3" data-path="../base/collection/hashmap/jdk1.7hashmap源码分析.html">
            
                <a href="../base/collection/hashmap/jdk1.7hashmap源码分析.html">
            
                    
                        <b>1.2.1.1.3.</b>
                    
                    jdk1.7hashmap源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.4" data-path="../base/collection/hashmap/jdk1.8ConcurrentHashMap源码分析.html">
            
                <a href="../base/collection/hashmap/jdk1.8ConcurrentHashMap源码分析.html">
            
                    
                        <b>1.2.1.1.4.</b>
                    
                    jdk1.8ConcurrentHashMap源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.5" data-path="../base/collection/hashmap/jdk1.8HashMap源码分析.html">
            
                <a href="../base/collection/hashmap/jdk1.8HashMap源码分析.html">
            
                    
                        <b>1.2.1.1.5.</b>
                    
                    jdk1.8hashmap源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.6" data-path="../base/collection/hashmap/Jdk1.8源码解析-java.util.HashMap-treeifyBin.html">
            
                <a href="../base/collection/hashmap/Jdk1.8源码解析-java.util.HashMap-treeifyBin.html">
            
                    
                        <b>1.2.1.1.6.</b>
                    
                    Jdk1.8源码解析-java.util.HashMap#treeifyBin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" >
            
                <span>
            
                    
                        <b>1.2.1.2.</b>
                    
                    hashmap源码
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1" data-path="../base/collection/hashmap源码/jdk1.7HashMap源码.html">
            
                <a href="../base/collection/hashmap源码/jdk1.7HashMap源码.html">
            
                    
                        <b>1.2.1.2.1.</b>
                    
                    jdk1.7HashMap源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.2" data-path="../base/collection/hashmap源码/jdk1.8ConcurrentHashMap源码.html">
            
                <a href="../base/collection/hashmap源码/jdk1.8ConcurrentHashMap源码.html">
            
                    
                        <b>1.2.1.2.2.</b>
                    
                    jdk1.8ConcurrentHashMap源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.3" data-path="../base/collection/hashmap源码/jdk1.8HashMap源码.html">
            
                <a href="../base/collection/hashmap源码/jdk1.8HashMap源码.html">
            
                    
                        <b>1.2.1.2.3.</b>
                    
                    jdk1.8HashMap源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                        <b>1.2.2.</b>
                    
                    String
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../base/string/StringBuffer和StringBuilder.html">
            
                <a href="../base/string/StringBuffer和StringBuilder.html">
            
                    
                        <b>1.2.2.1.</b>
                    
                    集合StringBuffer和StringBuilder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="../base/string/string源码.html">
            
                <a href="../base/string/string源码.html">
            
                    
                        <b>1.2.2.2.</b>
                    
                    string源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../base/string/string源码学习.html">
            
                <a href="../base/string/string源码学习.html">
            
                    
                        <b>1.2.2.3.</b>
                    
                    string源码学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../base/string/字符串string学习.html">
            
                <a href="../base/string/字符串string学习.html">
            
                    
                        <b>1.2.2.4.</b>
                    
                    字符串string学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../base/string/字符串string学习2-lg.html">
            
                <a href="../base/string/字符串string学习2-lg.html">
            
                    
                        <b>1.2.2.5.</b>
                    
                    字符串string学习2
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                        <b>1.2.3.</b>
                    
                    线程
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../base/线程/线程的状态.html">
            
                <a href="../base/线程/线程的状态.html">
            
                    
                        <b>1.2.3.1.</b>
                    
                    线程的状态
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../base/test.html">
            
                <a href="../base/test.html">
            
                    
                        <b>1.2.4.</b>
                    
                    Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../base/基本类型装箱拆箱.html">
            
                <a href="../base/基本类型装箱拆箱.html">
            
                    
                        <b>1.2.5.</b>
                    
                    集合基本类型装箱拆箱
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                        <b>1.3.</b>
                    
                    Design Patterns
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                        <b>1.3.1.</b>
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../designPatterns/spring/spring享元模式.html">
            
                <a href="../designPatterns/spring/spring享元模式.html">
            
                    
                        <b>1.3.1.1.</b>
                    
                    spring享元模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../designPatterns/spring/spring代理模式.html">
            
                <a href="../designPatterns/spring/spring代理模式.html">
            
                    
                        <b>1.3.1.2.</b>
                    
                    spring代理模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../designPatterns/spring/spring策略模式.html">
            
                <a href="../designPatterns/spring/spring策略模式.html">
            
                    
                        <b>1.3.1.3.</b>
                    
                    spring策略模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                        <b>1.4.</b>
                    
                    Jvm
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../jvm/jvm内存模型.html">
            
                <a href="../jvm/jvm内存模型.html">
            
                    
                        <b>1.4.1.</b>
                    
                    jvm内存模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../jvm/jvm参数.html">
            
                <a href="../jvm/jvm参数.html">
            
                    
                        <b>1.4.2.</b>
                    
                    jvm参数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                        <b>1.5.</b>
                    
                    Mybatis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" >
            
                <span>
            
                    
                        <b>1.5.1.</b>
                    
                    mybatis分页插件
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../mybatis/mybatis分页插件/mybatis插件引入.html">
            
                <a href="../mybatis/mybatis分页插件/mybatis插件引入.html">
            
                    
                        <b>1.5.1.1.</b>
                    
                    mybatis插件引入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="../mybatis/mybatis分页插件/Page.html">
            
                <a href="../mybatis/mybatis分页插件/Page.html">
            
                    
                        <b>1.5.1.2.</b>
                    
                    Page
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="../mybatis/mybatis分页插件/PagePlugin.html">
            
                <a href="../mybatis/mybatis分页插件/PagePlugin.html">
            
                    
                        <b>1.5.1.3.</b>
                    
                    Page Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.4" data-path="../mybatis/mybatis分页插件/ReflectHelper.html">
            
                <a href="../mybatis/mybatis分页插件/ReflectHelper.html">
            
                    
                        <b>1.5.1.4.</b>
                    
                    Reflect Helper
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                        <b>1.5.2.</b>
                    
                    mybatis分页插件2
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../mybatis/mybatis分页插件2/mybatis插件引入.html">
            
                <a href="../mybatis/mybatis分页插件2/mybatis插件引入.html">
            
                    
                        <b>1.5.2.1.</b>
                    
                    mybatis插件引入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../mybatis/mybatis分页插件2/PageInterceptor.html">
            
                <a href="../mybatis/mybatis分页插件2/PageInterceptor.html">
            
                    
                        <b>1.5.2.2.</b>
                    
                    Page Interceptor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../mybatis/mybatis分页插件2/Pagination.html">
            
                <a href="../mybatis/mybatis分页插件2/Pagination.html">
            
                    
                        <b>1.5.2.3.</b>
                    
                    Pagination
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../mybatis/mybatis-view1.html">
            
                <a href="../mybatis/mybatis-view1.html">
            
                    
                        <b>1.5.3.</b>
                    
                    Mybatis View 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../mybatis/mybatis学习.html">
            
                <a href="../mybatis/mybatis学习.html">
            
                    
                        <b>1.5.4.</b>
                    
                    mybatis学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../mybatis/mybatis源码.html">
            
                <a href="../mybatis/mybatis源码.html">
            
                    
                        <b>1.5.5.</b>
                    
                    mybatis源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../mybatis/mybatis源码学习总结1.html">
            
                <a href="../mybatis/mybatis源码学习总结1.html">
            
                    
                        <b>1.5.6.</b>
                    
                    mybatis源码学习总结1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../mybatis/mybatis源码学习总结2.html">
            
                <a href="../mybatis/mybatis源码学习总结2.html">
            
                    
                        <b>1.5.7.</b>
                    
                    mybatis源码学习总结2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../mybatis/mybatis用法.html">
            
                <a href="../mybatis/mybatis用法.html">
            
                    
                        <b>1.5.8.</b>
                    
                    mybatis用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../mybatis/常见mybatis用法.html">
            
                <a href="../mybatis/常见mybatis用法.html">
            
                    
                        <b>1.5.9.</b>
                    
                    常见mybatis用法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                        <b>1.6.</b>
                    
                    Mybatis Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../mybatis-spring/Mybatis-Spring源码分析.html">
            
                <a href="../mybatis-spring/Mybatis-Spring源码分析.html">
            
                    
                        <b>1.6.1.</b>
                    
                    Mybatis-Spring源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                        <b>1.7.</b>
                    
                    Redis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../redis/缓存.html">
            
                <a href="../redis/缓存.html">
            
                    
                        <b>1.7.1.</b>
                    
                    缓存
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                        <b>1.8.</b>
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" >
            
                <span>
            
                    
                        <b>1.8.1.</b>
                    
                    Aop
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="../spring/aop/aop动态代理学习.html">
            
                <a href="../spring/aop/aop动态代理学习.html">
            
                    
                        <b>1.8.1.1.</b>
                    
                    aop动态代理学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" data-path="../spring/aop/aop学习.html">
            
                <a href="../spring/aop/aop学习.html">
            
                    
                        <b>1.8.1.2.</b>
                    
                    mybatis学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.3" data-path="../spring/aop/JdkDanymicAopProxy源码.html">
            
                <a href="../spring/aop/JdkDanymicAopProxy源码.html">
            
                    
                        <b>1.8.1.3.</b>
                    
                    JdkDanymicAopProxy源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" >
            
                <span>
            
                    
                        <b>1.8.2.</b>
                    
                    Ioc
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="../spring/ioc/bean实例化过程.html">
            
                <a href="../spring/ioc/bean实例化过程.html">
            
                    
                        <b>1.8.2.1.</b>
                    
                    bean实例化过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="../spring/ioc/spring-ioc原理.html">
            
                <a href="../spring/ioc/spring-ioc原理.html">
            
                    
                        <b>1.8.2.2.</b>
                    
                    spring-ioc原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" >
            
                <span>
            
                    
                        <b>1.8.3.</b>
                    
                    事务
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="../spring/事务/spring事务管理.html">
            
                <a href="../spring/事务/spring事务管理.html">
            
                    
                        <b>1.8.3.1.</b>
                    
                    spring事务管理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                        <b>1.9.</b>
                    
                    Springboot
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" >
            
                <span>
            
                    
                        <b>1.9.1.</b>
                    
                    springboot配置
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="../springboot/springboot配置/springboot配置文件加载分析.html">
            
                <a href="../springboot/springboot配置/springboot配置文件加载分析.html">
            
                    
                        <b>1.9.1.1.</b>
                    
                    springboot配置文件加载分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="../springboot/springboot配置/修改springboot默认加载application-properties文件.html">
            
                <a href="../springboot/springboot配置/修改springboot默认加载application-properties文件.html">
            
                    
                        <b>1.9.1.2.</b>
                    
                    修改springboot默认加载application.properties文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" >
            
                <span>
            
                    
                        <b>1.9.2.</b>
                    
                    监听器
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.2.1" data-path="../springboot/监听器/springboot监听器.html">
            
                <a href="../springboot/监听器/springboot监听器.html">
            
                    
                        <b>1.9.2.1.</b>
                    
                    springboot监听器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../springboot/SpringApplication源码分析.html">
            
                <a href="../springboot/SpringApplication源码分析.html">
            
                    
                        <b>1.9.3.</b>
                    
                    SpringApplication源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                        <b>1.10.</b>
                    
                    Zother 1 Java Face Notes
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../zother1-JavaFaceNotes/Dubbo.html">
            
                <a href="../zother1-JavaFaceNotes/Dubbo.html">
            
                    
                        <b>1.10.1.</b>
                    
                    Dubbo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../zother1-JavaFaceNotes/IO&NIO.html">
            
                <a href="../zother1-JavaFaceNotes/IO&NIO.html">
            
                    
                        <b>1.10.2.</b>
                    
                    IO NIO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../zother1-JavaFaceNotes/Java基础.html">
            
                <a href="../zother1-JavaFaceNotes/Java基础.html">
            
                    
                        <b>1.10.3.</b>
                    
                    Java基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../zother1-JavaFaceNotes/java集合.html">
            
                <a href="../zother1-JavaFaceNotes/java集合.html">
            
                    
                        <b>1.10.4.</b>
                    
                    java集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../zother1-JavaFaceNotes/JVM.html">
            
                <a href="../zother1-JavaFaceNotes/JVM.html">
            
                    
                        <b>1.10.5.</b>
                    
                    JVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../zother1-JavaFaceNotes/Kafka.html">
            
                <a href="../zother1-JavaFaceNotes/Kafka.html">
            
                    
                        <b>1.10.6.</b>
                    
                    Kafka
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../zother1-JavaFaceNotes/Linux.html">
            
                <a href="../zother1-JavaFaceNotes/Linux.html">
            
                    
                        <b>1.10.7.</b>
                    
                    Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../zother1-JavaFaceNotes/Mybatis.html">
            
                <a href="../zother1-JavaFaceNotes/Mybatis.html">
            
                    
                        <b>1.10.8.</b>
                    
                    Mybatis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="../zother1-JavaFaceNotes/MySql.html">
            
                <a href="../zother1-JavaFaceNotes/MySql.html">
            
                    
                        <b>1.10.9.</b>
                    
                    My Sql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.10" data-path="../zother1-JavaFaceNotes/Nginx.html">
            
                <a href="../zother1-JavaFaceNotes/Nginx.html">
            
                    
                        <b>1.10.10.</b>
                    
                    Nginx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.11" data-path="../zother1-JavaFaceNotes/Redis.html">
            
                <a href="../zother1-JavaFaceNotes/Redis.html">
            
                    
                        <b>1.10.11.</b>
                    
                    Redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.12" data-path="../zother1-JavaFaceNotes/Spring.html">
            
                <a href="../zother1-JavaFaceNotes/Spring.html">
            
                    
                        <b>1.10.12.</b>
                    
                    Spring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.13" data-path="../zother1-JavaFaceNotes/SpringBoot.html">
            
                <a href="../zother1-JavaFaceNotes/SpringBoot.html">
            
                    
                        <b>1.10.13.</b>
                    
                    Spring Boot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.14" data-path="../zother1-JavaFaceNotes/SpringCloud.html">
            
                <a href="../zother1-JavaFaceNotes/SpringCloud.html">
            
                    
                        <b>1.10.14.</b>
                    
                    Spring Cloud
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.15" data-path="../zother1-JavaFaceNotes/多线程.html">
            
                <a href="../zother1-JavaFaceNotes/多线程.html">
            
                    
                        <b>1.10.15.</b>
                    
                    多线程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.16" data-path="../zother1-JavaFaceNotes/异常&反射.html">
            
                <a href="../zother1-JavaFaceNotes/异常&反射.html">
            
                    
                        <b>1.10.16.</b>
                    
                    异常&反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.17" data-path="../zother1-JavaFaceNotes/简历.html">
            
                <a href="../zother1-JavaFaceNotes/简历.html">
            
                    
                        <b>1.10.17.</b>
                    
                    简历
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="./">
            
                <a href="./">
            
                    
                        <b>1.11.</b>
                    
                    Zother 5 Java Interview
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="Java基础学习.html">
            
                <a href="Java基础学习.html">
            
                    
                        <b>1.11.1.</b>
                    
                    Java基础学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="Java集合面试题及答案.html">
            
                <a href="Java集合面试题及答案.html">
            
                    
                        <b>1.11.2.</b>
                    
                    Java集合面试题及答案
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11.3" data-path="一、Java基础.html">
            
                <a href="一、Java基础.html">
            
                    
                        <b>1.11.3.</b>
                    
                    一、Java基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="七、JavaWeb.html">
            
                <a href="七、JavaWeb.html">
            
                    
                        <b>1.11.4.</b>
                    
                    七、JavaWeb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="三、Java 集合.html">
            
                <a href="三、Java 集合.html">
            
                    
                        <b>1.11.5.</b>
                    
                    三、Java 集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="九、操作系统.html">
            
                <a href="九、操作系统.html">
            
                    
                        <b>1.11.6.</b>
                    
                    九、操作系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="二、设计模式.html">
            
                <a href="二、设计模式.html">
            
                    
                        <b>1.11.7.</b>
                    
                    二、设计模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="二十、Spring源码解析.html">
            
                <a href="二十、Spring源码解析.html">
            
                    
                        <b>1.11.8.</b>
                    
                    二十、Spring源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="二十一、Tomcat源码解析.html">
            
                <a href="二十一、Tomcat源码解析.html">
            
                    
                        <b>1.11.9.</b>
                    
                    二十一、Tomcat源码解析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="五、JVM.html">
            
                <a href="五、JVM.html">
            
                    
                        <b>1.11.10.</b>
                    
                    五、JVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.11" data-path="八、Mysql.html">
            
                <a href="八、Mysql.html">
            
                    
                        <b>1.11.11.</b>
                    
                    八、Mysql
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                        <b>1.12.</b>
                    
                    Zother 7 Java Interview
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" >
            
                <span>
            
                    
                        <b>1.12.1.</b>
                    
                    Data Structures Algorithms
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1.1" data-path="../zother7-JavaInterview/dataStructures-algorithms/算法面试真题汇总.html">
            
                <a href="../zother7-JavaInterview/dataStructures-algorithms/算法面试真题汇总.html">
            
                    
                        <b>1.12.1.1.</b>
                    
                    算法面试真题汇总
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.2" data-path="../zother7-JavaInterview/dataStructures-algorithms/算法题目难点题目总结.html">
            
                <a href="../zother7-JavaInterview/dataStructures-algorithms/算法题目难点题目总结.html">
            
                    
                        <b>1.12.1.2.</b>
                    
                    算法题目难点题目总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.3" data-path="../zother7-JavaInterview/dataStructures-algorithms/递归套路总结.html">
            
                <a href="../zother7-JavaInterview/dataStructures-algorithms/递归套路总结.html">
            
                    
                        <b>1.12.1.3.</b>
                    
                    递归套路总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.2" >
            
                <span>
            
                    
                        <b>1.12.2.</b>
                    
                    Interview
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.2.1" data-path="../zother7-JavaInterview/interview/已投公司情况.html">
            
                <a href="../zother7-JavaInterview/interview/已投公司情况.html">
            
                    
                        <b>1.12.2.1.</b>
                    
                    已投公司情况
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2.2" data-path="../zother7-JavaInterview/interview/自我介绍和项目介绍.html">
            
                <a href="../zother7-JavaInterview/interview/自我介绍和项目介绍.html">
            
                    
                        <b>1.12.2.2.</b>
                    
                    自我介绍和项目介绍
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.3" >
            
                <span>
            
                    
                        <b>1.12.3.</b>
                    
                    Interview Experience
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.3.1" data-path="../zother7-JavaInterview/interview-experience/各大公司面经.html">
            
                <a href="../zother7-JavaInterview/interview-experience/各大公司面经.html">
            
                    
                        <b>1.12.3.1.</b>
                    
                    各大公司面经
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.2" data-path="../zother7-JavaInterview/interview-experience/面试常见知识.html">
            
                <a href="../zother7-JavaInterview/interview-experience/面试常见知识.html">
            
                    
                        <b>1.12.3.2.</b>
                    
                    面试常见知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3.3" data-path="../zother7-JavaInterview/interview-experience/面试常见问题分类汇总.html">
            
                <a href="../zother7-JavaInterview/interview-experience/面试常见问题分类汇总.html">
            
                    
                        <b>1.12.3.3.</b>
                    
                    面试常见问题分类汇总
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.4" >
            
                <span>
            
                    
                        <b>1.12.4.</b>
                    
                    Microservice
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.4.1" data-path="../zother7-JavaInterview/microservice/微服务相关资料.html">
            
                <a href="../zother7-JavaInterview/microservice/微服务相关资料.html">
            
                    
                        <b>1.12.4.1.</b>
                    
                    微服务相关资料
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.5" >
            
                <span>
            
                    
                        <b>1.12.5.</b>
                    
                    Network
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.5.1" data-path="../zother7-JavaInterview/network/http面试问题全解析.html">
            
                <a href="../zother7-JavaInterview/network/http面试问题全解析.html">
            
                    
                        <b>1.12.5.1.</b>
                    
                    http面试问题全解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.6" >
            
                <span>
            
                    
                        <b>1.12.6.</b>
                    
                    Operating System
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.6.1" data-path="../zother7-JavaInterview/operating-system/后端程序员必备的Linux基础知识.html">
            
                <a href="../zother7-JavaInterview/operating-system/后端程序员必备的Linux基础知识.html">
            
                    
                        <b>1.12.6.1.</b>
                    
                    后端程序员必备的Linux基础知识
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.6.2" data-path="../zother7-JavaInterview/operating-system/操作系统、计算机网络相关知识.html">
            
                <a href="../zother7-JavaInterview/operating-system/操作系统、计算机网络相关知识.html">
            
                    
                        <b>1.12.6.2.</b>
                    
                    操作系统、计算机网络相关知识
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.7" >
            
                <span>
            
                    
                        <b>1.12.7.</b>
                    
                    Project
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.7.1" data-path="../zother7-JavaInterview/project/消息中间件面试题.html">
            
                <a href="../zother7-JavaInterview/project/消息中间件面试题.html">
            
                    
                        <b>1.12.7.1.</b>
                    
                    消息中间件面试题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.7.2" data-path="../zother7-JavaInterview/project/秒杀项目总结.html">
            
                <a href="../zother7-JavaInterview/project/秒杀项目总结.html">
            
                    
                        <b>1.12.7.2.</b>
                    
                    秒杀项目总结
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../学习路线.html">
            
                <a href="../学习路线.html">
            
                    
                        <b>1.13.</b>
                    
                    学习路线
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >一、Java基础</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <ul>
<li>&#x672C;github&#x6700;&#x521D;&#x7684;&#x7248;&#x672C;&#x662F;&#x4E00;&#x4EFD;word&#x6587;&#x6863;&#xFF0C;&#x76EE;&#x524D;&#x53EA;&#x662F;&#x628A;word&#x521A;&#x521A;&#x642C;&#x4E0A;&#x6765;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x56FE;&#x7247;&#x3001;&#x6392;&#x7248;&#x8FD8;&#x6CA1;&#x6765;&#x5F97;&#x6025;&#x6574;&#x7406;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x6709;&#x70B9;&#x56F0;&#x96BE;</li>
<li>&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5148;&#x5173;&#x6CE8;&#x4E00;&#x4E0B;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x5728;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x540E;&#x53F0;&#x56DE;&#x590D; <strong>888</strong> &#x83B7;&#x53D6;&#x8FD9;&#x4E2A;github&#x4ED3;&#x5E93;&#x7684;PDF&#x7248;&#x672C;&#xFF0C;&#x5DE6;&#x4FA7;&#x6709;&#x5BFC;&#x822A;&#x680F;&#xFF0C;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x9605;&#x8BFB;&#x3002;</li>
</ul>
<p><img src="http://ww1.sinaimg.cn/large/007s8HJUly1g0fkgcpy8cj30760760t7.jpg" alt=""></p>
<h1 id="java"><a name="java" class="plugin-anchor" href="#java"><i class="fa fa-link" aria-hidden="true"></i></a>Java</h1>
<ul>
<li>Oracle JDK&#x6709;&#x90E8;&#x5206;&#x6E90;&#x7801;&#x662F;&#x95ED;&#x6E90;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x786E;&#x5B9E;&#x9700;&#x8981;&#x53EF;&#x4EE5;&#x67E5;&#x770B;OpenJDK&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8BE5;&#x7F51;&#x7AD9;&#x83B7;&#x53D6;&#x3002;</li>
<li><a href="http://grepcode.com/snapshot/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/" target="_blank">http://grepcode.com/snapshot/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/</a></li>
<li><a href="http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/73d5bcd0585d/src" target="_blank">http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/73d5bcd0585d/src</a></li>
<li>&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x8FD8;&#x53EF;&#x4EE5;&#x67E5;&#x770B;native&#x65B9;&#x6CD5;&#x3002;<h1 id="11-jdkjrejvm"><a name="11-jdkjrejvm" class="plugin-anchor" href="#11-jdkjrejvm"><i class="fa fa-link" aria-hidden="true"></i></a>1.1 JDK&amp;JRE&amp;JVM</h1>
</li>
<li>JDK&#xFF08;Java Development Kit)&#x662F;&#x9488;&#x5BF9;Java&#x5F00;&#x53D1;&#x5458;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x662F;&#x6574;&#x4E2A;Java&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x5305;&#x62EC;&#x4E86;Java&#x8FD0;&#x884C;&#x73AF;&#x5883;JRE&#x3001;Java&#x5DE5;&#x5177;&#xFF08;&#x7F16;&#x8BD1;&#x3001;&#x5F00;&#x53D1;&#x5DE5;&#x5177;)&#x548C;Java&#x6838;&#x5FC3;&#x7C7B;&#x5E93;&#x3002;</li>
<li>Java Runtime Environment&#xFF08;JRE)&#x662F;&#x8FD0;&#x884C;JAVA&#x7A0B;&#x5E8F;&#x6240;&#x5FC5;&#x987B;&#x7684;&#x73AF;&#x5883;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x5305;&#x542B;JVM&#x6807;&#x51C6;&#x5B9E;&#x73B0;&#x53CA;Java&#x6838;&#x5FC3;&#x7C7B;&#x5E93;&#x3002;</li>
<li><p>JVM&#x662F;Java Virtual Machine&#xFF08;Java&#x865A;&#x62DF;&#x673A;)&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x662F;&#x6574;&#x4E2A;java&#x5B9E;&#x73B0;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x6700;&#x6838;&#x5FC3;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x80FD;&#x591F;&#x8FD0;&#x884C;&#x4EE5;Java&#x8BED;&#x8A00;&#x5199;&#x4F5C;&#x7684;&#x8F6F;&#x4EF6;&#x7A0B;&#x5E8F;&#x3002;</p>
</li>
<li><p>JDK&#x5305;&#x542B;JRE&#x548C;Java&#x7F16;&#x8BD1;&#x3001;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF1B;</p>
</li>
<li>JRE&#x5305;&#x542B;JVM&#x548C;Java&#x6838;&#x5FC3;&#x7C7B;&#x5E93;&#xFF1B;</li>
<li>&#x8FD0;&#x884C;Java&#x4EC5;&#x9700;&#x8981;JRE&#xFF1B;&#x800C;&#x5F00;&#x53D1;Java&#x9700;&#x8981;JDK&#x3002;<h1 id="12-&#x8DE8;&#x5E73;&#x53F0;"><a name="12-&#x8DE8;&#x5E73;&#x53F0;" class="plugin-anchor" href="#12-&#x8DE8;&#x5E73;&#x53F0;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2 &#x8DE8;&#x5E73;&#x53F0;</h1>
</li>
<li>&#x5B57;&#x8282;&#x7801;&#x662F;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x5668;&#x3002;&#x6362;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;JVM&#x80FD;&#x8DE8;&#x5E73;&#x53F0;&#x5B89;&#x88C5;&#xFF0C;&#x6240;&#x4EE5;&#x76F8;&#x5E94;JAVA&#x5B57;&#x8282;&#x7801;&#x4FBF;&#x53EF;&#x4EE5;&#x8DDF;&#x7740;&#x5728;&#x4EFB;&#x4F55;&#x5E73;&#x53F0;&#x4E0A;&#x8FD0;&#x884C;&#x3002;&#x53EA;&#x8981;JVM&#x81EA;&#x8EAB;&#x7684;&#x4EE3;&#x7801;&#x80FD;&#x5728;&#x76F8;&#x5E94;&#x5E73;&#x53F0;&#x4E0A;&#x8FD0;&#x884C;&#xFF0C;&#x5373;JVM&#x53EF;&#x884C;&#xFF0C;&#x5219;JAVA&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x5C31;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x6240;&#x5199;&#x7684;&#x7A0B;&#x5E8F;&#x8981;&#x5728;&#x54EA;&#x91CC;&#x8FD0;&#x884C;&#xFF0C;&#x53CD;&#x6B63;&#x90FD;&#x662F;&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E0A;&#x8FD0;&#x884C;&#xFF0C;&#x7136;&#x540E;&#x53D8;&#x6210;&#x76F8;&#x5E94;&#x5E73;&#x53F0;&#x7684;&#x673A;&#x5668;&#x8BED;&#x8A00;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x8F6C;&#x53D8;&#x5E76;&#x4E0D;&#x662F;&#x7A0B;&#x5E8F;&#x5458;&#x5E94;&#x8BE5;&#x5173;&#x5FC3;&#x7684;&#x3002;<h1 id="13-&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;"><a name="13-&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;" class="plugin-anchor" href="#13-&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3 &#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;</h1>
</li>
<li>&#x7B2C;&#x4E00;&#x7C7B;&#xFF1A;&#x6574;&#x578B; byte short int long </li>
<li>&#x7B2C;&#x4E8C;&#x7C7B;&#xFF1A;&#x6D6E;&#x70B9;&#x578B; float double</li>
<li>&#x7B2C;&#x4E09;&#x7C7B;&#xFF1A;&#x903B;&#x8F91;&#x578B; boolean(&#x5B83;&#x53EA;&#x6709;&#x4E24;&#x4E2A;&#x503C;&#x53EF;&#x53D6;true false)</li>
<li><p>&#x7B2C;&#x56DB;&#x7C7B;&#xFF1A;&#x5B57;&#x7B26;&#x578B; char</p>
<ul>
<li>byte(1)&#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x4E3A;-128~127&#xFF08;-2&#x7684;7&#x6B21;&#x65B9;&#x5230;2&#x7684;7&#x6B21;&#x65B9;-1)</li>
<li>short(2)&#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x4E3A;-32768~32767&#xFF08;-2&#x7684;15&#x6B21;&#x65B9;&#x5230;2&#x7684;15&#x6B21;&#x65B9;-1)</li>
<li>int(4)&#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x4E3A;&#xFF08;-2147483648~2147483647)&#xFF08;-2&#x7684;31&#x6B21;&#x65B9;&#x5230;2&#x7684;31&#x6B21;&#x65B9;-1)</li>
<li>long(8)&#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x4E3A;&#xFF08;-9223372036854774808~9223372036854774807)&#xFF08;-2&#x7684;63&#x6B21;&#x65B9;&#x5230;2&#x7684;63&#x6B21;&#x65B9;-1)</li>
<li>float(4)</li>
<li>double(8)</li>
<li>char(2)</li>
<li>boolean(1/8)</li>
</ul>
</li>
<li><p>&#x5185;&#x7801;&#x662F;&#x7A0B;&#x5E8F;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x67D0;&#x79CD;&#x8BED;&#x8A00;&#x5B9E;&#x73B0;&#x5176;char&#x6216;String&#x7C7B;&#x578B;&#x5728;&#x5185;&#x5B58;&#x91CC;&#x7528;&#x7684;&#x5185;&#x90E8;&#x7F16;&#x7801;&#xFF1B;&#x5916;&#x7801;&#x662F;&#x7A0B;&#x5E8F;&#x4E0E;&#x5916;&#x90E8;&#x4EA4;&#x4E92;&#x65F6;&#x5916;&#x90E8;&#x4F7F;&#x7528;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;&#x201C;&#x5916;&#x90E8;&#x201D;&#x76F8;&#x5BF9;&#x201C;&#x5185;&#x90E8;&#x201D;&#x800C;&#x8A00;&#xFF1B;&#x4E0D;&#x662F;char&#x6216;String&#x5728;&#x5185;&#x5B58;&#x91CC;&#x7528;&#x7684;&#x5185;&#x90E8;&#x7F16;&#x7801;&#x7684;&#x5730;&#x65B9;&#x90FD;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;&#x201C;&#x5916;&#x90E8;&#x201D;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5916;&#x90E8;&#x53EF;&#x4EE5;&#x662F;&#x5E8F;&#x5217;&#x5316;&#x4E4B;&#x540E;&#x7684;char&#x6216;String&#xFF0C;&#x6216;&#x8005;&#x5916;&#x90E8;&#x7684;&#x6587;&#x4EF6;&#x3001;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#x4E4B;&#x7C7B;&#x7684;&#x3002;</p>
</li>
<li>Java&#x8BED;&#x8A00;&#x89C4;&#x8303;&#x89C4;&#x5B9A;&#xFF0C;Java&#x7684;char&#x7C7B;&#x578B;&#x662F;UTF-16&#x7684;code unit&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E00;&#x5B9A;&#x662F;16&#x4F4D;&#xFF08;2&#x5B57;&#x8282;)&#xFF0C;&#x7136;&#x540E;&#x5B57;&#x7B26;&#x4E32;&#x662F;UTF-16 code unit&#x7684;&#x5E8F;&#x5217;&#x3002;</li>
<li><p>Java&#x89C4;&#x5B9A;&#x4E86;&#x5B57;&#x7B26;&#x7684;&#x5185;&#x7801;&#x8981;&#x7528;UTF-16&#x7F16;&#x7801;&#x3002;&#x6216;&#x8005;&#x81F3;&#x5C11;&#x8981;&#x8BA9;&#x7528;&#x6237;&#x65E0;&#x6CD5;&#x611F;&#x77E5;&#x5230;String&#x5185;&#x90E8;&#x91C7;&#x7528;&#x4E86;&#x975E;UTF-16&#x7684;&#x7F16;&#x7801;&#x3002;</p>
</li>
<li><p>String.getBytes()&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x5C06;String&#x7684;&#x5185;&#x7801;&#x8F6C;&#x6362;&#x4E3A;&#x6307;&#x5B9A;&#x7684;&#x5916;&#x7801;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x65E0;&#x53C2;&#x6570;&#x7248;&#x4F7F;&#x7528;&#x5E73;&#x53F0;&#x7684;&#x9ED8;&#x8BA4;&#x7F16;&#x7801;&#x4F5C;&#x4E3A;&#x5916;&#x7801;&#xFF0C;&#x6709;&#x53C2;&#x6570;&#x7248;&#x4F7F;&#x7528;&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x7684;&#x7F16;&#x7801;&#x4F5C;&#x4E3A;&#x5916;&#x7801;&#xFF1B;&#x5C06;String&#x7684;&#x5185;&#x5BB9;&#x7528;&#x5916;&#x7801;&#x7F16;&#x7801;&#x597D;&#xFF0C;&#x7ED3;&#x679C;&#x653E;&#x5728;&#x4E00;&#x4E2A;&#x65B0;byte[]&#x8FD4;&#x56DE;&#x3002;&#x8C03;&#x7528;&#x4E86;String.getBytes()&#x4E4B;&#x540E;&#x5F97;&#x5230;&#x7684;byte[]&#x53EA;&#x80FD;&#x8868;&#x660E;&#x8BE5;&#x5916;&#x7801;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x800C;&#x65E0;&#x6CD5;&#x78B0;&#x89E6;&#x5230;String&#x5185;&#x7801;&#x7684;&#x4EFB;&#x4F55;&#x7279;&#x8D28;&#x3002;</p>
<ul>
<li>Java&#x6807;&#x51C6;&#x5E93;&#x5B9E;&#x73B0;&#x7684;&#x5BF9;char&#x4E0E;String&#x7684;&#x5E8F;&#x5217;&#x5316;&#x89C4;&#x5B9A;&#x4F7F;&#x7528;UTF-8&#x4F5C;&#x4E3A;&#x5916;&#x7801;&#x3002;Java&#x7684;Class&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x4E0E;&#x7B26;&#x53F7;&#x540D;&#x5B57;&#x4E5F;&#x90FD;&#x89C4;&#x5B9A;&#x7528;UTF-8&#x7F16;&#x7801;&#x3002;&#x8FD9;&#x5927;&#x6982;&#x662F;&#x5F53;&#x65F6;&#x8BBE;&#x8BA1;&#x8005;&#x4E3A;&#x4E86;&#x5E73;&#x8861;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x6548;&#x7387;&#xFF08;&#x91C7;&#x7528;&#x5B9A;&#x957F;&#x7F16;&#x7801;&#x7684;UTF-16)&#x4E0E;&#x5916;&#x90E8;&#x5B58;&#x50A8;&#x7684;&#x7A7A;&#x95F4;&#x6548;&#x7387;&#xFF08;&#x91C7;&#x7528;&#x53D8;&#x957F;&#x7684;UTF-8&#x7F16;&#x7801;)&#x800C;&#x505A;&#x7684;&#x53D6;&#x820D;&#x3002;</li>
</ul>
</li>
</ul>
<h1 id="14-&#x5F15;&#x7528;&#x7C7B;&#x578B;"><a name="14-&#x5F15;&#x7528;&#x7C7B;&#x578B;" class="plugin-anchor" href="#14-&#x5F15;&#x7528;&#x7C7B;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4 &#x5F15;&#x7528;&#x7C7B;&#x578B;</h1>
<ul>
<li>&#x7C7B;&#x3001;&#x63A5;&#x53E3;&#x3001;&#x6570;&#x7EC4;&#x90FD;&#x662F;&#x5F15;&#x7528;&#x7C7B;&#x578B;<h2 id="&#x56DB;&#x79CD;&#x5F15;&#x7528;"><a name="&#x56DB;&#x79CD;&#x5F15;&#x7528;" class="plugin-anchor" href="#&#x56DB;&#x79CD;&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x56DB;&#x79CD;&#x5F15;&#x7528;</h2>
</li>
<li>&#x76EE;&#x7684;&#xFF1A;&#x907F;&#x514D;&#x5BF9;&#x8C61;&#x957F;&#x671F;&#x5360;&#x7528;&#x5185;&#x5B58;&#xFF0C;</li>
</ul>
<h3 id="&#x5F3A;&#x5F15;&#x7528;"><a name="&#x5F3A;&#x5F15;&#x7528;" class="plugin-anchor" href="#&#x5F3A;&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5F3A;&#x5F15;&#x7528;</h3>
<ul>
<li>StringReference GC&#x65F6;&#x4E0D;&#x56DE;&#x6536;</li>
<li>&#x5F53;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#xFF0C;Java&#x865A;&#x62DF;&#x673A;&#x5B81;&#x613F;&#x629B;&#x51FA;OutOfMemoryError&#x9519;&#x8BEF;&#xFF0C;&#x4F7F;&#x7A0B;&#x5E8F;&#x5F02;&#x5E38;&#x7EC8;&#x6B62;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x9760;&#x968F;&#x610F;&#x56DE;&#x6536;&#x5177;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x6765;&#x89E3;&#x51B3;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x95EE;&#x9898;&#x3002;<h3 id="&#x8F6F;&#x5F15;&#x7528;"><a name="&#x8F6F;&#x5F15;&#x7528;" class="plugin-anchor" href="#&#x8F6F;&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8F6F;&#x5F15;&#x7528;</h3>
</li>
<li>SoftReference GC&#x65F6;&#x5982;&#x679C;JVM&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x65F6;&#x4F1A;&#x56DE;&#x6536;</li>
<li>&#x8F6F;&#x5F15;&#x7528;&#x53EF;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x5185;&#x5B58;&#x654F;&#x611F;&#x7684;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x3002; &#x8F6F;&#x5F15;&#x7528;&#x53EF;&#x4EE5;&#x548C;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF08;ReferenceQueue)&#x8054;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x8F6F;&#x5F15;&#x7528;&#x6240;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;Java&#x865A;&#x62DF;&#x673A;&#x5C31;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A;&#x8F6F;&#x5F15;&#x7528;&#x52A0;&#x5165;&#x5230;&#x4E0E;&#x4E4B;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x3002;<h3 id="&#x5F31;&#x5F15;&#x7528;"><a name="&#x5F31;&#x5F15;&#x7528;" class="plugin-anchor" href="#&#x5F31;&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5F31;&#x5F15;&#x7528;</h3>
</li>
<li>WeakReference GC&#x65F6;&#x7ACB;&#x5373;&#x56DE;&#x6536;</li>
<li>&#x5F31;&#x5F15;&#x7528;&#x4E0E;&#x8F6F;&#x5F15;&#x7528;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF1A;&#x53EA;&#x5177;&#x6709;&#x5F31;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x62E5;&#x6709;&#x66F4;&#x77ED;&#x6682;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;</li>
<li>&#x5F31;&#x5F15;&#x7528;&#x53EF;&#x4EE5;&#x548C;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF08;ReferenceQueue)&#x8054;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x5F31;&#x5F15;&#x7528;&#x6240;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;Java&#x865A;&#x62DF;&#x673A;&#x5C31;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A;&#x5F31;&#x5F15;&#x7528;&#x52A0;&#x5165;&#x5230;&#x4E0E;&#x4E4B;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x3002;<h3 id="&#x865A;&#x5F15;&#x7528;"><a name="&#x865A;&#x5F15;&#x7528;" class="plugin-anchor" href="#&#x865A;&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x865A;&#x5F15;&#x7528;</h3>
</li>
<li>PhantomReference </li>
<li><p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x4EC5;&#x6301;&#x6709;&#x865A;&#x5F15;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x548C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5F15;&#x7528;&#x4E00;&#x6837;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x53EF;&#x80FD;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002; &#x865A;&#x5F15;&#x7528;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x8DDF;&#x8E2A;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x6D3B;&#x52A8;&#x3002;&#x865A;&#x5F15;&#x7528;&#x4E0E;&#x8F6F;&#x5F15;&#x7528;&#x548C;&#x5F31;&#x5F15;&#x7528;&#x7684;&#x4E00;&#x4E2A;&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF1A;&#x865A;&#x5F15;&#x7528;&#x5FC5;&#x987B;&#x548C;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF08;ReferenceQueue)&#x8054;&#x5408;&#x4F7F;&#x7528;&#x3002;&#x5F53;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x51C6;&#x5907;&#x56DE;&#x6536;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x5B83;&#x8FD8;&#x6709;&#x865A;&#x5F15;&#x7528;&#xFF0C;&#x5C31;&#x4F1A;&#x5728;&#x56DE;&#x6536;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x4E4B;&#x524D;&#xFF0C;&#x628A;&#x8FD9;&#x4E2A;&#x865A;&#x5F15;&#x7528;&#x52A0;&#x5165;&#x5230;&#x4E0E;&#x4E4B;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x3002;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5224;&#x65AD;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x52A0;&#x5165;&#x4E86;&#x865A;&#x5F15;&#x7528;&#xFF0C;&#x6765;&#x4E86;&#x89E3;&#x88AB;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5C06;&#x8981;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002;&#x7A0B;&#x5E8F;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x67D0;&#x4E2A;&#x865A;&#x5F15;&#x7528;&#x5DF2;&#x7ECF;&#x88AB;&#x52A0;&#x5165;&#x5230;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x6240;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x88AB;&#x56DE;&#x6536;&#x4E4B;&#x524D;&#x91C7;&#x53D6;&#x5FC5;&#x8981;&#x7684;&#x884C;&#x52A8;&#x3002;</p>
</li>
<li><p>&#x5728;Java&#x96C6;&#x5408;&#x4E2D;&#x6709;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;Map&#x7C7B;&#x578B;&#xFF1A;WeakHashMap&#xFF0C; &#x5728;&#x8FD9;&#x79CD;Map&#x4E2D;&#x5B58;&#x653E;&#x4E86;&#x952E;&#x5BF9;&#x8C61;&#x7684;&#x5F31;&#x5F15;&#x7528;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x952E;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x90A3;&#x4E48;&#x76F8;&#x5E94;&#x7684;&#x503C;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#x4F1A;&#x4ECE;Map&#x4E2D;&#x5220;&#x9664;&#x3002;WeakHashMap&#x80FD;&#x591F;&#x8282;&#x7EA6;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF0C;&#x53EF;&#x7528;&#x6765;&#x7F13;&#x5B58;&#x90A3;&#x4E9B;&#x975E;&#x5FC5;&#x987B;&#x5B58;&#x5728;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<h2 id="&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x7C7B;"><a name="&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x7C7B;" class="plugin-anchor" href="#&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x7C7B;</h2>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;"><a name="&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;" class="plugin-anchor" href="#&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E3A;&#x4EC0;&#x4E48;&#x9700;&#x8981;</h3>
</li>
<li>&#x7531;&#x4E8E;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E0D;&#x662F;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;java&#x5E76;&#x4E0D;&#x662F;&#x7EAF;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x597D;&#x5904;&#x662F;&#x6548;&#x7387;&#x8F83;&#x9AD8;&#xFF08;&#x5168;&#x90E8;&#x5305;&#x88C5;&#x4E3A;&#x5BF9;&#x8C61;&#x6548;&#x7387;&#x8F83;&#x4F4E;)&#x3002;</li>
<li>Java&#x662F;&#x4E00;&#x4E2A;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#xFF0C;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x5E76;&#x4E0D;&#x5177;&#x6709;&#x5BF9;&#x8C61;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x4E3A;&#x4E86;&#x8BA9;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x4E5F;&#x5177;&#x6709;&#x5BF9;&#x8C61;&#x7684;&#x7279;&#x5F81;&#xFF0C;&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x5305;&#x88C5;&#x7C7B;&#x578B;&#xFF08;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x96C6;&#x5408;&#x7C7B;&#x578B;Collection&#x65F6;&#x5C31;&#x4E00;&#x5B9A;&#x8981;&#x4F7F;&#x7528;&#x5305;&#x88C5;&#x7C7B;&#x578B;&#x800C;&#x975E;&#x57FA;&#x672C;&#x7C7B;&#x578B;)&#xFF0C;&#x5B83;&#x76F8;&#x5F53;&#x4E8E;&#x5C06;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x201C;&#x5305;&#x88C5;&#x8D77;&#x6765;&#x201D;&#xFF0C;&#x4F7F;&#x5F97;&#x5B83;&#x5177;&#x6709;&#x4E86;&#x5BF9;&#x8C61;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x5E76;&#x4E14;&#x4E3A;&#x5176;&#x6DFB;&#x52A0;&#x4E86;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#xFF0C;&#x4E30;&#x5BCC;&#x4E86;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x7684;&#x64CD;&#x4F5C;&#x3002;</li>
<li></li>
</ul>
<h3 id="&#x6709;&#x54EA;&#x4E9B;"><a name="&#x6709;&#x54EA;&#x4E9B;" class="plugin-anchor" href="#&#x6709;&#x54EA;&#x4E9B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6709;&#x54EA;&#x4E9B;</h3>
<p> &#x57FA;&#x672C;&#x7C7B;&#x578B;        &#x5305;&#x88C5;&#x5668;&#x7C7B;&#x578B;<br>boolean    Boolean
char    Character
int    Integer
byte    Byte
short    Short
long    Long
float    Float
double    Double</p>
<ul>
<li>Number&#x662F;&#x6240;&#x6709;&#x6570;&#x5B57;&#x5305;&#x88C5;&#x7C7B;&#x7684;&#x7236;&#x7C7B;<h3 id="&#x81EA;&#x52A8;&#x88C5;&#x7BB1;&#x3001;&#x81EA;&#x52A8;&#x62C6;&#x7BB1;&#xFF08;&#x7F16;&#x8BD1;&#x5668;&#x884C;&#x4E3A;"><a name="&#x81EA;&#x52A8;&#x88C5;&#x7BB1;&#x3001;&#x81EA;&#x52A8;&#x62C6;&#x7BB1;&#xFF08;&#x7F16;&#x8BD1;&#x5668;&#x884C;&#x4E3A;" class="plugin-anchor" href="#&#x81EA;&#x52A8;&#x88C5;&#x7BB1;&#x3001;&#x81EA;&#x52A8;&#x62C6;&#x7BB1;&#xFF08;&#x7F16;&#x8BD1;&#x5668;&#x884C;&#x4E3A;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x81EA;&#x52A8;&#x88C5;&#x7BB1;&#x3001;&#x81EA;&#x52A8;&#x62C6;&#x7BB1;&#xFF08;&#x7F16;&#x8BD1;&#x5668;&#x884C;&#x4E3A;)</h3>
</li>
<li>&#x81EA;&#x52A8;&#x88C5;&#x7BB1;&#xFF1A;&#x53EF;&#x4EE5;&#x5C06;&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x6210;&#x5BF9;&#x5E94;&#x7684;&#x5305;&#x88C5;&#x7C7B;</li>
<li>Integer i = 10000; // &#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x6539;&#x4E3A;new Integer(10000)</li>
<li>&#x81EA;&#x52A8;&#x62C6;&#x7BB1;&#xFF1A;&#x53EF;&#x4EE5;&#x5C06;&#x5305;&#x88C5;&#x7C7B;&#x8F6C;&#x4E3A;&#x5BF9;&#x5E94;&#x7684;&#x57FA;&#x7840;&#x6570;&#x636E;&#x7C7B;&#x578B;</li>
<li><p>int i = new Integer(1000);//&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x4FEE;&#x6539;&#x4E3A;   int i = new Integer(1000).intValue();</p>
</li>
<li><p>&#x81EA;&#x52A8;&#x62C6;&#x7BB1;&#x65F6;&#x5982;&#x679C;&#x5305;&#x88C5;&#x7C7B;&#x662F;null&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x629B;&#x51FA;NPE</p>
<h3 id="integervalueof"><a name="integervalueof" class="plugin-anchor" href="#integervalueof"><i class="fa fa-link" aria-hidden="true"></i></a>Integer.valueOf</h3>
</li>
</ul>
<pre><code>public static Integer valueOf(int i) {
    if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
}
</code></pre><ul>
<li>&#x8C03;&#x7528;Integer.valueOf&#x65F6;-128~127&#x7684;&#x5BF9;&#x8C61;&#x88AB;&#x7F13;&#x5B58;&#x8D77;&#x6765;&#x3002;</li>
<li>&#x6240;&#x4EE5;&#x5728;&#x6B64;&#x8BBF;&#x95EE;&#x5185;&#x7684;Integer&#x5BF9;&#x8C61;&#x4F7F;&#x7528;==&#x548C;equals&#x7ED3;&#x679C;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</li>
<li>&#x5982;&#x679C;Integer&#x7684;&#x503C;&#x4E00;&#x81F4;&#xFF0C;&#x4E14;&#x5728;&#x6B64;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;==&#x8FD4;&#x56DE;true&#xFF1B;&#x4F46;&#x6B64;&#x8BBF;&#x95EE;&#x4E4B;&#x5916;&#x7684;&#x5BF9;&#x8C61;==&#x6BD4;&#x8F83;&#x7684;&#x662F;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF0C;&#x503C;&#x76F8;&#x540C;&#xFF0C;&#x4E5F;&#x662F;&#x8FD4;&#x56DE;false&#x3002;</li>
</ul>
<h1 id="15-object"><a name="15-object" class="plugin-anchor" href="#15-object"><i class="fa fa-link" aria-hidden="true"></i></a>1.5 Object</h1>
<h2 id="&#x4E0E;-equals&#x7684;&#x533A;&#x522B;"><a name="&#x4E0E;-equals&#x7684;&#x533A;&#x522B;" class="plugin-anchor" href="#&#x4E0E;-equals&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>== &#x4E0E; equals&#x7684;&#x533A;&#x522B;</h2>
<ul>
<li>&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x53D8;&#x91CF;&#x4F7F;&#x7528;==&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x90A3;&#x4E48;&#x6BD4;&#x8F83;&#x7684;&#x662F;&#x5730;&#x5740;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x6307;&#x5411;&#x7684;&#x662F;&#x5426;&#x662F;&#x540C;&#x4E00;&#x5730;&#x5740;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x662F;false&#xFF0C;&#x56E0;&#x4E3A;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0D;&#x53EF;&#x80FD;&#x5B58;&#x653E;&#x5728;&#x540C;&#x4E00;&#x5730;&#x5740;&#x5904;&#x3002;</li>
<li>&#x8981;&#x6C42;&#x662F;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x4E0D;&#x662F;&#x80FD;&#x7A7A;&#x503C;&#xFF0C;&#x4E0E;&#x7A7A;&#x503C;&#x6BD4;&#x8F83;&#x8FD4;&#x56DE;false&#x3002;</li>
<li>==&#x4E0D;&#x80FD;&#x5B9E;&#x73B0;&#x6BD4;&#x8F83;&#x5BF9;&#x8C61;&#x7684;&#x503C;&#x662F;&#x5426;&#x76F8;&#x540C;&#x3002;</li>
<li>&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x90FD;&#x6709;equals&#x65B9;&#x6CD5;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;Object&#x7C7B;&#x7684;equals&#xFF0C;&#x5176;&#x7ED3;&#x679C;&#x4E0E;==&#x4E00;&#x6837;&#x3002;</li>
<li>&#x5982;&#x679C;&#x5E0C;&#x671B;&#x6BD4;&#x8F83;&#x5BF9;&#x8C61;&#x7684;&#x503C;&#x76F8;&#x540C;&#xFF0C;&#x5FC5;&#x987B;&#x91CD;&#x5199;equals&#x65B9;&#x6CD5;&#x3002;<h2 id="hashcode&#x4E0E;equals&#x7684;&#x533A;&#x522B;"><a name="hashcode&#x4E0E;equals&#x7684;&#x533A;&#x522B;" class="plugin-anchor" href="#hashcode&#x4E0E;equals&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>hashCode&#x4E0E;equals&#x7684;&#x533A;&#x522B;</h2>
</li>
<li>Object&#x4E2D;&#x7684;equals:</li>
</ul>
<pre><code>public boolean equals(Object obj) {
    return (this == obj);
}
</code></pre><ul>
<li>equals &#x65B9;&#x6CD5;&#x8981;&#x6C42;&#x6EE1;&#x8DB3;&#xFF1A;</li>
<li>&#x81EA;&#x53CD;&#x6027; a.equals(a)</li>
<li>&#x5BF9;&#x79F0;&#x6027; x.equals(y)  y.equals(x)</li>
<li>&#x4E00;&#x81F4;&#x6027; x.equals(y)  &#x591A;&#x6B21;&#x8C03;&#x7528;&#x7ED3;&#x679C;&#x4E00;&#x81F4;</li>
<li><p>&#x5BF9;&#x4E8E;&#x4EFB;&#x610F;&#x975E;&#x7A7A;&#x5F15;&#x7528;x&#xFF0C;x.equals(null) &#x5E94;&#x8BE5;&#x8FD4;&#x56DE;false</p>
</li>
<li><p>Object&#x4E2D;&#x7684;hashCode:</p>
</li>
</ul>
<pre><code>public native int hashCode();
</code></pre><ul>
<li>&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x4E0E;&#x672C;&#x5730;&#x673A;&#x5668;&#x6709;&#x5173;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x6682;&#x4E14;&#x8BA4;&#x4E3A;&#x4ED6;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x7684;&#x7269;&#x7406;&#x4F4D;&#x7F6E;&#x3002;</li>
<li><p>&#x5F53;equals&#x65B9;&#x6CD5;&#x88AB;&#x91CD;&#x5199;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x6709;&#x5FC5;&#x8981;&#x91CD;&#x5199;hashCode&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x7EF4;&#x62A4;hashCode&#x65B9;&#x6CD5;&#x7684;&#x5E38;&#x89C4;&#x7EA6;&#x5B9A;&#xFF1A;&#x503C;&#x76F8;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x5FC5;&#x987B;&#x6709;&#x76F8;&#x540C;&#x7684;hashCode&#x3002;</p>
<ul>
<li>object1.equals(object2)&#x4E3A;true&#xFF0C;hashCode&#x4E5F;&#x76F8;&#x540C;&#xFF1B;</li>
<li>hashCode&#x4E0D;&#x540C;&#x65F6;&#xFF0C;object1.equals(object2)&#x4E3A;false&#xFF1B;</li>
<li>hashCode&#x76F8;&#x540C;&#x65F6;&#xFF0C;object1.equals(object2)&#x4E0D;&#x4E00;&#x5B9A;&#x4E3A;true&#xFF1B;</li>
</ul>
</li>
<li><p>&#x5F53;&#x6211;&#x4EEC;&#x5411;&#x4E00;&#x4E2A;Hash&#x7ED3;&#x6784;&#x7684;&#x96C6;&#x5408;&#x4E2D;&#x6DFB;&#x52A0;&#x67D0;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x96C6;&#x5408;&#x4F1A;&#x9996;&#x5148;&#x8C03;&#x7528;hashCode&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5B9A;&#x4F4D;&#x5B83;&#x6240;&#x5B58;&#x50A8;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x82E5;&#x8BE5;&#x5904;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x4FDD;&#x5B58;&#x3002;&#x82E5;&#x8BE5;&#x5904;&#x5DF2;&#x7ECF;&#x6709;&#x5143;&#x7D20;&#x5B58;&#x5728;&#xFF0C;&#x5C31;&#x8C03;&#x7528;equals&#x65B9;&#x6CD5;&#x6765;&#x5339;&#x914D;&#x8FD9;&#x4E24;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x5426;&#x76F8;&#x540C;&#xFF0C;&#x76F8;&#x540C;&#x5219;&#x4E0D;&#x5B58;&#xFF0C;&#x4E0D;&#x540C;&#x5219;&#x94FE;&#x5230;&#x540E;&#x9762;&#xFF08;&#x5982;&#x679C;&#x662F;&#x94FE;&#x5730;&#x5740;&#x6CD5;)&#x3002;</p>
</li>
<li><p>&#x5148;&#x8C03;&#x7528;hashCode&#xFF0C;&#x552F;&#x4E00;&#x5219;&#x5B58;&#x50A8;&#xFF0C;&#x4E0D;&#x552F;&#x4E00;&#x5219;&#x518D;&#x8C03;&#x7528;equals&#xFF0C;&#x7ED3;&#x679C;&#x76F8;&#x540C;&#x5219;&#x4E0D;&#x518D;&#x5B58;&#x50A8;&#xFF0C;&#x7ED3;&#x679C;&#x4E0D;&#x540C;&#x5219;&#x6563;&#x5217;&#x5230;&#x5176;&#x4ED6;&#x4F4D;&#x7F6E;&#x3002;&#x56E0;&#x4E3A;hashCode&#x6548;&#x7387;&#x66F4;&#x9AD8;&#xFF08;&#x4EC5;&#x4E3A;&#x4E00;&#x4E2A;int&#x503C;)&#xFF0C;&#x6BD4;&#x8F83;&#x8D77;&#x6765;&#x66F4;&#x5FEB;&#x3002;</p>
</li>
<li><p>HashMap#put&#x6E90;&#x7801; </p>
</li>
<li>hash&#x662F;key&#x7684;hash&#x503C;&#xFF0C;&#x5F53;&#x8BE5;hash&#x5BF9;&#x5E94;&#x7684;&#x4F4D;&#x7F6E;&#x5DF2;&#x6709;&#x5143;&#x7D20;&#x65F6;&#x4F1A;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF08;hashCode&#x76F8;&#x540C;)</li>
<li>if (p.hash == hash &amp;&amp;
  ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))
  e = p;</li>
<li>&#x5982;&#x679C;equals&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x76F8;&#x540C;&#xFF0C;&#x5219;&#x503C;&#x4E00;&#x5B9A;&#x76F8;&#x540C;&#xFF0C;&#x4E0D;&#x518D;&#x5B58;&#x5165;&#x3002;<h2 id="&#x5982;&#x679C;&#x91CD;&#x5199;equals&#x4E0D;&#x91CD;&#x5199;hashcode&#x4F1A;&#x600E;&#x6837;"><a name="&#x5982;&#x679C;&#x91CD;&#x5199;equals&#x4E0D;&#x91CD;&#x5199;hashcode&#x4F1A;&#x600E;&#x6837;" class="plugin-anchor" href="#&#x5982;&#x679C;&#x91CD;&#x5199;equals&#x4E0D;&#x91CD;&#x5199;hashcode&#x4F1A;&#x600E;&#x6837;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5982;&#x679C;&#x91CD;&#x5199;equals&#x4E0D;&#x91CD;&#x5199;hashCode&#x4F1A;&#x600E;&#x6837;</h2>
</li>
<li>&#x4E24;&#x4E2A;&#x503C;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x7684;hashCode&#x4E00;&#x5B9A;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x90A3;&#x4E48;&#x6267;&#x884C;equals&#xFF0C;&#x7ED3;&#x679C;&#x4E3A;true&#xFF0C;HashSet&#x6216;HashMap&#x7684;&#x952E;&#x4F1A;&#x653E;&#x5165;&#x503C;&#x76F8;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x3002;<h1 id="16-stringstringbufferstringbuilder"><a name="16-stringstringbufferstringbuilder" class="plugin-anchor" href="#16-stringstringbufferstringbuilder"><i class="fa fa-link" aria-hidden="true"></i></a>1.6 String&amp;StringBuffer&amp;StringBuilder</h1>
</li>
<li>&#x90FD;&#x662F;final&#x7C7B;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x7EE7;&#x627F;&#xFF1B;</li>
<li>String&#x957F;&#x5EA6;&#x4E0D;&#x53EF;&#x53D8;&#xFF0C;StringBuffer&#x3001;StringBuilder&#x957F;&#x5EA6;&#x53EF;&#x53D8;&#xFF1B;</li>
</ul>
<h2 id="string"><a name="string" class="plugin-anchor" href="#string"><i class="fa fa-link" aria-hidden="true"></i></a>String</h2>
<pre><code>public final class String
    implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence {}
</code></pre><h3 id="equalshashcode"><a name="equalshashcode" class="plugin-anchor" href="#equalshashcode"><i class="fa fa-link" aria-hidden="true"></i></a>equals&amp;hashCode</h3>
<ul>
<li>String&#x91CD;&#x5199;&#x4E86;Object&#x7684;hashCode&#x548C;equals&#x3002;</li>
</ul>
<pre><code>public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        int n = value.length;
        if (n == anotherString.value.length) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = 0;
            while (n-- != 0) {
                if (v1[i] != v2[i])
                    return false;
                i++;
            }
            return true;
        }
    }
    return false;
}
</code></pre><h3 id="&#x6DFB;&#x52A0;&#x529F;&#x80FD;"><a name="&#x6DFB;&#x52A0;&#x529F;&#x80FD;" class="plugin-anchor" href="#&#x6DFB;&#x52A0;&#x529F;&#x80FD;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6DFB;&#x52A0;&#x529F;&#x80FD;</h3>
<ul>
<li>String&#x662F;final&#x7C7B;&#xFF0C;&#x4E0D;&#x53EF;&#x88AB;&#x7EE7;&#x627F;&#xFF0C;&#x4E5F;&#x4E0D;&#x53EF;&#x91CD;&#x5199;&#x4E00;&#x4E2A;java.lang.String&#xFF08;&#x7C7B;&#x52A0;&#x8F7D;&#x673A;&#x5236;)&#x3002;</li>
<li><p>&#x4E00;&#x822C;&#x662F;&#x4F7F;&#x7528;StringUtils&#x6765;&#x589E;&#x5F3A;String&#x7684;&#x529F;&#x80FD;&#x3002;</p>
</li>
<li><p>&#x4E3A;&#x4EC0;&#x4E48;&#x53EA;&#x52A0;&#x8F7D;&#x7CFB;&#x7EDF;&#x901A;&#x8FC7;&#x7684;java.lang.String&#x7C7B;&#x800C;&#x4E0D;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x7684;java.lang.String&#x7C7B;&#x5462;&#xFF1F;</p>
</li>
<li>&#x53CC;&#x4EB2;&#x59D4;&#x6D3E;&#x673A;&#x5236;</li>
<li>&#x56E0;&#x52A0;&#x8F7D;&#x67D0;&#x4E2A;&#x7C7B;&#x65F6;&#xFF0C;&#x4F18;&#x5148;&#x4F7F;&#x7528;&#x7236;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x52A0;&#x8F7D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x7C7B;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;java.lang.String&#x8FD9;&#x4E2A;&#x7C7B;&#xFF0C;</li>
<li>&#x52A0;&#x8F7D;&#x8BE5;&#x81EA;&#x5B9A;&#x4E49;&#x7684;String&#x7C7B;&#xFF0C;&#x8BE5;&#x81EA;&#x5B9A;&#x4E49;String&#x7C7B;&#x4F7F;&#x7528;&#x7684;&#x52A0;&#x8F7D;&#x5668;&#x662F;AppClassLoader&#xFF0C;&#x6839;&#x636E;&#x4F18;&#x5148;&#x4F7F;&#x7528;&#x7236;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x539F;&#x7406;&#xFF0C;</li>
<li>AppClassLoader&#x52A0;&#x8F7D;&#x5668;&#x7684;&#x7236;&#x7C7B;&#x4E3A;ExtClassLoader&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x65F6;&#x52A0;&#x8F7D;String&#x4F7F;&#x7528;&#x7684;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x662F;ExtClassLoader&#xFF0C;</li>
<li>&#x4F46;&#x662F;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;ExtClassLoader&#x5728;jre/lib/ext&#x76EE;&#x5F55;&#x4E0B;&#x6CA1;&#x6709;&#x627E;&#x5230;String.class&#x7C7B;&#x3002;&#x7136;&#x540E;&#x4F7F;&#x7528;ExtClassLoader&#x7236;&#x7C7B;&#x7684;&#x52A0;&#x8F7D;&#x5668;BootStrap&#xFF0C;</li>
<li>&#x7236;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;BootStrap&#x5728;JRE/lib&#x76EE;&#x5F55;&#x7684;rt.jar&#x627E;&#x5230;&#x4E86;String.class&#xFF0C;&#x5C06;&#x5176;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x7684;&#x59D4;&#x6258;&#x673A;&#x5236;&#x3002;</li>
<li>&#x6240;&#x4EE5;&#xFF0C;&#x7528;&#x6237;&#x81EA;&#x5B9A;&#x4E49;&#x7684;java.lang.String&#x4E0D;&#x88AB;&#x52A0;&#x8F7D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x4F1A;&#x88AB;&#x4F7F;&#x7528;&#x3002;<h3 id="-substring"><a name="-substring" class="plugin-anchor" href="#-substring"><i class="fa fa-link" aria-hidden="true"></i></a>+  substring</h3>
</li>
<li>&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF1B;</li>
<li>&#x7F16;&#x8BD1;&#x65F6;&#x4F1A;&#x5C06;+&#x8F6C;&#x4E3A;StringBuilder&#x7684;append&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x6CE8;&#x610F;&#x65B0;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x5728;&#x5806;&#x91CC;&#x521B;&#x5EFA;&#x7684;&#x3002;</li>
<li>String str1 = &#x201C;ABC&#x201D;;&#x53EF;&#x80FD;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6216;&#x8005;&#x4E0D;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x5982;&#x679C;&#x201D;ABC&#x201D;&#x8FD9;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x5728;java String&#x6C60;&#x91CC;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x4F1A;&#x5728;java String&#x6C60;&#x91CC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;String&#x5BF9;&#x8C61;(&#x201C;ABC&#x201D;)&#xFF0C;&#x7136;&#x540E;str1&#x6307;&#x5411;&#x8FD9;&#x4E2A;&#x5185;&#x5B58;&#x5730;&#x5740;&#xFF0C;&#x65E0;&#x8BBA;&#x4EE5;&#x540E;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x521B;&#x5EFA;&#x591A;&#x5C11;&#x4E2A;&#x503C;&#x4E3A;&#x201D;ABC&#x201D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#xFF0C;&#x59CB;&#x7EC8;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x5730;&#x5740;&#x88AB;&#x5206;&#x914D;&#xFF0C;&#x4E4B;&#x540E;&#x7684;&#x90FD;&#x662F;String&#x7684;&#x62F7;&#x8D1D;&#xFF0C;Java&#x4E2D;&#x79F0;&#x4E3A;&#x201C;&#x5B57;&#x7B26;&#x4E32;&#x9A7B;&#x7559;&#x201D;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x90FD;&#x4F1A;&#x5728;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#x81EA;&#x52A8;&#x5730;&#x9A7B;&#x7559;&#x3002;</li>
<li></li>
<li>&#x6CE8;&#x610F;&#x53EA;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x662F;&#x5171;&#x4EAB;&#x7684;&#xFF0C;+&#x548C;substring&#x7B49;&#x64CD;&#x4F5C;&#x7684;&#x7ED3;&#x679C;&#x4E0D;&#x662F;&#x5171;&#x4EAB;&#x7684;&#xFF0C;substring&#x4E5F;&#x4F1A;&#x5728;&#x5806;&#x4E2D;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
</ul>
<pre><code>public String substring(int beginIndex, int endIndex) {
    if (beginIndex &lt; 0) {
        throw new StringIndexOutOfBoundsException(beginIndex);
    }
    if (endIndex &gt; value.length) {
        throw new StringIndexOutOfBoundsException(endIndex);
    }
    int subLen = endIndex - beginIndex;
    if (subLen &lt; 0) {
        throw new StringIndexOutOfBoundsException(subLen);
    }
    return ((beginIndex == 0) &amp;&amp; (endIndex == value.length)) ? this
            : new String(value, beginIndex, subLen);
}
</code></pre><pre><code>public String(char value[], int offset, int count) {
    if (offset &lt; 0) {
        throw new StringIndexOutOfBoundsException(offset);
    }
    if (count &lt;= 0) {
        if (count &lt; 0) {
            throw new StringIndexOutOfBoundsException(count);
        }
        if (offset &lt;= value.length) {
            this.value = &quot;&quot;.value;
            return;
        }
    }
    // Note: offset or count might be near -1&gt;&gt;&gt;1.
    if (offset &gt; value.length - count) {
        throw new StringIndexOutOfBoundsException(offset + count);
    }
    this.value = Arrays.copyOfRange(value, offset, offset+count);
}
</code></pre><h3 id="&#x5E38;&#x91CF;&#x6C60;"><a name="&#x5E38;&#x91CF;&#x6C60;" class="plugin-anchor" href="#&#x5E38;&#x91CF;&#x6C60;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5E38;&#x91CF;&#x6C60;</h3>
<ul>
<li>String str = new String(&#x201C;ABC&#x201D;);</li>
<li>&#x81F3;&#x5C11;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x4E24;&#x4E2A;&#x3002;&#x56E0;&#x4E3A;&#x7528;&#x5230;new&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x80AF;&#x5B9A;&#x4F1A;&#x5728;heap&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;str2&#x7684;String&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x7684;value&#x662F;&#x201C;ABC&#x201D;&#x3002;&#x540C;&#x65F6;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x6C60;&#x91CC;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x4F1A;&#x5728;&#x6C60;&#x91CC;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;String&#x5BF9;&#x8C61;&#x201C;ABC&#x201D;&#x3002;</li>
<li>String s1= &#x201C;a&#x201D;;</li>
<li>String s2 = &#x201C;a&#x201D;;</li>
<li><p>&#x6B64;&#x65F6;s1 == s2 &#x8FD4;&#x56DE;true</p>
</li>
<li><p>String s1= new String(&#x201C;a&#x201D;);</p>
</li>
<li>String s2 = new String(&#x201C;a&#x201D;);</li>
<li><p>&#x6B64;&#x65F6;s1 == s2 &#x8FD4;&#x56DE;false</p>
</li>
<li><p>&quot;&quot;&#x521B;&#x5EFA;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x6C60;&#x4E2D;&#x3002;</p>
</li>
<li>&#x5982;&#x679C;&#x5F15;&#x53F7;&#x4E2D;&#x5B57;&#x7B26;&#x4E32;&#x5B58;&#x5728;&#x5728;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#xFF0C;&#x5219;&#x4EC5;&#x5728;&#x5806;&#x4E2D;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;(new String);</li>
<li>&#x5982;&#x679C;&#x4E0D;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x5148;&#x5728;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4EFD;(&quot;abc&quot;)&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5806;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4EFD;(new String)&#xFF0C;&#x5171;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;</li>
<li></li>
</ul>
<h3 id="&#x7F16;&#x8BD1;&#x4F18;&#x5316;"><a name="&#x7F16;&#x8BD1;&#x4F18;&#x5316;" class="plugin-anchor" href="#&#x7F16;&#x8BD1;&#x4F18;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7F16;&#x8BD1;&#x4F18;&#x5316;</h3>
<ul>
<li>&#x5B57;&#x9762;&#x91CF;&#xFF0C;final &#x90FD;&#x4F1A;&#x5728;&#x7F16;&#x8BD1;&#x671F;&#x88AB;&#x4F18;&#x5316;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x88AB;&#x76F4;&#x63A5;&#x8FD0;&#x7B97;&#x597D;&#x3002;</li>
<li><ul>
<li>1)&#x6CE8;&#x610F;c&#x548C;d&#x4E2D;&#xFF0C;final&#x53D8;&#x91CF;b&#x5DF2;&#x7ECF;&#x88AB;&#x66FF;&#x6362;&#x4E3A;&#x5176;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x4E86;&#x3002;</li>
<li>2)&#x6CE8;&#x610F;f&#x3001;g&#x4E2D;&#xFF0C;b&#x88AB;&#x66FF;&#x6362;&#x4E3A;&#x5176;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x7684;+&#x8FD0;&#x7B97;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x8FD4;&#x56DE;&#x62FC;&#x63A5;&#x540E;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;</li>
<li>3)&#x6CE8;&#x610F;j&#xFF0C;a1&#x4F5C;&#x4E3A;final&#x53D8;&#x91CF;&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x88AB;&#x66FF;&#x6362;&#x4E3A;&#x5176;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;</li>
</ul>
</li>
<li><p>&#x89E3;&#x91CA; c == h / d == h/ e== h&#x4E3A;false&#xFF1A;c&#x662F;&#x8FD0;&#x884C;&#x65F6;&#x4F7F;&#x7528;+&#x62FC;&#x63A5;&#xFF0C;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5806;&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;ab&#xFF0C;&#x4E0E;ab&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x4E0D;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1B;</p>
</li>
<li>&#x89E3;&#x91CA;f == h/ g == h&#x4E3A;true&#xFF1A;f&#x7F16;&#x8BD1;&#x65F6;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x5176;&#x503C;&#x5373;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;ab&#xFF0C;h&#x4E5F;&#x662F;&#xFF0C;&#x6307;&#x5411;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1B;</li>
</ul>
<ul>
<li>String#intern&#xFF08;JDK1.7&#x4E4B;&#x540E;)</li>
<li><p>JDK1.7&#x4E4B;&#x540E;JVM&#x91CC;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x6C60;&#x653E;&#x5165;&#x4E86;&#x5806;&#x4E2D;&#xFF0C;&#x4E4B;&#x524D;&#x662F;&#x653E;&#x5728;&#x65B9;&#x6CD5;&#x533A;&#x3002;</p>
</li>
<li><p>intern()&#x65B9;&#x6CD5;&#x8BBE;&#x8BA1;&#x7684;&#x521D;&#x8877;&#xFF0C;&#x5C31;&#x662F;&#x91CD;&#x7528;String&#x5BF9;&#x8C61;&#xFF0C;&#x4EE5;&#x8282;&#x7701;&#x5185;&#x5B58;&#x6D88;&#x8017;&#x3002;</p>
</li>
<li>&#x4E00;&#x5B9A;&#x662F;new&#x5F97;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x624D;&#x4F1A;&#x8C03;&#x7528;intern&#xFF0C;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x53BB;intern&#x3002;</li>
<li><p>&#x5F53;&#x8C03;&#x7528; intern &#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6C60;&#x5DF2;&#x7ECF;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x7B49;&#x4E8E;&#x6B64; String &#x5BF9;&#x8C61;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x8BE5;&#x5BF9;&#x8C61;&#x7531; equals(Object) &#x65B9;&#x6CD5;&#x786E;&#x5B9A;)&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x6C60;&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x76F4;&#x63A5;&#x5B58;&#x50A8;&#x5806;&#x4E2D;&#x8BE5;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5F15;&#x7528;&#xFF08;1.7&#x4E4B;&#x524D;&#x662F;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x518D;&#x4FDD;&#x5B58;&#x4E00;&#x4EFD;&#x8BE5;&#x5B57;&#x7B26;&#x4E32;)&#x3002;</p>
</li>
<li><p>&#x6E90;&#x7801;</p>
</li>
</ul>
<pre><code>public native String intern();
</code></pre><ul>
<li><p>&#x5B9E;&#x4F8B;&#x4E00;&#xFF1A;</p>
<ul>
<li>String s = new String(&quot;1&quot;);
s.intern();
String s2 = &quot;1&quot;;
System.out.println(s == s2);// false</li>
</ul>
</li>
</ul>
<p>String s3 = new String(&quot;1&quot;) + new String(&quot;1&quot;);
s3.intern();
String s4 = &quot;11&quot;;
System.out.println(s3 == s4);// true</p>
<ul>
<li>String s = newString(&quot;1&quot;)&#xFF0C;&#x751F;&#x6210;&#x4E86;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x201C;1&#x201D; &#x548C;&#x5806;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5BF9;&#x8C61;&#x3002;</li>
<li>s.intern()&#xFF0C;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x4F5C;&#x7528;&#x662F;s&#x5BF9;&#x8C61;&#x53BB;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x5BFB;&#x627E;&#x540E;&#x53D1;&#x73B0;&quot;1&quot;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E8E;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x4E86;&#x3002;</li>
<li>String s2 = &quot;1&quot;&#xFF0C;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x662F;&#x751F;&#x6210;&#x4E00;&#x4E2A;s2&#x7684;&#x5F15;&#x7528;&#x6307;&#x5411;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x201C;1&#x201D;&#x5BF9;&#x8C61;&#x3002;</li>
<li><p>&#x7ED3;&#x679C;&#x5C31;&#x662F; s &#x548C; s2 &#x7684;&#x5F15;&#x7528;&#x5730;&#x5740;&#x660E;&#x663E;&#x4E0D;&#x540C;&#x3002;&#x56E0;&#x6B64;&#x8FD4;&#x56DE;&#x4E86;false&#x3002;</p>
</li>
<li><p>String s3 = new String(&quot;1&quot;) + newString(&quot;1&quot;)&#xFF0C;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x751F;&#x6210;&#x201C;1&#x201D; &#xFF0C;&#x5E76;&#x5728;&#x5806;&#x7A7A;&#x95F4;&#x4E2D;&#x751F;&#x6210;s3&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x5185;&#x5BB9;&#x4E3A;&quot;11&quot;)&#x3002;&#x6CE8;&#x610F;&#x6B64;&#x65F6;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x662F;&#x6CA1;&#x6709; &#x201C;11&#x201D;&#x5BF9;&#x8C61;&#x7684;&#x3002;</p>
</li>
<li>s3.intern()&#xFF0C;&#x8FD9;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x662F;&#x5C06; s3&#x4E2D;&#x7684;&#x201C;11&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x653E;&#x5165; String &#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#xFF0C;&#x6B64;&#x65F6;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x201C;11&#x201D;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;JDK1.6&#x7684;&#x505A;&#x6CD5;&#x662F;&#x76F4;&#x63A5;&#x5728;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x751F;&#x6210;&#x4E00;&#x4E2A; &quot;11&quot; &#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x4F46;&#x662F;&#x5728;JDK1.7&#x4E2D;&#xFF0C;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x5B58;&#x50A8;&#x4E00;&#x4EFD;&#x5BF9;&#x8C61;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5B58;&#x50A8;&#x5806;&#x4E2D;&#x7684;&#x5F15;&#x7528;&#x3002;&#x8FD9;&#x4EFD;&#x5F15;&#x7528;&#x76F4;&#x63A5;&#x6307;&#x5411; s3 &#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;s3.intern() ==s3&#x4F1A;&#x8FD4;&#x56DE;true&#x3002;</li>
<li><p>String s4 = &quot;11&quot;&#xFF0C; &#x8FD9;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x4F1A;&#x76F4;&#x63A5;&#x53BB;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x521B;&#x5EFA;&#xFF0C;&#x4F46;&#x662F;&#x53D1;&#x73B0;&#x5DF2;&#x7ECF;&#x6709;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E86;&#xFF0C;&#x6B64;&#x65F6;&#x4E5F;&#x5C31;&#x662F;&#x6307;&#x5411; s3 &#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x7684;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x3002;&#x56E0;&#x6B64;s3 == s4&#x8FD4;&#x56DE;&#x4E86;true&#x3002;</p>
</li>
<li><p>&#x5B9E;&#x4F8B;&#x4E8C;&#xFF1A;</p>
<ul>
<li>String s3 = new String(&quot;1&quot;) + new String(&quot;1&quot;);
String s4 = &quot;11&quot;;
s3.intern();
System.out.println(s3 == s4);// false</li>
</ul>
</li>
<li><p>String s3 = new String(&quot;1&quot;) + newString(&quot;1&quot;)&#xFF0C;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x751F;&#x6210;&#x201C;1&#x201D; &#xFF0C;&#x5E76;&#x5728;&#x5806;&#x7A7A;&#x95F4;&#x4E2D;&#x751F;&#x6210;s3&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x5185;&#x5BB9;&#x4E3A;&quot;11&quot;)&#x3002;&#x6CE8;&#x610F;&#x6B64;&#x65F6;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x662F;&#x6CA1;&#x6709; &#x201C;11&#x201D;&#x5BF9;&#x8C61;&#x7684;&#x3002;</p>
</li>
<li>String s4 = &quot;11&quot;&#xFF0C; &#x8FD9;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x4F1A;&#x76F4;&#x63A5;&#x53BB;&#x751F;&#x6210;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&quot;11&quot;&#x3002;</li>
<li>s3.intern()&#xFF0C;&#x8FD9;&#x4E00;&#x884C;&#x5728;&#x8FD9;&#x91CC;&#x5C31;&#x6CA1;&#x4EC0;&#x4E48;&#x5B9E;&#x9645;&#x4F5C;&#x7528;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&quot;11&quot;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E86;&#x3002;</li>
<li><p>&#x7ED3;&#x679C;&#x5C31;&#x662F; s3 &#x548C; s4 &#x7684;&#x5F15;&#x7528;&#x5730;&#x5740;&#x660E;&#x663E;&#x4E0D;&#x540C;&#x3002;&#x56E0;&#x6B64;&#x8FD4;&#x56DE;&#x4E86;false&#x3002;</p>
</li>
<li><p>&#x5B9E;&#x4F8B;&#x4E09;&#xFF1A;</p>
<ul>
<li>String str1 = new String(&quot;SEU&quot;) + new String(&quot;Calvin&quot;);
System.out.println(str1.intern() == str1);// true
System.out.println(str1 == &quot;SEUCalvin&quot;);// true</li>
</ul>
</li>
<li><p>str1.intern() == str1&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x4E2D;&#x7684;&#x60C5;&#x51B5;&#xFF0C;str1.intern()&#x53D1;&#x73B0;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#x201C;SEUCalvin&#x201D;&#xFF0C;&#x56E0;&#x6B64;&#x6307;&#x5411;&#x4E86;str1&#x3002; &quot;SEUCalvin&quot;&#x5728;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x521B;&#x5EFA;&#x65F6;&#xFF0C;&#x4E5F;&#x5C31;&#x76F4;&#x63A5;&#x6307;&#x5411;&#x4E86;str1&#x4E86;&#x3002;&#x4E24;&#x4E2A;&#x90FD;&#x8FD4;&#x56DE;true&#x5C31;&#x7406;&#x6240;&#x5F53;&#x7136;&#x5566;&#x3002;</p>
</li>
</ul>
<ul>
<li><p>&#x5B9E;&#x4F8B;&#x56DB;&#xFF1A;</p>
<ul>
<li>String str2 = &quot;SEUCalvin&quot;;//&#x65B0;&#x52A0;&#x7684;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x5176;&#x4F59;&#x4E0D;&#x53D8;<br>String str1 = new String(&quot;SEU&quot;) + new String(&quot;Calvin&quot;);
System.out.println(str1.intern() == str1);// false
System.out.println(str1 == &quot;SEUCalvin&quot;);// false</li>
</ul>
</li>
<li><p>&#x5728;&#x5B9E;&#x4F8B;&#x4E09;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x52A0;&#x4E86;&#x7B2C;&#x4E00;&#x884C;</p>
</li>
<li>str2&#x5148;&#x5728;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x521B;&#x5EFA;&#x4E86;&#x201C;SEUCalvin&#x201D;&#xFF0C;&#x90A3;&#x4E48;str1.intern()&#x5F53;&#x7136;&#x5C31;&#x76F4;&#x63A5;&#x6307;&#x5411;&#x4E86;str2&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x53BB;&#x9A8C;&#x8BC1;&#x5B83;&#x4EEC;&#x4E24;&#x4E2A;&#x662F;&#x8FD4;&#x56DE;&#x7684;true&#x3002;&#x540E;&#x9762;&#x7684;&quot;SEUCalvin&quot;&#x4E5F;&#x4E00;&#x6837;&#x6307;&#x5411;str2&#x3002;&#x6240;&#x4EE5;&#x8C01;&#x90FD;&#x4E0D;&#x642D;&#x7406;&#x5728;&#x5806;&#x7A7A;&#x95F4;&#x4E2D;&#x7684;str1&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x90FD;&#x8FD4;&#x56DE;&#x4E86;false&#x3002;<h2 id="stringbufferstringbuilder"><a name="stringbufferstringbuilder" class="plugin-anchor" href="#stringbufferstringbuilder"><i class="fa fa-link" aria-hidden="true"></i></a>StringBuffer&amp;StringBuilder</h2>
</li>
<li>StringBuffer&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;StringBuilder&#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x4E24;&#x4E2A;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;StringBuffer&#x5728;StringBuilder&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x4E0A;&#x6DFB;&#x52A0;&#x4E86;synchronized&#xFF0C;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;</li>
<li><p>StringBuilder&#x6BD4;StringBuffer&#x6027;&#x80FD;&#x66F4;&#x597D;&#x3002;</p>
</li>
<li></li>
</ul>
<h1 id="17-&#x9762;&#x5411;&#x5BF9;&#x8C61;"><a name="17-&#x9762;&#x5411;&#x5BF9;&#x8C61;" class="plugin-anchor" href="#17-&#x9762;&#x5411;&#x5BF9;&#x8C61;"><i class="fa fa-link" aria-hidden="true"></i></a>1.7 &#x9762;&#x5411;&#x5BF9;&#x8C61;</h1>
<h2 id="&#x62BD;&#x8C61;&#x7C7B;&#x4E0E;&#x63A5;&#x53E3;"><a name="&#x62BD;&#x8C61;&#x7C7B;&#x4E0E;&#x63A5;&#x53E3;" class="plugin-anchor" href="#&#x62BD;&#x8C61;&#x7C7B;&#x4E0E;&#x63A5;&#x53E3;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x62BD;&#x8C61;&#x7C7B;&#x4E0E;&#x63A5;&#x53E3;</h2>
<ul>
<li><p>&#x533A;&#x522B;&#xFF1A;</p>
<ul>
<li>1)&#x62BD;&#x8C61;&#x7C7B;&#x4E2D;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x4E0D;&#x662F;&#x62BD;&#x8C61;&#x7684;&#xFF1B;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x662F;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF1B;</li>
<li>2)&#x62BD;&#x8C61;&#x7C7B;&#x4E2D;&#x53EF;&#x4EE5;&#x6709;&#x666E;&#x901A;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1B;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x5FC5;&#x987B;&#x662F; static final &#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x5FC5;&#x987B;&#x88AB;&#x521D;&#x59CB;&#x5316; , &#x63A5;&#x53E3;&#x4E2D;&#x53EA;&#x6709;&#x5E38;&#x91CF;&#xFF0C;&#x6CA1;&#x6709;&#x53D8;&#x91CF;&#x3002;</li>
<li>3)&#x62BD;&#x8C61;&#x7C7B;&#x53EA;&#x80FD;&#x5355;&#x7EE7;&#x627F;&#xFF0C;&#x63A5;&#x53E3;&#x53EF;&#x4EE5;&#x7EE7;&#x627F;&#x591A;&#x4E2A;&#x7236;&#x63A5;&#x53E3;&#xFF1B;</li>
<li>4)Java8 &#x4E2D;&#x63A5;&#x53E3;&#x4E2D;&#x4F1A;&#x6709; default &#x65B9;&#x6CD5;&#xFF0C;&#x5373;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x88AB;&#x5B9E;&#x73B0;&#x3002;</li>
</ul>
</li>
<li><p>&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;</p>
</li>
<li>&#x5982;&#x679C;&#x8981;&#x521B;&#x5EFA;&#x4E0D;&#x5E26;&#x4EFB;&#x4F55;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x548C;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x57FA;&#x7C7B;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x63A5;&#x53E3;&#x800C;&#x4E0D;&#x662F;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</li>
<li>&#x5982;&#x679C;&#x77E5;&#x9053;&#x67D0;&#x4E2A;&#x7C7B;&#x5E94;&#x8BE5;&#x662F;&#x57FA;&#x7C7B;&#xFF0C;&#x90A3;&#x4E48;&#x7B2C;&#x4E00;&#x4E2A;&#x9009;&#x62E9;&#x7684;&#x5E94;&#x8BE5;&#x662F;&#x8BA9;&#x5B83;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x548C;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x624D;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x62BD;&#x8C61;&#x7C7B;&#x3002;&#x56E0;&#x4E3A;&#x62BD;&#x8C61;&#x7C7B;&#x4E2D;&#x5141;&#x8BB8;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x88AB;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EA;&#x8981;&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x88AB;&#x5168;&#x90E8;&#x5B9E;&#x73B0;&#x8BE5;&#x7C7B;&#x5C31;&#x4ECD;&#x662F;&#x62BD;&#x8C61;&#x7C7B;&#x3002;<h2 id="&#x4E09;&#x5927;&#x7279;&#x6027;"><a name="&#x4E09;&#x5927;&#x7279;&#x6027;" class="plugin-anchor" href="#&#x4E09;&#x5927;&#x7279;&#x6027;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E09;&#x5927;&#x7279;&#x6027;</h2>
</li>
<li>&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x4E09;&#x4E2A;&#x7279;&#x6027;&#xFF1A;&#x5C01;&#x88C5;&#xFF1B;&#x7EE7;&#x627F;&#xFF1B;&#x591A;&#x6001;</li>
<li>&#x5C01;&#x88C5;&#xFF1A;&#x5C06;&#x6570;&#x636E;&#x4E0E;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x7684;&#x65B9;&#x6CD5;&#x7ED1;&#x5B9A;&#x8D77;&#x6765;&#xFF0C;&#x9690;&#x85CF;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#xFF0C;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x7EE7;&#x627F;&#xFF1A;&#x4EE3;&#x7801;&#x91CD;&#x7528;&#xFF1B;&#x53EF;&#x6269;&#x5C55;&#x6027;</li>
<li><p>&#x591A;&#x6001;&#xFF1A;&#x5141;&#x8BB8;&#x4E0D;&#x540C;&#x5B50;&#x7C7B;&#x5BF9;&#x8C61;&#x5BF9;&#x540C;&#x4E00;&#x6D88;&#x606F;&#x505A;&#x51FA;&#x4E0D;&#x540C;&#x54CD;&#x5E94;</p>
</li>
<li><p>&#x591A;&#x6001;&#x7684;&#x4E09;&#x4E2A;&#x5FC5;&#x8981;&#x6761;&#x4EF6;&#xFF1A;&#x7EE7;&#x627F;&#x3001;&#x65B9;&#x6CD5;&#x7684;&#x91CD;&#x5199;&#x3001;&#x7236;&#x7C7B;&#x5F15;&#x7528;&#x6307;&#x5411;&#x5B50;&#x7C7B;&#x5BF9;&#x8C61;</p>
<h2 id="&#x91CD;&#x5199;&#x548C;&#x91CD;&#x8F7D;"><a name="&#x91CD;&#x5199;&#x548C;&#x91CD;&#x8F7D;" class="plugin-anchor" href="#&#x91CD;&#x5199;&#x548C;&#x91CD;&#x8F7D;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x91CD;&#x5199;&#x548C;&#x91CD;&#x8F7D;</h2>
</li>
<li>&#x6839;&#x636E;&#x5BF9;&#x8C61;&#x5BF9;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#xFF0C;&#x79F0;&#x4E3A;&#x5206;&#x6D3E;</li>
<li>&#x7F16;&#x8BD1;&#x671F;&#x7684;&#x9759;&#x6001;&#x591A;&#x5206;&#x6D3E;&#xFF1A;overloading&#x91CD;&#x8F7D; &#x6839;&#x636E;&#x8C03;&#x7528;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x548C;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x51B3;&#x5B9A;&#x8C03;&#x7528;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#xFF08;&#x7F16;&#x8BD1;&#x5668;)</li>
<li><p>&#x8FD0;&#x884C;&#x671F;&#x7684;&#x52A8;&#x6001;&#x5355;&#x5206;&#x6D3E;&#xFF1A;overriding &#x91CD;&#x5199; &#x6839;&#x636E;&#x6307;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x578B;&#x51B3;&#x5B9A;&#x8C03;&#x7528;&#x54EA;&#x4E2A;&#x65B9;&#x6CD5;&#xFF08;JVM)</p>
</li>
<li></li>
</ul>
<h1 id="18-&#x5173;&#x952E;&#x7C7B;"><a name="18-&#x5173;&#x952E;&#x7C7B;" class="plugin-anchor" href="#18-&#x5173;&#x952E;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.8 &#x5173;&#x952E;&#x7C7B;</h1>
<h2 id="threadlocal&#xFF08;&#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x53D8;&#x91CF;"><a name="threadlocal&#xFF08;&#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x53D8;&#x91CF;" class="plugin-anchor" href="#threadlocal&#xFF08;&#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>ThreadLocal&#xFF08;&#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x53D8;&#x91CF;)</h2>
<ul>
<li>&#x5728;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#x662F;&#x5B58;&#x5728;&#x98CE;&#x9669;&#x7684;&#xFF0C;&#x6709;&#x65F6;&#x53EF;&#x80FD;&#x8981;&#x907F;&#x514D;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#xFF0C;&#x4F7F;&#x7528;ThreadLocal&#x8F85;&#x52A9;&#x7C7B;&#x4E3A;&#x5404;&#x4E2A;&#x7EBF;&#x7A0B;&#x63D0;&#x4F9B;&#x5404;&#x81EA;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</li>
<li>&#x4F8B;&#x5982;&#x6709;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x53D8;&#x91CF;</li>
</ul>
<pre><code>public static final SimpleDateFormat sdf = new SimpleDateFormat(&#x201C;yyyy-MM-dd&#x201D;);
</code></pre><ul>
<li>&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x8C03;&#x7528;sdf.format(&#x2026;)</li>
<li>&#x90A3;&#x4E48;&#x53EF;&#x80FD;&#x4F1A;&#x5F88;&#x6DF7;&#x4E71;&#xFF0C;&#x56E0;&#x4E3A;sdf&#x4F7F;&#x7528;&#x7684;&#x5185;&#x90E8;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x5E76;&#x53D1;&#x7684;&#x8BBF;&#x95EE;&#x6240;&#x7834;&#x574F;&#x3002;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x4F46;&#x662F;&#x5F00;&#x9500;&#x5F88;&#x5927;&#xFF1B;&#x6216;&#x8005;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x9700;&#x8981;&#x65F6;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x5C40;&#x90E8;SImpleDateFormat&#x5BF9;&#x8C61;&#x3002;&#x4F46;&#x8FD9;&#x5F88;&#x6D6A;&#x8D39;&#x3002;</li>
<li>&#x5E0C;&#x671B;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5373;&#x4F7F;&#x8BE5;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x591A;&#x6B21;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x53EA;&#x9700;&#x8981;&#x6784;&#x9020;&#x4E00;&#x6B21;&#xFF0C;&#x4E0D;&#x5FC5;&#x5728;&#x5C40;&#x90E8;&#x6BCF;&#x6B21;&#x90FD;&#x6784;&#x9020;&#x3002;</li>
</ul>
<pre><code>public static final ThreadLocal&lt;SimpleDateFormat&gt; sdf = new ThreadLocal&lt;SimpleDateFormat&gt;() {
    @Override
    protected SimpleDateFormat initialValue() {
        return new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
    }
};
</code></pre><ul>
<li>&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF1A;<h3 id="1&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x526F;&#x672C;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x91CC;&#x7684;"><a name="1&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x526F;&#x672C;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x91CC;&#x7684;" class="plugin-anchor" href="#1&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x526F;&#x672C;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x91CC;&#x7684;"><i class="fa fa-link" aria-hidden="true"></i></a>1)&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x526F;&#x672C;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x91CC;&#x7684;</h3>
</li>
<li>ThreadLocal&#x7684;get&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x4ECE;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;ThreadLocalMap&#x4E2D;&#x53D6;&#x51FA;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5BF9;&#x5E94;&#x7684;&#x53D8;&#x91CF;&#x7684;&#x526F;&#x672C;&#x3002;&#x8BE5;Map&#x7684;key&#x662F;ThreadLocal&#x5BF9;&#x8C61;&#xFF0C;value&#x662F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5BF9;&#x5E94;&#x7684;&#x53D8;&#x91CF;&#x3002;</li>
</ul>
<pre><code>public T get() {
    Thread t = Thread.currentThread();
    ThreadLocalMap map = getMap(t);
    if (map != null) {
        ThreadLocalMap.Entry e = map.getEntry(this);
        if (e != null) {
            @SuppressWarnings(&quot;unchecked&quot;)
            T result = (T)e.value;
            return result;
        }
    }
    return setInitialValue();
}
</code></pre><ul>
<li>ThreadLocalMap getMap(Thread t) {
  return t.threadLocals;
}</li>
<li>&#x3010;&#x6CE8;&#x610F;&#xFF0C;&#x53D8;&#x91CF;&#x662F;&#x4FDD;&#x5B58;&#x5728;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4FDD;&#x5B58;&#x5728;ThreadLocal&#x53D8;&#x91CF;&#x4E2D;&#x3011;&#x3002;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E2D;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x5F15;&#x7528;&#x540D;&#x5B57;&#x662F;threadLocals&#xFF0C;&#x8FD9;&#x4E2A;&#x5F15;&#x7528;&#x662F;&#x5728;ThreadLocal&#x7C7B;&#x4E2D;createmap&#x51FD;&#x6570;&#x5185;&#x521D;&#x59CB;&#x5316;&#x7684;&#x3002;</li>
<li>void createMap(Thread t, T firstValue) {
  t.threadLocals = new ThreadLocalMap(this, firstValue);
}</li>
<li>&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x8FD9;&#x6837;&#x7684;&#x540D;&#x4E3A;threadLocals &#x7684;ThreadLocalMap&#xFF0C;&#x4EE5;ThreadLocal&#x548C;ThreadLocal&#x5BF9;&#x8C61;&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;&#x7C7B;&#x578B;&#x4F5C;&#x4E3A;key&#x548C;value&#x3002;</li>
<li>Thread</li>
<li>ThreadLocal.ThreadLocalMap threadLocals = null;</li>
<li><p>&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x6240;&#x4F7F;&#x7528;&#x7684;ThreadLocal&#x53D8;&#x91CF;&#x7684;&#x5B9E;&#x9645;&#x6570;&#x636E;&#xFF0C;&#x901A;&#x8FC7;get&#x65B9;&#x6CD5;&#x53D6;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x53D6;&#x51FA;Thread&#x4E2D;threadLocals&#x5F15;&#x7528;&#x7684;map&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x8FD9;&#x4E2A;map&#x4E2D;&#x6839;&#x636E;&#x5F53;&#x524D;threadLocal&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x53D6;&#x51FA;&#x6570;&#x636E;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x53D8;&#x91CF;&#x7684;&#x526F;&#x672C;&#x4ECE;&#x54EA;&#x91CC;&#x53D6;&#x51FA;&#x6765;&#x7684;&#xFF08;&#x672C;&#x6587;&#x7AE0;&#x63D0;&#x51FA;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x95EE;&#x9898;)&#x5DF2;&#x7ECF;&#x786E;&#x8BA4;&#x89E3;&#x51B3;&#x4E86;&#x3002;</p>
</li>
<li><p>&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5185;&#x90E8;&#x90FD;&#x4F1A;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C; HashMap &#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x79F0;&#x4E3A; ThreadLocalMap&#xFF0C;&#x91CC;&#x8FB9;&#x4F1A;&#x5305;&#x542B;&#x82E5;&#x5E72;&#x4E86; Entry&#xFF08;K-V &#x952E;&#x503C;&#x5BF9;)&#xFF0C;&#x76F8;&#x5E94;&#x7684;&#x7EBF;&#x7A0B;&#x88AB;&#x79F0;&#x4E3A;&#x8FD9;&#x4E9B; Entry &#x7684;&#x5C5E;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF1B;</p>
</li>
<li>Entry &#x7684; Key &#x662F;&#x4E00;&#x4E2A; ThreadLocal &#x5B9E;&#x4F8B;&#xFF0C;Value &#x662F;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7279;&#x6709;&#x5BF9;&#x8C61;&#x3002;Entry &#x7684;&#x4F5C;&#x7528;&#x5373;&#x662F;&#xFF1A;&#x4E3A;&#x5176;&#x5C5E;&#x4E3B;&#x7EBF;&#x7A0B;&#x5EFA;&#x7ACB;&#x8D77;&#x4E00;&#x4E2A; ThreadLocal &#x5B9E;&#x4F8B;&#x4E0E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7279;&#x6709;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF1B;</li>
<li>Entry &#x5BF9; Key &#x7684;&#x5F15;&#x7528;&#x662F;&#x5F31;&#x5F15;&#x7528;&#xFF1B;Entry &#x5BF9; Value &#x7684;&#x5F15;&#x7528;&#x662F;&#x5F3A;&#x5F15;&#x7528;&#x3002;<h3 id="2&#x4E3A;&#x4EC0;&#x4E48;threadlocalmap&#x7684;key&#x662F;&#x5F31;&#x5F15;&#x7528;"><a name="2&#x4E3A;&#x4EC0;&#x4E48;threadlocalmap&#x7684;key&#x662F;&#x5F31;&#x5F15;&#x7528;" class="plugin-anchor" href="#2&#x4E3A;&#x4EC0;&#x4E48;threadlocalmap&#x7684;key&#x662F;&#x5F31;&#x5F15;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>2)&#x4E3A;&#x4EC0;&#x4E48;ThreadLocalMap&#x7684;Key&#x662F;&#x5F31;&#x5F15;&#x7528;</h3>
</li>
<li>&#x5982;&#x679C;&#x662F;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;ThreadLocal&#x5C06;&#x65E0;&#x6CD5;&#x88AB;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;</li>
<li>&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x7684;key-value&#x5F62;&#x5F0F;&#x6765;&#x5B9A;&#x4E49;&#x5B58;&#x50A8;&#x7ED3;&#x6784;&#xFF0C;&#x5B9E;&#x8D28;&#x4E0A;&#x5C31;&#x4F1A;&#x9020;&#x6210;&#x8282;&#x70B9;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E0E;&#x7EBF;&#x7A0B;&#x5F3A;&#x7ED1;&#x5B9A;&#xFF0C;&#x53EA;&#x8981;&#x7EBF;&#x7A0B;&#x6CA1;&#x6709;&#x9500;&#x6BC1;&#xFF0C;&#x90A3;&#x4E48;&#x8282;&#x70B9;&#x5728;GC&#x5206;&#x6790;&#x4E2D;&#x4E00;&#x76F4;&#x5904;&#x4E8E;&#x53EF;&#x8FBE;&#x72B6;&#x6001;&#xFF0C;&#x6CA1;&#x529E;&#x6CD5;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x800C;&#x7A0B;&#x5E8F;&#x672C;&#x8EAB;&#x4E5F;&#x65E0;&#x6CD5;&#x5224;&#x65AD;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6E05;&#x7406;&#x8282;&#x70B9;&#x3002;&#x5F31;&#x5F15;&#x7528;&#x662F;Java&#x4E2D;&#x56DB;&#x6863;&#x5F15;&#x7528;&#x7684;&#x7B2C;&#x4E09;&#x6863;&#xFF0C;&#x6BD4;&#x8F6F;&#x5F15;&#x7528;&#x66F4;&#x52A0;&#x5F31;&#x4E00;&#x4E9B;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x94FE;&#x53EF;&#x8FBE;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x822C;&#x6D3B;&#x4E0D;&#x8FC7;&#x4E0B;&#x4E00;&#x6B21;GC&#x3002;&#x5F53;&#x67D0;&#x4E2A;ThreadLocal&#x5DF2;&#x7ECF;&#x6CA1;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x53EF;&#x8FBE;&#xFF0C;&#x5219;&#x968F;&#x7740;&#x5B83;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x5728;ThreadLocalMap&#x91CC;&#x5BF9;&#x5E94;&#x7684;Entry&#x7684;&#x952E;&#x503C;&#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x8FD9;&#x4E3A;ThreadLocalMap&#x672C;&#x8EAB;&#x7684;&#x5783;&#x573E;&#x6E05;&#x7406;&#x63D0;&#x4F9B;&#x4E86;&#x4FBF;&#x5229;&#x3002;<h3 id="3threadlocalmap&#x662F;&#x4F55;&#x65F6;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF08;setinitialvalue"><a name="3threadlocalmap&#x662F;&#x4F55;&#x65F6;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF08;setinitialvalue" class="plugin-anchor" href="#3threadlocalmap&#x662F;&#x4F55;&#x65F6;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF08;setinitialvalue"><i class="fa fa-link" aria-hidden="true"></i></a>3)ThreadLocalMap&#x662F;&#x4F55;&#x65F6;&#x521D;&#x59CB;&#x5316;&#x7684;&#xFF08;setInitialValue)</h3>
</li>
<li>&#x5728;get&#x65F6;&#x6700;&#x540E;&#x4E00;&#x884C;&#x8C03;&#x7528;&#x4E86;setInitialValue&#xFF0C;&#x5B83;&#x53C8;&#x8C03;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x91CD;&#x5199;&#x7684;initialValue&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#x8981;&#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x5BF9;&#x8C61;&#x3002;ThreadLocalMap&#x6CA1;&#x6709;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x7684;&#x8BDD;&#xFF0C;&#x4FBF;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;firstKey&#x548C;firstValue&#xFF1B;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x88AB;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;key&#x548C;value&#x653E;&#x5165;map&#x3002;</li>
</ul>
<pre><code>private T setInitialValue() {
    T value = initialValue();
    Thread t = Thread.currentThread();
    ThreadLocalMap map = getMap(t);
    if (map != null)
        map.set(this, value);
    else
        createMap(t, value);
    return value;
}
</code></pre><h3 id="4threadlocalmap-&#x539F;&#x7406;"><a name="4threadlocalmap-&#x539F;&#x7406;" class="plugin-anchor" href="#4threadlocalmap-&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>4)ThreadLocalMap &#x539F;&#x7406;</h3>
<pre><code>static class Entry extends WeakReference&lt;ThreadLocal&lt;?&gt;&gt; {
    /** The value associated with this ThreadLocal. */
    Object value;

    Entry(ThreadLocal&lt;?&gt; k, Object v) {
        super(k);
        value = v;
    }
}
</code></pre><ul>
<li>&#x5B83;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;HashMap&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x6CA1;&#x5B9E;&#x73B0;Map&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x4E5F;&#x662F;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;&#x5927;&#x5C0F;16&#x7684;Entry&#x6570;&#x7EC4;&#xFF0C;Entry&#x5BF9;&#x8C61;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x6BCF;&#x4E00;&#x4E2A;key-value&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x91CC;&#x7684;key&#x6C38;&#x8FDC;&#x90FD;&#x662F;ThreadLocal&#x5BF9;&#x8C61;&#xFF0C;&#x901A;&#x8FC7;ThreadLocal&#x5BF9;&#x8C61;&#x7684;set&#x65B9;&#x6CD5;&#xFF0C;&#x7ED3;&#x679C;&#x628A;ThreadLocal&#x5BF9;&#x8C61;&#x81EA;&#x5DF1;&#x5F53;&#x505A;key&#xFF0C;&#x653E;&#x8FDB;&#x4E86;ThreadLoalMap&#x4E2D;&#x3002;</li>
<li>ThreadLoalMap&#x7684;Entry&#x662F;&#x7EE7;&#x627F;WeakReference&#xFF0C;&#x548C;HashMap&#x5F88;&#x5927;&#x7684;&#x533A;&#x522B;&#x662F;&#xFF0C;Entry&#x4E2D;&#x6CA1;&#x6709;next&#x5B57;&#x6BB5;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x4E0D;&#x5B58;&#x5728;&#x94FE;&#x8868;&#x7684;&#x60C5;&#x51B5;&#x4E86;&#x3002;<h4 id="&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6784;&#x9020;&#x65B9;&#x6CD5;</h4>
</li>
<li>ThreadLocalMap(ThreadLocal&lt;?&gt; firstKey, Object firstValue) {<ul>
<li>// &#x8868;&#x7684;&#x5927;&#x5C0F;&#x59CB;&#x7EC8;&#x4E3A;2&#x7684;&#x5E42;&#x6B21;
table = new Entry[INITIAL_CAPACITY];
int i = firstKey.threadLocalHashCode &amp; (INITIAL_CAPACITY - 1);
table[i] = new Entry(firstKey, firstValue);
size = 1;</li>
</ul>
</li>
<li>// &#x8BBE;&#x5B9A;&#x6269;&#x5BB9;&#x9608;&#x503C;
  setThreshold(INITIAL_CAPACITY);
}<ul>
<li>&#x5728;ThreadLocalMap&#x4E2D;&#xFF0C;&#x5F62;&#x5982;key.threadLocalHashCode &amp; (table.length - 1)&#xFF08;&#x5176;&#x4E2D;key&#x4E3A;&#x4E00;&#x4E2A;ThreadLocal&#x5B9E;&#x4F8B;)&#x8FD9;&#x6837;&#x7684;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x5B9E;&#x8D28;&#x4E0A;&#x5C31;&#x662F;&#x5728;&#x6C42;&#x4E00;&#x4E2A;ThreadLocal&#x5B9E;&#x4F8B;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x6E90;&#x7801;&#x5B9E;&#x73B0;&#x4E2D;&#x6CA1;&#x6709;&#x5C06;&#x5176;&#x62BD;&#x4E3A;&#x4E00;&#x4E2A;&#x516C;&#x7528;&#x51FD;&#x6570;&#x3002;</li>
<li>&#x5BF9;&#x4E8E;&amp; (INITIAL_CAPACITY - 1)&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;2&#x7684;&#x5E42;&#x4F5C;&#x4E3A;&#x6A21;&#x6570;&#x53D6;&#x6A21;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&amp;(2^n-1)&#x6765;&#x66FF;&#x4EE3;%2^n&#xFF0C;&#x4F4D;&#x8FD0;&#x7B97;&#x6BD4;&#x53D6;&#x6A21;&#x6548;&#x7387;&#x9AD8;&#x5F88;&#x591A;&#x3002;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;2^n&#x53D6;&#x6A21;&#xFF0C;&#x53EA;&#x8981;&#x4E0D;&#x662F;&#x4F4E;n&#x4F4D;&#x5BF9;&#x7ED3;&#x679C;&#x7684;&#x8D21;&#x732E;&#x663E;&#x7136;&#x90FD;&#x662F;0&#xFF0C;&#x4F1A;&#x5F71;&#x54CD;&#x7ED3;&#x679C;&#x7684;&#x53EA;&#x80FD;&#x662F;&#x4F4E;n&#x4F4D;&#x3002;</li>
</ul>
</li>
</ul>
<pre><code>private void setThreshold(int len) {
    threshold = len * 2 / 3;
}
</code></pre><ul>
<li>getEntry&#xFF08;&#x7531;ThreadLocal#get&#x8C03;&#x7528;)</li>
</ul>
<pre><code>private Entry getEntry(ThreadLocal&lt;?&gt; key) {
    int i = key.threadLocalHashCode &amp; (table.length - 1);
    Entry e = table[i];
    if (e != null &amp;&amp; e.get() == key)
        return e;
    else
</code></pre><ul>
<li>// &#x56E0;&#x4E3A;&#x7528;&#x7684;&#x662F;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#xFF0C;&#x6240;&#x4EE5;&#x5F80;&#x540E;&#x627E;&#x8FD8;&#x662F;&#x6709;&#x53EF;&#x80FD;&#x80FD;&#x591F;&#x627E;&#x5230;&#x76EE;&#x6807;Entry&#x7684;&#x3002;<pre><code>  return getEntryAfterMiss(key, i, e);
</code></pre>}</li>
</ul>
<pre><code>private Entry getEntryAfterMiss(ThreadLocal&lt;?&gt; key, int i, Entry e) {
    Entry[] tab = table;
    int len = tab.length;

    while (e != null) {
        ThreadLocal&lt;?&gt; k = e.get();
        if (k == key)
            return e;
        if (k == null)
</code></pre><ul>
<li>// &#x8BE5;entry&#x5BF9;&#x5E94;&#x7684;ThreadLocal&#x5DF2;&#x7ECF;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x8C03;&#x7528;expungeStaleEntry&#x6765;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x7684;entry            </li>
<li><p>expungeStaleEntry(i);</p>
<pre><code>  else
      i = nextIndex(i, len);
  e = tab[i];
</code></pre><p>  }
  return null;
}</p>
</li>
<li><p>i&#x662F;&#x4F4D;&#x7F6E;</p>
</li>
<li>&#x4ECE;staleSlot&#x5F00;&#x59CB;&#x904D;&#x5386;&#xFF0C;&#x5C06;&#x65E0;&#x6548;key&#xFF08;&#x5F31;&#x5F15;&#x7528;&#x6307;&#x5411;&#x5BF9;&#x8C61;&#x88AB;&#x56DE;&#x6536;)&#x6E05;&#x7406;&#xFF0C;&#x5373;&#x5BF9;&#x5E94;entry&#x4E2D;&#x7684;value&#x7F6E;&#x4E3A;null&#xFF0C;&#x5C06;&#x6307;&#x5411;&#x8FD9;&#x4E2A;entry&#x7684;table[i]&#x7F6E;&#x4E3A;null&#xFF0C;&#x76F4;&#x5230;&#x626B;&#x5230;&#x7A7A;entry&#x3002;</li>
<li>&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x8FC7;&#x7A0B;&#x4E2D;&#x8FD8;&#x4F1A;&#x5BF9;&#x975E;&#x7A7A;&#x7684;entry&#x4F5C;rehash&#x3002;</li>
<li>&#x53EF;&#x4EE5;&#x8BF4;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x4ECE;staleSlot&#x5F00;&#x59CB;&#x6E05;&#x7406;&#x8FDE;&#x7EED;&#x6BB5;&#x4E2D;&#x7684;slot&#xFF08;&#x65AD;&#x5F00;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;rehash slot&#x7B49;)</li>
</ul>
<pre><code>private int expungeStaleEntry(int staleSlot) {
    Entry[] tab = table;
    int len = tab.length;

    // expunge entry at staleSlot
    tab[staleSlot].value = null;
    tab[staleSlot] = null;
    size--;

    // Rehash until we encounter null
    Entry e;
    int i;
    for (i = nextIndex(staleSlot, len);
         (e = tab[i]) != null;
         i = nextIndex(i, len)) {
        ThreadLocal&lt;?&gt; k = e.get();
        if (k == null) {
            e.value = null;
            tab[i] = null;
            size--;
        } else {
</code></pre><ul>
<li>// &#x5BF9;&#x4E8E;&#x8FD8;&#x6CA1;&#x6709;&#x88AB;&#x56DE;&#x6536;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x9700;&#x8981;&#x505A;&#x4E00;&#x6B21;rehash&#x3002;</li>
<li><p>&#x5982;&#x679C;&#x5BF9;&#x5E94;&#x7684;ThreadLocal&#x7684;ID&#x5BF9;len&#x53D6;&#x6A21;&#x51FA;&#x6765;&#x7684;&#x7D22;&#x5F15;h&#x4E0D;&#x4E3A;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;i&#xFF0C;</p>
<ul>
<li><p>&#x5219;&#x4ECE;h&#x5411;&#x540E;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;slot&#xFF0C;&#x628A;&#x5F53;&#x524D;&#x7684;entry&#x7ED9;&#x632A;&#x8FC7;&#x53BB;&#x3002;
int h = k.threadLocalHashCode &amp; (len - 1);
if (h != i) {
tab[i] = null;</p>
<p>// Unlike Knuth 6.4 Algorithm R, we must scan until
// null because multiple entries could have been stale.
while (tab[h] != null)
h = nextIndex(h, len);
tab[h] = e;
}
}
}
return i;
}</p>
</li>
</ul>
</li>
</ul>
<h4 id="set&#xFF08;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x6CD5;&#x89E3;&#x51B3;hash&#x51B2;&#x7A81;"><a name="set&#xFF08;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x6CD5;&#x89E3;&#x51B3;hash&#x51B2;&#x7A81;" class="plugin-anchor" href="#set&#xFF08;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x6CD5;&#x89E3;&#x51B3;hash&#x51B2;&#x7A81;"><i class="fa fa-link" aria-hidden="true"></i></a>set&#xFF08;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x6CD5;&#x89E3;&#x51B3;hash&#x51B2;&#x7A81;)</h4>
<pre><code>private void set(ThreadLocal&lt;?&gt; key, Object value) {

    // We don&apos;t use a fast path as with get() because it is at
    // least as common to use set() to create new entries as
    // it is to replace existing ones, in which case, a fast
    // path would fail more often than not.

    Entry[] tab = table;
    int len = tab.length;
    // &#x8BA1;&#x7B97;key&#x7684;hash&#x503C;
</code></pre><pre><code>- int i = key.threadLocalHashCode &amp; (len-1);
for (Entry e = tab[i];
     e != null;
     e = tab[i = nextIndex(i, len)]) {
    ThreadLocal&lt;?&gt; k = e.get();

    if (k == key) {
</code></pre><ul>
<li><p>// &#x540C;&#x4E00;&#x4E2A;ThreadLocal&#x8D4B;&#x4E86;&#x65B0;&#x503C;&#xFF0C;&#x5219;&#x66FF;&#x6362;&#x539F;&#x503C;&#x4E3A;&#x65B0;&#x503C;</p>
<pre><code>      e.value = value;
      return;
  }

  if (k == null) {
</code></pre></li>
<li>// &#x8BE5;&#x4F4D;&#x7F6E;&#x7684;TheadLocal&#x5DF2;&#x7ECF;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x6E05;&#x7406;slot&#x5E76;&#x5728;&#x6B64;&#x4F4D;&#x7F6E;&#x653E;&#x5165;&#x5F53;&#x524D;key&#x548C;value&#xFF08;stale&#xFF1A;&#x9648;&#x65E7;&#x7684;)<pre><code>      replaceStaleEntry(key, value, i);
      return;
  }
</code></pre>  }
  // &#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x4E3A;&#x7A7A;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x653E;&#x5230;&#x8BE5;&#x4F4D;&#x7F6E;&#x4E0A;
  tab[i] = new Entry(key, value);
  int sz = ++size;</li>
<li><p>// &#x542F;&#x53D1;&#x5F0F;&#x5730;&#x6E05;&#x7406;&#x4E00;&#x4E9B;slot,&#x5E76;&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x5426;&#x9700;&#x8981;&#x6269;&#x5BB9;
  if (!cleanSomeSlots(i, sz) &amp;&amp; sz &gt;= threshold)</p>
<pre><code>  rehash();
</code></pre><p>}</p>
</li>
<li><p>&#x6BCF;&#x4E2A;ThreadLocal&#x5BF9;&#x8C61;&#x90FD;&#x6709;&#x4E00;&#x4E2A;hash&#x503C; threadLocalHashCode&#xFF0C;&#x6BCF;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;ThreadLocal&#x5BF9;&#x8C61;&#xFF0C;hash&#x503C;&#x5C31;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x5927;&#x5C0F; 0x61c88647&#x3002;</p>
</li>
</ul>
<pre><code>private final int threadLocalHashCode = nextHashCode();
</code></pre><pre><code>private static final int HASH_INCREMENT = 0x61c88647;
</code></pre><pre><code>private static int nextHashCode() {
    return nextHashCode.getAndAdd(HASH_INCREMENT);
}
</code></pre><ul>
<li>&#x7531;&#x4E8E;ThreadLocalMap&#x4F7F;&#x7528;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x6CD5;&#x6765;&#x89E3;&#x51B3;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x9645;&#x4E0A;Entry[]&#x6570;&#x7EC4;&#x5728;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;&#x4E0A;&#x662F;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x73AF;&#x5F62;&#x5B58;&#x5728;&#x7684;&#x3002;</li>
</ul>
<pre><code>private static int nextIndex(int i, int len) {
    return ((i + 1 &lt; len) ? i + 1 : 0);
}
</code></pre><ul>
<li>&#x5728;&#x63D2;&#x5165;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6839;&#x636E;ThreadLocal&#x5BF9;&#x8C61;&#x7684;hash&#x503C;&#xFF0C;&#x5B9A;&#x4F4D;&#x5230;table&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;i&#xFF0C;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</li>
<li>1&#x3001;&#x5982;&#x679C;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x6B63;&#x597D;&#xFF0C;&#x5C31;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;Entry&#x5BF9;&#x8C61;&#x653E;&#x5728;&#x4F4D;&#x7F6E;i&#x4E0A;&#xFF1B; </li>
<li>2&#x3001;&#x4E0D;&#x5DE7;&#xFF0C;&#x4F4D;&#x7F6E;i&#x5DF2;&#x7ECF;&#x6709;Entry&#x5BF9;&#x8C61;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;Entry&#x5BF9;&#x8C61;&#x7684;key&#x6B63;&#x597D;&#x662F;&#x5373;&#x5C06;&#x8BBE;&#x7F6E;&#x7684;key&#xFF0C;&#x90A3;&#x4E48;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;Entry&#x4E2D;&#x7684;value&#xFF1B;</li>
<li>3&#x3001;&#x5F88;&#x4E0D;&#x5DE7;&#xFF0C;&#x4F4D;&#x7F6E;i&#x7684;Entry&#x5BF9;&#x8C61;&#xFF0C;&#x548C;&#x5373;&#x5C06;&#x8BBE;&#x7F6E;&#x7684;key&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x80FD;&#x627E;&#x4E0B;&#x4E00;&#x4E2A;&#x7A7A;&#x4F4D;&#x7F6E;&#xFF1B;</li>
<li><p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5728;get&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E5F;&#x4F1A;&#x6839;&#x636E;ThreadLocal&#x5BF9;&#x8C61;&#x7684;hash&#x503C;&#xFF0C;&#x5B9A;&#x4F4D;&#x5230;table&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x7136;&#x540E;&#x5224;&#x65AD;&#x8BE5;&#x4F4D;&#x7F6E;Entry&#x5BF9;&#x8C61;&#x4E2D;&#x7684;key&#x662F;&#x5426;&#x548C;get&#x7684;key&#x4E00;&#x81F4;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x5C31;&#x5224;&#x65AD;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;set&#x548C;get&#x5982;&#x679C;&#x51B2;&#x7A81;&#x4E25;&#x91CD;&#x7684;&#x8BDD;&#xFF0C;&#x6548;&#x7387;&#x5F88;&#x4F4E;&#xFF0C;&#x56E0;&#x4E3A;ThreadLoalMap&#x662F;Thread&#x7684;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x5373;&#x4F7F;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x63A7;&#x5236;&#x4E86;&#x8BBE;&#x7F6E;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x4E0D;&#x80FD;&#x63A7;&#x5236;&#x5176;&#x5B83;&#x4EE3;&#x7801;&#x7684;&#x884C;&#x4E3A;&#x3002;</p>
<h4 id="cleansomeslots&#xFF08;&#x542F;&#x53D1;&#x5F0F;&#x5730;&#x6E05;&#x7406;slot"><a name="cleansomeslots&#xFF08;&#x542F;&#x53D1;&#x5F0F;&#x5730;&#x6E05;&#x7406;slot" class="plugin-anchor" href="#cleansomeslots&#xFF08;&#x542F;&#x53D1;&#x5F0F;&#x5730;&#x6E05;&#x7406;slot"><i class="fa fa-link" aria-hidden="true"></i></a>cleanSomeSlots&#xFF08;&#x542F;&#x53D1;&#x5F0F;&#x5730;&#x6E05;&#x7406;slot)</h4>
</li>
<li>i&#x662F;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#xFF0C;n&#x662F;&#x5143;&#x7D20;&#x4E2A;&#x6570;</li>
<li>i&#x5BF9;&#x5E94;entry&#x662F;&#x975E;&#x65E0;&#x6548;&#xFF08;&#x6307;&#x5411;&#x7684;ThreadLocal&#x6CA1;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x6216;&#x8005;entry&#x672C;&#x8EAB;&#x4E3A;&#x7A7A;)</li>
<li>n&#x662F;&#x7528;&#x4E8E;&#x63A7;&#x5236;&#x63A7;&#x5236;&#x626B;&#x63CF;&#x6B21;&#x6570;&#x7684;</li>
<li><p>&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x5982;&#x679C;log n&#x6B21;&#x626B;&#x63CF;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x65E0;&#x6548;slot&#xFF0C;&#x51FD;&#x6570;&#x5C31;&#x7ED3;&#x675F;&#x4E86;</p>
</li>
<li><p>&#x4F46;&#x662F;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x4E86;&#x65E0;&#x6548;&#x7684;slot&#xFF0C;&#x5C06;n&#x7F6E;&#x4E3A;table&#x7684;&#x957F;&#x5EA6;len&#xFF0C;&#x505A;&#x4E00;&#x6B21;&#x8FDE;&#x7EED;&#x6BB5;&#x7684;&#x6E05;&#x7406;</p>
</li>
<li>&#x518D;&#x4ECE;&#x4E0B;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;slot&#x5F00;&#x59CB;&#x7EE7;&#x7EED;&#x626B;&#x63CF;</li>
<li>&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x6709;&#x4E24;&#x5904;&#x5730;&#x65B9;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x4E00;&#x5904;&#x662F;&#x63D2;&#x5165;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x53E6;&#x5916;&#x4E2A;&#x662F;&#x5728;&#x66FF;&#x6362;&#x65E0;&#x6548;slot&#x7684;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;</li>
<li>&#x533A;&#x522B;&#x662F;&#x524D;&#x8005;&#x4F20;&#x5165;&#x7684;n&#x4E3A;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#xFF0C;&#x540E;&#x8005;&#x4E3A;table&#x7684;&#x5BB9;&#x91CF;</li>
</ul>
<pre><code>private boolean cleanSomeSlots(int i, int n) {
    boolean removed = false;
    Entry[] tab = table;
    int len = tab.length;
    do {
        i = nextIndex(i, len);
        Entry e = tab[i];
        if (e != null &amp;&amp; e.get() == null) {
            n = len;
            removed = true;
            i = expungeStaleEntry(i);
        }
    } while ( (n &gt;&gt;&gt;= 1) != 0);
    return removed;
}
</code></pre><h4 id="rehash"><a name="rehash" class="plugin-anchor" href="#rehash"><i class="fa fa-link" aria-hidden="true"></i></a>rehash</h4>
<ul>
<li>&#x5148;&#x5168;&#x91CF;&#x6E05;&#x7406;&#xFF0C;&#x5982;&#x679C;&#x6E05;&#x7406;&#x540E;&#x73B0;&#x6709;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x8D85;&#x8FC7;&#x8D1F;&#x8F7D;&#xFF0C;&#x90A3;&#x4E48;&#x6269;&#x5BB9;</li>
</ul>
<pre><code>private void rehash() {
</code></pre><pre><code>- // &#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5168;&#x91CF;&#x6E05;&#x7406;
expungeStaleEntries();

// Use lower threshold for doubling to avoid hysteresis
if (size &gt;= threshold - threshold / 4)
    resize();
</code></pre><p>}</p>
<ul>
<li>&#x5168;&#x91CF;&#x6E05;&#x7406;</li>
</ul>
<pre><code>private void expungeStaleEntries() {
    Entry[] tab = table;
    int len = tab.length;
    for (int j = 0; j &lt; len; j++) {
        Entry e = tab[j];
        if (e != null &amp;&amp; e.get() == null)
            expungeStaleEntry(j);
    }
}
</code></pre><ul>
<li>&#x6269;&#x5BB9;&#xFF0C;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x4FDD;&#x8BC1;table&#x7684;&#x5BB9;&#x91CF;len&#x4E3A;2&#x7684;&#x5E42;&#xFF0C;&#x6240;&#x4EE5;&#x6269;&#x5BB9;&#x5373;&#x6269;&#x5927;2&#x500D;</li>
</ul>
<pre><code>private void resize() {
    Entry[] oldTab = table;
    int oldLen = oldTab.length;
    int newLen = oldLen * 2;
    Entry[] newTab = new Entry[newLen];
    int count = 0;

    for (int j = 0; j &lt; oldLen; ++j) {
        Entry e = oldTab[j];
        if (e != null) {
            ThreadLocal&lt;?&gt; k = e.get();
            if (k == null) {
                e.value = null; // Help the GC
            } else {
                int h = k.threadLocalHashCode &amp; (newLen - 1);
                while (newTab[h] != null)
                    h = nextIndex(h, newLen);
                newTab[h] = e;
                count++;
            }
        }
    }

    setThreshold(newLen);
    size = count;
    table = newTab;
}
</code></pre><h4 id="remove"><a name="remove" class="plugin-anchor" href="#remove"><i class="fa fa-link" aria-hidden="true"></i></a>remove</h4>
<pre><code>private void remove(ThreadLocal&lt;?&gt; key) {
    Entry[] tab = table;
    int len = tab.length;
    int i = key.threadLocalHashCode &amp; (len-1);
    for (Entry e = tab[i];
         e != null;
         e = tab[i = nextIndex(i, len)]) {
        if (e.get() == key) {
</code></pre><ul>
<li>// &#x663E;&#x5F0F;&#x65AD;&#x5F00;&#x5F31;&#x5F15;&#x7528;<pre><code>      e.clear();
</code></pre></li>
<li><p>// &#x8FDB;&#x884C;&#x6BB5;&#x6E05;&#x7406;</p>
<pre><code>      expungeStaleEntry(i);
      return;
  }
</code></pre><p>  }
}</p>
</li>
<li><p>Reference#clear</p>
</li>
</ul>
<pre><code>public void clear() {
    this.referent = null;
}
</code></pre><h4 id="&#x5185;&#x5B58;&#x6CC4;&#x9732;"><a name="&#x5185;&#x5B58;&#x6CC4;&#x9732;" class="plugin-anchor" href="#&#x5185;&#x5B58;&#x6CC4;&#x9732;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5185;&#x5B58;&#x6CC4;&#x9732;</h4>
<ul>
<li><p>&#x53EA;&#x6709;&#x8C03;&#x7528;TheadLocal&#x7684;remove&#x6216;&#x8005;get&#x3001;set&#x65F6;&#x624D;&#x4F1A;&#x91C7;&#x53D6;&#x63AA;&#x65BD;&#x53BB;&#x6E05;&#x7406;&#x88AB;&#x56DE;&#x6536;&#x7684;ThreadLocal&#x5BF9;&#x5E94;&#x7684;value&#xFF08;&#x4F46;&#x4E5F;&#x672A;&#x5FC5;&#x4F1A;&#x6E05;&#x7406;&#x6240;&#x6709;&#x7684;&#x9700;&#x8981;&#x88AB;&#x56DE;&#x6536;&#x7684;value)&#x3002;&#x5047;&#x5982;&#x4E00;&#x4E2A;&#x5C40;&#x90E8;&#x7684;ThreadLocal&#x4E0D;&#x518D;&#x9700;&#x8981;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x53BB;&#x8C03;&#x7528;remove&#x65B9;&#x6CD5;&#x6E05;&#x9664;&#xFF0C;&#x90A3;&#x4E48;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x3002;</p>
</li>
<li><p>&#x65E2;&#x7136;&#x5DF2;&#x7ECF;&#x53D1;&#x73B0;&#x6709;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x7684;&#x9690;&#x60A3;&#xFF0C;&#x81EA;&#x7136;&#x6709;&#x5E94;&#x5BF9;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x5728;&#x8C03;&#x7528;ThreadLocal&#x7684;get()&#x3001;set()&#x53EF;&#x80FD;&#x4F1A;&#x6E05;&#x9664;ThreadLocalMap&#x4E2D;key&#x4E3A;null&#x7684;Entry&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x5E94;&#x7684;value&#x5C31;&#x6CA1;&#x6709;GC Roots&#x53EF;&#x8FBE;&#x4E86;&#xFF0C;&#x4E0B;&#x6B21;GC&#x7684;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x679C;&#x8C03;&#x7528;remove&#x65B9;&#x6CD5;&#xFF0C;&#x80AF;&#x5B9A;&#x4F1A;&#x5220;&#x9664;&#x5BF9;&#x5E94;&#x7684;Entry&#x5BF9;&#x8C61;&#x3002;</p>
</li>
<li><p>&#x5982;&#x679C;&#x4F7F;&#x7528;ThreadLocal&#x7684;set&#x65B9;&#x6CD5;&#x4E4B;&#x540E;&#xFF0C;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x7684;&#x8C03;&#x7528;remove&#x65B9;&#x6CD5;&#xFF0C;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#xFF0C;&#x6240;&#x4EE5;&#x517B;&#x6210;&#x826F;&#x597D;&#x7684;&#x7F16;&#x7A0B;&#x4E60;&#x60EF;&#x5341;&#x5206;&#x91CD;&#x8981;&#xFF0C;&#x4F7F;&#x7528;&#x5B8C;ThreadLocal&#x4E4B;&#x540E;&#xFF0C;&#x8BB0;&#x5F97;&#x8C03;&#x7528;remove&#x65B9;&#x6CD5;&#x3002;</p>
</li>
</ul>
<pre><code>JDK&#x5EFA;&#x8BAE;&#x5C06;ThreadLocal&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x6210;private static&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;ThreadLocal&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x5C31;&#x66F4;&#x957F;&#xFF0C;&#x7531;&#x4E8E;&#x4E00;&#x76F4;&#x5B58;&#x5728;ThreadLocal&#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x6240;&#x4EE5;ThreadLocal&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x4E5F;&#x5C31;&#x80FD;&#x4FDD;&#x8BC1;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x80FD;&#x6839;&#x636E;ThreadLocal&#x7684;&#x5F31;&#x5F15;&#x7528;&#x8BBF;&#x95EE;&#x5230;Entry&#x7684;value&#x503C;&#xFF0C;&#x7136;&#x540E;remove&#x5B83;&#xFF0C;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x3002;
</code></pre><ul>
<li><h2 id="iterator--listiterator--iterable"><a name="iterator--listiterator--iterable" class="plugin-anchor" href="#iterator--listiterator--iterable"><i class="fa fa-link" aria-hidden="true"></i></a>Iterator / ListIterator / Iterable</h2>
</li>
<li>&#x666E;&#x901A;for&#x5FAA;&#x73AF;&#x65F6;&#x4E0D;&#x80FD;&#x5220;&#x9664;&#x5143;&#x7D20;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF1B;Iterator&#x53EF;&#x4EE5;</li>
</ul>
<pre><code>public interface Collection&lt;E&gt; extends Iterable&lt;E&gt; {}
</code></pre><ul>
<li>Collection&#x63A5;&#x53E3;&#x7EE7;&#x627F;&#x4E86;Iterable&#xFF0C;Iterable&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x4E86;iterator&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x548C;forEach default&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;ArrayList&#x3001;LinkedList&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x5668;&#x548C;forEach&#xFF0C;&#x5305;&#x62EC;&#x589E;&#x5F3A;for&#x5FAA;&#x73AF;&#xFF08;&#x7F16;&#x8BD1;&#x65F6;&#x8F6C;&#x4E3A;&#x8FED;&#x4EE3;&#x5668;)&#x3002;</li>
</ul>
<pre><code>public interface Iterable&lt;T&gt; {
    Iterator&lt;T&gt; iterator();
    default void forEach(Consumer&lt;? super T&gt; action) {
        Objects.requireNonNull(action);
        for (T t : this) {
            action.accept(t);
        }
    }
</code></pre><ul>
<li>default Spliterator<t> spliterator() {<pre><code>  return Spliterators.spliteratorUnknownSize(iterator(), 0);
</code></pre>  }  </t></li>
<li><p>}</p>
</li>
<li></li>
<li><p>&#x6CE8;&#x610F;&#x8FD9;&#x4E9B;&#x5177;&#x4F53;&#x7684;&#x5BB9;&#x5668;&#x7C7B;&#x8FD4;&#x56DE;&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x5BF9;&#x8C61;&#x662F;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x56E0;&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x5BB9;&#x5668;&#x904D;&#x5386;&#x65B9;&#x5F0F;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E9B;&#x8FED;&#x4EE3;&#x5668;&#x5BF9;&#x8C61;&#x90FD;&#x5B9E;&#x73B0;Iterator&#x63A5;&#x53E3;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;Iterator&#x5BF9;&#x8C61;&#x6765;&#x7EDF;&#x4E00;&#x6307;&#x5411;&#x8FD9;&#x4E9B;&#x4E0D;&#x540C;&#x7684;&#x5B50;&#x7C7B;&#x5BF9;&#x8C61;&#x3002;</p>
</li>
<li>ArrayList#iterator</li>
</ul>
<pre><code>public Iterator&lt;E&gt; iterator() {
    return new Itr();
}
</code></pre><ul>
<li>ArrayList#Itr</li>
</ul>
<pre><code>private class Itr implements Iterator&lt;E&gt; {
    int cursor;       // index of next element to return
    int lastRet = -1; // index of last element returned; -1 if no such
    int expectedModCount = modCount;

    public boolean hasNext() {
        return cursor != size;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E next() {
        checkForComodification();
        int i = cursor;
        if (i &gt;= size)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (i &gt;= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i + 1;
        return (E) elementData[lastRet = i];
    }

    public void remove() {
        if (lastRet &lt; 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            ArrayList.this.remove(lastRet);
            cursor = lastRet;
            lastRet = -1;
            expectedModCount = modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    @Override
    @SuppressWarnings(&quot;unchecked&quot;)
    public void forEachRemaining(Consumer&lt;? super E&gt; consumer) {
        Objects.requireNonNull(consumer);
        final int size = ArrayList.this.size;
        int i = cursor;
        if (i &gt;= size) {
            return;
        }
        final Object[] elementData = ArrayList.this.elementData;
        if (i &gt;= elementData.length) {
            throw new ConcurrentModificationException();
        }
        while (i != size &amp;&amp; modCount == expectedModCount) {
            consumer.accept((E) elementData[i++]);
        }
        // update once at end of iteration to reduce heap write traffic
        cursor = i;
        lastRet = i - 1;
        checkForComodification();
    }

    final void checkForComodification() {
        if (modCount != expectedModCount)
            throw new ConcurrentModificationException();
    }
}
</code></pre><ul>
<li>ArrayList#listIterator</li>
</ul>
<pre><code>public ListIterator&lt;E&gt; listIterator() {
    return new ListItr(0);
}
</code></pre><ul>
<li>ArrayList#ListItr</li>
</ul>
<pre><code>private class ListItr extends Itr implements ListIterator&lt;E&gt; {
    ListItr(int index) {
        super();
        cursor = index;
    }

    public boolean hasPrevious() {
        return cursor != 0;
    }

    public int nextIndex() {
        return cursor;
    }

    public int previousIndex() {
        return cursor - 1;
    }

    @SuppressWarnings(&quot;unchecked&quot;)
    public E previous() {
        checkForComodification();
        int i = cursor - 1;
        if (i &lt; 0)
            throw new NoSuchElementException();
        Object[] elementData = ArrayList.this.elementData;
        if (i &gt;= elementData.length)
            throw new ConcurrentModificationException();
        cursor = i;
        return (E) elementData[lastRet = i];
    }

    public void set(E e) {
        if (lastRet &lt; 0)
            throw new IllegalStateException();
        checkForComodification();

        try {
            ArrayList.this.set(lastRet, e);
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }

    public void add(E e) {
        checkForComodification();

        try {
            int i = cursor;
            ArrayList.this.add(i, e);
            cursor = i + 1;
            lastRet = -1;
            expectedModCount = modCount;
        } catch (IndexOutOfBoundsException ex) {
            throw new ConcurrentModificationException();
        }
    }
}
</code></pre><h2 id="for-&#x589E;&#x5F3A;for-foreach"><a name="for-&#x589E;&#x5F3A;for-foreach" class="plugin-anchor" href="#for-&#x589E;&#x5F3A;for-foreach"><i class="fa fa-link" aria-hidden="true"></i></a>for /&#x589E;&#x5F3A;for/ forEach</h2>
<p>For-each loop    Equivalent for loop
for (type var : arr) {
    body-of-loop
}    for (int i = 0; i &lt; arr.length; i++) { 
    type var = arr[i];
    body-of-loop
}
for (type var : coll) {
    body-of-loop
}    for (Iterator<type> iter = coll.iterator(); iter.hasNext(); ) {
    type var = iter.next();
    body-of-loop
}</type></p>
<ul>
<li><p>&#x589E;&#x5F3A;for&#x5FAA;&#x73AF;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x88AB;&#x4FEE;&#x6539;&#x4E3A;for&#x5FAA;&#x73AF;&#xFF1A;&#x6570;&#x7EC4;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x4E3A;&#x4E0B;&#x6807;&#x5F0F;&#x7684;&#x5FAA;&#x73AF;&#xFF1B;&#x96C6;&#x5408;&#x4F1A;&#x88AB;&#x4FEE;&#x6539;&#x4E3A;Iterator&#x5FAA;&#x73AF;&#x3002;</p>
</li>
<li><p>&#x589E;&#x5F3A;for&#x5FAA;&#x73AF;&#x4E0D;&#x9002;&#x5408;&#x4EE5;&#x4E0B;&#x60C5;&#x51B5;&#xFF1A;&#xFF08;&#x8FC7;&#x6EE4;&#x3001;&#x8F6C;&#x6362;&#x3001;&#x5E73;&#x884C;&#x8FED;&#x4EE3;)</p>
</li>
<li>&#x5BF9;collection&#x6216;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E0D;&#x80FD;&#x505A;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#xFF1B;</li>
<li>&#x53EA;&#x80FD;&#x6B63;&#x5411;&#x904D;&#x5386;&#xFF0C;&#x4E0D;&#x80FD;&#x53CD;&#x5411;&#x904D;&#x5386;&#xFF1B;</li>
<li><p>&#x904D;&#x5386;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;collection&#x6216;&#x6570;&#x7EC4;&#x4E2D;&#x540C;&#x65F6;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x53EF;&#x89C1;&#xFF0C;&#x5373;&#x53EA;&#x6709;&#x201C;&#x5F53;&#x524D;&#x904D;&#x5386;&#x5230;&#x7684;&#x5143;&#x7D20;&#x201D;&#x53EF;&#x89C1;&#xFF0C;&#x800C;&#x524D;&#x4E00;&#x4E2A;&#x6216;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#xFF1B;</p>
</li>
<li><p>forEach</p>
</li>
<li>ArrayList#forEach&#x7EE7;&#x627F;&#x81EA;</li>
<li>Iterable&#x63A5;&#x53E3;&#x7684;default&#x65B9;&#x6CD5;</li>
<li><p>default void forEach(Consumer&lt;? super T&gt; action) {
  Objects.requireNonNull(action);
  for (T t : this) {</p>
<pre><code>  action.accept(t);
</code></pre><p>  }
}</p>
</li>
<li></li>
</ul>
<h2 id="comparable&#x4E0E;comparator"><a name="comparable&#x4E0E;comparator" class="plugin-anchor" href="#comparable&#x4E0E;comparator"><i class="fa fa-link" aria-hidden="true"></i></a>Comparable&#x4E0E;Comparator</h2>
<ul>
<li>&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5305;&#x88C5;&#x7C7B;&#x548C;String&#x7C7B;&#x5747;&#x5DF2;&#x5B9E;&#x73B0;&#x4E86;Comparable&#x63A5;&#x53E3;&#x3002;</li>
<li>&#x5B9E;&#x73B0;&#x4E86;Comparable&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x5217;&#x8868;&#x6216;&#x6570;&#x7EC4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Collections.sort&#x6216;Arrays.sort&#x8FDB;&#x884C;&#x81EA;&#x52A8;&#x6392;&#x5E8F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x5347;&#x5E8F;&#x3002;</li>
</ul>
<ul>
<li>&#x53EF;&#x4EE5;&#x5C06; Comparator &#x4F20;&#x9012;&#x7ED9; sort &#x65B9;&#x6CD5;&#xFF08;&#x5982; Collections.sort &#x6216; Arrays.sort)&#xFF0C;&#x4ECE;&#x800C;&#x5141;&#x8BB8;&#x5728;&#x6392;&#x5E8F;&#x987A;&#x5E8F;&#x4E0A;&#x5B9E;&#x73B0;&#x7CBE;&#x786E;&#x63A7;&#x5236;&#x3002;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Comparator &#x6765;&#x63A7;&#x5236;&#x67D0;&#x4E9B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF08;&#x5982;TreeSet,TreeMap)&#x7684;&#x987A;&#x5E8F;&#x3002;</li>
<li></li>
</ul>
<h1 id="19-&#x7EE7;&#x627F;"><a name="19-&#x7EE7;&#x627F;" class="plugin-anchor" href="#19-&#x7EE7;&#x627F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.9 &#x7EE7;&#x627F;</h1>
<pre><code>&#x5B50;&#x7C7B;&#x7EE7;&#x627F;&#x7236;&#x7C7B;&#x6240;&#x6709;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF08;&#x5373;&#x4F7F;&#x662F;private&#x53D8;&#x91CF;&#xFF0C;&#x6709;&#x6240;&#x6709;&#x6743;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x6743;&#xFF0C;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x7236;&#x7C7B;&#x7684;private&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;)&#x3002;
</code></pre><pre><code>&#x5B50;&#x7C7B;&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x7236;&#x7C7B;&#x975E;private&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;super.&#x7236;&#x7C7B;&#x65B9;&#x6CD5;&#x7684;&#x5F62;&#x5F0F;&#x8C03;&#x7528;&#x3002;
</code></pre><ul>
<li><p>&#x5B50;&#x7C7B;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x4F7F;&#x7528;super(&#x7236;&#x7C7B;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x53C2;&#x6570;)&#x53BB;&#x6784;&#x9020;&#x7236;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x8BDD;&#xFF08;&#x5982;&#x679C;&#x6709;&#x5FC5;&#x987B;&#x662F;&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E00;&#x884C;)&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x5728;&#x7B2C;&#x4E00;&#x884C;&#x6DFB;&#x52A0;super()&#x3002;</p>
</li>
<li><p>&#x5B50;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x53EF;&#x5426;&#x4E0D;&#x4F7F;&#x7528;super(&#x7236;&#x7C7B;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x53C2;&#x6570;)&#x8C03;&#x7528;&#x8D85;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1F;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x663E;&#x5F0F;&#x7684;&#x5199;&#x51FA;super&#xFF0C;&#x4F46;&#x524D;&#x63D0;&#x662F;&#x201C;&#x7236;&#x7C7B;&#x4E2D;&#x6709;&#x591A;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x4E14;&#x6709;&#x4E00;&#x4E2A;&#x662F;&#x663E;&#x5F0F;&#x5199;&#x51FA;&#x7684;&#x65E0;&#x53C2;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x201D;&#x3002;</p>
</li>
<li></li>
</ul>
<h1 id="110-&#x5185;&#x90E8;&#x7C7B;"><a name="110-&#x5185;&#x90E8;&#x7C7B;" class="plugin-anchor" href="#110-&#x5185;&#x90E8;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.10 &#x5185;&#x90E8;&#x7C7B;</h1>
<ul>
<li>&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x91CC;&#x9762;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x5C31;&#x662F;&#x5185;&#x90E8;&#x7C7B;</li>
<li>&#x5185;&#x90E8;&#x7C7B;&#x662F;&#x7F16;&#x8BD1;&#x5668;&#x73B0;&#x8C61;&#xFF0C;&#x4E0E;&#x865A;&#x62DF;&#x673A;&#x65E0;&#x5173;&#x3002;</li>
<li>&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x5C06;&#x5185;&#x90E8;&#x7C7B;&#x7F16;&#x8BD1;&#x6210;&#x7528;$&#x5206;&#x5272;&#x5916;&#x90E8;&#x7C7B;&#x540D;&#x548C;&#x5185;&#x90E8;&#x7C7B;&#x540D;&#x7684;&#x5E38;&#x89C4;&#x7C7B;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x865A;&#x62DF;&#x673A;&#x5BF9;&#x6B64;&#x4E00;&#x65E0;&#x6240;&#x77E5;&#x3002;</li>
</ul>
<pre><code>&#x5185;&#x90E8;&#x7C7B;&#x53EF;&#x4EE5;&#x662F;static&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x7528;public&#xFF0C;default&#xFF0C;protected&#x548C;private&#x4FEE;&#x9970;&#x3002;&#xFF08;&#x800C;&#x5916;&#x90E8;&#x7C7B;&#x5373;&#x7C7B;&#x540D;&#x548C;&#x6587;&#x4EF6;&#x540D;&#x76F8;&#x540C;&#x7684;&#x53EA;&#x80FD;&#x4F7F;&#x7528;public&#x548C;default)&#x3002;
</code></pre><h2 id="&#x4F18;&#x70B9;"><a name="&#x4F18;&#x70B9;" class="plugin-anchor" href="#&#x4F18;&#x70B9;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4F18;&#x70B9;</h2>
<ul>
<li>&#x6BCF;&#x4E2A;&#x5185;&#x90E8;&#x7C7B;&#x90FD;&#x80FD;&#x72EC;&#x7ACB;&#x5730;&#x7EE7;&#x627F;&#x4E00;&#x4E2A;&#xFF08;&#x63A5;&#x53E3;&#x7684;)&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x8BBA;&#x5916;&#x90E8;&#x7C7B;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x7EE7;&#x627F;&#x4E86;&#x67D0;&#x4E2A;&#xFF08;&#x63A5;&#x53E3;&#x7684;)&#x5B9E;&#x73B0;&#xFF0C;&#x5BF9;&#x4E8E;&#x5185;&#x90E8;&#x7C7B;&#x90FD;&#x6CA1;&#x6709;&#x5F71;&#x54CD;&#x3002;</li>
<li><p>&#x63A5;&#x53E3;&#x53EA;&#x662F;&#x89E3;&#x51B3;&#x4E86;&#x90E8;&#x5206;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x5185;&#x90E8;&#x7C7B;&#x4F7F;&#x5F97;&#x591A;&#x91CD;&#x7EE7;&#x627F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x5B8C;&#x6574;&#x3002;</p>
</li>
<li><p>&#x7528;&#x5185;&#x90E8;&#x7C7B;&#x8FD8;&#x80FD;&#x591F;&#x4E3A;&#x6211;&#x4EEC;&#x5E26;&#x6765;&#x5982;&#x4E0B;&#x7279;&#x6027;&#xFF1A;</p>
</li>
<li>1&#x3001;&#x5185;&#x90E8;&#x7C7B;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F8B;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x4E14;&#x4E0E;&#x5176;&#x4ED6;&#x5916;&#x90E8;&#x5BF9;&#x8C61;&#x7684;&#x4FE1;&#x606F;&#x76F8;&#x4E92;&#x72EC;&#x7ACB;&#x3002;</li>
<li>2&#x3001;&#x5728;&#x5355;&#x4E2A;&#x5916;&#x90E8;&#x7C7B;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x591A;&#x4E2A;&#x5185;&#x90E8;&#x7C7B;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x6216;&#x8005;&#x7EE7;&#x627F;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x3002;&#x5916;&#x90E8;&#x7C7B;&#x60F3;&#x8981;&#x591A;&#x7EE7;&#x627F;&#x7684;&#x7C7B;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x7531;&#x5185;&#x90E8;&#x7C7B;&#x7EE7;&#x627F;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;Override&#x6216;&#x8005;&#x76F4;&#x63A5;&#x590D;&#x7528;&#x3002;&#x7136;&#x540E;&#x5916;&#x90E8;&#x7C7B;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x6765;&#x4F7F;&#x7528;&#x8BE5;&#x5185;&#x90E8;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x6210;&#x5458;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x590D;&#x7528;&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x5916;&#x90E8;&#x5185;&#x5C31;&#x5177;&#x6709;&#x591A;&#x4E2A;&#x7236;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x7279;&#x5F81;&#x3002;</li>
<li>3&#x3001;&#x521B;&#x5EFA;&#x5185;&#x90E8;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x523B;&#x5E76;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x5916;&#x90E8;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x521B;&#x5EFA;&#x3002;</li>
<li>4&#x3001;&#x5185;&#x90E8;&#x7C7B;&#x5E76;&#x6CA1;&#x6709;&#x4EE4;&#x4EBA;&#x8FF7;&#x60D1;&#x7684;&#x201C;is-a&#x201D;&#x5173;&#x7CFB;&#xFF0C;&#x4ED6;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x5B9E;&#x4F53;&#x3002;</li>
<li><p>5&#x3001;&#x5185;&#x90E8;&#x7C7B;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x9664;&#x4E86;&#x8BE5;&#x5916;&#x90E8;&#x7C7B;&#xFF0C;&#x5176;&#x4ED6;&#x7C7B;&#x90FD;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;</p>
</li>
<li><p>&#x53EA;&#x6709;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x62E5;&#x6709;&#x9759;&#x6001;&#x6210;&#x5458;&#x548C;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#xFF0C;&#x5176;&#x4ED6;&#x5185;&#x90E8;&#x7C7B;&#x53EA;&#x6709;&#x62E5;&#x6709;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#x3002;</p>
</li>
</ul>
<h2 id="&#x6210;&#x5458;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x53D8;&#x91CF;</h2>
<ul>
<li>&#x6CE8;&#x610F;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x603B;&#x6709;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x5F15;&#x7528;</li>
<li>&#x5F53;&#x521B;&#x5EFA;&#x5185;&#x90E8;&#x7C7B;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x5916;&#x90E8;&#x7C7B;&#x7684;this&#x5F15;&#x7528;&#x4F20;&#x9012;&#x7ED9;&#x5F53;&#x524D;&#x7684;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<h2 id="&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5C31;&#x50CF;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;</h2>
<pre><code>public class OuterClass {

    private static class StaticInnerClass {
        int id;
        static int increment = 1;
    }
}
//&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;
//&#x5916;&#x90E8;&#x7C7B;.&#x5185;&#x90E8;&#x7C7B; instanceName = new &#x5916;&#x90E8;&#x7C7B;.&#x5185;&#x90E8;&#x7C7B;();
</code></pre><h2 id="&#x5C40;&#x90E8;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5B9A;&#x4E49;&#x5728;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5757;&#x4F5C;&#x7528;&#x57DF;&#x91CC;&#x9762;&#x7684;&#x7C7B;"><a name="&#x5C40;&#x90E8;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5B9A;&#x4E49;&#x5728;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5757;&#x4F5C;&#x7528;&#x57DF;&#x91CC;&#x9762;&#x7684;&#x7C7B;" class="plugin-anchor" href="#&#x5C40;&#x90E8;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5B9A;&#x4E49;&#x5728;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5757;&#x4F5C;&#x7528;&#x57DF;&#x91CC;&#x9762;&#x7684;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5C40;&#x90E8;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5B9A;&#x4E49;&#x5728;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5757;&#x4F5C;&#x7528;&#x57DF;&#x91CC;&#x9762;&#x7684;&#x7C7B;</h2>
<ul>
<li><p>&#x60F3;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7C7B;&#x6765;&#x8F85;&#x52A9;&#x6211;&#x4EEC;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x53C8;&#x4E0D;&#x5E0C;&#x671B;&#x8FD9;&#x4E2A;&#x7C7B;&#x662F;&#x516C;&#x5171;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x4EA7;&#x751F;&#x4E86;&#x5C40;&#x90E8;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x5C40;&#x90E8;&#x5185;&#x90E8;&#x7C7B;&#x548C;&#x6210;&#x5458;&#x5185;&#x90E8;&#x7C7B;&#x4E00;&#x6837;&#x88AB;&#x7F16;&#x8BD1;&#xFF0C;&#x53EA;&#x662F;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x57DF;&#x53D1;&#x751F;&#x4E86;&#x6539;&#x53D8;&#xFF0C;&#x5B83;&#x53EA;&#x80FD;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;&#x4E2D;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x51FA;&#x4E86;&#x8BE5;&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;&#x5C31;&#x4F1A;&#x5931;&#x6548;&#x3002;</p>
</li>
<li><p>JDK1.8&#x4E4B;&#x524D;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x975E;final&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF01;</p>
</li>
<li>&#x751F;&#x547D;&#x5468;&#x671F;&#x4E0D;&#x4E00;&#x81F4;&#xFF1A;</li>
<li>&#x65B9;&#x6CD5;&#x5728;&#x6808;&#x4E2D;&#xFF0C;&#x5BF9;&#x8C61;&#x5728;&#x5806;&#x4E2D;&#xFF1B;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5B8C;&#xFF0C;&#x5BF9;&#x8C61;&#x5E76;&#x6CA1;&#x6709;&#x6B7B;&#x4EA1;</li>
<li>&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#xFF0C;&#x5C31;&#x4F1A;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;&#x3002;</li>
<li>&#x800C;final&#x662F;&#x5E38;&#x91CF;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x8BE5;&#x5E38;&#x91CF;&#x7684;&#x503C;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#xFF0C;&#x5373;&#x4F7F;&#x4E0D;&#x5B58;&#x5728;&#x4E5F;&#x4E0D;&#x5F71;&#x54CD;&#x3002;</li>
</ul>
<pre><code>public Destination destination(String str) {
    class PDestination implements Destination {
        private String label;

        private PDestination(String whereTo) {
            label = whereTo;
        }
        public String readLabel() {
            return label;
        }
    }
    return new PDestination(str);
}
</code></pre><h2 id="&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5FC5;&#x987B;&#x7EE7;&#x627F;&#x4E00;&#x4E2A;&#x7236;&#x7C7B;&#x6216;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;"><a name="&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5FC5;&#x987B;&#x7EE7;&#x627F;&#x4E00;&#x4E2A;&#x7236;&#x7C7B;&#x6216;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;" class="plugin-anchor" href="#&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5FC5;&#x987B;&#x7EE7;&#x627F;&#x4E00;&#x4E2A;&#x7236;&#x7C7B;&#x6216;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x5FC5;&#x987B;&#x7EE7;&#x627F;&#x4E00;&#x4E2A;&#x7236;&#x7C7B;&#x6216;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;</h2>
<ul>
<li>&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#x548C;&#x5C40;&#x90E8;&#x5185;&#x90E8;&#x7C7B;&#x5728;JDK1.8 &#x4E4B;&#x524D;&#x90FD;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x975E;final&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;final&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x539F;&#x56E0;&#x662F;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E0D;&#x540C;&#xFF0C;&#x53EF;&#x80FD;&#x6808;&#x4E2D;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x5DF2;&#x7ECF;&#x88AB;&#x9500;&#x6BC1;&#xFF0C;&#x800C;&#x5806;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x4ECD;&#x5B58;&#x6D3B;&#xFF0C;&#x6B64;&#x65F6;&#x4F1A;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;&#x3002;&#x5047;&#x5982;&#x662F;final&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x90A3;&#x4E48;&#x7F16;&#x8BD1;&#x65F6;&#x4F1A;&#x5C06;&#x5176;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#xFF0C;&#x5EF6;&#x957F;&#x5176;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;</li>
<li>&#x62F7;&#x8D1D;&#x5F15;&#x7528;&#xFF0C;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5F15;&#x7528;&#x503C;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x4F8B;&#x5982;&#x88AB;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x4FEE;&#x6539;&#x7B49;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;&#x5185;&#x90E8;&#x7C7B;&#x5F97;&#x5230;&#x7684;&#x503C;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x4E8E;&#x662F;&#x7528;final&#x6765;&#x8BA9;&#x8BE5;&#x5F15;&#x7528;&#x4E0D;&#x53EF;&#x6539;&#x53D8;&#x3002;</li>
<li>&#x4F46;&#x5728;JDK1.8&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x975E;final&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x4E86;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x975E;final&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x6CA1;&#x6709;&#x4FEE;&#x6539;&#xFF0C;&#x8868;&#x73B0;&#x5F97;&#x548C;final&#x53D8;&#x91CF;&#x4E00;&#x6837;&#x624D;&#x53EF;&#x4EE5;&#xFF01;</li>
</ul>
<pre><code>interface AnonymousInner {
    int add();
}
public class AnonymousOuter {
    public AnonymousInner getAnonymousInner(){
        int x = 100;
        return new AnonymousInner() {
            int y = 100;
            @Override
            public int add() {
                return x + y;
            }
        };
    }
}
</code></pre><h1 id="111-&#x5173;&#x952E;&#x5B57;"><a name="111-&#x5173;&#x952E;&#x5B57;" class="plugin-anchor" href="#111-&#x5173;&#x952E;&#x5B57;"><i class="fa fa-link" aria-hidden="true"></i></a>1.11 &#x5173;&#x952E;&#x5B57;</h1>
<h2 id="final"><a name="final" class="plugin-anchor" href="#final"><i class="fa fa-link" aria-hidden="true"></i></a>final</h2>
<h2 id="try-finally-return"><a name="try-finally-return" class="plugin-anchor" href="#try-finally-return"><i class="fa fa-link" aria-hidden="true"></i></a>try-finally-return</h2>
<ul>
<li>1&#x3001;&#x4E0D;&#x7BA1;&#x6709;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#xFF0C;finally&#x5757;&#x4E2D;&#x4EE3;&#x7801;&#x90FD;&#x4F1A;&#x6267;&#x884C;&#xFF1B;</li>
<li>2&#x3001;&#x5F53;try&#x548C;catch&#x4E2D;&#x6709;return&#x65F6;&#xFF0C;finally&#x4ECD;&#x7136;&#x4F1A;&#x6267;&#x884C;&#xFF1B;&#x65E0;&#x8BBA;try&#x91CC;&#x6267;&#x884C;&#x4E86;return&#x8BED;&#x53E5;&#x3001;break&#x8BED;&#x53E5;&#x3001;&#x8FD8;&#x662F;continue&#x8BED;&#x53E5;&#xFF0C;finally&#x8BED;&#x53E5;&#x5757;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF1B;&#x5982;&#x679C;&#x6267;&#x884C;try&#x548C;catch&#x65F6;JVM&#x9000;&#x51FA;&#xFF08;&#x6BD4;&#x5982;System.exit(0))&#xFF0C;&#x90A3;&#x4E48;finally&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF1B;</li>
<li>finally&#x662F;&#x5728;return&#x540E;&#x9762;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x8FD0;&#x7B97;&#x540E;&#x6267;&#x884C;&#x7684;&#xFF08;&#x6B64;&#x65F6;&#x5E76;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;&#x8FD0;&#x7B97;&#x540E;&#x7684;&#x503C;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x628A;&#x8981;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x7BA1;finally&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x600E;&#x4E48;&#x6837;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x503C;&#x90FD;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#xFF0C;&#x4ECD;&#x7136;&#x662F;&#x4E4B;&#x524D;&#x4FDD;&#x5B58;&#x7684;&#x503C;)&#xFF0C;&#x6240;&#x4EE5;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x503C;&#x662F;&#x5728;finally&#x6267;&#x884C;&#x524D;&#x786E;&#x5B9A;&#x7684;&#xFF1B;</li>
<li>&#x3010;</li>
<li>&#x5982;&#x679C;try&#x8BED;&#x53E5;&#x91CC;&#x6709;return&#xFF0C;&#x90A3;&#x4E48;&#x4EE3;&#x7801;&#x7684;&#x884C;&#x4E3A;&#x5982;&#x4E0B;&#xFF1A;
1.&#x5982;&#x679C;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x5C31;&#x628A;&#x8FD4;&#x56DE;&#x503C;&#x4FDD;&#x5B58;&#x5230;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x4E2D;
2.&#x6267;&#x884C;jsr&#x6307;&#x4EE4;&#x8DF3;&#x5230;finally&#x8BED;&#x53E5;&#x91CC;&#x6267;&#x884C;
3.&#x6267;&#x884C;&#x5B8C;finally&#x8BED;&#x53E5;&#x540E;&#xFF0C;&#x8FD4;&#x56DE;&#x4E4B;&#x524D;&#x4FDD;&#x5B58;&#x5728;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x8868;&#x91CC;&#x7684;&#x503C;</li>
<li>&#x3011;</li>
<li>3&#x3001;&#x5F53;try&#x548C;finally&#x91CC;&#x90FD;&#x6709;return&#x65F6;&#xFF0C;&#x4F1A;&#x5FFD;&#x7565;try&#x7684;return&#xFF0C;&#x800C;&#x4F7F;&#x7528;finally&#x7684;return&#x3002;    </li>
<li><p>4&#x3001;&#x5982;&#x679C;try&#x5757;&#x4E2D;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x6267;&#x884C;finally&#x5757;&#x65F6;&#x53C8;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x6B64;&#x65F6;&#x539F;&#x59CB;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x4F1A;&#x4E22;&#x5931;&#xFF0C;&#x53EA;&#x629B;&#x51FA;&#x5728;finally&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x7684;&#x5F02;&#x5E38;&#x3002;</p>
</li>
<li><p>&#x5B9E;&#x4F8B;&#x4E00;&#xFF1A;</p>
</li>
</ul>
<pre><code>public static int test() {
    int x = 1;
    try {
        x++;
        return x; // 2
    } finally {
        x++;
    }
}
</code></pre><ul>
<li>&#x5B9E;&#x4F8B;&#x4E8C;&#xFF1A;</li>
</ul>
<pre><code>private static int test2() {
    try {
        System.out.println(&quot;try...&quot;);
        return 80;
    } finally {
        System.out.println(&quot;finally...&quot;);
        return 100; // 100
    }
}
</code></pre><h2 id="static"><a name="static" class="plugin-anchor" href="#static"><i class="fa fa-link" aria-hidden="true"></i></a>static</h2>
<ul>
<li>static&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x6CA1;&#x6709;this&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5728;static&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x4E0D;&#x80FD;&#x8C03;&#x7528;&#x975E;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x5728;&#x6CA1;&#x6709;&#x521B;&#x5EFA;&#x4EFB;&#x4F55;&#x5BF9;&#x8C61;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4EC5;&#x4EC5;&#x901A;&#x8FC7;&#x7C7B;&#x672C;&#x8EAB;&#x6765;&#x8C03;&#x7528;static&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x6B63;&#x662F;static&#x65B9;&#x6CD5;&#x7684;&#x4E3B;&#x8981;&#x7528;&#x9014;&#x3002;<h3 id="1&#x4FEE;&#x9970;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x65B9;&#x6CD5;"><a name="1&#x4FEE;&#x9970;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#1&#x4FEE;&#x9970;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>1)&#x4FEE;&#x9970;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x65B9;&#x6CD5;</h3>
</li>
<li>&#x5728;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x4E2D;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x7C7B;&#x7684;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x548C;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#xFF1B;</li>
<li>&#x5728;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#x65B9;&#x6CD5;&#x4E2D;&#x662F;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x9759;&#x6001;&#x6210;&#x5458;&#x65B9;&#x6CD5;/&#x53D8;&#x91CF;&#x7684;&#xFF1B;</li>
<li>&#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x5730;&#x58F0;&#x660E;&#x4E3A;static&#xFF0C;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x5668;&#x5B9E;&#x9645;&#x4E0A;&#x4E5F;&#x662F;&#x9759;&#x6001;&#x65B9;&#x6CD5;</li>
</ul>
<h3 id="2&#x4FEE;&#x9970;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="2&#x4FEE;&#x9970;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#2&#x4FEE;&#x9970;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>2)&#x4FEE;&#x9970;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1A;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;</h3>
<ul>
<li><p>&#x9759;&#x6001;&#x53D8;&#x91CF;&#x548C;&#x975E;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x7684;&#x533A;&#x522B;&#x662F;&#xFF1A;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x88AB;&#x6240;&#x6709;&#x7684;&#x5BF9;&#x8C61;&#x6240;&#x5171;&#x4EAB;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x5B83;&#x5F53;&#x4E14;&#x4EC5;&#x5F53;&#x5728;&#x7C7B;&#x521D;&#x6B21;&#x52A0;&#x8F7D;&#x65F6;&#x4F1A;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x3002;&#x800C;&#x975E;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x662F;&#x5BF9;&#x8C61;&#x6240;&#x62E5;&#x6709;&#x7684;&#xFF0C;&#x5728;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#x88AB;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x5404;&#x4E2A;&#x5BF9;&#x8C61;&#x62E5;&#x6709;&#x7684;&#x526F;&#x672C;&#x4E92;&#x4E0D;&#x5F71;&#x54CD;&#x3002;</p>
</li>
<li><p>&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x5E76;&#x53D1;&#x4E0B;&#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;&#x8C61;&#x662F;&#x5355;&#x4F8B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E5F;&#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x3002;</p>
</li>
<li><p>&#x600E;&#x4E48;&#x4FDD;&#x8BC1;&#x53D8;&#x91CF;&#x7684;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;?</p>
</li>
<li>&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5199;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x90FD;&#x662F;&#x8BFB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x52A0;volatile&#xFF1B;&#x7EBF;&#x7A0B;&#x65E2;&#x8BFB;&#x53C8;&#x5199;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;Atomic&#x539F;&#x5B50;&#x7C7B;&#x548C;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x96C6;&#x5408;&#x7C7B;&#xFF1B;&#x6216;&#x8005;&#x8003;&#x8651;ThreadLocal<h3 id="3&#x4FEE;&#x9970;&#x4EE3;&#x7801;&#x5757;&#xFF1A;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;"><a name="3&#x4FEE;&#x9970;&#x4EE3;&#x7801;&#x5757;&#xFF1A;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;" class="plugin-anchor" href="#3&#x4FEE;&#x9970;&#x4EE3;&#x7801;&#x5757;&#xFF1A;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;"><i class="fa fa-link" aria-hidden="true"></i></a>3)&#x4FEE;&#x9970;&#x4EE3;&#x7801;&#x5757;&#xFF1A;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;</h3>
</li>
<li>&#x7528;&#x6765;&#x6784;&#x9020;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4EE5;&#x4F18;&#x5316;&#x7A0B;&#x5E8F;&#x6027;&#x80FD;&#x3002;static&#x5757;&#x53EF;&#x4EE5;&#x7F6E;&#x4E8E;&#x7C7B;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#xFF0C;&#x7C7B;&#x4E2D;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;static&#x5757;&#x3002;&#x5728;&#x7C7B;&#x521D;&#x6B21;&#x88AB;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x6309;&#x7167;static&#x5757;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x6267;&#x884C;&#x6BCF;&#x4E2A;static&#x5757;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;</li>
</ul>
<h3 id="4&#x4FEE;&#x9970;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;"><a name="4&#x4FEE;&#x9970;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;" class="plugin-anchor" href="#4&#x4FEE;&#x9970;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>4)&#x4FEE;&#x9970;&#x5185;&#x90E8;&#x7C7B;&#xFF1A;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;</h3>
<ul>
<li>&#x6210;&#x5458;&#x5185;&#x90E8;&#x7C7B;&#x548C;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x533A;&#x522B;&#xFF1A;<ul>
<li>1)&#x524D;&#x8005;&#x53EA;&#x80FD;&#x62E5;&#x6709;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#xFF1B;&#x540E;&#x8005;&#x65E2;&#x53EF;&#x62E5;&#x6709;&#x9759;&#x6001;&#x6210;&#x5458;&#xFF0C;&#x53C8;&#x53EF;&#x62E5;&#x6709;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;</li>
<li>2)&#x524D;&#x8005;&#x6301;&#x6709;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x9759;&#x6001;&#x6210;&#x5458;&#x548C;&#x975E;&#x9759;&#x6001;&#x6210;&#x5458;&#xFF1B;&#x540E;&#x8005;&#x4E0D;&#x6301;&#x6709;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x9759;&#x6001;&#x6210;&#x5458;</li>
<li>3)&#x524D;&#x8005;&#x4E0D;&#x80FD;&#x8131;&#x79BB;&#x5916;&#x90E8;&#x7C7B;&#x800C;&#x5B58;&#x5728;&#xFF1B;&#x540E;&#x8005;&#x53EF;&#x4EE5;<h3 id="5&#x4FEE;&#x9970;import&#xFF1A;&#x9759;&#x6001;&#x5BFC;&#x5305;"><a name="5&#x4FEE;&#x9970;import&#xFF1A;&#x9759;&#x6001;&#x5BFC;&#x5305;" class="plugin-anchor" href="#5&#x4FEE;&#x9970;import&#xFF1A;&#x9759;&#x6001;&#x5BFC;&#x5305;"><i class="fa fa-link" aria-hidden="true"></i></a>5)&#x4FEE;&#x9970;import&#xFF1A;&#x9759;&#x6001;&#x5BFC;&#x5305;</h3>
</li>
</ul>
</li>
<li></li>
</ul>
<h2 id="switch"><a name="switch" class="plugin-anchor" href="#switch"><i class="fa fa-link" aria-hidden="true"></i></a>switch</h2>
<h3 id="switch&#x5B57;&#x7B26;&#x4E32;&#x5B9E;&#x73B0;&#x539F;&#x7406;"><a name="switch&#x5B57;&#x7B26;&#x4E32;&#x5B9E;&#x73B0;&#x539F;&#x7406;" class="plugin-anchor" href="#switch&#x5B57;&#x7B26;&#x4E32;&#x5B9E;&#x73B0;&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>switch&#x5B57;&#x7B26;&#x4E32;&#x5B9E;&#x73B0;&#x539F;&#x7406;</h3>
<ul>
<li><p>&#x5BF9;&#x6BD4;&#x53CD;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF1A;</p>
</li>
<li><p>&#x7F16;&#x8BD1;&#x540E;switch&#x8FD8;&#x662F;&#x57FA;&#x4E8E;&#x6574;&#x6570;&#xFF0C;&#x8BE5;&#x6574;&#x6570;&#x6765;&#x81EA;&#x4E8E;String&#x7684;hashCode&#x3002;</p>
</li>
<li><p>&#x5148;&#x6BD4;&#x8F83;&#x5B57;&#x7B26;&#x4E32;&#x7684;hashCode&#xFF0C;&#x56E0;&#x4E3A;hashCode&#x76F8;&#x540C;&#x672A;&#x5FC5;&#x503C;&#x76F8;&#x540C;&#xFF0C;&#x53C8;&#x518D;&#x6B21;&#x68C0;&#x67E5;&#x4E86;equals&#x662F;&#x5426;&#x76F8;&#x540C;&#x3002;</p>
</li>
<li></li>
</ul>
<h3 id="&#x5B57;&#x8282;&#x7801;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF08;tableswitch--lookupswitch"><a name="&#x5B57;&#x8282;&#x7801;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF08;tableswitch--lookupswitch" class="plugin-anchor" href="#&#x5B57;&#x8282;&#x7801;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF08;tableswitch--lookupswitch"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5B57;&#x8282;&#x7801;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF08;tableswitch / lookupswitch)</h3>
<ul>
<li>&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x4F7F;&#x7528;tableswitch&#x548C;lookupswitch&#x6307;&#x4EE4;&#x6765;&#x751F;&#x6210;switch&#x8BED;&#x53E5;&#x7684;&#x7F16;&#x8BD1;&#x4EE3;&#x7801;&#x3002;&#x5F53;switch&#x8BED;&#x53E5;&#x4E2D;&#x7684;case&#x5206;&#x652F;&#x7684;&#x6761;&#x4EF6;&#x503C;&#x6BD4;&#x8F83;&#x7A00;&#x758F;&#x65F6;&#xFF0C;tableswitch&#x6307;&#x4EE4;&#x7684;&#x7A7A;&#x95F4;&#x4F7F;&#x7528;&#x7387;&#x504F;&#x4F4E;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x4F7F;&#x7528;lookupswitch&#x6307;&#x4EE4;&#x6765;&#x66FF;&#x4EE3;&#x3002;lookupswitch&#x6307;&#x4EE4;&#x7684;&#x7D22;&#x5F15;&#x8868;&#x7531;int&#x7C7B;&#x578B;&#x7684;&#x952E;&#xFF08;&#x6765;&#x6E90;&#x4E8E;case&#x8BED;&#x53E5;&#x5757;&#x540E;&#x9762;&#x7684;&#x6570;&#x503C;)&#x4E0E;&#x5BF9;&#x5E94;&#x7684;&#x76EE;&#x6807;&#x8BED;&#x53E5;&#x504F;&#x79FB;&#x91CF;&#x6240;&#x6784;&#x6210;&#x3002;&#x5F53;lookupswitch&#x6307;&#x4EE4;&#x6267;&#x884C;&#x65F6;&#xFF0C;switch&#x8BED;&#x53E5;&#x7684;&#x6761;&#x4EF6;&#x503C;&#x5C06;&#x548C;&#x7D22;&#x5F15;&#x8868;&#x4E2D;&#x7684;&#x952E;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x952E;&#x548C;&#x6761;&#x4EF6;&#x503C;&#x76F8;&#x7B26;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x8F6C;&#x79FB;&#x5230;&#x8FD9;&#x4E2A;&#x952E;&#x5BF9;&#x5E94;&#x7684;&#x5206;&#x652F;&#x504F;&#x79FB;&#x91CF;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x952E;&#x503C;&#x7B26;&#x5408;&#xFF0C;&#x6267;&#x884C;&#x5C06;&#x5728;default&#x5206;&#x652F;&#x6267;&#x884C;&#x3002;</li>
</ul>
<h2 id="abstract"><a name="abstract" class="plugin-anchor" href="#abstract"><i class="fa fa-link" aria-hidden="true"></i></a>abstract</h2>
<ul>
<li>&#x53EA;&#x8981;&#x542B;&#x6709;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x7C7B;&#x5FC5;&#x987B;&#x6DFB;&#x52A0;abstract&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5B9A;&#x4E49;&#x4E3A;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</li>
<li>&#x53EA;&#x8981;&#x7236;&#x7C7B;&#x662F;&#x62BD;&#x8C61;&#x7C7B;,&#x5185;&#x542B;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x7EE7;&#x627F;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#x7684;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x91CD;&#x5199;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x91CD;&#x5199;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x628A;&#x7236;&#x7C7B;&#x7684;&#x58F0;&#x660E;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x518D;&#x5199;&#x4E00;&#x904D;&#xFF0C;&#x7559;&#x7ED9;&#x8FD9;&#x4E2A;&#x5B50;&#x7C7B;&#x7684;&#x5B50;&#x7C7B;&#x53BB;&#x5B9E;&#x73B0;&#x3002;&#x540C;&#x65F6;&#x5C06;&#x8FD9;&#x4E2A;&#x5B50;&#x7C7B;&#x4E5F;&#x5B9A;&#x4E49;&#x4E3A;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</li>
<li>&#x6CE8;&#x610F;&#x62BD;&#x8C61;&#x7C7B;&#x4E2D;&#x53EF;&#x4EE5;&#x6709;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6709;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#xFF08;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;)&#x3002;</li>
<li>&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x987B;&#x52A0;abstract&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x800C;&#x5177;&#x4F53;&#x65B9;&#x6CD5;&#x4E0D;&#x53EF;&#x52A0;</li>
<li>&#x53EA;&#x8981;&#x662F;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x5C31;&#x4E0D;&#x80FD;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x4E0D;&#x53EF;&#x4EE5;new&#x4E00;&#x4E2A;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;)&#x3002;<h2 id="this--super"><a name="this--super" class="plugin-anchor" href="#this--super"><i class="fa fa-link" aria-hidden="true"></i></a>this &amp; super</h2>
</li>
<li>this</li>
<li>&#x81EA;&#x8EAB;&#x5F15;&#x7528;&#xFF1B;&#x8BBF;&#x95EE;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E0E;&#x65B9;&#x6CD5;&#xFF1B;&#x8C03;&#x7528;&#x5176;&#x4ED6;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li>
<li><ol>
<li>&#x901A;&#x8FC7;this&#x8C03;&#x7528;&#x53E6;&#x4E00;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6CD5;&#x662F;this(&#x53C2;&#x6570;&#x5217;&#x8868;)&#xFF0C;&#x8FD9;&#x4E2A;&#x4EC5;&#x5728;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;</li>
</ol>
</li>
<li><ol>
<li>&#x51FD;&#x6570;&#x53C2;&#x6570;&#x6216;&#x8005;&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x548C;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x540C;&#x540D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x88AB;&#x5C4F;&#x853D;&#xFF0C;&#x6B64;&#x65F6;&#x8981;&#x8BBF;&#x95EE;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x5219;&#x9700;&#x8981;&#x7528;&#x201C;this.&#x6210;&#x5458;&#x53D8;&#x91CF;&#x540D;&#x201D;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5F15;&#x7528;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x3002;</li>
</ol>
</li>
<li><ol>
<li>&#x9700;&#x8981;&#x5F15;&#x7528;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x7528;this&#xFF08;&#x81EA;&#x8EAB;&#x5F15;&#x7528;)</li>
</ol>
</li>
<li><p>super</p>
</li>
<li>&#x7236;&#x7C7B;&#x5F15;&#x7528;&#xFF1B;&#x8BBF;&#x95EE;&#x7236;&#x7C7B;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E0E;&#x65B9;&#x6CD5;&#xFF1B;&#x8C03;&#x7528;&#x7236;&#x7C7B;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li>
<li>super&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x662F;&#x6307;&#x5411;&#x81EA;&#x5DF1;&#x8D85;&#xFF08;&#x7236;)&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x4E00;&#x4E2A;&#x6307;&#x9488;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x8D85;&#x7C7B;&#x6307;&#x7684;&#x662F;&#x79BB;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x7684;&#x4E00;&#x4E2A;&#x7236;&#x7C7B;&#x3002;</li>
<li>super&#x6709;&#x4E09;&#x79CD;&#x7528;&#x6CD5;&#xFF1A; </li>
<li>1.&#x666E;&#x901A;&#x7684;&#x76F4;&#x63A5;&#x5F15;&#x7528;</li>
<li>&#x4E0E;this&#x7C7B;&#x4F3C;&#xFF0C;super&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x6307;&#x5411;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x7684;&#x7236;&#x7C7B;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x7528;super.xxx&#x6765;&#x5F15;&#x7528;&#x7236;&#x7C7B;&#x7684;&#x6210;&#x5458;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x51B2;&#x7A81;&#x7684;&#x8BDD;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x52A0;super&#x3002;</li>
<li>2.&#x5B50;&#x7C7B;&#x4E2D;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x6216;&#x65B9;&#x6CD5;&#x4E0E;&#x7236;&#x7C7B;&#x4E2D;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x6216;&#x65B9;&#x6CD5;&#x540C;&#x540D;&#x65F6;&#xFF0C;&#x4E3A;&#x4E86;&#x533A;&#x522B;&#xFF0C;&#x8C03;&#x7528;&#x7236;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x5FC5;&#x987B;&#x8981;&#x52A0;super</li>
<li>3.&#x8C03;&#x7528;&#x7236;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;<h2 id="&#x8BBF;&#x95EE;&#x6743;&#x9650;"><a name="&#x8BBF;&#x95EE;&#x6743;&#x9650;" class="plugin-anchor" href="#&#x8BBF;&#x95EE;&#x6743;&#x9650;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8BBF;&#x95EE;&#x6743;&#x9650;</h2>
</li>
</ul>
<h1 id="112-&#x679A;&#x4E3E;"><a name="112-&#x679A;&#x4E3E;" class="plugin-anchor" href="#112-&#x679A;&#x4E3E;"><i class="fa fa-link" aria-hidden="true"></i></a>1.12 &#x679A;&#x4E3E;</h1>
<h2 id="jdk&#x5B9E;&#x73B0;"><a name="jdk&#x5B9E;&#x73B0;" class="plugin-anchor" href="#jdk&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>JDK&#x5B9E;&#x73B0;</h2>
<ul>
<li>&#x5B9E;&#x4F8B;&#xFF1A;</li>
</ul>
<pre><code>public enum Labels0 {

    ENVIRONMENT(&quot;&#x73AF;&#x4FDD;&quot;), TRAFFIC(&quot;&#x4EA4;&#x901A;&quot;), PHONE(&quot;&#x624B;&#x673A;&quot;);

    private String name;

    private Labels0(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }
}
</code></pre><ul>
<li><p>&#x7F16;&#x8BD1;&#x540E;&#x751F;&#x6210;&#x7684;&#x5B57;&#x8282;&#x7801;&#x53CD;&#x7F16;&#x8BD1;&#xFF1A;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x6E05;&#x6670;&#x5730;&#x770B;&#x5230;&#x679A;&#x4E3E;&#x88AB;&#x7F16;&#x8BD1;&#x540E;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x8BE5;&#x7C7B;&#x88AB;&#x58F0;&#x660E;&#x6210; final&#xFF0C;&#x8BF4;&#x660E;&#x5176;&#x4E0D;&#x80FD;&#x88AB;&#x7EE7;&#x627F;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x7EE7;&#x627F;&#x4E86; Enum &#x7C7B;&#x3002;&#x679A;&#x4E3E;&#x91CC;&#x9762;&#x7684;&#x5143;&#x7D20;&#x88AB;&#x58F0;&#x660E;&#x6210; static final &#xFF0C;&#x53E6;&#x5916;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757; static{}&#xFF0C;&#x6700;&#x540E;&#x8FD8;&#x4F1A;&#x751F;&#x6210; values &#x548C; valueOf &#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;&#x4E0B;&#x9762;&#x4EE5;&#x6700;&#x7B80;&#x5355;&#x7684; Labels &#x4E3A;&#x4F8B;&#xFF0C;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x6765;&#x770B;&#x3002;</p>
</li>
</ul>
<h3 id="enum-&#x7C7B;"><a name="enum-&#x7C7B;" class="plugin-anchor" href="#enum-&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>Enum &#x7C7B;</h3>
<ul>
<li><p>Enum &#x7C7B;&#x662F;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x4E3B;&#x8981;&#x6709; name &#x548C; ordinal &#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x5206;&#x522B;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x679A;&#x4E3E;&#x5143;&#x7D20;&#x7684;&#x540D;&#x79F0;&#x548C;&#x679A;&#x4E3E;&#x5143;&#x7D20;&#x7684;&#x4F4D;&#x7F6E;&#x7D22;&#x5F15;&#xFF0C;&#x800C;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4F20;&#x5165;&#x7684;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#x521A;&#x597D;&#x4E0E;&#x4E4B;&#x5BF9;&#x5E94;&#x3002;</p>
</li>
<li><p>toString &#x65B9;&#x6CD5;&#x76F4;&#x63A5;&#x8FD4;&#x56DE; name&#x3002;</p>
</li>
<li>equals &#x65B9;&#x6CD5;&#x76F4;&#x63A5;&#x7528; == &#x6BD4;&#x8F83;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;</li>
<li>hashCode &#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x662F;&#x7236;&#x7C7B;&#x7684; hashCode &#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x679A;&#x4E3E;&#x4E0D;&#x652F;&#x6301; clone&#x3001;finalize &#x548C; readObject &#x65B9;&#x6CD5;&#x3002;</li>
<li>compareTo &#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5C31;&#x662F;&#x6BD4;&#x8F83; ordinal &#x7684;&#x5927;&#x5C0F;&#x3002;</li>
<li>valueOf &#x65B9;&#x6CD5;&#xFF0C;&#x6839;&#x636E;&#x4F20;&#x5165;&#x7684;&#x5B57;&#x7B26;&#x4E32; name &#x6765;&#x8FD4;&#x56DE;&#x5BF9;&#x5E94;&#x7684;&#x679A;&#x4E3E;&#x5143;&#x7D20;&#x3002;</li>
</ul>
<h3 id="&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x5B9E;&#x73B0;"><a name="&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x5B9E;&#x73B0;</h3>
<ul>
<li>&#x5728;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x8C61;&#x662F;&#x5355;&#x4F8B;&#x7684;&#xFF01;</li>
<li>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4E3B;&#x8981;&#x5B8C;&#x6210;&#x7684;&#x5DE5;&#x4F5C;&#x5C31;&#x662F;&#x5148;&#x5206;&#x522B;&#x521B;&#x5EFA; Labels &#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x201C;ENVIRONMENT&#x201D;&#x3001;&#x201C;TRAFFIC&#x201D;&#x548C;&#x201C;PHONE&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x4F5C;&#x4E3A; name &#xFF0C;&#x6309;&#x7167;&#x987A;&#x5E8F;&#x5206;&#x522B;&#x5206;&#x914D;&#x4F4D;&#x7F6E;&#x7D22;&#x5F15;0&#x3001;1&#x3001;2&#x4F5C;&#x4E3A; ordinal&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x503C;&#x8BBE;&#x7F6E;&#x7ED9;&#x521B;&#x5EFA;&#x7684;&#x4E09;&#x4E2A; Labels &#x5BF9;&#x8C61;&#x7684; name &#x548C; ordinal &#x5C5E;&#x6027;&#xFF0C;&#x6B64;&#x5916;&#x8FD8;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5927;&#x5C0F;&#x4E3A;3&#x7684; Labels &#x6570;&#x7EC4; ENUM$VALUES&#xFF0C;&#x5C06;&#x524D;&#x9762;&#x521B;&#x5EFA;&#x51FA;&#x6765;&#x7684; Labels &#x5BF9;&#x8C61;&#x5206;&#x522B;&#x8D4B;&#x503C;&#x7ED9;&#x6570;&#x7EC4;&#x3002;<h3 id="values&#x7684;&#x5B9E;&#x73B0;"><a name="values&#x7684;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#values&#x7684;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>values&#x7684;&#x5B9E;&#x73B0;</h3>
</li>
<li>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x524D;&#x9762;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x7684; Labels &#x6570;&#x7EC4; ENUM$VALUES&#xFF0C;&#x8C03;&#x7528; System.arraycopy &#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x590D;&#x5236;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x8BE5;&#x6570;&#x7EC4;&#x3002;&#x6240;&#x4EE5;&#x901A;&#x8FC7; Labels.values()[2]&#x5C31;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x6570;&#x7EC4;&#x4E2D;&#x7D22;&#x5F15;&#x4E3A;2&#x7684;&#x5143;&#x7D20;&#x3002;<h3 id="valueof-&#x65B9;&#x6CD5;"><a name="valueof-&#x65B9;&#x6CD5;" class="plugin-anchor" href="#valueof-&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>valueOf &#x65B9;&#x6CD5;</h3>
</li>
<li><p>&#x8BE5;&#x65B9;&#x6CD5;&#x540C;&#x6837;&#x662F;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x95F4;&#x63A5;&#x8C03;&#x7528;&#x4E86;&#x7236;&#x7C7B; Enum &#x7C7B;&#x7684; valueOf &#x65B9;&#x6CD5;&#xFF0C;&#x6839;&#x636E;&#x4F20;&#x5165;&#x7684;&#x5B57;&#x7B26;&#x4E32; name &#x6765;&#x8FD4;&#x56DE;&#x5BF9;&#x5E94;&#x7684;&#x679A;&#x4E3E;&#x5143;&#x7D20;&#xFF0C;&#x6BD4;&#x5982;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; Labels.valueOf(&quot;ENVIRONMENT&quot;)&#x83B7;&#x53D6; Labels.ENVIRONMENT&#x3002;</p>
</li>
<li><p>&#x679A;&#x4E3E;&#x672C;&#x8D28;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x800C;&#x4E14;&#x90FD;&#x4F1A;&#x7EE7;&#x627F;java.lang.Enum&#x7C7B;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757; static{}&#xFF0C;&#x5E76;&#x4E14;&#x8FD8;&#x4F1A;&#x751F;&#x6210; values &#x548C; valueOf &#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;&#x800C;&#x4E0A;&#x8FF0;&#x7684;&#x5DE5;&#x4F5C;&#x90FD;&#x9700;&#x8981;&#x7531;&#x7F16;&#x8BD1;&#x5668;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x50CF;&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x719F;&#x6089;&#x7684;&#x7C7B;&#x90A3;&#x6837;&#x53BB;&#x4F7F;&#x7528;&#x679A;&#x4E3E;&#x4E86;&#x3002;</p>
</li>
<li></li>
</ul>
<h2 id="&#x7528;enum&#x4EE3;&#x66FF;int&#x5E38;&#x91CF;"><a name="&#x7528;enum&#x4EE3;&#x66FF;int&#x5E38;&#x91CF;" class="plugin-anchor" href="#&#x7528;enum&#x4EE3;&#x66FF;int&#x5E38;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;enum&#x4EE3;&#x66FF;int&#x5E38;&#x91CF;</h2>
<ul>
<li>&#x5C06;int&#x679A;&#x4E3E;&#x5E38;&#x91CF;&#x7FFB;&#x8BD1;&#x6210;&#x53EF;&#x6253;&#x5370;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6CA1;&#x6709;&#x5F88;&#x4FBF;&#x5229;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li>
<li><p>&#x8981;&#x904D;&#x5386;&#x4E00;&#x4E2A;&#x679A;&#x4E3E;&#x7EC4;&#x4E2D;&#x7684;&#x6240;&#x6709;int &#x679A;&#x4E3E;&#x5E38;&#x91CF;&#xFF0C;&#x751A;&#x81F3;&#x83B7;&#x5F97;int&#x679A;&#x4E3E;&#x7EC4;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
</li>
<li><p>&#x4F7F;&#x7528;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x7684;values&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x8BE5;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x7EC4;</p>
</li>
<li>&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x6CA1;&#x6709;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7684;&#x6784;&#x9020;&#x5668;&#xFF0C;&#x662F;&#x771F;&#x6B63;&#x7684;final&#xFF1B;&#x662F;&#x5B9E;&#x4F8B;&#x53D7;&#x63A7;&#x7684;&#xFF0C;&#x5B83;&#x4EEC;&#x662F;&#x5355;&#x4F8B;&#x7684;&#x6CDB;&#x578B;&#x5316;&#xFF1B;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x5355;&#x5143;&#x7D20;&#x7684;&#x679A;&#x4E3E;&#xFF1B;&#x63D0;&#x4F9B;&#x4E86;&#x7F16;&#x8BD1;&#x65F6;&#x7684;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#x3002;</li>
<li><p>&#x5355;&#x5143;&#x7D20;&#x7684;&#x679A;&#x4E3E;&#x662F;&#x5B9E;&#x73B0;&#x5355;&#x4F8B;&#x7684;&#x6700;&#x4F73;&#x65B9;&#x6CD5;&#xFF01;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x5728;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x4E2D;&#x653E;&#x5165;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;String2Enum&#x3002;</p>
</li>
<li>&#x6CE8;&#x610F;Operation&#x662F;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x540D;&#x3002;</li>
</ul>
<h2 id="&#x7528;&#x5B9E;&#x4F8B;&#x57DF;&#x4EE3;&#x66FF;&#x5E8F;&#x6570;"><a name="&#x7528;&#x5B9E;&#x4F8B;&#x57DF;&#x4EE3;&#x66FF;&#x5E8F;&#x6570;" class="plugin-anchor" href="#&#x7528;&#x5B9E;&#x4F8B;&#x57DF;&#x4EE3;&#x66FF;&#x5E8F;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;&#x5B9E;&#x4F8B;&#x57DF;&#x4EE3;&#x66FF;&#x5E8F;&#x6570;</h2>
<ul>
<li>&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#x4E0D;&#x597D;&#xFF0C;&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528;ordinal&#x65B9;&#x6CD5;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#xFF1A;</li>
</ul>
<h2 id="&#x7528;enumset&#x4EE3;&#x66FF;&#x4F4D;&#x57DF;"><a name="&#x7528;enumset&#x4EE3;&#x66FF;&#x4F4D;&#x57DF;" class="plugin-anchor" href="#&#x7528;enumset&#x4EE3;&#x66FF;&#x4F4D;&#x57DF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;EnumSet&#x4EE3;&#x66FF;&#x4F4D;&#x57DF;</h2>
<ul>
<li>&#x4F4D;&#x57DF;&#x662F;&#x5C06;&#x51E0;&#x4E2A;&#x5E38;&#x91CF;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x63A8;&#x8350;&#x7528;&#x679A;&#x4E3E;&#x4EE3;&#x66FF;&#x5E38;&#x91CF;&#xFF0C;&#x7528;EnumSet&#x4EE3;&#x66FF;&#x96C6;&#x5408;<ul>
<li>EnumSet.of(enum1,enum2) -&gt; Set&lt;&#x679A;&#x4E3E;&gt;<h2 id="&#x7528;enummap&#x4EE3;&#x66FF;&#x5E8F;&#x6570;&#x7D22;&#x5F15;"><a name="&#x7528;enummap&#x4EE3;&#x66FF;&#x5E8F;&#x6570;&#x7D22;&#x5F15;" class="plugin-anchor" href="#&#x7528;enummap&#x4EE3;&#x66FF;&#x5E8F;&#x6570;&#x7D22;&#x5F15;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;EnumMap&#x4EE3;&#x66FF;&#x5E8F;&#x6570;&#x7D22;&#x5F15;</h2>
</li>
</ul>
</li>
</ul>
<ul>
<li>&#x5C06;&#x4E00;&#x4E2A;&#x679A;&#x4E3E;&#x7C7B;&#x578B;&#x7684;&#x503C;&#x4E0E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF08;&#x6216;&#x4E00;&#x7EC4;)&#x5BF9;&#x5E94;&#x8D77;&#x6765;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528;EnumMap&#x6570;&#x636E;&#x7ED3;&#x6784;</li>
<li>&#x5982;&#x679C;&#x662F;&#x4E24;&#x4E2A;&#x7EF4;&#x5EA6;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;EnumMap<enum1,map<enum1,元素>&gt;</enum1,map<enum1,元素></li>
</ul>
<ul>
<li><h1 id="113-&#x5E8F;&#x5217;&#x5316;"><a name="113-&#x5E8F;&#x5217;&#x5316;" class="plugin-anchor" href="#113-&#x5E8F;&#x5217;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>1.13 &#x5E8F;&#x5217;&#x5316;</h1>
<h2 id="jdk&#x5E8F;&#x5217;&#x5316;&#xFF08;serizalizable"><a name="jdk&#x5E8F;&#x5217;&#x5316;&#xFF08;serizalizable" class="plugin-anchor" href="#jdk&#x5E8F;&#x5217;&#x5316;&#xFF08;serizalizable"><i class="fa fa-link" aria-hidden="true"></i></a>JDK&#x5E8F;&#x5217;&#x5316;&#xFF08;Serizalizable)</h2>
</li>
<li><p>&#x5B9A;&#x4E49;&#xFF1A;&#x5C06;&#x5B9E;&#x73B0;&#x4E86;Serializable&#x63A5;&#x53E3;&#xFF08;&#x6807;&#x8BB0;&#x578B;&#x63A5;&#x53E3;)&#x7684;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x6210;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x6570;&#x7EC4;&#xFF0C;&#x5E76;&#x53EF;&#x4EE5;&#x5C06;&#x8BE5;&#x5B57;&#x8282;&#x6570;&#x7EC4;&#x8F6C;&#x4E3A;&#x539F;&#x6765;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
</li>
<li><p>ObjectOutputStream &#x662F;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x8F93;&#x51FA;&#x5BF9;&#x8C61;&#x7684;&#x8F93;&#x51FA;&#x6D41;&#xFF1B;</p>
</li>
<li>ObjectOutputStream &#x5C06; Java &#x5BF9;&#x8C61;&#x5199;&#x5165; OutputStream&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; ObjectInputStream &#x8BFB;&#x53D6;&#xFF08;&#x91CD;&#x6784;)&#x5BF9;&#x8C61;&#x3002;</li>
</ul>
<h2 id="serialversionuid"><a name="serialversionuid" class="plugin-anchor" href="#serialversionuid"><i class="fa fa-link" aria-hidden="true"></i></a>serialVersionUID</h2>
<ul>
<li><p>Java&#x7684;&#x5E8F;&#x5217;&#x5316;&#x673A;&#x5236;&#x662F;&#x901A;&#x8FC7;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x5224;&#x65AD;&#x7C7B;&#x7684;serialVersionUID&#x6765;&#x9A8C;&#x8BC1;&#x7248;&#x672C;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x3002;&#x5728;&#x8FDB;&#x884C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#xFF0C;JVM&#x4F1A;&#x628A;&#x4F20;&#x6765;&#x7684;&#x5B57;&#x8282;&#x6D41;&#x4E2D;&#x7684;serialVersionUID&#x4E0E;&#x672C;&#x5730;&#x76F8;&#x5E94;&#x5B9E;&#x4F53;&#xFF08;&#x7C7B;)&#x7684;serialVersionUID&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x76F8;&#x540C;&#x5C31;&#x8BA4;&#x4E3A;&#x662F;&#x4E00;&#x81F4;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5E8F;&#x5217;&#x5316;&#x7248;&#x672C;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x5F02;&#x5E38;&#x3002;(InvalidCastException)&#x3002;</p>
<ul>
<li>1)&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;serialVersionUID&#xFF0C;&#x8FDB;&#x884C;&#x4E86;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x800C;&#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;&#x7C7B;&#x7684;&#x7ED3;&#x6784;&#xFF08;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x4FEE;&#x6539;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x547D;&#x540D;)&#xFF0C;&#x6B64;&#x65F6;&#x4F1A;&#x62A5;&#x9519;&#x3002;</li>
<li>2)&#x5982;&#x679C;&#x6DFB;&#x52A0;serialVersionUID&#xFF0C;&#x8FDB;&#x884C;&#x4E86;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x800C;&#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;&#x7C7B;&#x7684;&#x7ED3;&#x6784;&#xFF08;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x4FEE;&#x6539;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x547D;&#x540D;)&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x80FD;&#x4F1A;&#x6062;&#x590D;&#x90E8;&#x5206;&#x6570;&#x636E;&#xFF0C;&#x6216;&#x8005;&#x6062;&#x590D;&#x4E0D;&#x4E86;&#x6570;&#x636E;&#x3002;</li>
</ul>
</li>
<li><p>&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;serialVersionUID&#x5E76;&#x4E14;&#x4E00;&#x81F4;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x80FD;&#x4F1A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x90E8;&#x5206;&#x6570;&#x636E;&#xFF1B;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x8981;&#x5C5E;&#x6027;&#x4E0D;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x65E0;&#x6CD5;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;</p>
</li>
</ul>
<h2 id="&#x5176;&#x4ED6;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5177;"><a name="&#x5176;&#x4ED6;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5177;" class="plugin-anchor" href="#&#x5176;&#x4ED6;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5177;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5176;&#x4ED6;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5177;</h2>
<ul>
<li>XML/JSON</li>
<li>Thrift/Protobuf</li>
</ul>
<h2 id="&#x5BF9;&#x8C61;&#x6DF1;&#x62F7;&#x8D1D;&#x4E0E;&#x6D45;&#x62F7;&#x8D1D;"><a name="&#x5BF9;&#x8C61;&#x6DF1;&#x62F7;&#x8D1D;&#x4E0E;&#x6D45;&#x62F7;&#x8D1D;" class="plugin-anchor" href="#&#x5BF9;&#x8C61;&#x6DF1;&#x62F7;&#x8D1D;&#x4E0E;&#x6D45;&#x62F7;&#x8D1D;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5BF9;&#x8C61;&#x6DF1;&#x62F7;&#x8D1D;&#x4E0E;&#x6D45;&#x62F7;&#x8D1D;</h2>
<ul>
<li>&#x5F53;&#x62F7;&#x8D1D;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x65F6;&#xFF0C;&#x539F;&#x59CB;&#x5F15;&#x7528;&#x548C;&#x62F7;&#x8D1D;&#x7684;&#x5F15;&#x7528;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x6539;&#x53D8;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x6240;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x4F1A;&#x5BF9;&#x53E6;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#x3002;</li>
<li>&#x5982;&#x679C;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x6D45;&#x62F7;&#x8D1D;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x8C03;&#x7528;clone&#x65B9;&#x6CD5;&#x3002;</li>
<li>Object &#x7C7B;&#x672C;&#x8EAB;&#x4E0D;&#x5B9E;&#x73B0;&#x63A5;&#x53E3; Cloneable&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;clone&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</li>
</ul>
<pre><code>&#x5982;&#x679C;&#x8981;&#x5728;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7C7B;&#x4E2D;&#x8C03;&#x7528;clone&#x65B9;&#x6CD5;&#xFF0C;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;Cloneable&#x63A5;&#x53E3;&#xFF08;&#x6807;&#x8BB0;&#x578B;&#x63A5;&#x53E3;)&#xFF0C;&#x56E0;&#x4E3A;Object&#x7C7B;&#x4E2D;&#x7684;clone&#x65B9;&#x6CD5;&#x4E3A;protected&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x91CD;&#x5199;clone&#x65B9;&#x6CD5;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;public&#x3002;
</code></pre><ul>
<li>protected native Object clone() throws CloneNotSupportedException;</li>
</ul>
<pre><code>public class Person implements Cloneable {
    private int age;
    private String  name;
    private Company company;
    @Override
    public Person clone() throws CloneNotSupportedException {
        return (Person) super.clone();
    }
</code></pre><ul>
<li>}</li>
</ul>
<pre><code>public class Company implements Cloneable{
    private String name;
</code></pre><pre><code>    @Override
public Company clone() throws CloneNotSupportedException {
    return (Company) super.clone();
}
</code></pre><ul>
<li>}</li>
<li>&#x4F7F;&#x7528;super&#xFF08;&#x5373;Object)&#x7684;clone&#x65B9;&#x6CD5;&#x53EA;&#x80FD;&#x8FDB;&#x884C;&#x6D45;&#x62F7;&#x8D1D;&#x3002;</li>
<li>&#x5982;&#x679C;&#x5E0C;&#x671B;&#x5B9E;&#x73B0;&#x6DF1;&#x62F7;&#x8D1D;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5B9E;&#x73B0;&#xFF0C;&#x6BD4;&#x5982;&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;</li>
</ul>
<pre><code>@Override
public Person clone() throws CloneNotSupportedException {
    Person person = (Person) super.clone();
    person.setCompany(company.clone()); // &#x4E00;&#x4E2A;&#x65B0;&#x7684;Company
    return person;
}
</code></pre><ul>
<li>&#x5047;&#x5982;&#x8BF4;Company&#x4E2D;&#x8FD8;&#x6709;&#x6301;&#x6709;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x90A3;&#x4E48;Company&#x4E2D;&#x4E5F;&#x8981;&#x50CF;Person&#x8FD9;&#x6837;&#x505A;&#x3002;</li>
<li><p>&#x53EF;&#x4EE5;&#x8BF4;&#xFF1A;&#x60F3;&#x8981;&#x6DF1;&#x62F7;&#x8D1D;&#x4E00;&#x4E2A;&#x5B50;&#x7C7B;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x7684;&#x6240;&#x6709;&#x7236;&#x7C7B;&#x90FD;&#x5FC5;&#x987B;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6DF1;&#x62F7;&#x8D1D;&#x3002;</p>
</li>
<li><p>&#x53E6;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#x5BF9;&#x8C61;&#x6DF1;&#x62F7;&#x8D1D;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x5E8F;&#x5217;&#x5316;&#x3002;</p>
</li>
<li><p>@Override
protected Object clone()  {
try {
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
 ObjectOutputStream os = new ObjectOutputStream(baos);
 os.writeObject(this);
 os.close();
 ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
 ObjectInputStream in = new ObjectInputStream(bais);
 Object ret = in.readObject();
 in.close();
 return ret;
}catch(Exception e) {
 e.printStackTrace();
}
return null;
}</p>
</li>
<li></li>
</ul>
<h1 id="114-&#x5F02;&#x5E38;"><a name="114-&#x5F02;&#x5E38;" class="plugin-anchor" href="#114-&#x5F02;&#x5E38;"><i class="fa fa-link" aria-hidden="true"></i></a>1.14 &#x5F02;&#x5E38;</h1>
<h2 id="error&#x3001;exception"><a name="error&#x3001;exception" class="plugin-anchor" href="#error&#x3001;exception"><i class="fa fa-link" aria-hidden="true"></i></a>Error&#x3001;Exception</h2>
<ul>
<li>Error&#x662F;&#x7A0B;&#x5E8F;&#x65E0;&#x6CD5;&#x5904;&#x7406;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5B83;&#x662F;&#x7531;JVM&#x4EA7;&#x751F;&#x548C;&#x629B;&#x51FA;&#x7684;&#xFF0C;&#x6BD4;&#x5982;OutOfMemoryError&#x3001;ThreadDeath&#x7B49;&#x3002;&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#x53D1;&#x751F;&#x65F6;&#xFF0C;Java&#x865A;&#x62DF;&#x673A;&#xFF08;JVM)&#x4E00;&#x822C;&#x4F1A;&#x9009;&#x62E9;&#x7EBF;&#x7A0B;&#x7EC8;&#x6B62;&#x3002;</li>
<li>Exception&#x662F;&#x7A0B;&#x5E8F;&#x672C;&#x8EAB;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x8FD9;&#x79CD;&#x5F02;&#x5E38;&#x5206;&#x4E24;&#x5927;&#x7C7B;&#x8FD0;&#x884C;&#x65F6;&#x5F02;&#x5E38;&#x548C;&#x975E;&#x8FD0;&#x884C;&#x65F6;&#x5F02;&#x5E38;&#x3002;&#x7A0B;&#x5E8F;&#x4E2D;&#x5E94;&#x5F53;&#x5C3D;&#x53EF;&#x80FD;&#x53BB;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x5F02;&#x5E38;&#x3002;<h2 id="&#x5E38;&#x89C1;runtimeexception"><a name="&#x5E38;&#x89C1;runtimeexception" class="plugin-anchor" href="#&#x5E38;&#x89C1;runtimeexception"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5E38;&#x89C1;RuntimeException</h2>
</li>
<li>IllegalArgumentException - &#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x65E0;&#x6548;</li>
<li>NullPointerException - &#x8BD5;&#x56FE;&#x8BBF;&#x95EE;&#x4E00;&#x7A7A;&#x5BF9;&#x8C61;&#x7684;&#x53D8;&#x91CF;&#x3001;&#x65B9;&#x6CD5;&#x6216;&#x7A7A;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20;</li>
<li>ArrayIndexOutOfBoundsException - &#x6570;&#x7EC4;&#x8D8A;&#x754C;&#x8BBF;&#x95EE;</li>
<li>ClassCastException - &#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x5F02;&#x5E38;</li>
<li>NumberFormatException &#x7EE7;&#x627F;IllegalArgumentException&#xFF0C;&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x4E3A;&#x6570;&#x5B57;&#x65F6;&#x51FA;&#x73B0;&#x3002;&#x6BD4;&#x5982;int i= Integer.parseInt(&quot;ab3&quot;);</li>
<li></li>
</ul>
<h2 id="runtimeexception&#x4E0E;&#x975E;runtime----exception"><a name="runtimeexception&#x4E0E;&#x975E;runtime----exception" class="plugin-anchor" href="#runtimeexception&#x4E0E;&#x975E;runtime----exception"><i class="fa fa-link" aria-hidden="true"></i></a>RuntimeException&#x4E0E;&#x975E;Runtime    Exception</h2>
<ul>
<li>RuntimeException&#x662F;&#x8FD0;&#x884C;&#x65F6;&#x5F02;&#x5E38;&#xFF0C;&#x4E5F;&#x79F0;&#x4E3A;&#x672A;&#x68C0;&#x67E5;&#x5F02;&#x5E38;&#xFF1B;</li>
<li><p>&#x975E;RuntimeException &#x4E5F;&#x79F0;&#x4E3A;CheckedException &#x53D7;&#x68C0;&#x5F02;&#x5E38;</p>
</li>
<li><p>&#x524D;&#x8005;&#x53EF;&#x4EE5;&#x4E0D;&#x5FC5;&#x8FDB;&#x884C;try-catch&#xFF0C;&#x540E;&#x8005;&#x5FC5;&#x987B;&#x8981;&#x8FDB;&#x884C;try-catch&#x6216;&#x8005;throw&#x3002;</p>
<h2 id="&#x5F02;&#x5E38;&#x5305;&#x88C5;"><a name="&#x5F02;&#x5E38;&#x5305;&#x88C5;" class="plugin-anchor" href="#&#x5F02;&#x5E38;&#x5305;&#x88C5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5F02;&#x5E38;&#x5305;&#x88C5;</h2>
</li>
<li>&#x5728;catch&#x5B50;&#x53E5;&#x4E2D;&#x53EF;&#x4EE5;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#xFF0C;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x76EE;&#x7684;&#x662F;&#x6539;&#x53D8;&#x5F02;&#x5E38;&#x7684;&#x7C7B;&#x578B;</li>
<li>try{</li>
<li>&#x2026;</li>
<li>}catch(SQLException e){</li>
<li>throw new ServletException(e.getMessage());</li>
<li>}</li>
<li><p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;ServletException&#x4F1A;&#x53D6;&#x4EE3;SQLException&#x3002;</p>
</li>
<li><p>&#x6709;&#x4E00;&#x79CD;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x4FDD;&#x5B58;&#x539F;&#x6709;&#x5F02;&#x5E38;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5C06;&#x539F;&#x59CB;&#x5F02;&#x5E38;&#x8BBE;&#x7F6E;&#x4E3A;&#x65B0;&#x7684;&#x5F02;&#x5E38;&#x7684;&#x539F;&#x56E0;</p>
</li>
<li>try{</li>
<li>&#x2026;</li>
<li>}catch(SQLException e){</li>
<li>Throwable se =  new ServletException(e.getMessage());</li>
<li>se.initCause(e);</li>
<li>throw se;</li>
<li>}</li>
<li>&#x5F53;&#x6355;&#x83B7;&#x5230;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;getCause&#x65B9;&#x6CD5;&#x6765;&#x91CD;&#x65B0;&#x5F97;&#x5230;&#x539F;&#x59CB;&#x5F02;&#x5E38;</li>
<li>Throwable e = se.getCause();</li>
<li><p>&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x5305;&#x88C5;&#x6280;&#x672F;&#xFF0C;&#x53EF;&#x4EE5;&#x629B;&#x51FA;&#x7CFB;&#x7EDF;&#x7684;&#x9AD8;&#x7EA7;&#x5F02;&#x5E38;&#xFF08;&#x81EA;&#x5DF1;new&#x7684;)&#xFF0C;&#x53C8;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x539F;&#x59CB;&#x5F02;&#x5E38;&#x7684;&#x7EC6;&#x8282;&#x3002;</p>
</li>
<li><p>&#x65E9;&#x629B;&#x51FA;&#xFF0C;&#x665A;&#x6355;&#x83B7;&#x3002;</p>
</li>
<li></li>
</ul>
<h1 id="115-&#x6CDB;&#x578B;"><a name="115-&#x6CDB;&#x578B;" class="plugin-anchor" href="#115-&#x6CDB;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.15 &#x6CDB;&#x578B;</h1>
<ul>
<li><p>&#x6CDB;&#x578B;&#xFF0C;&#x5373;&#x201C;&#x53C2;&#x6570;&#x5316;&#x7C7B;&#x578B;&#x201D;&#x3002;&#x4E00;&#x63D0;&#x5230;&#x53C2;&#x6570;&#xFF0C;&#x6700;&#x719F;&#x6089;&#x7684;&#x5C31;&#x662F;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#x65F6;&#x6709;&#x5F62;&#x53C2;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x65F6;&#x4F20;&#x9012;&#x5B9E;&#x53C2;&#x3002;&#x90A3;&#x4E48;&#x53C2;&#x6570;&#x5316;&#x7C7B;&#x578B;&#x600E;&#x4E48;&#x7406;&#x89E3;&#x5462;&#xFF1F;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x7C7B;&#x578B;&#x7531;&#x539F;&#x6765;&#x7684;&#x5177;&#x4F53;&#x7684;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x5316;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x53D8;&#x91CF;&#x53C2;&#x6570;&#xFF0C;&#x6B64;&#x65F6;&#x7C7B;&#x578B;&#x4E5F;&#x5B9A;&#x4E49;&#x6210;&#x53C2;&#x6570;&#x5F62;&#x5F0F;&#xFF08;&#x53EF;&#x4EE5;&#x79F0;&#x4E4B;&#x4E3A;&#x7C7B;&#x578B;&#x5F62;&#x53C2;)&#xFF0C;&#x7136;&#x540E;&#x5728;&#x4F7F;&#x7528;/&#x8C03;&#x7528;&#x65F6;&#x4F20;&#x5165;&#x5177;&#x4F53;&#x7684;&#x7C7B;&#x578B;&#xFF08;&#x7C7B;&#x578B;&#x5B9E;&#x53C2;)&#x3002;</p>
<h2 id="&#x6CDB;&#x578B;&#x63A5;&#x53E3;&#x7C7B;&#x65B9;&#x6CD5;"><a name="&#x6CDB;&#x578B;&#x63A5;&#x53E3;&#x7C7B;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x6CDB;&#x578B;&#x63A5;&#x53E3;&#x7C7B;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6CDB;&#x578B;&#x63A5;&#x53E3;/&#x7C7B;/&#x65B9;&#x6CD5;</h2>
<h2 id="&#x6CDB;&#x578B;&#x7EE7;&#x627F;&#x3001;&#x5B9E;&#x73B0;"><a name="&#x6CDB;&#x578B;&#x7EE7;&#x627F;&#x3001;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#&#x6CDB;&#x578B;&#x7EE7;&#x627F;&#x3001;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6CDB;&#x578B;&#x7EE7;&#x627F;&#x3001;&#x5B9E;&#x73B0;</h2>
</li>
<li><p>&#x7236;&#x7C7B;&#x4F7F;&#x7528;&#x6CDB;&#x578B;&#xFF0C;&#x5B50;&#x7C7B;&#x8981;&#x4E48;&#x53BB;&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#xFF0C;&#x8981;&#x4E48;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x6CDB;&#x578B;</p>
</li>
</ul>
<h2 id="&#x6CDB;&#x578B;&#x7684;&#x7EA6;&#x675F;&#x548C;&#x5C40;&#x9650;&#x6027;"><a name="&#x6CDB;&#x578B;&#x7684;&#x7EA6;&#x675F;&#x548C;&#x5C40;&#x9650;&#x6027;" class="plugin-anchor" href="#&#x6CDB;&#x578B;&#x7684;&#x7EA6;&#x675F;&#x548C;&#x5C40;&#x9650;&#x6027;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6CDB;&#x578B;&#x7684;&#x7EA6;&#x675F;&#x548C;&#x5C40;&#x9650;&#x6027;</h2>
<pre><code>- 1)&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x5305;&#x88C5;&#x5668;&#x7C7B;&#x578B;&#xFF0C;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF1B;

- 2)&#x8FD0;&#x884C;&#x65F6;&#x7C7B;&#x578B;&#x67E5;&#x8BE2;&#x53EA;&#x9002;&#x7528;&#x4E8E;&#x539F;&#x59CB;&#x7C7B;&#x578B;&#xFF0C;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x5E26;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x7684;&#x7C7B;&#x578B;&#xFF1B;
</code></pre><ul>
<li><p>if(a instanceof Pair<string>) //error</string></p>
<ul>
<li>3)&#x4E0D;&#x80FD;&#x521B;&#x5EFA;&#x5E26;&#x6709;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x7684;&#x6CDB;&#x578B;&#x7C7B;&#x7684;&#x6570;&#x7EC4;</li>
</ul>
</li>
<li>Pair<string> [] pairs = new Pair<string>[10];//error</string></string></li>
<li>&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x6765;&#x521B;&#x5EFA;&#x6CDB;&#x578B;&#x6570;&#x7EC4;</li>
</ul>
<pre><code>public static &lt;T extends Comparable&gt; T[] minmax(T&#x2026; a){
</code></pre><ul>
<li>T[] mm = (T[]) Array.newInstance(a.getClass().getComponentType(),&#x4E2A;&#x6570;);</li>
<li>&#x2026;&#x590D;&#x5236;</li>
<li><p>}</p>
<h2 id="&#x901A;&#x914D;&#x7B26;"><a name="&#x901A;&#x914D;&#x7B26;" class="plugin-anchor" href="#&#x901A;&#x914D;&#x7B26;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x901A;&#x914D;&#x7B26;</h2>
</li>
<li><p>? &#x672A;&#x77E5;&#x7C7B;&#x578B; &#x53EA;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x58F0;&#x660E;&#x65F6;&#xFF0C;&#x58F0;&#x660E;&#x7C7B;&#x578B;&#x6216;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#xFF0C;&#x4E0D;&#x80FD;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x65F6;&#xFF08;&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x65F6;)</p>
</li>
<li>List&lt;?&gt; unknownList;</li>
<li>List&lt;? extends Number&gt; unknownNumberList;</li>
<li><p>List&lt;? super Integer&gt; unknownBaseLineIntgerList;</p>
</li>
<li><p>&#x5BF9;&#x4E8E;&#x53C2;&#x6570;&#x503C;&#x662F;&#x672A;&#x77E5;&#x7C7B;&#x578B;&#x7684;&#x5BB9;&#x5668;&#x7C7B;&#xFF0C;&#x53EA;&#x80FD;&#x8BFB;&#x53D6;&#x5176;&#x4E2D;&#x5143;&#x7D20;&#xFF0C;&#x4E0D;&#x80FD;&#x5411;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF0C; &#x56E0;&#x4E3A;&#xFF0C;&#x5176;&#x7C7B;&#x578B;&#x662F;&#x672A;&#x77E5;&#xFF0C;&#x6240;&#x4EE5;&#x7F16;&#x8BD1;&#x5668;&#x65E0;&#x6CD5;&#x8BC6;&#x522B;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x7684;&#x7C7B;&#x578B;&#x548C;&#x5BB9;&#x5668;&#x7684;&#x7C7B;&#x578B;&#x662F;&#x5426;&#x517C;&#x5BB9;&#xFF0C;&#x552F;&#x4E00;&#x7684;&#x4F8B;&#x5916;&#x662F;null&#x3002;</p>
</li>
<li><p>&#x901A;&#x914D;&#x7B26;&#x7C7B;&#x578B; List&lt;?&gt; &#x4E0E;&#x539F;&#x59CB;&#x7C7B;&#x578B; List &#x548C;&#x5177;&#x4F53;&#x7C7B;&#x578B; List<string>&#x90FD;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;List&lt;?&gt;&#x8868;&#x793A;&#x8FD9;&#x4E2A;list&#x5185;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x7C7B;&#x578B;&#x90FD;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x5177;&#x4F53;&#x662F;&#x4EC0;&#x4E48;&#x6211;&#x4EEC;&#x5374;&#x4E0D;&#x77E5;&#x9053;&#x3002;&#x6CE8;&#x610F;&#xFF0C;List&lt;?&gt;&#x548C;List<object>&#x53EF;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x7531;&#x4E8E;Object&#x662F;&#x6700;&#x9AD8;&#x5C42;&#x7684;&#x8D85;&#x7C7B;&#xFF0C;List<object>&#x8868;&#x793A;&#x5143;&#x7D20;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x662F;List&lt;?&gt;&#x53EF;&#x4E0D;&#x662F;&#x8FD9;&#x4E2A;&#x610F;&#x601D;&#xFF08;&#x672A;&#x77E5;&#x7C7B;&#x578B;)&#x3002;</object></object></string></p>
</li>
<li></li>
</ul>
<h2 id="extends-&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x5B50;&#x7C7B;"><a name="extends-&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x5B50;&#x7C7B;" class="plugin-anchor" href="#extends-&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x5B50;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>extends &#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x5B50;&#x7C7B;</h2>
<ul>
<li>List&lt;? extends Fruit&gt;</li>
<li>&#x8FD9;&#x4E2A;&#x5F15;&#x7528;&#x53D8;&#x91CF;&#x5982;&#x679C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x54EA;&#x4E9B;&#x5F15;&#x7528;&#x53EF;&#x4EE5;&#x4F20;&#x5165;&#xFF1F;</li>
<li>&#x672C;&#x8EAB;&#x53CA;&#x5176;&#x5B50;&#x7C7B;</li>
<li>&#x4EE5;&#x53CA;&#x542B;&#x6709;&#x901A;&#x914D;&#x7B26;&#x53CA;extends&#x7684;&#x672C;&#x8EAB;&#x53CA;&#x5B50;&#x7C7B;</li>
<li>&#x4E0D;&#x53EF;&#x4F20;&#x5165;&#x53EA;&#x542B;&#x901A;&#x914D;&#x7B26;&#x4E0D;&#x542B;extends+&#x6307;&#x5B9A;&#x7C7B; &#x7684;&#x5F15;&#x7528;</li>
<li><p>&#x6216;&#x8005;extends&#x7684;&#x4E0D;&#x662F;&#x6307;&#x5B9A;&#x7C7B;&#x53CA;&#x5176;&#x5B50;&#x7C7B;&#xFF0C;&#x800C;&#x662F;&#x5176;&#x7236;&#x7C7B;</p>
</li>
<li><p>// Number &quot;extends&quot; Number (in this context)</p>
</li>
<li>List&lt;? extends Number&gt; foo3 = new ArrayList&lt;? extends Number&gt;(); </li>
<li>// Integer extends Number</li>
<li>List&lt;? extends Number&gt; foo3 = new ArrayList&lt;? extends Integer&gt;();</li>
<li>// Double extends Number</li>
<li><p>List&lt;? extends Number&gt; foo3 = new ArrayList&lt;? extends Double&gt;();</p>
</li>
<li><p>&#x5982;&#x679C;&#x5B9E;&#x73B0;&#x4E86;&#x591A;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&amp;&#x6765;&#x5C06;&#x63A5;&#x53E3;&#x9694;&#x5F00;</p>
</li>
<li><p>T extends Comparable &amp; Serializable</p>
</li>
<li><p>List&lt;? extends Number&gt; list = new ArrayList<number>();</number></p>
<ul>
<li>list.add(new Integer(1)); //error</li>
</ul>
</li>
<li>list.add(new Float(1.2f));  //error</li>
</ul>
<h2 id="super-&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x7236;&#x7C7B;"><a name="super-&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x7236;&#x7C7B;" class="plugin-anchor" href="#super-&#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x7236;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>super &#x6307;&#x5B9A;&#x7C7B;&#x578B;&#x5FC5;&#x4E3A;&#x81EA;&#x8EAB;&#x6216;&#x5176;&#x7236;&#x7C7B;</h2>
<ul>
<li>&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x58F0;&#x660E;&#x6CDB;&#x578B;&#x901A;&#x914D;&#x7B26;&#x7533;&#x660E;&#x4E0A;&#x754C;&#x548C;&#x4E0B;&#x754C;<h2 id="pecs&#xFF08;&#x8BFB;extends&#xFF0C;&#x5199;super"><a name="pecs&#xFF08;&#x8BFB;extends&#xFF0C;&#x5199;super" class="plugin-anchor" href="#pecs&#xFF08;&#x8BFB;extends&#xFF0C;&#x5199;super"><i class="fa fa-link" aria-hidden="true"></i></a>PECS&#xFF08;&#x8BFB;extends&#xFF0C;&#x5199;super)</h2>
</li>
<li>producer-extends, consumer-super.</li>
<li>produce&#x662F;&#x6307;&#x53C2;&#x6570;&#x662F;producer&#xFF0C;consumer&#x662F;&#x6307;&#x53C2;&#x6570;&#x662F;consumer&#x3002;</li>
<li>&#x8981;&#x5F80;&#x6CDB;&#x578B;&#x7C7B;&#x5199;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x7528;extends&#xFF1B;</li>
<li>&#x8981;&#x4ECE;&#x6CDB;&#x578B;&#x7C7B;&#x8BFB;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x7528;super&#xFF1B;</li>
<li><p>&#x65E2;&#x8981;&#x53D6;&#x53C8;&#x8981;&#x5199;&#xFF0C;&#x5C31;&#x4E0D;&#x7528;&#x901A;&#x914D;&#x7B26;&#xFF08;&#x5373;extends&#x4E0E;super&#x90FD;&#x4E0D;&#x7528;)&#x6BD4;&#x5982;List<integer>&#x3002;</integer></p>
</li>
<li><p>&#x5982;&#x679C;&#x53C2;&#x6570;&#x5316;&#x7C7B;&#x578B;&#x8868;&#x793A;&#x4E00;&#x4E2A;T&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x5C31;&#x662F;&lt;? extends T&gt;&#xFF1B;&#x5982;&#x679C;&#x5B83;&#x8868;&#x793A;&#x4E00;&#x4E2A;T&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x5C31;&#x4F7F;&#x7528;&lt;? super E&gt;&#x3002;</p>
</li>
<li>Stack&#x7684;pushAll&#x7684;&#x53C2;&#x6570;&#x4EA7;&#x751F;E&#x5B9E;&#x4F8B;&#x4F9B;Stack&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x6B64;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x4E3A;Iterable&lt;? extends E&gt;&#x3002;</li>
<li>popAll&#x7684;&#x53C2;&#x6570;&#x63D0;&#x4F9B;Stack&#x6D88;&#x8D39;E&#x5B9E;&#x4F8B;&#xFF0C;&#x56E0;&#x6B64;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x4E3A;Collection&lt;&#xFF1F; super E&gt;&#x3002;</li>
</ul>
<pre><code>public void pushAll(Iterable&lt;? extends E&gt; src) {
</code></pre><ul>
<li>for (E e : src)</li>
<li>push(e);</li>
<li>}</li>
</ul>
<pre><code>public void popAll(Collection&lt;? super E&gt; dst) {
</code></pre><ul>
<li>while (!isEmpty())</li>
<li>dst.add(pop());</li>
<li>}</li>
<li><p>&#x5728;&#x8C03;&#x7528;pushAll&#x65B9;&#x6CD5;&#x65F6;&#x751F;&#x4EA7;&#x4E86;E &#x5B9E;&#x4F8B;&#xFF08;produces E instances)&#xFF0C;&#x5728;&#x8C03;&#x7528;popAll&#x65B9;&#x6CD5;&#x65F6;dst&#x6D88;&#x8D39;&#x4E86;E &#x5B9E;&#x4F8B;&#xFF08;consumes E instances)&#x3002;Naftalin&#x4E0E;Wadler&#x5C06;PECS&#x79F0;&#x4E3A;Get and Put Principle&#x3002;</p>
</li>
<li><p>Collections#copy</p>
</li>
</ul>
<pre><code>public static &lt;T&gt; void copy(List&lt;? super T&gt; dest, List&lt;? extends T&gt; src) {
    int srcSize = src.size();
    if (srcSize &gt; dest.size())
        throw new IndexOutOfBoundsException(&quot;Source does not fit in dest&quot;);

    if (srcSize &lt; COPY_THRESHOLD ||
        (src instanceof RandomAccess &amp;&amp; dest instanceof RandomAccess)) {
        for (int i=0; i&lt;srcSize; i++)
            dest.set(i, src.get(i));
    } else {
        ListIterator&lt;? super T&gt; di=dest.listIterator();
        ListIterator&lt;? extends T&gt; si=src.listIterator();
        for (int i=0; i&lt;srcSize; i++) {
            di.next();
            di.set(si.next());
        }
    }
}
</code></pre><ul>
<li><h2 id="&#x6CDB;&#x578B;&#x64E6;&#x9664;&#xFF08;&#x7F16;&#x8BD1;&#x65F6;&#x64E6;&#x9664;"><a name="&#x6CDB;&#x578B;&#x64E6;&#x9664;&#xFF08;&#x7F16;&#x8BD1;&#x65F6;&#x64E6;&#x9664;" class="plugin-anchor" href="#&#x6CDB;&#x578B;&#x64E6;&#x9664;&#xFF08;&#x7F16;&#x8BD1;&#x65F6;&#x64E6;&#x9664;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6CDB;&#x578B;&#x64E6;&#x9664;&#xFF08;&#x7F16;&#x8BD1;&#x65F6;&#x64E6;&#x9664;)</h2>
</li>
<li>&#x7F16;&#x8BD1;&#x5668;&#x751F;&#x6210;&#x7684;bytecode&#x662F;&#x4E0D;&#x5305;&#x542B;&#x6CDB;&#x578B;&#x4FE1;&#x606F;&#x7684;&#xFF0C;&#x6CDB;&#x578B;&#x7C7B;&#x578B;&#x4FE1;&#x606F;&#x5C06;&#x5728;&#x7F16;&#x8BD1;&#x5904;&#x7406;&#x662F;&#x88AB;&#x64E6;&#x9664;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5373;&#x6CDB;&#x578B;&#x64E6;&#x9664;&#x3002;</li>
<li><p>&#x64E6;&#x9664;&#x7C7B;&#x578B;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x66FF;&#x6362;&#x4E3A;&#x9650;&#x5B9A;&#x7C7B;&#x578B;&#xFF08;&#x65E0;&#x9650;&#x5B9A;&#x7684;&#x53D8;&#x91CF;&#x7528;Object)&#x3002;</p>
</li>
<li><p>&#x6BD4;&#x5982; T extends Comparable </p>
</li>
<li>&#x90A3;&#x4E48;&#x4E0B;&#x9762;&#x6240;&#x6709;&#x51FA;&#x73B0;T&#x7684;&#x5730;&#x65B9;&#x90FD;&#x4F1A;&#x88AB;&#x66FF;&#x6362;&#x4E3A;Comparable</li>
<li>&#x5982;&#x679C;&#x8C03;&#x7528;&#x65F6;&#x6307;&#x5B9A;&#x67D0;&#x4E2A;&#x7C7B;&#xFF0C;&#x6BD4;&#x5982; Pair<string> pair = new Pair&lt;&gt;();</string></li>
<li><p>&#x90A3;&#x4E48;Pair<t> &#x4E2D;&#x6240;&#x6709;&#x7684;T&#x90FD;&#x66FF;&#x6362;&#x4E3A;String</t></p>
</li>
<li><p>&#x6CDB;&#x578B;&#x64E6;&#x9664;&#x5E26;&#x6765;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>1)&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x7684;&#x6CDB;&#x578B;&#x8FDB;&#x884C;&#x65B9;&#x6CD5;&#x91CD;&#x8F7D;</li>
</ul>
</li>
</ul>
<pre><code>public void test(List&lt;String&gt; ls) {
</code></pre><ul>
<li>System.out.println(&quot;Sting&quot;);</li>
<li>}</li>
</ul>
<pre><code>public void test(List&lt;Integer&gt; li) {
</code></pre><ul>
<li>System.ut.println(&quot;Integer&quot;);</li>
<li><p>} // &#x7F16;&#x8BD1;&#x51FA;&#x9519;</p>
</li>
<li><p>&#x6216;&#x8005;</p>
</li>
</ul>
<pre><code>public interface Builder&lt;K,V&gt; {
</code></pre><ul>
<li>void add(List<k> keyList);</k></li>
<li>void add(List<v> valueList);</v></li>
<li><p>}</p>
<ul>
<li>2)&#x6CDB;&#x578B;&#x7C7B;&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x662F;&#x5171;&#x4EAB;&#x7684;</li>
</ul>
</li>
<li><p>&#x53E6;&#x5916;&#xFF0C;&#x56E0;&#x4E3A;Java&#x6CDB;&#x578B;&#x7684;&#x64E6;&#x9664;&#x5E76;&#x4E0D;&#x662F;&#x5BF9;&#x6240;&#x6709;&#x4F7F;&#x7528;&#x6CDB;&#x578B;&#x7684;&#x5730;&#x65B9;&#x90FD;&#x4F1A;&#x64E6;&#x9664;&#x7684;&#xFF0C;&#x90E8;&#x5206;&#x5730;&#x65B9;&#x4F1A;&#x4FDD;&#x7559;&#x6CDB;&#x578B;&#x4FE1;&#x606F;&#xFF0C;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x7C7B;&#x578B;&#x53C2;&#x6570;&#x3002;</p>
</li>
<li></li>
</ul>
<h1 id="116-io"><a name="116-io" class="plugin-anchor" href="#116-io"><i class="fa fa-link" aria-hidden="true"></i></a>1.16 IO</h1>
<h2 id="unix-io&#x6A21;&#x578B;"><a name="unix-io&#x6A21;&#x578B;" class="plugin-anchor" href="#unix-io&#x6A21;&#x578B;"><i class="fa fa-link" aria-hidden="true"></i></a>Unix IO&#x6A21;&#x578B;</h2>
<p>&#xF0B7;- &#x5F02;&#x6B65;I/O &#x662F;&#x6307;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x53D1;&#x8D77;IO&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x4E0D;&#x7B49;&#x5F85;&#x6570;&#x636E;&#xFF0C;&#x540C;&#x65F6;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x8D1F;&#x8D23;I/O&#x64CD;&#x4F5C;&#x628A;&#x6570;&#x636E;&#x4ECE;&#x5185;&#x6838;&#x62F7;&#x8D1D;&#x5230;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x540E;&#x901A;&#x77E5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x6570;&#x636E;&#x62F7;&#x8D1D;&#x662F;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x5B8C;&#x6210;&#xFF0C;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x4ECE;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x6CA1;&#x6709;&#x7B49;&#x5F85;&#x6570;&#x636E;&#xFF0C;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x540E;&#x4E0D;&#x53C2;&#x4E0E;&#x4EFB;&#x4F55;IO&#x64CD;&#x4F5C;&#xFF0C;&#x7B49;&#x5185;&#x6838;&#x901A;&#x77E5;&#x5B8C;&#x6210;&#x3002;
&#xF0B7;- &#x540C;&#x6B65;I/O &#x5C31;&#x662F;&#x975E;&#x5F02;&#x6B65;IO&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x8981;&#x53C2;&#x4E0E;&#x628A;&#x6570;&#x636E;&#x62F7;&#x8D1D;&#x5230;&#x7A0B;&#x5E8F;&#x7F13;&#x51B2;&#x533A;&#xFF08;&#x4F8B;&#x5982;java&#x7684;InputStream&#x8BFB;&#x5B57;&#x8282;&#x6D41;&#x8FC7;&#x7A0B;)&#x3002;
&#xF0B7;- &#x540C;&#x6B65;IO&#x91CC;&#x7684;&#x975E;&#x963B;&#x585E; &#x662F;&#x6307;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x53D1;&#x8D77;IO&#x64CD;&#x4F5C;&#x8BF7;&#x6C42;&#x540E;&#x4E0D;&#x7B49;&#x5F85;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x8C03;&#x7528;&#x4F1A;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6807;&#x5FD7;&#x4FE1;&#x606F;&#x544A;&#x77E5;&#x6761;&#x4EF6;&#x4E0D;&#x6EE1;&#x8DB3;&#xFF0C;&#x6570;&#x636E;&#x672A;&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x4ECE;&#x800C;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x7A0B;&#x5E8F;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x5176;&#x5B83;&#x4EFB;&#x52A1;&#x3002;&#x6267;&#x884C;&#x5B8C;&#x5176;&#x5B83;&#x4EFB;&#x52A1;&#xFF0C;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x4F1A;&#x4E3B;&#x52A8;&#x8F6E;&#x8BE2;&#x67E5;&#x770B;IO&#x64CD;&#x4F5C;&#x6761;&#x4EF6;&#x662F;&#x5426;&#x6EE1;&#x8DB3;&#xFF0C;&#x5982;&#x679C;&#x6EE1;&#x8DB3;&#xFF0C;&#x5219;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x4EB2;&#x81EA;&#x53C2;&#x4E0E;&#x62F7;&#x8D1D;&#x6570;&#x636E;&#x52A8;&#x4F5C;&#x3002;</p>
<ul>
<li><p>Unix IO&#x6A21;&#x578B;&#x7684;&#x8BED;&#x5883;&#x4E0B;&#xFF0C;&#x540C;&#x6B65;&#x548C;&#x5F02;&#x6B65;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x6570;&#x636E;&#x62F7;&#x8D1D;&#x9636;&#x6BB5;&#x662F;&#x5426;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x3002;&#x963B;&#x585E;&#x548C;&#x975E;&#x963B;&#x585E;&#x64CD;&#x4F5C;&#x662F;&#x9488;&#x5BF9;&#x53D1;&#x8D77;IO&#x8BF7;&#x6C42;&#x64CD;&#x4F5C;&#x540E;&#x662F;&#x5426;&#x6709;&#x7ACB;&#x523B;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6807;&#x5FD7;&#x4FE1;&#x606F;&#x800C;&#x4E0D;&#x8BA9;&#x8BF7;&#x6C42;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x3002;</p>
<h2 id="bio-nio-aio&#x4ECB;&#x7ECD;"><a name="bio-nio-aio&#x4ECB;&#x7ECD;" class="plugin-anchor" href="#bio-nio-aio&#x4ECB;&#x7ECD;"><i class="fa fa-link" aria-hidden="true"></i></a>BIO NIO AIO&#x4ECB;&#x7ECD;</h2>
</li>
<li><p>BIO&#xFF1A;&#x540C;&#x6B65;&#x963B;&#x585E;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x4F1A;&#x5BF9;&#x5E94;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;</p>
</li>
<li>NIO&#xFF1A;&#x540C;&#x6B65;&#x975E;&#x963B;&#x585E;&#xFF0C;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x5668;&#x8F6E;&#x8BE2;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IO&#x8BF7;&#x6C42;&#x4F1A;&#x5BF9;&#x5E94;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;</li>
<li>AIO&#xFF1A; &#x5F02;&#x6B65;&#x975E;&#x963B;&#x585E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;IO&#x8BF7;&#x6C42;&#x7531;OS&#x5B8C;&#x6210;&#x540E;&#x518D;&#x901A;&#x77E5;&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#xFF08;&#x9700;&#x8981;OS&#x652F;&#x6301;)</li>
<li>1&#x3001;&#x8FDB;&#x7A0B;&#x5411;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BF7;&#x6C42;&#x6570;&#x636E; </li>
<li>2&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x628A;&#x5916;&#x90E8;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x6838;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C; </li>
<li>3&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x628A;&#x5185;&#x6838;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x62F7;&#x8D1D;&#x5230;&#x8FDB;&#x7A0B;&#x7684;&#x7F13;&#x51B2;&#x533A; </li>
<li><p>4&#x3001;&#x8FDB;&#x7A0B;&#x83B7;&#x5F97;&#x6570;&#x636E;&#x5B8C;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x529F;&#x80FD;</p>
</li>
<li><p>Java NIO&#x5C5E;&#x4E8E;&#x540C;&#x6B65;&#x975E;&#x963B;&#x585E;IO&#xFF0C;&#x5373;IO&#x591A;&#x8DEF;&#x590D;&#x7528;&#xFF0C;&#x5355;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x591A;&#x4E2A;IO</p>
</li>
<li><p>&#x5373;&#x8BE2;&#x95EE;&#x65F6;&#x4ECE;IO&#x6CA1;&#x6709;&#x5B8C;&#x6BD5;&#x65F6;&#x76F4;&#x63A5;&#x963B;&#x585E;&#xFF0C;&#x53D8;&#x6210;&#x4E86;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x662F;&#x5426;&#x5B8C;&#x6210;IO&#x7684;&#x4FE1;&#x53F7;&#x3002;</p>
</li>
<li><p>&#x5F02;&#x6B65;IO&#x5C31;&#x662F;&#x6307;AIO&#xFF0C;AIO&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x3002;</p>
</li>
<li></li>
</ul>
<h2 id="java-bio-&#x4F7F;&#x7528;"><a name="java-bio-&#x4F7F;&#x7528;" class="plugin-anchor" href="#java-bio-&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>Java BIO &#x4F7F;&#x7528;</h2>
<ul>
<li>Server</li>
</ul>
<pre><code>public class ChatServer {
</code></pre><ul>
<li>ServerSocket ss = null;</li>
<li>boolean started = false;</li>
<li>ArrayList<client> clients = new ArrayList<client>();</client></client></li>
</ul>
<pre><code>    public static void main(String[] args) {
</code></pre><ul>
<li>new ChatServer().start();</li>
<li>}</li>
</ul>
<pre><code>    public void start() {
</code></pre><ul>
<li>try {<ul>
<li>ss = new ServerSocket(6666);</li>
</ul>
</li>
<li>started = true;</li>
<li>} catch (BindException e) {</li>
<li>System.out.println(&quot;&#x7AEF;&#x53E3;&#x4F7F;&#x7528;&#x4E2D;....&quot;); // &#x7528;&#x4E8E;&#x5904;&#x7406;&#x4E24;&#x6B21;&#x542F;&#x52A8;Server&#x7AEF;</li>
<li>System.out.println(&quot;&#x8BF7;&#x91CD;&#x65B0;&#x8FD0;&#x884C;&#x670D;&#x52A1;&#x5668;&quot;);<ul>
<li>System.exit(-1);</li>
</ul>
</li>
<li>} catch (IOException e) {</li>
<li>System.out.println(&quot;&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x5931;&#x8D25;&quot;);</li>
<li>e.printStackTrace();</li>
<li><p>}</p>
</li>
<li><p>try {</p>
</li>
<li>while (started) {</li>
<li>Socket s = ss.accept();</li>
<li>Client c = new Client(s);</li>
<li>clients.add(c);</li>
<li>c.transmitToAll(c.name + &quot;&#x8FDB;&#x5165;&#x4E86;&#x804A;&#x5929;&#x5BA4;&quot;);</li>
<li>new Thread(c).start();</li>
<li>}</li>
<li>} catch (IOException e) {</li>
<li>e.printStackTrace();</li>
<li>} finally { // &#x4E3B;&#x65B9;&#x6CD5;&#x7ED3;&#x675F;&#x65F6;&#x5E94;&#x8BE5;&#x5173;&#x95ED;&#x670D;&#x52A1;&#x5668;ServerSocket</li>
<li>if (ss != null)</li>
<li>try {</li>
<li>ss.close();</li>
<li>} catch (IOException e) {</li>
<li>e.printStackTrace();</li>
<li>}</li>
<li>}</li>
<li><p>}</p>
</li>
<li><p>class Client implements Runnable { // &#x5305;&#x88C5;&#x7ED9;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x7EBF;&#x7A0B;&#x7C7B;&#xFF0C;&#x5E94;&#x8BE5;&#x4FDD;&#x7559;&#x81EA;&#x5DF1;&#x7684;&#x8FDE;&#x63A5;Socket&#x548C;&#x6D41;</p>
</li>
<li>// &#x4FDD;&#x7559;&#x8FDE;&#x63A5;&#x4E00;&#x822C;&#x4F7F;&#x7528;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x8FDE;&#x63A5;&#x4F20;&#x5165;</li>
<li>// &#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5C31;new &#x4E00;&#x4E2A;Client &#x8FDE;&#x63A5;</li>
</ul>
<pre><code>        private Socket s = null;
</code></pre><pre><code>        private DataInputStream dis = null;
</code></pre><pre><code>        private DataOutputStream dos = null;// &#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x6709;&#x5404;&#x81EA;&#x7684;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x6D41;&#xFF0C;&#x8F93;&#x5165;&#x6D41;&#x7528;&#x4E8E;&#x8BFB;&#x6765;&#x81EA;&#x5F53;&#x524D;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8F93;&#x51FA;&#x6D41;&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x5F53;&#x524D;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6D41;&#x3002;
</code></pre><pre><code>        private boolean Connected = false;// &#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5F00;&#x59CB;&#x7ED3;&#x675F;&#x7684;&#x6807;&#x5FD7;
</code></pre><pre><code>        private String name;
</code></pre><ul>
<li>Client(Socket s) { // new &#x4E00;&#x4E2A;Client&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x8981;&#x6253;&#x5F00;Socket&#x548C;DataInputStream&#x6D41;</li>
<li>this.s = s;</li>
<li>try {</li>
<li>dis = new DataInputStream(s.getInputStream());</li>
<li>dos = new DataOutputStream(s.getOutputStream());</li>
<li>Connected = true;</li>
<li><p>this.name = dis.readUTF();</p>
</li>
<li><p>} catch (IOException e) {</p>
</li>
<li>e.printStackTrace();</li>
<li>}</li>
<li><p>}</p>
</li>
<li><p>// &#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x901A;&#x4FE1;&#xFF1F;</p>
</li>
<li>// &#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5728;&#x6BCF;&#x8FDE;&#x5230;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5C31;&#x4FDD;&#x5B58;&#x4E0E;&#x5176;&#x7684;&#x8FDE;&#x63A5;Socket&#xFF0C;&#x5F53;&#x8981;&#x53D1;&#x9001;&#x7ED9;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x4FE1;&#x606F;&#x65F6;&#xFF0C;&#x904D;&#x5386;&#x4E00;&#x904D;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;</li>
</ul>
<pre><code>        public void run() {
</code></pre><ul>
<li>try {</li>
<li>while (Connected) {</li>
<li>String read = dis.readUTF();</li>
<li>if (read.equals(&quot;EXIT&quot;)) {</li>
<li>Connected = false;</li>
<li>transmitToAll(this.name + &quot;&#x5DF2;&#x9000;&#x51FA;&quot;);</li>
<li>continue;</li>
<li>} else if (read.startsWith(&quot;@&quot;)) {<ul>
<li>String[] msg = read.substring(1).split(&quot;:&quot;);</li>
</ul>
</li>
<li>transmitToPerson(msg[0], msg[1]);</li>
<li>continue;</li>
<li>}</li>
<li>transmitToAll(this.name+&quot;:&quot;+read);</li>
<li>}<ul>
<li>} catch (EOFException e1) {</li>
</ul>
</li>
<li>System.out.println(&quot;Client closed&quot;); <ul>
<li>} catch (IOException e1) {</li>
</ul>
</li>
<li>e1.printStackTrace();</li>
<li>} finally { // &#x5173;&#x95ED;&#x8D44;&#x6E90;&#x5E94;&#x8BE5;&#x653E;&#x5728;finally&#x4E2D;</li>
<li>try {</li>
<li>CloseUtil.close(dis, dos);</li>
<li>if (s != null)</li>
<li>s.close();<ul>
<li>} catch (IOException e1) {</li>
</ul>
</li>
<li>e1.printStackTrace();</li>
<li>}</li>
<li>}</li>
<li>}</li>
</ul>
<pre><code>        /**
</code></pre><ul>
<li><ul>
<li>&#x5C06;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;&#x6240;&#x6709;&#x4EBA;</li>
</ul>
</li>
<li>* </li>
<li><ul>
<li>@param read</li>
</ul>
</li>
<li>*/</li>
</ul>
<pre><code>        public void transmitToAll(String read) {
</code></pre><ul>
<li>for (int i = 0; i &lt; clients.size(); i++) {</li>
<li>Client c = clients.get(i);</li>
<li>if (c.Connected == true)</li>
<li>c.send(read); // &#x8C03;&#x7528;&#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x7EBF;&#x7A0B;&#x7684;send&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x8F93;&#x51FA;&#x6D41;&#x4E0E;&#x5BF9;&#x5E94;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5; dos --&gt;</li>
<li>// Client</li>
<li>}</li>
<li>}</li>
</ul>
<pre><code>        /**
</code></pre><ul>
<li><ul>
<li>&#x5C06;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;&#x67D0;&#x4E2A;&#x4EBA;&#xFF0C;&#x79C1;&#x804A;</li>
</ul>
</li>
<li>* </li>
<li><ul>
<li>@param read</li>
</ul>
</li>
<li><ul>
<li>@param clientName</li>
</ul>
</li>
<li>*/</li>
</ul>
<pre><code>        public void transmitToPerson(String clientName, String read) {
</code></pre><ul>
<li>boolean isFind = false;</li>
<li>for (int i = 0; i &lt; clients.size(); i++) {</li>
<li>Client client = clients.get(i);</li>
<li>if (client.name.equals(clientName)) {</li>
<li>client.send(this.name+&quot;:&quot;+read);</li>
<li>isFind = true;</li>
<li>}</li>
<li>}</li>
<li>send(this.name+&quot;:&quot;+read + (isFind ? &quot;&quot; : &quot;\n&#x62B1;&#x6B49;&#xFF0C;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x6B64;&#x7528;&#x6237;&quot;));</li>
<li>}</li>
</ul>
<pre><code>        public void send(String str) {// &#x5728;&#x54EA;&#x91CC;&#x51FA;&#x9519;&#x5C31;&#x5728;&#x54EA;&#x91CC;&#x6355;&#x83B7;
</code></pre><ul>
<li>try {</li>
<li>dos.writeUTF(str);</li>
<li>} catch (SocketException e) {</li>
<li>this.Connected = false;</li>
<li>clients.remove(this);</li>
<li>} catch (IOException e) {</li>
<li>e.printStackTrace();</li>
<li>}</li>
<li>}</li>
<li>}</li>
<li>}        </li>
<li>&#x2003;</li>
<li>Client&#xFF08;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7528;&#x4E8E;&#x8BFB;&#x53D6;&#xFF0C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7528;&#x4E8E;&#x53D1;&#x9001;)</li>
</ul>
<pre><code>public class ChatClient extends Frame {
</code></pre><ul>
<li>Socket s = null; //&#x5C06;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x4F7F;&#x5F97;&#x5728;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x5404;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x7528;&#xFF0C;&#x5C06;&#x8BE5;&#x5BF9;&#x8C61;&#x8BBE;&#x7F6E;&#x4E3A;&#x6574;&#x4E2A;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x53D8;&#x91CF;</li>
<li>DataOutputStream dos = null;//&#x5728;&#x591A;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x90FD;&#x8981;&#x4F7F;&#x7528;</li>
<li>DataInputStream dis = null;</li>
<li>TextField tfText = new TextField(); // &#x8BBE;&#x7F6E;&#x4E3A;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x65B9;&#x4FBF;&#x5176;&#x4ED6;&#x7C7B;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;</li>
<li>TextArea taContent = new TextArea();</li>
<li>boolean started = false;</li>
<li>Thread recv = null;</li>
<li></li>
<li>ChatClient(String name, int x, int y, int w, int h) {</li>
<li>super(name);</li>
<li>this.setBounds(x, y, w, h);</li>
<li>this.setLayout(new BorderLayout());</li>
<li>this.addWindowListener(new MonitorWindow());</li>
<li>taContent.setEditable(false);</li>
<li>this.add(tfText, BorderLayout.SOUTH);</li>
<li>this.add(taContent, BorderLayout.NORTH);</li>
<li>tfText.addActionListener(new MonitorText());//&#x5BF9;&#x4E8E;&#x6587;&#x672C;&#x6846;&#x7684;&#x76D1;&#x89C6;&#x5668;&#x5FC5;&#x987B;&#x6DFB;&#x52A0;&#x5728;&#x67D0;&#x4E2A;&#x6587;&#x672C;&#x6846;&#x4E0A;&#xFF0C;&#x53EA;&#x6709;&#x7A97;&#x53E3;&#x76D1;&#x89C6;&#x5668;&#x624D;&#x80FD;&#x6DFB;&#x52A0;&#x5230;Frame&#x4E0A;</li>
<li>this.pack();</li>
<li>this.setVisible(true); // &#x5FC5;&#x987B;&#x653E;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#xFF0C;&#x5426;&#x5219;&#x4E4B;&#x4E0B;&#x7684;&#x7EC4;&#x4EF6;&#x65E0;&#x6CD5;&#x663E;&#x793A;</li>
<li>connect();</li>
<li>ClientNameDialog dialog = new ClientNameDialog(this,&quot;&#x59D3;&#x540D;&#x63D0;&#x793A;&#x6846;&quot;,true);</li>
<li>}</li>
<li></li>
</ul>
<pre><code>    private class ClientNameDialog extends JDialog implements ActionListener{
</code></pre><ul>
<li>JLabel jl = null;</li>
<li>JTextField jf = null;</li>
<li>JButton jb = null;</li>
<li></li>
<li>ClientNameDialog(Frame  owner,String title,boolean model){</li>
<li>super(owner,title,model);</li>
<li>this.setLayout(new BorderLayout());</li>
<li>this.setBounds(300, 300, 200, 150);</li>
<li>jl = new JLabel(&quot;&#x8BF7;&#x8F93;&#x5165;&#x60A8;&#x7684;&#x59D3;&#x540D;&#x6216;&#x6635;&#x79F0;:&quot;);</li>
<li>jf = new JTextField();</li>
<li>jb = new JButton(&quot;&#x786E;&#x5B9A;&quot;);</li>
<li>jb.addActionListener(this);</li>
<li>this.addWindowListener(new WindowAdapter(){</li>
</ul>
<pre><code>                public void windowClosing(WindowEvent arg0) {
</code></pre><ul>
<li>setVisible(false);</li>
<li>System.exit(0);</li>
<li>}</li>
<li>});    </li>
<li>this.add(jl,BorderLayout.NORTH);</li>
<li>this.add(jf,BorderLayout.CENTER);</li>
<li>this.add(jb, BorderLayout.SOUTH);</li>
<li>this.setVisible(true);</li>
<li>}</li>
</ul>
<pre><code>        public void actionPerformed(ActionEvent e) {
</code></pre><ul>
<li>String name = &quot;&quot;;</li>
<li>name = jf.getText();</li>
<li>if((name == null || name.equals(&quot;&quot;))){</li>
<li>JOptionPane.showMessageDialog(this, &quot;&#x59D3;&#x540D;&#x4E0D;&#x53EF;&#x4E3A;&#x7A7A;!&quot;);</li>
<li>return;</li>
<li>}</li>
<li>this.setVisible(false);</li>
<li>send(name);</li>
<li>JOptionPane.showMessageDialog(this, &quot;&#x6B22;&#x8FCE;&#x60A8;,&quot;+name);</li>
<li>launchThread();</li>
<li>}</li>
<li></li>
<li>}    </li>
</ul>
<pre><code>    private class MonitorWindow extends WindowAdapter {
</code></pre><pre><code>        public void windowClosing(WindowEvent e) {
</code></pre><ul>
<li>setVisible(false);</li>
<li>disConnect();</li>
<li>System.exit(0);</li>
<li>}</li>
<li>}</li>
<li></li>
</ul>
<pre><code>    private class MonitorText implements ActionListener {
</code></pre><ul>
<li>String str = null;</li>
<li></li>
</ul>
<pre><code>        public void actionPerformed(ActionEvent e) {
</code></pre><ul>
<li></li>
<li>str = tfText.getText().trim();//&#x6CE8;&#x610F;&#x8FD9;&#x662F;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x8981;&#x627E;&#x5230;&#x4E8B;&#x4EF6;&#x6E90;&#x5BF9;&#x8C61;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x5916;&#x90E8;&#x7C7B;&#x7684;TextField&#x5373;&#x53EF;&#xFF0C;&#x4E0D;&#x9700;&#x8981;getSource(&#x5E73;&#x884C;&#x7C7B;&#x53EF;&#x7528;)</li>
<li>tfText.setText(&quot;&quot;);                     //trim&#x53EF;&#x4EE5;&#x53BB;&#x6389;&#x5F00;&#x5934;&#x548C;&#x7ED3;&#x5C3E;&#x7684;&#x7A7A;&#x683C;</li>
<li>send(str);</li>
<li>}        </li>
<li>}</li>
<li></li>
</ul>
<pre><code>    public void send(String str){//&#x4E3A;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5355;&#x72EC;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;
</code></pre><ul>
<li>try{</li>
<li>dos.writeUTF(str);</li>
<li>dos.flush();<ul>
<li>}catch(IOException e1){</li>
</ul>
</li>
<li>e1.printStackTrace();</li>
<li>}</li>
<li>}</li>
<li></li>
</ul>
<pre><code>    public void connect(){ //&#x5E94;&#x4E3A;&#x8FDE;&#x63A5;&#x5355;&#x72EC;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;
</code></pre><ul>
<li>try{<ul>
<li>s = new Socket(&quot;localhost&quot;,6666);</li>
</ul>
</li>
<li>dos = new DataOutputStream(s.getOutputStream());//&#x4E00;&#x8FDE;&#x63A5;&#x5C31;&#x6253;&#x5F00;&#x8F93;&#x51FA;&#x6D41;</li>
<li>dis = new DataInputStream(s.getInputStream());  //&#x4E00;&#x8FDE;&#x63A5;&#x5C31;&#x6253;&#x5F00;&#x8F93;&#x5165;&#x6D41;</li>
<li>started = true;            </li>
<li>}catch(IOException e){</li>
<li>e.printStackTrace();</li>
<li>}                    </li>
<li>}</li>
<li></li>
</ul>
<pre><code>    public void launchThread(){
</code></pre><ul>
<li>recv = new Thread(new Receive());</li>
<li>recv.start();</li>
<li>}</li>
<li></li>
</ul>
<pre><code>    public void disConnect() {
</code></pre><ul>
<li>try{</li>
<li>dos.writeUTF(&quot;EXIT&quot;);</li>
<li>started = false;</li>
<li>//&#x52A0;&#x5165;&#x5230;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x4F1A;&#x7B49;&#x5F85;&#x5B50;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#xFF0C;&#x624D;&#x4F1A;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x8BED;&#x53E5;&#x3002;&#x8FD9;&#x5C31;&#x907F;&#x514D;&#x4E86;&#x5728;&#x8BFB;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#x5C06;&#x6D41;&#x5207;&#x65AD;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x8FD9;&#x91CC;&#x662F;&#x65E0;&#x6548;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5C06;&#x7EBF;&#x7A0B;&#x505C;&#x6B62;&#x5E94;&#x8BE5;&#x5148;&#x8003;&#x8651;&#x4F7F;&#x7528;join&#x65B9;&#x6CD5;                </li>
<li>CloseUtil.close(dis,dos);</li>
<li>s.close();</li>
<li>} catch (IOException e) {</li>
<li>e.printStackTrace();</li>
<li>}</li>
<li><p>}</p>
</li>
<li></li>
</ul>
<pre><code>    private class Receive implements Runnable { //&#x540C;&#x6837;&#x539F;&#x56E0; readUTF&#x662F;&#x963B;&#x585E;&#x5F0F;&#x7684;&#xFF0C;&#x5904;&#x4E8E;&#x6B7B;&#x5FAA;&#x73AF;&#x4E2D;&#xFF0C;&#x4E0D;&#x80FD;&#x6267;&#x884C;&#x5176;&#x4ED6;&#x8BED;&#x53E5;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x5176;&#x5355;&#x72EC;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;
</code></pre><ul>
<li></li>
</ul>
<pre><code>        public void run(){
</code></pre><ul>
<li>String str = null;</li>
<li>try{</li>
<li>while(started){</li>
<li>str = dis.readUTF();         //&#x5982;&#x679C;&#x5728;&#x963B;&#x585E;&#x72B6;&#x6001;&#xFF0C;&#x7A0B;&#x5E8F;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x5B9A;&#x4F1A;&#x62A5;&#x9519;SocketException&#x3002;&#x5173;&#x95ED;&#x4E86;Socket&#x4E4B;&#x540E;&#x8FD8;&#x5728;&#x8C03;&#x7528;readUTF&#x65B9;&#x6CD5;</li>
<li>taContent.setText(taContent.getText()+str+&apos;\n&apos;);//&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x5173;&#x95ED;&#x7A0B;&#x5E8F;&#x7684;&#x540C;&#x65F6;&#x505C;&#x6B62;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E0D;&#x518D;&#x8BFB;&#x53D6;</li>
<li>(&#x5982;&#x679C;&#x4F7F;&#x7528;JTextArea&#x53EF;&#x4EE5;&#x4F7F;&#x7528;append&#x65B9;&#x6CD5;)</li>
<li>}    </li>
<li>}catch (SocketException e){         //&#x5C06;SocketException&#x89C6;&#x4E3A;&#x9000;&#x51FA;&#x3002;&#x4F46;&#x8FD9;&#x79CD;&#x60F3;&#x6CD5;&#x662F;&#x4E0D;&#x597D;&#x7684;&#xFF0C;&#x5C06;&#x5F02;&#x5E38;&#x89C6;&#x4E3A;&#x7A0B;&#x5E8F;&#x6B63;&#x5E38;&#x7684;&#x4E00;&#x90E8;&#x5206;</li>
<li>System.out.println(&quot;Client has quitted!&quot;);</li>
<li>}catch (EOFException e){</li>
<li>System.out.println(&quot;Client has quitted!&quot;);</li>
<li>}catch(IOException e){</li>
<li>e.printStackTrace();</li>
<li>}</li>
<li>}</li>
<li>}</li>
</ul>
<pre><code>    public static void main(String[] args) {
</code></pre><ul>
<li>new ChatClient(&quot;Client&quot;, 200, 200, 300, 200);        </li>
<li>}        </li>
<li>}</li>
</ul>
<h2 id="java-nio-&#x4F7F;&#x7528;"><a name="java-nio-&#x4F7F;&#x7528;" class="plugin-anchor" href="#java-nio-&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>Java NIO &#x4F7F;&#x7528;</h2>
<ul>
<li>&#x4F20;&#x7EDF;&#x7684;IO&#x64CD;&#x4F5C;&#x9762;&#x5411;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x6BCF;&#x6B21;&#x4ECE;&#x6D41;&#x4E2D;&#x8BFB;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x76F4;&#x81F3;&#x5B8C;&#x6210;&#xFF0C;&#x6570;&#x636E;&#x6CA1;&#x6709;&#x88AB;&#x7F13;&#x5B58;&#x5728;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x3002;</li>
<li>NIO&#x64CD;&#x4F5C;&#x9762;&#x5411;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x6570;&#x636E;&#x4ECE;Channel&#x8BFB;&#x53D6;&#x5230;Buffer&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x968F;&#x540E;&#x5728;Buffer&#x4E2D;&#x5904;&#x7406;&#x6570;&#x636E;&#x3002;</li>
<li><p>BIO&#x4E2D;&#x7684;accept&#x662F;&#x6CA1;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x65F6;&#x963B;&#x585E;&#xFF0C;NIO&#x7684;accept&#x662F;&#x6CA1;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x65F6;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x3002;</p>
</li>
<li><p>NIO&#x7684;&#x4E09;&#x4E2A;&#x91CD;&#x8981;&#x7EC4;&#x4EF6;&#xFF1A;Buffer&#x3001;Channel&#x3001;Selector&#x3002;</p>
</li>
<li>Buffer&#x662F;&#x7528;&#x4E8E;&#x5BB9;&#x7EB3;&#x6570;&#x636E;&#x7684;&#x7F13;&#x51B2;&#x533A;&#xFF0C;Channel&#x662F;&#x4E0E;IO&#x8BBE;&#x5907;&#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x6D41;&#x3002;</li>
<li>&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4ECE;Channel&#x8BFB;&#x5230;Buffer&#x4E2D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4ECE;Buffer &#x5199;&#x5230;Channel&#x4E2D;&#x3002;</li>
<li><p>Selector&#x662F;Channel&#x7684;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x5668;&#x3002;</p>
<h3 id="buffer&#xFF08;&#x7F13;&#x51B2;&#x533A;"><a name="buffer&#xFF08;&#x7F13;&#x51B2;&#x533A;" class="plugin-anchor" href="#buffer&#xFF08;&#x7F13;&#x51B2;&#x533A;"><i class="fa fa-link" aria-hidden="true"></i></a>Buffer&#xFF08;&#x7F13;&#x51B2;&#x533A;)</h3>
</li>
<li></li>
</ul>
<ul>
<li>clear &#x662F;&#x5C06;position&#x7F6E;&#x4E3A;0&#xFF0C;limit&#x7F6E;&#x4E3A;capacity&#xFF1B;</li>
<li>flip&#x662F;&#x5C06;limit&#x7F6E;&#x4E3A;position&#xFF0C;position&#x7F6E;&#x4E3A;0&#xFF1B;<h4 id="mappedbytebuffer&#xFF08;&#x5BF9;&#x5E94;os&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x6587;&#x4EF6;"><a name="mappedbytebuffer&#xFF08;&#x5BF9;&#x5E94;os&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x6587;&#x4EF6;" class="plugin-anchor" href="#mappedbytebuffer&#xFF08;&#x5BF9;&#x5E94;os&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>MappedByteBuffer&#xFF08;&#x5BF9;&#x5E94;OS&#x4E2D;&#x7684;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x6587;&#x4EF6;)</h4>
</li>
<li>ByteBuffer&#x6709;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;:&#x76F4;&#x63A5;/&#x95F4;&#x63A5;&#x3002;&#x95F4;&#x63A5;&#x6A21;&#x5F0F;&#x5C31;&#x662F;HeapByteBuffer,&#x5373;&#x64CD;&#x4F5C;&#x5806;&#x5185;&#x5B58; (byte[])&#x3002;</li>
<li><p>&#x4F46;&#x662F;&#x5185;&#x5B58;&#x6BD5;&#x7ADF;&#x6709;&#x9650;,&#x5982;&#x679C;&#x6211;&#x8981;&#x53D1;&#x9001;&#x4E00;&#x4E2A;1G&#x7684;&#x6587;&#x4EF6;&#x600E;&#x4E48;&#x529E;?&#x4E0D;&#x53EF;&#x80FD;&#x771F;&#x7684;&#x53BB;&#x5206;&#x914D;1G&#x7684;&#x5185;&#x5B58;.&#x8FD9;&#x65F6;&#x5C31;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&quot;&#x76F4;&#x63A5;&quot;&#x6A21;&#x5F0F;,&#x5373; MappedByteBuffer&#x3002;</p>
</li>
<li><p>OS&#x4E2D;&#x5185;&#x5B58;&#x6620;&#x5C04;&#x6587;&#x4EF6;&#x662F;&#x5C06;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x6620;&#x5C04;&#x4E3A;&#x865A;&#x62DF;&#x5185;&#x5B58;&#xFF08;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#xFF0C;&#x53EA;&#x662F;&#x4F5C;&#x4E3A;&#x865A;&#x5B58;)&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x6765;&#x8BFB;&#x5199;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x8BFB;&#x5199;&#x5185;&#x5B58;&#x3002;</p>
</li>
<li>Java&#x4E2D;&#x662F;&#x4F7F;&#x7528;MappedByteBuffer&#x6765;&#x5C06;&#x6587;&#x4EF6;&#x6620;&#x5C04;&#x4E3A;&#x5185;&#x5B58;&#x7684;&#x3002;&#x901A;&#x5E38;&#x53EF;&#x4EE5;&#x6620;&#x5C04;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x5206;&#x6BB5;&#x8FDB;&#x884C;&#x6620;&#x5C04;&#xFF0C;&#x53EA;&#x8981;&#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7684;&#x90A3;&#x4E2A;&#x90E8;&#x5206;&#x5C31;&#x53EF;&#x4EE5;&#x3002;</li>
<li>&#x4F18;&#x70B9;&#xFF1A;&#x51CF;&#x5C11;&#x4E00;&#x6B21;&#x6570;&#x636E;&#x62F7;&#x8D1D;</li>
<li>&#x4E4B;&#x524D;&#x662F;  &#x8FDB;&#x7A0B;&#x7A7A;&#x95F4;&lt;-&gt;&#x5185;&#x6838;&#x7684;IO&#x7F13;&#x51B2;&#x533A;&lt;-&gt;&#x6587;&#x4EF6;</li>
<li><p>&#x73B0;&#x5728;&#x662F;  &#x8FDB;&#x7A0B;&#x7A7A;&#x95F4;&lt;-&gt;&#x6587;&#x4EF6;</p>
</li>
<li><p>MappedByteBuffer&#x53EF;&#x4EE5;&#x4F7F;&#x7528;FileChannel.map&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x3002;</p>
</li>
<li><p>&#x5B83;&#x6709;&#x66F4;&#x591A;&#x7684;&#x4F18;&#x70B9;&#xFF1A;</p>
</li>
<li>a. &#x8BFB;&#x53D6;&#x5FEB;</li>
<li>b. &#x5199;&#x5165;&#x5FEB;</li>
<li>c. &#x968F;&#x673A;&#x8BFB;&#x5199;</li>
</ul>
<ul>
<li>MappedByteBuffer&#x4F7F;&#x7528;&#x865A;&#x62DF;&#x5185;&#x5B58;&#xFF0C;&#x56E0;&#x6B64;&#x5206;&#x914D;(map)&#x7684;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x4E0D;&#x53D7;JVM&#x7684;-Xmx&#x53C2;&#x6570;&#x9650;&#x5236;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x662F;&#x6709;&#x5927;&#x5C0F;&#x9650;&#x5236;&#x7684;&#x3002;</li>
<li>&#x90A3;&#x4E48;&#x53EF;&#x7528;&#x5806;&#x5916;&#x5185;&#x5B58;&#x5230;&#x5E95;&#x662F;&#x591A;&#x5C11;&#xFF1F;&#xFF0C;&#x5373;&#x9ED8;&#x8BA4;&#x5806;&#x5916;&#x5185;&#x5B58;&#x6709;&#x591A;&#x5927;&#xFF1A;</li>
<li>&#x2460; &#x5982;&#x679C;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x901A;&#x8FC7;-XX:MaxDirectMemorySize&#x6765;&#x6307;&#x5B9A;&#x6700;&#x5927;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x3002;&#x5219;</li>
<li>&#x2461; &#x5982;&#x679C;&#x6211;&#x4EEC;&#x6CA1;&#x901A;&#x8FC7;-Dsun.nio.MaxDirectMemorySize&#x6307;&#x5B9A;&#x4E86;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x4E14;&#x5B83;&#x4E0D;&#x7B49;&#x4E8E;-1&#x3002;&#x5219;</li>
<li>&#x2462; &#x90A3;&#x4E48;&#x6700;&#x5927;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x503C;&#x6765;&#x81EA;&#x4E8E;directMemory = Runtime.getRuntime().maxMemory()&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;native&#x65B9;&#x6CD5;&#x3002;</li>
<li><p>&#x5728;&#x6211;&#x4EEC;&#x4F7F;&#x7528;CMS GC&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;&#x5176;&#x5B9E;&#x662F;&#x65B0;&#x751F;&#x4EE3;&#x7684;&#x6700;&#x5927;&#x503C;-&#x4E00;&#x4E2A;survivor&#x7684;&#x5927;&#x5C0F;+&#x8001;&#x751F;&#x4EE3;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x7684;-Xmx&#x7684;&#x503C;&#x91CC;&#x9664;&#x53BB;&#x4E00;&#x4E2A;survivor&#x7684;&#x5927;&#x5C0F;&#x5C31;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x5927;&#x5C0F;&#x4E86;&#x3002;</p>
</li>
<li><p>&#x5982;&#x679C;&#x5F53;&#x6587;&#x4EF6;&#x8FC7;&#x5927;&#xFF0C;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;position&#x53C2;&#x6570;&#x91CD;&#x65B0;map&#x6587;&#x4EF6;&#x540E;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
</li>
<li>MappedByteBuffer&#x5728;&#x5904;&#x7406;&#x5927;&#x6587;&#x4EF6;&#x65F6;&#x7684;&#x786E;&#x6027;&#x80FD;&#x5F88;&#x9AD8;&#xFF0C;&#x4F46;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x5185;&#x5B58;&#x5360;&#x7528;&#x3001;&#x6587;&#x4EF6;&#x5173;&#x95ED;&#x4E0D;&#x786E;&#x5B9A;&#xFF0C;&#x88AB;&#x5176;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x53EA;&#x6709;&#x5728;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x624D;&#x4F1A;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;&#x3002;</li>
<li></li>
</ul>
<h4 id="directbytebuffer&#xFF08;&#x5806;&#x5916;&#x5185;&#x5B58;"><a name="directbytebuffer&#xFF08;&#x5806;&#x5916;&#x5185;&#x5B58;" class="plugin-anchor" href="#directbytebuffer&#xFF08;&#x5806;&#x5916;&#x5185;&#x5B58;"><i class="fa fa-link" aria-hidden="true"></i></a>DirectByteBuffer&#xFF08;&#x5806;&#x5916;&#x5185;&#x5B58;)</h4>
<ul>
<li>DirectByteBuffer&#x7EE7;&#x627F;&#x81EA;MappedByteBuffer&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#xFF0C;&#x4E0D;&#x53D7;JVM&#x5806;&#x5927;&#x5C0F;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x53EA;&#x662F;&#x524D;&#x8005;&#x4EC5;&#x4EC5;&#x662F;&#x5206;&#x914D;&#x5185;&#x5B58;&#xFF0C;&#x540E;&#x8005;&#x662F;&#x5C06;&#x6587;&#x4EF6;&#x6620;&#x5C04;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#x3002;</li>
<li><p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;ByteBuf.allocateDirect&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x3002;</p>
</li>
<li><p>&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x7279;&#x70B9;&#xFF08;&#x5927;&#x5BF9;&#x8C61;&#xFF1B;&#x52A0;&#x5FEB;&#x5185;&#x5B58;&#x62F7;&#x8D1D;&#xFF1B;&#x51CF;&#x8F7B;GC&#x538B;&#x529B;)
&#xF06C;- &#x5BF9;&#x4E8E;&#x5927;&#x5185;&#x5B58;&#x6709;&#x826F;&#x597D;&#x7684;&#x4F38;&#x7F29;&#x6027;&#xFF08;&#x652F;&#x6301;&#x5206;&#x914D;&#x5927;&#x5757;&#x5185;&#x5B58;)
&#xF06C;- &#x5BF9;&#x5783;&#x573E;&#x56DE;&#x6536;&#x505C;&#x987F;&#x7684;&#x6539;&#x5584;&#x53EF;&#x4EE5;&#x660E;&#x663E;&#x611F;&#x89C9;&#x5230;&#xFF08;&#x5806;&#x5916;&#x5185;&#x5B58;&#xFF0C;&#x51CF;&#x5C11;GC&#x5BF9;&#x5806;&#x5185;&#x5B58;&#x56DE;&#x6536;&#x7684;&#x538B;&#x529B;)
&#xF06C;- &#x5728;&#x8FDB;&#x7A0B;&#x95F4;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#xFF0C;&#x51CF;&#x5C11;&#x865A;&#x62DF;&#x673A;&#x95F4;&#x7684;&#x590D;&#x5236;&#xFF0C;&#x52A0;&#x5FEB;&#x590D;&#x5236;&#x901F;&#x5EA6;&#xFF08;&#x51CF;&#x5C11;&#x5806;&#x5185;&#x5185;&#x5B58;&#x62F7;&#x8D1D;&#x5230;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x8FC7;&#x7A0B;)
&#xF06C;- &#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; &#x6C60;+&#x5806;&#x5916;&#x5185;&#x5B58; &#x7684;&#x7EC4;&#x5408;&#x65B9;&#x5F0F;&#xFF0C;&#x6765;&#x5BF9;&#x751F;&#x547D;&#x5468;&#x671F;&#x8F83;&#x77ED;&#xFF0C;&#x4F46;&#x6D89;&#x53CA;&#x5230;I/O&#x64CD;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x518D;&#x4F7F;&#x7528;&#x3002;( Netty&#x4E2D;&#x5C31;&#x4F7F;&#x7528;&#x4E86;&#x8BE5;&#x65B9;&#x5F0F; )</p>
</li>
<li><p>&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;</p>
<ul>
<li>1)&#x5806;&#x5916;&#x5185;&#x5B58;&#x56DE;&#x6536;&#x95EE;&#x9898;&#xFF08;&#x4E0D;&#x624B;&#x5DE5;&#x56DE;&#x6536;&#x4F1A;&#x5BFC;&#x81F4;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#xFF0C;&#x624B;&#x5DE5;&#x56DE;&#x6536;&#x5C31;&#x5931;&#x53BB;&#x4E86;Java&#x7684;&#x4F18;&#x52BF;)&#xFF1B;</li>
<li>2) &#x6570;&#x636E;&#x7ED3;&#x6784;&#x53D8;&#x5F97;&#x6709;&#x4E9B;&#x522B;&#x626D;&#x3002;&#x8981;&#x4E48;&#x5C31;&#x662F;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4EE5;&#x4FBF;&#x4E8E;&#x76F4;&#x63A5;&#x6620;&#x5C04;&#x5230;&#x5806;&#x5916;&#x5185;&#x5B58;&#xFF0C;&#x8981;&#x4E48;&#x5C31;&#x4F7F;&#x7528;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5E76;&#x5E8F;&#x5217;&#x5316;&#x53CA;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#x3002;&#x5F88;&#x660E;&#x663E;&#x4F7F;&#x7528;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x8BDD;&#x4F1A;&#x6BD4;&#x8F83;&#x5934;&#x75BC;&#x4E14;&#x5B58;&#x5728;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x3002;&#x4F7F;&#x7528;&#x5E8F;&#x5217;&#x5316;&#x6BD4;&#x4F7F;&#x7528;&#x5806;&#x5BF9;&#x8C61;&#x7684;&#x6027;&#x80FD;&#x8FD8;&#x5DEE;&#x3002;</li>
</ul>
</li>
</ul>
<ul>
<li><h4 id="&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x91CA;&#x653E;"><a name="&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x91CA;&#x653E;" class="plugin-anchor" href="#&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x91CA;&#x653E;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x91CA;&#x653E;</h4>
</li>
<li><p>java.nio.DirectByteBuffer&#x5BF9;&#x8C61;&#x5728;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x5148;&#x901A;&#x8FC7;Unsafe&#x63A5;&#x53E3;&#x76F4;&#x63A5;&#x901A;&#x8FC7;os::malloc&#x6765;&#x5206;&#x914D;&#x5185;&#x5B58;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5185;&#x5B58;&#x7684;&#x8D77;&#x59CB;&#x5730;&#x5740;&#x548C;&#x5927;&#x5C0F;&#x5B58;&#x5230;java.nio.DirectByteBuffer&#x5BF9;&#x8C61;&#x91CC;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;&#x8FD9;&#x4E9B;&#x5185;&#x5B58;&#x3002;&#x8FD9;&#x4E9B;&#x5185;&#x5B58;&#x53EA;&#x6709;&#x5728;DirectByteBuffer&#x56DE;&#x6536;&#x6389;&#x4E4B;&#x540E;&#x624D;&#x6709;&#x673A;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x79FB;&#x5230;&#x4E86;old&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x76F4;&#x6CA1;&#x6709;&#x89E6;&#x53D1;CMS GC&#x6216;&#x8005;Full GC&#xFF0C;&#x90A3;&#x4E48;&#x60B2;&#x5267;&#x5C06;&#x4F1A;&#x53D1;&#x751F;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x7684;&#x7269;&#x7406;&#x5185;&#x5B58;&#x88AB;&#x4ED6;&#x4EEC;&#x8017;&#x5C3D;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x60B2;&#x5267;&#x7684;&#x53D1;&#x751F;&#xFF0C;&#x901A;&#x8FC7;-XX:MaxDirectMemorySize&#x6765;&#x6307;&#x5B9A;&#x6700;&#x5927;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;&#x8FBE;&#x5230;&#x4E86;&#x9608;&#x503C;&#x7684;&#x65F6;&#x5019;&#x5C06;&#x8C03;&#x7528;System.gc&#x6765;&#x505A;&#x4E00;&#x6B21;full gc&#xFF0C;&#x4EE5;&#x6B64;&#x6765;&#x56DE;&#x6536;&#x6389;&#x6CA1;&#x6709;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x3002;</p>
</li>
<li><p>GC&#x65B9;&#x5F0F;&#xFF1A;</p>
</li>
<li><p>&#x5B58;&#x5728;&#x4E8E;&#x5806;&#x5185;&#x7684;DirectByteBuffer&#x5BF9;&#x8C61;&#x5F88;&#x5C0F;&#xFF0C;&#x53EA;&#x5B58;&#x7740;&#x57FA;&#x5730;&#x5740;&#x548C;&#x5927;&#x5C0F;&#x7B49;&#x51E0;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x548C;&#x4E00;&#x4E2A;Cleaner&#xFF0C;&#x4F46;&#x5B83;&#x4EE3;&#x8868;&#x7740;&#x540E;&#x9762;&#x6240;&#x5206;&#x914D;&#x7684;&#x4E00;&#x5927;&#x6BB5;&#x5185;&#x5B58;&#xFF0C;&#x662F;&#x6240;&#x8C13;&#x7684;&#x51B0;&#x5C71;&#x5BF9;&#x8C61;&#x3002;&#x901A;&#x8FC7;&#x524D;&#x9762;&#x8BF4;&#x7684;Cleaner&#xFF0C;&#x5806;&#x5185;&#x7684;DirectByteBuffer&#x5BF9;&#x8C61;&#x88AB;GC&#x65F6;&#xFF0C;&#x5B83;&#x80CC;&#x540E;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x4E5F;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#x3002;</p>
</li>
<li><p>&#x5F53;&#x65B0;&#x751F;&#x4EE3;&#x6EE1;&#x4E86;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x751F;minor gc&#xFF1B;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x5BF9;&#x8C61;&#x8FD8;&#x6CA1;&#x5931;&#x6548;&#xFF0C;&#x5C31;&#x4E0D;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF1B;&#x6491;&#x8FC7;&#x51E0;&#x6B21;minorgc&#x540E;&#xFF0C;&#x5BF9;&#x8C61;&#x88AB;&#x8FC1;&#x79FB;&#x5230;&#x8001;&#x751F;&#x4EE3;&#xFF1B;&#x5F53;&#x8001;&#x751F;&#x4EE3;&#x4E5F;&#x6EE1;&#x4E86;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x751F;full gc&#x3002;</p>
</li>
<li><p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x79CD;&#x5C34;&#x5C2C;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x56E0;&#x4E3A;DirectByteBuffer&#x672C;&#x8EAB;&#x7684;&#x4E2A;&#x5934;&#x5F88;&#x5C0F;&#xFF0C;&#x53EA;&#x8981;&#x71AC;&#x8FC7;&#x4E86;minor gc&#xFF0C;&#x5373;&#x4F7F;&#x5DF2;&#x7ECF;&#x5931;&#x6548;&#x4E86;&#x4E5F;&#x80FD;&#x5728;&#x8001;&#x751F;&#x4EE3;&#x91CC;&#x8212;&#x670D;&#x7684;&#x5446;&#x7740;&#xFF0C;&#x4E0D;&#x5BB9;&#x6613;&#x628A;&#x8001;&#x751F;&#x4EE3;&#x6491;&#x7206;&#x89E6;&#x53D1;full gc&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x522B;&#x7684;&#x5927;&#x5757;&#x5934;&#x8FDB;&#x5165;&#x8001;&#x751F;&#x4EE3;&#x89E6;&#x53D1;full gc&#xFF0C;&#x5C31;&#x4E00;&#x76F4;&#x5728;&#x90A3;&#x8017;&#x7740;&#xFF0C;&#x5360;&#x7740;&#x4E00;&#x5927;&#x7247;&#x5806;&#x5916;&#x5185;&#x5B58;&#x4E0D;&#x91CA;&#x653E;&#x3002;</p>
</li>
<li><p>&#x8FD9;&#x65F6;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x9760;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;&#x7533;&#x8BF7;&#x989D;&#x5EA6;&#x8D85;&#x9650;&#x65F6;&#x89E6;&#x53D1;&#x7684;System.gc()&#x6765;&#x6551;&#x573A;&#x4E86;&#x3002;&#x4F46;&#x8FD9;&#x9053;&#x6700;&#x540E;&#x7684;&#x4FDD;&#x9669;&#x5176;&#x5B9E;&#x4E5F;&#x4E0D;&#x5F88;&#x597D;&#xFF0C;&#x9996;&#x5148;&#x5B83;&#x4F1A;&#x4E2D;&#x65AD;&#x6574;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x5B83;&#x8BA9;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7761;&#x4E86;&#x6574;&#x6574;&#x4E00;&#x767E;&#x6BEB;&#x79D2;&#xFF0C;&#x800C;&#x4E14;&#x5982;&#x679C;gc&#x6CA1;&#x5728;&#x4E00;&#x767E;&#x6BEB;&#x79D2;&#x5185;&#x5B8C;&#x6210;&#xFF0C;&#x5B83;&#x4ECD;&#x7136;&#x4F1A;&#x65E0;&#x60C5;&#x7684;&#x629B;&#x51FA;OOM&#x5F02;&#x5E38;&#x3002;</p>
</li>
<li><p>&#x90A3;&#x4E3A;&#x4EC0;&#x4E48;System.gc()&#x4F1A;&#x91CA;&#x653E;DirectByteBuffer&#x5462;?</p>
</li>
<li><p>&#x6BCF;&#x4E2A;DirectByteBuffer&#x5173;&#x8054;&#x7740;&#x5176;&#x5BF9;&#x5E94;&#x7684;Cleaner&#xFF0C;Cleaner&#x662F;PhantomReference&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x865A;&#x5F15;&#x7528;&#x4E3B;&#x8981;&#x88AB;&#x7528;&#x6765;&#x8DDF;&#x8E2A;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x901A;&#x8FC7;&#x67E5;&#x770B;ReferenceQueue&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;&#x5BF9;&#x8C61;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x865A;&#x5F15;&#x7528;&#x6765;&#x5224;&#x65AD;&#x5B83;&#x662F;&#x5426;&#x5373;&#x5C06;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002;</p>
</li>
<li><p>&#x5F53;GC&#x65F6;&#x53D1;&#x73B0;DirectByteBuffer&#x9664;&#x4E86;PhantomReference&#x5916;&#x5DF2;&#x4E0D;&#x53EF;&#x8FBE;&#xFF0C;&#x5C31;&#x4F1A;&#x628A;&#x5B83;&#x653E;&#x8FDB; Reference&#x7C7B;pending list&#x9759;&#x6001;&#x53D8;&#x91CF;&#x91CC;&#x3002;&#x7136;&#x540E;&#x53E6;&#x6709;&#x4E00;&#x6761;ReferenceHandler&#x7EBF;&#x7A0B;&#xFF0C;&#x540D;&#x5B57;&#x53EB; &quot;Reference Handler&quot;&#x7684;&#xFF0C;&#x5173;&#x6CE8;&#x7740;&#x8FD9;&#x4E2A;pending list&#xFF0C;&#x5982;&#x679C;&#x770B;&#x5230;&#x6709;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x662F;Cleaner&#xFF0C;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x5B83;&#x7684;clean()&#xFF0C;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x5C31;&#x653E;&#x5165;&#x5E94;&#x7528;&#x6784;&#x9020;Reference&#x65F6;&#x4F20;&#x5165;&#x7684;ReferenceQueue&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x5E94;&#x7528;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x4ECE;Queue&#x91CC;&#x62D6;&#x51FA;&#x8FD9;&#x4E9B;&#x7406;&#x8BBA;&#x4E0A;&#x5DF2;&#x6B7B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x505A;&#x7231;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x2014;&#x2014;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x6BD4;finalizer&#x66F4;&#x8F7B;&#x91CF;&#x66F4;&#x597D;&#x7684;&#x673A;&#x5236;&#x3002;</p>
</li>
</ul>
<ul>
<li>&#x624B;&#x5DE5;&#x65B9;&#x5F0F;&#xFF1A;</li>
<li>&#x5982;&#x679C;&#x60F3;&#x7ACB;&#x5373;&#x91CA;&#x653E;&#x6389;&#x4E00;&#x4E2A;MappedByteBuffer/DirectByteBuffer&#xFF0C;&#x56E0;&#x4E3A;JDK&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x516C;&#x5F00;API&#xFF0C;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x7684;&#x65B9;&#x6CD5;&#x53BB;unmap&#xFF1B;</li>
<li>&#x6216;&#x8005;&#x4F7F;&#x7528;Cleaner&#x7684;clean&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<pre><code>public static void main(String[] args) {
    try {
        File f = File.createTempFile(&quot;Test&quot;, null);
        f.deleteOnExit();
        RandomAccessFile file = new RandomAccessFile(f, &quot;rw&quot;);
        file.setLength(1024);
        FileChannel channel = file.getChannel();
        MappedByteBuffer buffer = channel.map(
                FileChannel.MapMode.READ_WRITE, 0, 1024);
        channel.close();
        file.close();
        // &#x624B;&#x52A8;unmap  
        Method m = FileChannelImpl.class.getDeclaredMethod(&quot;unmap&quot;,
                MappedByteBuffer.class);
        m.setAccessible(true);
        m.invoke(FileChannelImpl.class, buffer);
        if (f.delete())
            System.out.println(&quot;Temporary file deleted: &quot; + f);
        else
            System.err.println(&quot;Not yet deleted: &quot; + f);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}
</code></pre><ul>
<li><h3 id="channel&#xFF08;&#x901A;&#x9053;"><a name="channel&#xFF08;&#x901A;&#x9053;" class="plugin-anchor" href="#channel&#xFF08;&#x901A;&#x9053;"><i class="fa fa-link" aria-hidden="true"></i></a>Channel&#xFF08;&#x901A;&#x9053;)</h3>
</li>
<li>Channel&#x4E0E;IO&#x8BBE;&#x5907;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x4E0E;Stream&#x662F;&#x5E73;&#x7EA7;&#x7684;&#x6982;&#x5FF5;&#x3002;<h4 id="&#x6D41;&#x4E0E;&#x901A;&#x9053;&#x7684;&#x533A;&#x522B;"><a name="&#x6D41;&#x4E0E;&#x901A;&#x9053;&#x7684;&#x533A;&#x522B;" class="plugin-anchor" href="#&#x6D41;&#x4E0E;&#x901A;&#x9053;&#x7684;&#x533A;&#x522B;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6D41;&#x4E0E;&#x901A;&#x9053;&#x7684;&#x533A;&#x522B;</h4>
</li>
<li>1&#x3001;&#x6D41;&#x662F;&#x5355;&#x5411;&#x7684;&#xFF0C;&#x901A;&#x9053;&#x662F;&#x53CC;&#x5411;&#x7684;&#xFF0C;&#x53EF;&#x8BFB;&#x53EF;&#x5199;&#x3002;</li>
<li>2&#x3001;&#x6D41;&#x8BFB;&#x5199;&#x662F;&#x963B;&#x585E;&#x7684;&#xFF0C;&#x901A;&#x9053;&#x53EF;&#x4EE5;&#x5F02;&#x6B65;&#x8BFB;&#x5199;&#x3002;</li>
<li>3&#x3001;&#x6D41;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6027;&#x7684;&#x5148;&#x8BFB;&#x5230;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x901A;&#x9053;&#x7684;&#x6570;&#x636E;&#x603B;&#x662F;&#x8981;&#x5148;&#x8BFB;&#x5230;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x6216;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x5199;&#x5165;</li>
</ul>
<ul>
<li>&#x6CE8;&#x610F;&#xFF0C;FileChannel &#x4E0D;&#x80FD;&#x8BBE;&#x7F6E;&#x4E3A;&#x975E;&#x963B;&#x585E;&#x6A21;&#x5F0F;&#x3002;</li>
</ul>
<h4 id="&#x5206;&#x6563;&#x4E0E;&#x805A;&#x96C6;"><a name="&#x5206;&#x6563;&#x4E0E;&#x805A;&#x96C6;" class="plugin-anchor" href="#&#x5206;&#x6563;&#x4E0E;&#x805A;&#x96C6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5206;&#x6563;&#x4E0E;&#x805A;&#x96C6;</h4>
<ul>
<li><p>&#x5206;&#x6563;&#xFF08;scatter)&#x4ECE;Channel&#x4E2D;&#x8BFB;&#x53D6;&#x662F;&#x6307;&#x5728;&#x8BFB;&#x64CD;&#x4F5C;&#x65F6;&#x5C06;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x591A;&#x4E2A;buffer&#x4E2D;&#x3002;&#x56E0;&#x6B64;&#xFF0C;Channel&#x5C06;&#x4ECE;Channel&#x4E2D;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x201C;&#x5206;&#x6563;&#xFF08;scatter)&#x201D;&#x5230;&#x591A;&#x4E2A;Buffer&#x4E2D;&#x3002;</p>
</li>
<li><p>&#x805A;&#x96C6;&#xFF08;gather)&#x5199;&#x5165;Channel&#x662F;&#x6307;&#x5728;&#x5199;&#x64CD;&#x4F5C;&#x65F6;&#x5C06;&#x591A;&#x4E2A;buffer&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x540C;&#x4E00;&#x4E2A;Channel&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;Channel &#x5C06;&#x591A;&#x4E2A;Buffer&#x4E2D;&#x7684;&#x6570;&#x636E;&#x201C;&#x805A;&#x96C6;&#xFF08;gather)&#x201D;&#x540E;&#x53D1;&#x9001;&#x5230;Channel&#x3002;</p>
<h4 id="pipe"><a name="pipe" class="plugin-anchor" href="#pipe"><i class="fa fa-link" aria-hidden="true"></i></a>Pipe</h4>
</li>
</ul>
<pre><code>public class PipeTest {
    public static void main(String[] args) {
        Pipe pipe = null;
        ExecutorService exec = Executors.newFixedThreadPool(2);
        try {
            pipe = Pipe.open();
            final Pipe pipeTemp = pipe;

            exec.submit(new Callable&lt;Object&gt;() {
                @Override
                public Object call() throws Exception {
                    Pipe.SinkChannel sinkChannel = pipeTemp.sink();//&#x5411;&#x901A;&#x9053;&#x4E2D;&#x5199;&#x6570;&#x636E;
                    while (true) {
                        TimeUnit.SECONDS.sleep(1);
                        String newData = &quot;Pipe Test At Time &quot; + System.currentTimeMillis();
                        ByteBuffer buf = ByteBuffer.allocate(1024);
                        buf.clear();
                        buf.put(newData.getBytes());
                        buf.flip();

                        while (buf.hasRemaining()) {
                            System.out.println(buf);
                            sinkChannel.write(buf);
                        }
                    }
                }
            });

            exec.submit(new Callable&lt;Object&gt;() {
                @Override
                public Object call() throws Exception {
                    Pipe.SourceChannel sourceChannel = pipeTemp.source();//&#x5411;&#x901A;&#x9053;&#x4E2D;&#x8BFB;&#x6570;&#x636E;
                    while (true) {
                        TimeUnit.SECONDS.sleep(1);
                        ByteBuffer buf = ByteBuffer.allocate(1024);
                        buf.clear();
                        int bytesRead = sourceChannel.read(buf);
                        System.out.println(&quot;bytesRead=&quot; + bytesRead);
                        while (bytesRead &gt; 0) {
                            buf.flip();
                            byte b[] = new byte[bytesRead];
                            int i = 0;
                            while (buf.hasRemaining()) {
                                b[i] = buf.get();
                                System.out.printf(&quot;%X&quot;, b[i]);
                                i++;
                            }
                            String s = new String(b);
                            System.out.println(&quot;=================||&quot; + s);
                            bytesRead = sourceChannel.read(buf);
                        }
                    }
                }
            });
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            exec.shutdown();
        }
    }
}
</code></pre><ul>
<li><h4 id="filechannel&#x4E0E;&#x6587;&#x4EF6;&#x9501;"><a name="filechannel&#x4E0E;&#x6587;&#x4EF6;&#x9501;" class="plugin-anchor" href="#filechannel&#x4E0E;&#x6587;&#x4EF6;&#x9501;"><i class="fa fa-link" aria-hidden="true"></i></a>FileChannel&#x4E0E;&#x6587;&#x4EF6;&#x9501;</h4>
</li>
<li>&#x5728;&#x901A;&#x9053;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5BF9;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x90E8;&#x5206;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4E0A;&#x9501;&#x3002;&#x4E0A;&#x9501;&#x548C;&#x6211;&#x4EEC;&#x4E86;&#x89E3;&#x7684;&#x7EBF;&#x7A0B;&#x9501;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x5728;&#x6587;&#x4EF6;&#x901A;&#x9053;FileChannel&#x4E2D;&#x53EF;&#x4EE5;&#x5BF9;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4E0A;&#x9501;&#xFF0C;&#x901A;&#x8FC7;FileLock&#x53EF;&#x4EE5;&#x5BF9;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x9501;&#x7684;&#x91CA;&#x653E;&#x3002;</li>
<li>&#x6587;&#x4EF6;&#x52A0;&#x9501;&#x662F;&#x5EFA;&#x7ACB;&#x5728;&#x6587;&#x4EF6;&#x901A;&#x9053;&#xFF08;FileChannel)&#x4E4B;&#x4E0A;&#x7684;&#xFF0C;&#x5957;&#x63A5;&#x5B57;&#x901A;&#x9053;&#xFF08;SockeChannel)&#x4E0D;&#x8003;&#x8651;&#x6587;&#x4EF6;&#x52A0;&#x9501;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x4E0D;&#x5171;&#x4EAB;&#x7684;&#x3002;&#x5B83;&#x5BF9;&#x6587;&#x4EF6;&#x52A0;&#x9501;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</li>
<li>&#x2460;lock</li>
<li>&#x2461;tryLock</li>
<li>&#x4E24;&#x79CD;&#x52A0;&#x9501;&#x65B9;&#x5F0F;&#x9ED8;&#x8BA4;&#x90FD;&#x662F;&#x5BF9;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x52A0;&#x9501;&#xFF0C;&#x5982;&#x679C;&#x81EA;&#x5DF1;&#x914D;&#x7F6E;&#x7684;&#x8BDD;&#x5C31;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x52A0;&#x9501;&#x7684;&#x6587;&#x4EF6;&#x8303;&#x56F4;&#xFF1A;position&#x662F;&#x52A0;&#x9501;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;size&#x662F;&#x52A0;&#x9501;&#x957F;&#x5EA6;&#xFF0C;shared&#x662F;&#x7528;&#x4E8E;&#x63A7;&#x5236;&#x8BE5;&#x9501;&#x662F;&#x5171;&#x4EAB;&#x7684;&#x8FD8;&#x662F;&#x72EC;&#x5360;&#x7684;&#x3002; </li>
<li>lock&#x662F;&#x963B;&#x585E;&#x5F0F;&#x7684;&#xFF0C;&#x5F53;&#x6709;&#x8FDB;&#x7A0B;&#x5BF9;&#x9501;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x65F6;&#x4F1A;&#x7B49;&#x5F85;&#x9501;&#x7684;&#x91CA;&#x653E;&#xFF0C;&#x5728;&#x6B64;&#x671F;&#x95F4;&#x5B83;&#x4F1A;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#xFF1B;tryLock&#x662F;&#x975E;&#x963B;&#x585E;&#x5F0F;&#x7684;&#xFF0C;&#x5B83;&#x5C1D;&#x8BD5;&#x83B7;&#x5F97;&#x9501;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x9501;&#x4E0D;&#x80FD;&#x83B7;&#x5F97;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x4F1A;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x3002; </li>
<li>release&#x53EF;&#x4EE5;&#x91CA;&#x653E;&#x9501;&#x3002;</li>
<li><p>&#x5728;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E2D;&#x5728;&#x9501;&#x6CA1;&#x6709;&#x91CA;&#x653E;&#x4E4B;&#x524D;&#x662F;&#x65E0;&#x6CD5;&#x518D;&#x6B21;&#x83B7;&#x5F97;&#x9501;&#x7684;</p>
</li>
<li><p>&#x5728;java&#x7684;NIO&#x4E2D;&#xFF0C;&#x901A;&#x9053;&#x5305;&#x4E0B;&#x9762;&#x6709;&#x4E00;&#x4E2A;FileLock&#x7C7B;&#xFF0C;&#x5B83;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x6587;&#x4EF6;&#x9501;&#x5DE5;&#x5177;&#x7684;&#x4E00;&#x4E2A;&#x63CF;&#x8FF0;&#x3002;&#x5728;&#x4E0A;&#x4E00;&#x5C0F;&#x8282;&#x4E2D;&#x5BF9;&#x6587;&#x4EF6;&#x7684;&#x9501;&#x83B7;&#x53D6;&#x5176;&#x5B9E;&#x662F;FileChannel&#x83B7;&#x53D6;&#x7684;&#xFF08;lock&#x4E0E;trylock&#x662F;FileChannel&#x7684;&#x65B9;&#x6CD5;)&#xFF0C;&#x5B83;&#x4EEC;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;FileLock&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#x6709;&#x5982;&#x4E0B;&#x8FD9;&#x4E9B;&#xFF1A; </p>
</li>
<li>boolean isShared() :&#x5224;&#x65AD;&#x9501;&#x662F;&#x5426;&#x4E3A;&#x5171;&#x4EAB;&#x7C7B;&#x578B; </li>
<li>abstract boolean isValid() &#xFF1A;&#x5224;&#x65AD;&#x9501;&#x662F;&#x5426;&#x6709;&#x6548; </li>
<li>boolean overlaps()&#xFF1A;&#x5224;&#x65AD;&#x6B64;&#x9501;&#x5B9A;&#x662F;&#x5426;&#x4E0E;&#x7ED9;&#x5B9A;&#x7684;&#x9501;&#x5B9A;&#x533A;&#x57DF;&#x91CD;&#x53E0; </li>
<li>long position()&#xFF1A;&#x8FD4;&#x56DE;&#x6587;&#x4EF6;&#x5185;&#x9501;&#x5B9A;&#x533A;&#x57DF;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x4F4D;&#x7F6E;&#x3002; </li>
<li>abstract void release() &#xFF1A;&#x91CA;&#x653E;&#x9501; </li>
<li><p>long size() &#xFF1A;&#x8FD4;&#x56DE;&#x9501;&#x5B9A;&#x533A;&#x57DF;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4EE5;&#x5B57;&#x8282;&#x4E3A;&#x5355;&#x4F4D;</p>
</li>
<li><p>&#x5728;&#x6587;&#x4EF6;&#x9501;&#x4E2D;&#x6709;3&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x91CA;&#x653E;&#x6587;&#x4EF6;&#x9501;&#xFF1A;&#x2460;&#x9501;&#x7C7B;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x8C03;&#x7528;FileLock&#x7684;release&#x65B9;&#x6CD5;&#xFF1B; &#x2461;&#x901A;&#x9053;&#x7C7B;&#x5173;&#x95ED;&#x901A;&#x9053;&#xFF0C;&#x8C03;&#x7528;FileChannel&#x7684;close&#x65B9;&#x6CD5;&#xFF1B;&#x2462;jvm&#x865A;&#x62DF;&#x673A;&#x4F1A;&#x5728;&#x7279;&#x5B9A;&#x60C5;&#x51B5;&#x91CA;&#x653E;&#x9501;&#x3002;</p>
</li>
</ul>
<ul>
<li>&#x9501;&#x7C7B;&#x578B;&#xFF08;&#x72EC;&#x5360;&#x5F0F;&#x548C;&#x5171;&#x4EAB;&#x5F0F;)</li>
<li><p>&#x6211;&#x4EEC;&#x5148;&#x533A;&#x5206;&#x4E00;&#x4E0B;&#x5728;&#x6587;&#x4EF6;&#x9501;&#x4E2D;&#x4E24;&#x79CD;&#x9501;&#x7684;&#x533A;&#x522B;&#xFF1A;&#x2460;&#x72EC;&#x5360;&#x5F0F;&#x7684;&#x9501;&#x5C31;&#x60F3;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x6D4B;&#x8BD5;&#x7684;&#x90A3;&#x6837;&#xFF0C;&#x53EA;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x83B7;&#x53D6;&#x4E86;&#x72EC;&#x5360;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x522B;&#x7684;&#x8FDB;&#x7A0B;&#x53EA;&#x80FD;&#x7B49;&#x5F85;&#x3002;&#x2461;&#x5171;&#x4EAB;&#x9501;&#x5728;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x83B7;&#x53D6;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x522B;&#x7684;&#x8FDB;&#x7A0B;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x8BFB;&#x53D6;&#x88AB;&#x9501;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;&#x522B;&#x7684;&#x8FDB;&#x7A0B;&#x4E0D;&#x80FD;&#x5199;&#x53EA;&#x80FD;&#x8BFB;&#x3002; </p>
</li>
<li></li>
</ul>
<h3 id="selector-&#xFF08;channel&#x7684;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x5668;"><a name="selector-&#xFF08;channel&#x7684;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x5668;" class="plugin-anchor" href="#selector-&#xFF08;channel&#x7684;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>Selector &#xFF08;Channel&#x7684;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x5668;)</h3>
<ul>
<li>Selector&#x53EF;&#x4EE5;&#x7528;&#x5355;&#x7EBF;&#x7A0B;&#x53BB;&#x7BA1;&#x7406;&#x591A;&#x4E2A;Channel&#xFF08;&#x591A;&#x4E2A;&#x8FDE;&#x63A5;)&#x3002;</li>
<li>&#x653E;&#x5728;&#x7F51;&#x7EDC;&#x7F16;&#x7A0B;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#xFF1A;Selector&#x4F7F;&#x7528;&#x5355;&#x7EBF;&#x7A0B;&#xFF0C;&#x8F6E;&#x8BE2;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x5E94;&#x7684;Channel&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4E2A;Channel&#x9700;&#x8981;&#x8FDB;&#x884C;IO&#xFF0C;&#x90A3;&#x4E48;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x53BB;&#x6267;&#x884C;IO&#x64CD;&#x4F5C;&#x3002;</li>
<li>Selector&#x53EF;&#x4EE5;&#x53BB;&#x76D1;&#x542C;&#x7684;&#x8BF7;&#x6C42;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x7C7B;&#xFF1A;<ul>
<li>1&#x3001;connect&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x670D;&#x52A1;&#x7AEF;&#x4E8B;&#x4EF6;&#xFF0C;&#x5BF9;&#x5E94;&#x503C;&#x4E3A;SelectionKey.OPCONNECT(8) </li>
<li>2&#x3001;accept&#xFF1A;&#x670D;&#x52A1;&#x7AEF;&#x63A5;&#x6536;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x4E8B;&#x4EF6;&#xFF0C;&#x5BF9;&#x5E94;&#x503C;&#x4E3A;SelectionKey.OPACCEPT(16) </li>
<li>3&#x3001;read&#xFF1A;&#x8BFB;&#x4E8B;&#x4EF6;&#xFF0C;&#x5BF9;&#x5E94;&#x503C;&#x4E3A;SelectionKey.OPREAD(1) </li>
<li>4&#x3001;write&#xFF1A;&#x5199;&#x4E8B;&#x4EF6;&#xFF0C;&#x5BF9;&#x5E94;&#x503C;&#x4E3A;SelectionKey.OPWRITE(4)</li>
</ul>
</li>
<li>&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x5230;&#x8FBE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x90FD;&#x662F;&#x4ECE;connect&#x5F00;&#x59CB;&#xFF0C;connect&#x6210;&#x529F;&#x540E;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x5F00;&#x59CB;&#x51C6;&#x5907;accept&#xFF0C;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x5F00;&#x59CB;&#x8BFB;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x5904;&#x7406;&#xFF0C;&#x6700;&#x540E;&#x5199;&#x56DE;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x3002;</li>
<li>SelectionKey&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x5408;&#x4E8B;&#x4EF6;&#xFF0C;&#x7ED1;&#x5B9A;&#x5230;&#x67D0;&#x4E2A;selector&#x5BF9;&#x5E94;&#x7684;&#x67D0;&#x4E2A;channel&#x4E0A;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x591A;&#x4E2A;&#x4E8B;&#x4EF6;&#x7684;&#x590D;&#x5408;&#x6216;&#x5355;&#x4E00;&#x4E8B;&#x4EF6;&#x3002;</li>
</ul>
<h2 id="java-nio-&#x5B9E;&#x4F8B;&#xFF08;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;"><a name="java-nio-&#x5B9E;&#x4F8B;&#xFF08;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;" class="plugin-anchor" href="#java-nio-&#x5B9E;&#x4F8B;&#xFF08;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;"><i class="fa fa-link" aria-hidden="true"></i></a>Java NIO &#x5B9E;&#x4F8B;&#xFF08;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;)</h2>
<ul>
<li>&#x670D;&#x52A1;&#x5668;&#x4E3B;&#x7EBF;&#x7A0B;&#x5148;&#x521B;&#x5EFA;Socket&#xFF0C;&#x5E76;&#x6CE8;&#x518C;&#x5230;selector&#xFF0C;&#x7136;&#x540E;&#x8F6E;&#x8BE2;selector&#x3002;<ul>
<li>1)&#x5982;&#x679C;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;selector&#x8FD4;&#x56DE;ACCEPT&#x4E8B;&#x4EF6;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#xFF08;accept)&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6CE8;&#x518C;&#x5230;selector&#xFF0C;&#x7ED3;&#x675F;&#xFF0C;&#x7EE7;&#x7EED;&#x8F6E;&#x8BE2;selector&#x7B49;&#x5F85;&#x4E0B;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x4E8B;&#x4EF6;&#xFF1B;</li>
<li>2)&#x5982;&#x679C;&#x6709;&#x5DF2;&#x8FDE;&#x63A5;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#xFF0C;&#x90A3;&#x4E48;selector&#x8FD4;&#x56DE;READ/WRITE&#x4E8B;&#x4EF6;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x5C06;&#x8BE5;&#x8BF7;&#x6C42;&#x4EA4;&#x7ED9;IO&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7ED3;&#x675F;&#xFF0C;&#x7EE7;&#x7EED;&#x8F6E;&#x8BE2;selector&#x7B49;&#x5F85;&#x4E0B;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x4E8B;&#x4EF6;&#x3002;<h3 id="&#x670D;&#x52A1;&#x5668;"><a name="&#x670D;&#x52A1;&#x5668;" class="plugin-anchor" href="#&#x670D;&#x52A1;&#x5668;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x670D;&#x52A1;&#x5668;</h3>
</li>
</ul>
</li>
</ul>
<pre><code>public class NIOTCPServer {
    private ServerSocketChannel serverSocketChannel;
    private final String FILE_PATH = &quot;E:/uploads/&quot;;
    private AtomicInteger i;
    private final String RESPONSE_MSG = &quot;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x6570;&#x636E;&#x6210;&#x529F;&quot;;
    private Selector selector;
    private ExecutorService acceptPool;
    private ExecutorService readPool;

    public NIOTCPServer() {
        try {
            serverSocketChannel = ServerSocketChannel.open();
            //&#x5207;&#x6362;&#x4E3A;&#x975E;&#x963B;&#x585E;&#x6A21;&#x5F0F;
            serverSocketChannel.configureBlocking(false);
            serverSocketChannel.bind(new InetSocketAddress(9000));
            //&#x83B7;&#x5F97;&#x9009;&#x62E9;&#x5668;
            selector = Selector.open();
            //&#x5C06;channel&#x6CE8;&#x518C;&#x5230;selector&#x4E0A;
            //&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x9009;&#x62E9;&#x952E;&#xFF0C;&#x7528;&#x4E8E;&#x8BF4;&#x660E;selector&#x76D1;&#x63A7;channel&#x7684;&#x72B6;&#x6001;
            //&#x53EF;&#x80FD;&#x7684;&#x53D6;&#x503C;&#xFF1A;SelectionKey.OP_READ OP_WRITE OP_CONNECT OP_ACCEPT

            //&#x76D1;&#x63A7;&#x7684;&#x662F;channel&#x7684;&#x63A5;&#x6536;&#x72B6;&#x6001;
            serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);
            acceptPool = new ThreadPoolExecutor(50, 100, 1000, TimeUnit.MILLISECONDS, new LinkedBlockingDeque&lt;&gt;());
            readPool = new ThreadPoolExecutor(50, 100, 1000, TimeUnit.MILLISECONDS, new LinkedBlockingDeque&lt;&gt;());
            i = new AtomicInteger(0);
            System.out.println(&quot;&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&quot;);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void receive() {
        try {
            //&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x53CA;&#x4EE5;&#x4E0A;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x51C6;&#x5907;&#x5C31;&#x7EEA;
            while (selector.select() &gt; 0) {
                //&#x83B7;&#x53D6;&#x5F53;&#x524D;&#x9009;&#x62E9;&#x5668;&#x4E2D;&#x6240;&#x6709;&#x6CE8;&#x518C;&#x7684;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;
                for (Iterator&lt;SelectionKey&gt; it = selector.selectedKeys().iterator(); it.hasNext(); ) {
                    SelectionKey key = it.next();
                    //&#x5982;&#x679C;&quot;&#x63A5;&#x6536;&quot;&#x4E8B;&#x4EF6;&#x5DF2;&#x5C31;&#x7EEA;
                    if (key.isAcceptable()) {
                        //&#x4EA4;&#x7531;&#x63A5;&#x6536;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x5668;&#x5904;&#x7406;
                        acceptPool.submit(new ReceiveEventHander());
                    } else if (key.isReadable()) {
                        //&#x5982;&#x679C;&quot;&#x8BFB;&#x53D6;&quot;&#x4E8B;&#x4EF6;&#x5DF2;&#x5C31;&#x7EEA;
                        //&#x4EA4;&#x7531;&#x8BFB;&#x53D6;&#x4E8B;&#x4EF6;&#x7684;&#x5904;&#x7406;&#x5668;&#x5904;&#x7406;
                        readPool.submit(new ReadEventHandler((SocketChannel) key.channel()));
                    }
                    //&#x5904;&#x7406;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x53D6;&#x6D88;&#x5F53;&#x524D;&#x7684;&#x9009;&#x62E9;&#x952E;
                    it.remove();
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }


    class ReceiveEventHander implements Runnable {

        public ReceiveEventHander() {
        }

        @Override
        public void run() {
            SocketChannel client = null;
            try {
                client = serverSocketChannel.accept();
                // &#x63A5;&#x6536;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4E5F;&#x8981;&#x5207;&#x6362;&#x4E3A;&#x975E;&#x963B;&#x585E;&#x6A21;&#x5F0F;
                client.configureBlocking(false);
                // &#x76D1;&#x63A7;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x5C31;&#x7EEA;
                client.register(selector, SelectionKey.OP_READ);
                System.out.println(&quot;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x5BA2;&#x6237;&#x7AEF;:&quot; + client.toString());
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    class ReadEventHandler implements Runnable {
        private ByteBuffer buf;
        private SocketChannel client;

        public ReadEventHandler(SocketChannel client) {
            this.client = client;
            buf = ByteBuffer.allocate(1024);
        }

        @Override
        public void run() {

            FileChannel fileChannel = null;
            try {
                int index = 0;
                synchronized (client) {
                    while (client.read(buf) != -1) {
                        if (fileChannel == null) {
                            index = i.getAndIncrement();
                            fileChannel = FileChannel.open(Paths.get(FILE_PATH, index + &quot;.jpeg&quot;), StandardOpenOption.WRITE, StandardOpenOption.CREATE);
                        }
                        buf.flip();
                        fileChannel.write(buf);
                        buf.clear();
                    }
                }
                if (fileChannel != null) {
                    fileChannel.close();
                    System.out.println(&quot;&#x670D;&#x52A1;&#x5668;&#x5199;&#x6765;&#x81EA;&#x5BA2;&#x6237;&#x7AEF;&quot; + client + &quot; &#x6587;&#x4EF6;&quot; + index + &quot; &#x5B8C;&#x6BD5;&quot;);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    }

    public static void main(String[] args) {
        NIOTCPServer server = new NIOTCPServer();
        server.receive();
    }
}
</code></pre><h3 id="&#x5BA2;&#x6237;&#x7AEF;"><a name="&#x5BA2;&#x6237;&#x7AEF;" class="plugin-anchor" href="#&#x5BA2;&#x6237;&#x7AEF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5BA2;&#x6237;&#x7AEF;</h3>
<pre><code>public class NIOTCPClient {
    private SocketChannel clientChannel;
    private ByteBuffer buf;

    public NIOTCPClient() {
        try {
            clientChannel = SocketChannel.open(new InetSocketAddress(&quot;127.0.0.1&quot;, 9000));
            //&#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x4E3A;&#x975E;&#x963B;&#x585E;&#x6A21;&#x5F0F;
            clientChannel.configureBlocking(false);
            buf = ByteBuffer.allocate(1024);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void send(String fileName) {
        try {
            FileChannel fileChannel = FileChannel.open(Paths.get(fileName), StandardOpenOption.READ);
            while (fileChannel.read(buf) != -1) {
                buf.flip();
                clientChannel.write(buf);
                buf.clear();
            }
            System.out.println(&quot;&#x5BA2;&#x6237;&#x7AEF;&#x5DF2;&#x53D1;&#x9001;&#x6587;&#x4EF6;&quot; + fileName);
            fileChannel.close();
            clientChannel.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        ExecutorService pool = new ThreadPoolExecutor(50, 100, 1000, TimeUnit.MILLISECONDS, new LinkedBlockingDeque&lt;&gt;());
        Instant begin = Instant.now();
        for (int i = 0; i &lt; 200; i++) {
            pool.submit(() -&gt; {
                NIOTCPClient client = new NIOTCPClient();
                client.send(&quot;E:/1.jpeg&quot;);
            });
        }
        pool.shutdown();
        Instant end = Instant.now();
        System.out.println(Duration.between(begin,end));
    }
}
</code></pre><ul>
<li><h2 id="java-aio-&#x4F7F;&#x7528;"><a name="java-aio-&#x4F7F;&#x7528;" class="plugin-anchor" href="#java-aio-&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>Java AIO &#x4F7F;&#x7528;</h2>
</li>
<li>&#x5BF9;AIO&#x6765;&#x8BF4;&#xFF0C;&#x5B83;&#x4E0D;&#x662F;&#x5728;IO&#x51C6;&#x5907;&#x597D;&#x65F6;&#x518D;&#x901A;&#x77E5;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x662F;&#x5728;IO&#x64CD;&#x4F5C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x518D;&#x7ED9;&#x7EBF;&#x7A0B;&#x53D1;&#x51FA;&#x901A;&#x77E5;&#x3002;&#x56E0;&#x6B64;AIO&#x662F;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x7684;&#xFF0C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5C06;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x7B49;&#x5F85;IO&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x7531;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x89E6;&#x53D1;&#x3002;</li>
<li>AIO&#x7684;&#x56DB;&#x6B65;&#xFF1A;</li>
<li>1&#x3001;&#x8FDB;&#x7A0B;&#x5411;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8BF7;&#x6C42;&#x6570;&#x636E; </li>
<li>2&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x628A;&#x5916;&#x90E8;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x6838;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C; </li>
<li>3&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x628A;&#x5185;&#x6838;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x62F7;&#x8D1D;&#x5230;&#x8FDB;&#x7A0B;&#x7684;&#x7F13;&#x51B2;&#x533A; </li>
<li><p>4&#x3001;&#x8FDB;&#x7A0B;&#x83B7;&#x5F97;&#x6570;&#x636E;&#x5B8C;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x529F;&#x80FD;</p>
</li>
<li><p>JDK1.7&#x4E3B;&#x8981;&#x589E;&#x52A0;&#x4E86;&#x4E09;&#x4E2A;&#x65B0;&#x7684;&#x5F02;&#x6B65;&#x901A;&#x9053;&#xFF1A;</p>
</li>
<li>AsynchronousFileChannel: &#x7528;&#x4E8E;&#x6587;&#x4EF6;&#x5F02;&#x6B65;&#x8BFB;&#x5199;&#xFF1B;</li>
<li>AsynchronousSocketChannel: &#x5BA2;&#x6237;&#x7AEF;&#x5F02;&#x6B65;socket&#xFF1B;</li>
<li>AsynchronousServerSocketChannel: &#x670D;&#x52A1;&#x5668;&#x5F02;&#x6B65;socket&#x3002;</li>
<li><p>&#x56E0;&#x4E3A;AIO&#x7684;&#x5B9E;&#x65BD;&#x9700;&#x5145;&#x5206;&#x8C03;&#x7528;OS&#x53C2;&#x4E0E;&#xFF0C;IO&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x3001;&#x5E76;&#x53D1;&#x4E5F;&#x540C;&#x6837;&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;</p>
</li>
<li><p>&#x5728;AIO socket&#x7F16;&#x7A0B;&#x4E2D;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x901A;&#x9053;&#x662F;AsynchronousServerSocketChannel&#xFF0C;&#x8FD9;&#x4E2A;&#x7C7B;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;open()&#x9759;&#x6001;&#x5DE5;&#x5382;&#xFF0C;&#x4E00;&#x4E2A;bind()&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x7ED1;&#x5B9A;&#x670D;&#x52A1;&#x7AEF;IP&#x5730;&#x5740;&#xFF08;&#x8FD8;&#x6709;&#x7AEF;&#x53E3;&#x53F7;)&#xFF0C;&#x53E6;&#x5916;&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;accept()&#x7528;&#x4E8E;&#x63A5;&#x6536;&#x7528;&#x6237;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x3002;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x4F7F;&#x7528;&#x7684;&#x901A;&#x9053;&#x662F;AsynchronousSocketChannel,&#x8FD9;&#x4E2A;&#x901A;&#x9053;&#x5904;&#x7406;&#x63D0;&#x4F9B;open&#x9759;&#x6001;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x5916;&#xFF0C;&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;read&#x548C;write&#x65B9;&#x6CD5;&#x3002;</p>
</li>
<li><p>&#x5728;AIO&#x7F16;&#x7A0B;&#x4E2D;&#xFF0C;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#xFF08;accept read write&#x7B49;)&#x4E4B;&#x540E;&#x8981;&#x6307;&#x5B9A;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7C7B;&#xFF08;&#x56DE;&#x8C03;&#x51FD;&#x6570;)&#xFF0C;AIO&#x4E2D;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7C7B;&#x662F;CompletionHandler<v,a>&#xFF0C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#x4E86;&#x5982;&#x4E0B;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x5728;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x6210;&#x529F;&#x548C;&#x5931;&#x8D25;&#x65F6;&#x88AB;&#x56DE;&#x8C03;&#x3002;</v,a></p>
</li>
<li>void completed(V result, A attachment);</li>
<li>void failed(Throwable exc, A attachment);</li>
</ul>
<pre><code>public class AIOServer {
    private static int PORT = 8080;
    private static int BUFFER_SIZE = 1024;
    private static String CHARSET = &quot;utf-8&quot;; //&#x9ED8;&#x8BA4;&#x7F16;&#x7801;  
    private static CharsetDecoder decoder = Charset.forName(CHARSET).newDecoder(); //&#x89E3;&#x7801;  

    private AsynchronousServerSocketChannel serverChannel;

    public AIOServer() {
        this.decoder = Charset.forName(CHARSET).newDecoder();
    }

    private void listen() throws Exception {

        //&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x901A;&#x9053;  
        //&#x7ED1;&#x5B9A;&#x670D;&#x52A1;&#x7AEF;&#x53E3;  
        this.serverChannel = AsynchronousServerSocketChannel.open().bind(new InetSocketAddress(PORT), 100);
        this.serverChannel.accept(this, new AcceptHandler());
    }


    /**
     * accept&#x5230;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x65F6;&#x7684;&#x56DE;&#x8C03;
     */
    private class AcceptHandler implements CompletionHandler&lt;AsynchronousSocketChannel, AIOServer&gt; {
        @Override
        public void completed(final AsynchronousSocketChannel client, AIOServer server) {
            try {
                System.out.println(&quot;&#x8FDC;&#x7A0B;&#x5730;&#x5740;&#xFF1A;&quot; + client.getRemoteAddress());
                //tcp&#x5404;&#x9879;&#x53C2;&#x6570;  
                client.setOption(StandardSocketOptions.TCP_NODELAY, true);
                client.setOption(StandardSocketOptions.SO_SNDBUF, 1024);
                client.setOption(StandardSocketOptions.SO_RCVBUF, 1024);

                if (client.isOpen()) {
                    System.out.println(&quot;client.isOpen&#xFF1A;&quot; + client.getRemoteAddress());
                    final ByteBuffer buffer = ByteBuffer.allocate(BUFFER_SIZE);
                    buffer.clear();
                    client.read(buffer, client, new ReadHandler(buffer));
                }

            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                server.serverChannel.accept(server, this);// &#x76D1;&#x542C;&#x65B0;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x3002;  
            }
        }

        @Override
        public void failed(Throwable e, AIOServer attachment) {
            try {
                e.printStackTrace();
            } finally {
                attachment.serverChannel.accept(attachment, this);// &#x76D1;&#x542C;&#x65B0;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x3002;  
            }
        }
    }

    /**
     * Read&#x5230;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x7684;&#x56DE;&#x8C03;
     */
    private class ReadHandler implements CompletionHandler&lt;Integer, AsynchronousSocketChannel&gt; {

        private ByteBuffer buffer;

        public ReadHandler(ByteBuffer buffer) {
            this.buffer = buffer;
        }

        @Override
        public void completed(Integer result, AsynchronousSocketChannel client) {
            try {
                if (result &lt; 0) {// &#x5BA2;&#x6237;&#x7AEF;&#x5173;&#x95ED;&#x4E86;&#x8FDE;&#x63A5;  
                    AIOServer.close(client);
                } else if (result == 0) {
                    System.out.println(&quot;&#x7A7A;&#x6570;&#x636E;&quot;); // &#x5904;&#x7406;&#x7A7A;&#x6570;&#x636E;  
                } else {
                    // &#x8BFB;&#x53D6;&#x8BF7;&#x6C42;&#xFF0C;&#x5904;&#x7406;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;  
                    buffer.flip();
                    CharBuffer charBuffer = AIOServer.decoder.decode(buffer);
                    System.out.println(charBuffer.toString()); //&#x63A5;&#x6536;&#x8BF7;&#x6C42;  

                    //&#x54CD;&#x5E94;&#x64CD;&#x4F5C;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x54CD;&#x5E94;&#x7ED3;&#x679C;  
                    buffer.clear();
                    String res = &quot;hellworld&quot;;
                    buffer = ByteBuffer.wrap(res.getBytes());
                    client.write(buffer, client, new WriteHandler(buffer));//Response&#xFF1A;&#x54CD;&#x5E94;&#x3002;  
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        @Override
        public void failed(Throwable exc, AsynchronousSocketChannel attachment) {
            exc.printStackTrace();
            AIOServer.close(attachment);
        }
    }

    /**
     * Write&#x54CD;&#x5E94;&#x5B8C;&#x8BF7;&#x6C42;&#x7684;&#x56DE;&#x8C03;
     */
    private class WriteHandler implements CompletionHandler&lt;Integer, AsynchronousSocketChannel&gt; {
        private ByteBuffer buffer;

        public WriteHandler(ByteBuffer buffer) {
            this.buffer = buffer;
        }

        @Override
        public void completed(Integer result, AsynchronousSocketChannel attachment) {
            buffer.clear();
            AIOServer.close(attachment);
        }

        @Override
        public void failed(Throwable exc, AsynchronousSocketChannel attachment) {
            exc.printStackTrace();
            AIOServer.close(attachment);
        }
    }


    private static void close(AsynchronousSocketChannel client) {
        try {
            client.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        try {
            System.out.println(&quot;&#x6B63;&#x5728;&#x542F;&#x52A8;&#x670D;&#x52A1;...&quot;);
            AIOServer AIOServer = new AIOServer();
            AIOServer.listen();
            Thread t = new Thread(new Runnable() {
                @Override
                public void run() {
                    while (true) {
                    }
                }
            });
            t.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre><ul>
<li><h2 id="java-nio-&#x6E90;&#x7801;"><a name="java-nio-&#x6E90;&#x7801;" class="plugin-anchor" href="#java-nio-&#x6E90;&#x7801;"><i class="fa fa-link" aria-hidden="true"></i></a>Java NIO &#x6E90;&#x7801;</h2>
</li>
<li>&#x5173;&#x4E8E;Selector&#x6E90;&#x7801;&#x8FC7;&#x4E8E;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x653E;&#x8FC7;&#x3002;<h3 id="buffer"><a name="buffer" class="plugin-anchor" href="#buffer"><i class="fa fa-link" aria-hidden="true"></i></a>Buffer</h3>
</li>
</ul>
<pre><code>public abstract class Buffer {

    /**
     * The characteristics of Spliterators that traverse and split elements
     * maintained in Buffers.
     */
    static final int SPLITERATOR_CHARACTERISTICS =
        Spliterator.SIZED | Spliterator.SUBSIZED | Spliterator.ORDERED;

    // Invariants: mark &lt;= position &lt;= limit &lt;= capacity
    private int mark = -1;
    private int position = 0;
    private int limit;
    private int capacity;

    // Used only by direct buffers
    // NOTE: hoisted here for speed in JNI GetDirectBufferAddress
    long address;

    // Creates a new buffer with the given mark, position, limit, and capacity,
    // after checking invariants.
    //
    Buffer(int mark, int pos, int lim, int cap) {       // package-private
        if (cap &lt; 0)
            throw new IllegalArgumentException(&quot;Negative capacity: &quot; + cap);
        this.capacity = cap;
        limit(lim);
        position(pos);
        if (mark &gt;= 0) {
            if (mark &gt; pos)
                throw new IllegalArgumentException(&quot;mark &gt; position: (&quot;
                                                   + mark + &quot; &gt; &quot; + pos + &quot;)&quot;);
            this.mark = mark;
        }
    }
</code></pre><ul>
<li>}</li>
<li>ByteBuffer&#x6709;&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#xFF1A;HeapByteBuffer&#x548C;DirectByteBuffer&#x3002;</li>
<li>ByteBuffer#allocate</li>
</ul>
<pre><code>public static ByteBuffer allocate(int capacity) {
    if (capacity &lt; 0)
        throw new IllegalArgumentException();
    return new HeapByteBuffer(capacity, capacity);
}
</code></pre><ul>
<li>ByteBuffer#allocateDirect</li>
</ul>
<pre><code>public static ByteBuffer allocateDirect(int capacity) {
    return new DirectByteBuffer(capacity);
}
</code></pre><h3 id="heapbytebuffer&#xFF08;&#x95F4;&#x63A5;&#x6A21;&#x5F0F;"><a name="heapbytebuffer&#xFF08;&#x95F4;&#x63A5;&#x6A21;&#x5F0F;" class="plugin-anchor" href="#heapbytebuffer&#xFF08;&#x95F4;&#x63A5;&#x6A21;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>HeapByteBuffer&#xFF08;&#x95F4;&#x63A5;&#x6A21;&#x5F0F;)</h3>
<ul>
<li>&#x5E95;&#x5C42;&#x57FA;&#x4E8E;byte&#x6570;&#x7EC4;&#x3002;<h4 id="&#x521D;&#x59CB;&#x5316;"><a name="&#x521D;&#x59CB;&#x5316;" class="plugin-anchor" href="#&#x521D;&#x59CB;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x521D;&#x59CB;&#x5316;</h4>
</li>
</ul>
<pre><code>HeapByteBuffer(int cap, int lim) {            // package-private
    super(-1, 0, lim, cap, new byte[cap], 0);
}
</code></pre><ul>
<li>&#x8C03;&#x7528;&#x7684;&#x662F;ByteBuffer&#x7684;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6CD5;</li>
</ul>
<pre><code>ByteBuffer(int mark, int pos, int lim, int cap,   // package-private
             byte[] hb, int offset)
{
    super(mark, pos, lim, cap);
    this.hb = hb;
    this.offset = offset;
}
</code></pre><ul>
<li>ByteBuffer&#x7684;&#x72EC;&#x6709;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1A;</li>
<li>final byte[] hb;                  // Non-null only for heap buffers
final int offset;
boolean isReadOnly;                 // Valid only for heap buffers</li>
</ul>
<h4 id="get"><a name="get" class="plugin-anchor" href="#get"><i class="fa fa-link" aria-hidden="true"></i></a>get</h4>
<pre><code>public byte get() {
    return hb[ix(nextGetIndex())];
}
</code></pre><pre><code>final int nextGetIndex() {                          // package-private
    if (position &gt;= limit)
        throw new BufferUnderflowException();
    return position++;
}
</code></pre><ul>
<li>protected int ix(int i) {
  return i + offset;
}</li>
</ul>
<h4 id="put"><a name="put" class="plugin-anchor" href="#put"><i class="fa fa-link" aria-hidden="true"></i></a>put</h4>
<pre><code>public ByteBuffer put(byte x) {
    hb[ix(nextPutIndex())] = x;
    return this;
}
</code></pre><pre><code>final int nextPutIndex() {                          // package-private
    if (position &gt;= limit)
        throw new BufferOverflowException();
    return position++;
}
</code></pre><ul>
<li><h3 id="directbytebuffer&#xFF08;&#x76F4;&#x63A5;&#x6A21;&#x5F0F;"><a name="directbytebuffer&#xFF08;&#x76F4;&#x63A5;&#x6A21;&#x5F0F;" class="plugin-anchor" href="#directbytebuffer&#xFF08;&#x76F4;&#x63A5;&#x6A21;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>DirectByteBuffer&#xFF08;&#x76F4;&#x63A5;&#x6A21;&#x5F0F;)</h3>
</li>
<li>&#x5E95;&#x5C42;&#x57FA;&#x4E8E;c++&#x7684;malloc&#x5206;&#x914D;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#xFF0C;&#x662F;&#x4F7F;&#x7528;Unsafe&#x7C7B;&#x5206;&#x914D;&#x7684;&#xFF0C;&#x5E95;&#x5C42;&#x8C03;&#x7528;&#x4E86;native&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x5728;&#x521B;&#x5EFA;DirectByteBuffer&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E0E;&#x5176;&#x5BF9;&#x5E94;&#x7684;cleaner&#xFF0C;cleaner&#x662F;&#x4E00;&#x4E2A;&#x865A;&#x5F15;&#x7528;&#x3002;</li>
<li>&#x56DE;&#x6536;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x51E0;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;<ul>
<li>1)&#x7A0B;&#x5E8F;&#x5458;&#x624B;&#x5DE5;&#x91CA;&#x653E;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;sun&#x7684;&#x975E;&#x516C;&#x5F00;API&#x5B9E;&#x73B0;&#x3002;</li>
<li>2)&#x7533;&#x8BF7;&#x65B0;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x800C;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x65F6;&#xFF0C;&#x4F1A;&#x8FDB;&#x884C;&#x8C03;&#x7528;Cleaner&#xFF08;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;Reference)&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;tryHandlePending(false)&#xFF0C;&#x5B83;&#x53C8;&#x4F1A;&#x8C03;&#x7528;cleaner&#x7684;clean&#x65B9;&#x6CD5;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;</li>
<li>3)&#x5F53;DirectByteBuffer&#x5931;&#x53BB;&#x5F3A;&#x5F15;&#x7528;,&#x53EA;&#x6709;&#x865A;&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x5F53;&#x7B49;&#x5230;&#x67D0;&#x4E00;&#x6B21;System.gc&#xFF08;full gc)&#xFF08;&#x6BD4;&#x5982;&#x5806;&#x5916;&#x5185;&#x5B58;&#x8FBE;&#x5230;XX:MaxDirectMemorySize)&#x65F6;&#xFF0C;&#x5F53;DirectByteBuffer&#x5BF9;&#x8C61;&#x4ECE;pending&#x72B6;&#x6001; -&gt; enqueue&#x72B6;&#x6001;&#x65F6;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;Cleaner&#x7684;clean()&#xFF0C;&#x800C;Cleaner&#x7684;clean()&#x7684;&#x65B9;&#x6CD5;&#x4F1A;&#x5B9E;&#x73B0;&#x901A;&#x8FC7;unsafe&#x5BF9;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x91CA;&#x653E;&#x3002;<h4 id="&#x521D;&#x59CB;&#x5316;"><a name="&#x521D;&#x59CB;&#x5316;" class="plugin-anchor" href="#&#x521D;&#x59CB;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x521D;&#x59CB;&#x5316;</h4>
</li>
</ul>
</li>
<li>&#x91CD;&#x8981;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF1A;</li>
</ul>
<pre><code>private final Cleaner cleaner;
</code></pre><ul>
<li>// Cached unsafe-access object
protected static final Unsafe unsafe = Bits.unsafe();</li>
<li>Unsafe&#x4E2D;&#x5F88;&#x591A;&#x90FD;&#x662F;native&#x65B9;&#x6CD5;&#xFF0C;&#x5E95;&#x5C42;&#x8C03;&#x7528;c++&#x4EE3;&#x7801;&#x3002;</li>
</ul>
<pre><code>DirectByteBuffer(int cap) {                   // package-private

    super(-1, 0, cap, cap);
</code></pre><ul>
<li>// &#x5185;&#x5B58;&#x662F;&#x5426;&#x6309;&#x9875;&#x5206;&#x914D;&#x5BF9;&#x9F50;
  boolean pa = VM.isDirectMemoryPageAligned();</li>
<li>// &#x83B7;&#x53D6;&#x6BCF;&#x9875;&#x5185;&#x5B58;&#x5927;&#x5C0F;
  int ps = Bits.pageSize();</li>
<li>// &#x5206;&#x914D;&#x5185;&#x5B58;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x6309;&#x9875;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x518D;&#x52A0;&#x4E00;&#x9875;&#x5185;&#x5B58;&#x7684;&#x5BB9;&#x91CF;
  long size = Math.max(1L, (long)cap + (pa ? ps : 0));</li>
<li><p>// &#x7528;Bits&#x7C7B;&#x4FDD;&#x5B58;&#x603B;&#x5206;&#x914D;&#x5185;&#x5B58;(&#x6309;&#x9875;&#x5206;&#x914D;)&#x7684;&#x5927;&#x5C0F;&#x548C;&#x5B9E;&#x9645;&#x5185;&#x5B58;&#x7684;&#x5927;&#x5C0F;
  Bits.reserveMemory(size, cap);</p>
<p>  long base = 0;
  try {</p>
</li>
<li><p>// &#x5728;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x57FA;&#x5730;&#x5740;&#xFF0C;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x5927;&#x5C0F;</p>
<pre><code>  base = unsafe.allocateMemory(size);
</code></pre><p>  } catch (OutOfMemoryError x) {</p>
<pre><code>  Bits.unreserveMemory(size, cap);
  throw x;
</code></pre><p>  }
  unsafe.setMemory(base, size, (byte) 0);</p>
<ul>
<li>// &#x8BA1;&#x7B97;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x57FA;&#x5730;&#x5740;
if (pa &amp;&amp; (base % ps != 0)) {
  // Round up to page boundary
  address = base + ps - (base &amp; (ps - 1));
} else {
  address = base;
}
cleaner = Cleaner.create(this, new Deallocator(base, size, cap));
att = null;
}</li>
</ul>
</li>
<li><p>&#x7B2C;&#x4E00;&#x884C;super&#x8C03;&#x7528;&#x7684;&#x662F;&#x5176;&#x7236;&#x7C7B;MappedByteBuffer&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</p>
</li>
</ul>
<pre><code>MappedByteBuffer(int mark, int pos, int lim, int cap) { // package-private
    super(mark, pos, lim, cap);
    this.fd = null;
}
</code></pre><ul>
<li>&#x800C;&#x5B83;&#x7684;super&#x53C8;&#x8C03;&#x7528;&#x4E86;ByteBuffer&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</li>
</ul>
<pre><code>ByteBuffer(int mark, int pos, int lim, int cap) { // package-private
    this(mark, pos, lim, cap, null, 0);
}
</code></pre><ul>
<li>Bits#reserveMemory</li>
<li><p>&#x8BE5;&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x4FDD;&#x5B58;&#x603B;&#x5206;&#x914D;&#x5185;&#x5B58;(&#x6309;&#x9875;&#x5206;&#x914D;)&#x7684;&#x5927;&#x5C0F;&#x548C;&#x5B9E;&#x9645;&#x5185;&#x5B58;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
</li>
<li><p>&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;Bits.reserveMemory(size, cap)&#x65B9;&#x6CD5;&#x5728;&#x53EF;&#x7528;&#x5806;&#x5916;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x4EE5;&#x5206;&#x914D;&#x7ED9;&#x5F53;&#x524D;&#x8981;&#x521B;&#x5EFA;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x65F6;&#xFF0C;&#x4F1A;&#x5B9E;&#x73B0;&#x4EE5;&#x4E0B;&#x7684;&#x6B65;&#x9AA4;&#x6765;&#x5C1D;&#x8BD5;&#x5B8C;&#x6210;&#x672C;&#x6B21;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x521B;&#x5EFA;&#xFF1A;</p>
</li>
<li>&#x2460; &#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x975E;&#x5835;&#x585E;&#x7684;Reference#tryHandlePending(false)&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x5C06;&#x5DF2;&#x7ECF;&#x88AB;JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;DirectBuffer&#x5BF9;&#x8C61;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x91CA;&#x653E;&#x3002;</li>
<li><p>&#x2461; &#x5982;&#x679C;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5806;&#x5916;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x56DE;&#x6536;&#x540E;&#xFF0C;&#x8FD8;&#x4E0D;&#x591F;&#x8FDB;&#x884C;&#x672C;&#x6B21;&#x5806;&#x5916;&#x5185;&#x5B58;&#x5206;&#x914D;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x8FDB;&#x884C; System.gc()&#x3002;System.gc()&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;full gc&#xFF0C;&#x4F46;&#x4F60;&#x9700;&#x8981;&#x77E5;&#x9053;&#xFF0C;&#x8C03;&#x7528;System.gc()&#x5E76;&#x4E0D;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;full gc&#x9A6C;&#x4E0A;&#x5C31;&#x80FD;&#x88AB;&#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x540E;&#x9762;&#x6253;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x4F1A;&#x8FDB;&#x884C;&#x6700;&#x591A;9&#x6B21;&#x5C1D;&#x8BD5;&#xFF0C;&#x770B;&#x662F;&#x5426;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x53EF;&#x7528;&#x5806;&#x5916;&#x5185;&#x5B58;&#x6765;&#x5206;&#x914D;&#x5806;&#x5916;&#x5185;&#x5B58;&#x3002;&#x5E76;&#x4E14;&#x6BCF;&#x6B21;&#x5C1D;&#x8BD5;&#x4E4B;&#x524D;&#xFF0C;&#x90FD;&#x5BF9;&#x5EF6;&#x8FDF;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x5DF2;&#x7ED9;JVM&#x8DB3;&#x591F;&#x7684;&#x65F6;&#x95F4;&#x53BB;&#x5B8C;&#x6210;full gc&#x64CD;&#x4F5C;&#x3002;</p>
</li>
<li><p>&#x8FD9;&#x91CC;&#x4E4B;&#x6240;&#x4EE5;&#x7528;&#x4F7F;&#x7528;full gc&#x7684;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x539F;&#x56E0;&#x662F;&#xFF1A;System.gc()&#x4F1A;&#x5BF9;&#x65B0;&#x751F;&#x4EE3;&#x548C;&#x8001;&#x751F;&#x4EE3;&#x90FD;&#x4F1A;&#x8FDB;&#x884C;&#x5185;&#x5B58;&#x56DE;&#x6536;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x6BD4;&#x8F83;&#x5F7B;&#x5E95;&#x5730;&#x56DE;&#x6536;DirectByteBuffer&#x5BF9;&#x8C61;&#x4EE5;&#x53CA;&#x4ED6;&#x4EEC;&#x5173;&#x8054;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;.</p>
</li>
<li>DirectByteBuffer&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#x5176;&#x5B9E;&#x662F;&#x5F88;&#x5C0F;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x540E;&#x9762;&#x53EF;&#x80FD;&#x5173;&#x8054;&#x4E86;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5927;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x79F0;&#x4E4B;&#x4E3A;&#x51B0;&#x5C71;&#x5BF9;&#x8C61;.</li>
<li>&#x6211;&#x4EEC;&#x505A;young gc&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x5C06;&#x65B0;&#x751F;&#x4EE3;&#x91CC;&#x7684;&#x4E0D;&#x53EF;&#x8FBE;&#x7684;DirectByteBuffer&#x5BF9;&#x8C61;&#x53CA;&#x5176;&#x5806;&#x5916;&#x5185;&#x5B58;&#x56DE;&#x6536;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x65E0;&#x6CD5;&#x5BF9;old&#x91CC;&#x7684;DirectByteBuffer&#x5BF9;&#x8C61;&#x53CA;&#x5176;&#x5806;&#x5916;&#x5185;&#x5B58;&#x8FDB;&#x884C;&#x56DE;&#x6536;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x78B0;&#x5230;&#x7684;&#x6700;&#x5927;&#x7684;&#x95EE;&#x9898;&#x3002;(&#x5E76;&#x4E14;&#x5806;&#x5916;&#x5185;&#x5B58;&#x591A;&#x7528;&#x4E8E;&#x751F;&#x547D;&#x671F;&#x4E2D;&#x7B49;&#x6216;&#x8F83;&#x957F;&#x7684;&#x5BF9;&#x8C61;)</li>
<li><p>&#x5982;&#x679C;&#x6709;&#x5927;&#x91CF;&#x7684;DirectByteBuffer&#x5BF9;&#x8C61;&#x79FB;&#x5230;&#x4E86;old&#xFF0C;&#x4F46;&#x662F;&#x53C8;&#x4E00;&#x76F4;&#x6CA1;&#x6709;&#x505A;cms gc&#x6216;&#x8005;full gc&#xFF0C;&#x800C;&#x53EA;&#x8FDB;&#x884C;ygc&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x7684;&#x7269;&#x7406;&#x5185;&#x5B58;&#x53EF;&#x80FD;&#x88AB;&#x6162;&#x6162;&#x8017;&#x5149;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x8FD8;&#x4E0D;&#x77E5;&#x9053;&#x53D1;&#x751F;&#x4E86;&#x4EC0;&#x4E48;&#xFF0C;&#x56E0;&#x4E3A;heap&#x660E;&#x660E;&#x5269;&#x4F59;&#x7684;&#x5185;&#x5B58;&#x8FD8;&#x5F88;&#x591A;(&#x524D;&#x63D0;&#x662F;&#x6211;&#x4EEC;&#x7981;&#x7528;&#x4E86;System.gc &#x2013; JVM&#x53C2;&#x6570;DisableExplicitGC)&#x3002;</p>
</li>
<li><p>&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8BBE;&#x7F6E;&#x4E86;-XX:+DisableExplicitGC&#xFF0C;&#x5C06;&#x4F1A;&#x7981;&#x7528;&#x663E;&#x793A;GC&#xFF0C;&#x8FD9;&#x4F1A;&#x4F7F;System.gc()&#x8C03;&#x7528;&#x65E0;&#x6548;&#x3002;</p>
</li>
<li>&#x2462; &#x5982;&#x679C;9&#x6B21;&#x5C1D;&#x8BD5;&#x540E;&#x4F9D;&#x65E7;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x53EF;&#x7528;&#x5806;&#x5916;&#x5185;&#x5B58;&#x6765;&#x5206;&#x914D;&#x672C;&#x6B21;&#x5806;&#x5916;&#x5185;&#x5B58;&#xFF0C;&#x5219;&#x629B;&#x51FA;OutOfMemoryError(&quot;Direct buffer memory&#x201D;)&#x5F02;&#x5E38;&#x3002;</li>
<li><p>static void reserveMemory(long size, int cap) {</p>
<p>  if (!memoryLimitSet &amp;&amp; VM.isBooted()) {</p>
<pre><code>  maxMemory = VM.maxDirectMemory();
  memoryLimitSet = true;
</code></pre><p>  }</p>
<p>  // optimist!
  if (tryReserveMemory(size, cap)) {</p>
<pre><code>  return;
</code></pre><p>  }</p>
<p>  final JavaLangRefAccess jlra = SharedSecrets.getJavaLangRefAccess();
  // &#x5982;&#x679C;&#x7CFB;&#x7EDF;&#x4E2D;&#x5185;&#x5B58;( &#x5373;&#xFF0C;&#x5806;&#x5916;&#x5185;&#x5B58; )&#x4E0D;&#x591F;&#x7684;&#x8BDD;&#xFF1A;</p>
</li>
<li>jlra.tryHandlePendingReference()&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x975E;&#x5835;&#x585E;&#x7684;Reference#tryHandlePending(false)&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x5C06;&#x5DF2;&#x7ECF;&#x88AB;JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;DirectBuffer&#x5BF9;&#x8C61;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;&#x91CA;&#x653E;&#x3002;</li>
<li><p>  // retry while helping enqueue pending Reference objects
  // which includes executing pending Cleaner(s) which includes
  // Cleaner(s) that free direct buffer memory
  while (jlra.tryHandlePendingReference()) {</p>
<pre><code>  if (tryReserveMemory(size, cap)) {
      return;
  }
</code></pre><p>  }
  // &#x5982;&#x679C;&#x5728;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5806;&#x5916;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x56DE;&#x6536;&#x540E;&#xFF0C;&#x8FD8;&#x4E0D;&#x591F;&#x8FDB;&#x884C;&#x672C;&#x6B21;&#x5806;&#x5916;&#x5185;&#x5B58;&#x5206;&#x914D;&#x7684;&#x8BDD;&#xFF0C;&#x5219;
  // trigger VM&apos;s Reference processing
  System.gc();</p>
<p>  // a retry loop with exponential back-off delays
  // (this gives VM some time to do it&apos;s job)
  boolean interrupted = false;
  try {</p>
<pre><code>  long sleepTime = 1;
  int sleeps = 0;
  while (true) {
      if (tryReserveMemory(size, cap)) {
          return;
      }
</code></pre></li>
<li><p>// 9</p>
<pre><code>      if (sleeps &gt;= MAX_SLEEPS) {
          break;
      }
      if (!jlra.tryHandlePendingReference()) {
          try {
              Thread.sleep(sleepTime);
              sleepTime &lt;&lt;= 1;
              sleeps++;
          } catch (InterruptedException e) {
              interrupted = true;
          }
      }
  }
  // &#x5982;&#x679C;9&#x6B21;&#x5C1D;&#x8BD5;&#x540E;&#x4F9D;&#x65E7;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x53EF;&#x7528;&#x5806;&#x5916;&#x5185;&#x5B58;&#x6765;&#x5206;&#x914D;&#x672C;&#x6B21;&#x5806;&#x5916;&#x5185;&#x5B58;&#xFF0C;&#x5219;&#x629B;&#x51FA;OutOfMemoryError(&quot;Direct buffer memory&#x201D;)&#x5F02;&#x5E38;&#x3002;
  // no luck
  throw new OutOfMemoryError(&quot;Direct buffer memory&quot;);
</code></pre><p>  } finally {</p>
<pre><code>  if (interrupted) {
      // don&apos;t swallow interrupts
      Thread.currentThread().interrupt();
  }
</code></pre><p>  }
}</p>
</li>
<li>Reference#tryHandlePending</li>
<li><p>static boolean tryHandlePending(boolean waitForNotify) {
  Reference<object> r;
  Cleaner c;
  try {</object></p>
<pre><code>  synchronized (lock) {
      if (pending != null) {
          r = pending;
          // &apos;instanceof&apos; might throw OutOfMemoryError sometimes
          // so do this before un-linking &apos;r&apos; from the &apos;pending&apos; chain...
          c = r instanceof Cleaner ? (Cleaner) r : null;
          // unlink &apos;r&apos; from &apos;pending&apos; chain
          pending = r.discovered;
          r.discovered = null;
      } else {
          // The waiting on the lock may cause an OutOfMemoryError
          // because it may try to allocate exception objects.
          if (waitForNotify) {
              lock.wait();
          }
          // retry if waited
          return waitForNotify;
      }
  }
</code></pre><p>  } catch (OutOfMemoryError x) {</p>
<pre><code>  // Give other threads CPU time so they hopefully drop some live references
  // and GC reclaims some space.
  // Also prevent CPU intensive spinning in case &apos;r instanceof Cleaner&apos; above
  // persistently throws OOME for some time...
  Thread.yield();
  // retry
  return true;
</code></pre><p>  } catch (InterruptedException x) {</p>
<pre><code>  // retry
  return true;
</code></pre><p>  }</p>
<p>  // Fast path for cleaners
  if (c != null) {</p>
<pre><code>  c.clean();
  return true;
</code></pre><p>  }</p>
<p>  ReferenceQueue&lt;? super Object&gt; q = r.queue;
  if (q != ReferenceQueue.NULL) q.enqueue(r);
  return true;
}</p>
</li>
</ul>
<h4 id="deallocator"><a name="deallocator" class="plugin-anchor" href="#deallocator"><i class="fa fa-link" aria-hidden="true"></i></a>Deallocator</h4>
<ul>
<li>&#x540E;&#x9762;&#x662F;&#x8C03;&#x7528;unsafe&#x7684;&#x5206;&#x914D;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x521D;&#x59CB;&#x5316;&#x4E86;&#x8BE5;DirectByteBuffer&#x5BF9;&#x5E94;&#x7684;cleaner&#x3002;</li>
<li>&#x6CE8;&#xFF1A;&#x5728;Cleaner &#x5185;&#x90E8;&#x4E2D;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#xFF0C;&#x7EF4;&#x62A4;&#x4E86;&#x4E00;&#x4E2A;&#x9488;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A; directBuffer &#x7684;&#x4E00;&#x4E2A;&#x56DE;&#x6536;&#x5806;&#x5916;&#x5185;&#x5B58;&#x7684; &#x7EBF;&#x7A0B;&#x5BF9;&#x8C61;(Runnable)&#xFF0C;&#x56DE;&#x6536;&#x64CD;&#x4F5C;&#x662F;&#x53D1;&#x751F;&#x5728; Cleaner &#x7684; clean() &#x65B9;&#x6CD5;&#x4E2D;&#x3002;</li>
</ul>
<pre><code>private static class Deallocator
    implements Runnable
{

    private static Unsafe unsafe = Unsafe.getUnsafe();

    private long address;
    private long size;
    private int capacity;

    private Deallocator(long address, long size, int capacity) {
        assert (address != 0);
        this.address = address;
        this.size = size;
        this.capacity = capacity;
    }

    public void run() {
        if (address == 0) {
            // Paranoia
            return;
        }
        unsafe.freeMemory(address);
        address = 0;
        Bits.unreserveMemory(size, capacity);
    }

}
</code></pre><h4 id="cleaner&#xFF08;&#x56DE;&#x6536;"><a name="cleaner&#xFF08;&#x56DE;&#x6536;" class="plugin-anchor" href="#cleaner&#xFF08;&#x56DE;&#x6536;"><i class="fa fa-link" aria-hidden="true"></i></a>Cleaner&#xFF08;&#x56DE;&#x6536;)</h4>
<pre><code>public class Cleaner extends PhantomReference&lt;Object&gt; {
    private static final ReferenceQueue&lt;Object&gt; dummyQueue = new ReferenceQueue();
    private static Cleaner first = null;
    private Cleaner next = null;
    private Cleaner prev = null;
    private final Runnable thunk;

    private static synchronized Cleaner add(Cleaner var0) {
        if (first != null) {
            var0.next = first;
            first.prev = var0;
        }

        first = var0;
        return var0;
    }

    private static synchronized boolean remove(Cleaner var0) {
        if (var0.next == var0) {
            return false;
        } else {
            if (first == var0) {
                if (var0.next != null) {
                    first = var0.next;
                } else {
                    first = var0.prev;
                }
            }

            if (var0.next != null) {
                var0.next.prev = var0.prev;
            }

            if (var0.prev != null) {
                var0.prev.next = var0.next;
            }

            var0.next = var0;
            var0.prev = var0;
            return true;
        }
    }

    private Cleaner(Object var1, Runnable var2) {
        super(var1, dummyQueue);
        this.thunk = var2;
    }
    // var0&#x662F;DirectByteBuffer&#xFF0C;var1&#x662F;Deallocator&#x7EBF;&#x7A0B;&#x5BF9;&#x8C61;
    public static Cleaner create(Object var0, Runnable var1) {
        return var1 == null ? null : add(new Cleaner(var0, var1));
    }

    public void clean() {
        if (remove(this)) {
            try {
</code></pre><pre><code>// &#x56DE;&#x6536;&#x8BE5;DirectByteBuffer&#x5BF9;&#x5E94;&#x7684;&#x5806;&#x5916;&#x5185;&#x5B58;
                this.thunk.run();
            } catch (final Throwable var2) {
                AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() {
                    public Void run() {
                        if (System.err != null) {
                            (new Error(&quot;Cleaner terminated abnormally&quot;, var2)).printStackTrace();
                        }

                        System.exit(1);
                        return null;
                    }
                });
            }

        }
    }
}
</code></pre><ul>
<li>Cleaner&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x53C8;&#x8C03;&#x7528;&#x4E86;&#x7236;&#x7C7B;&#x865A;&#x5F15;&#x7528;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</li>
</ul>
<pre><code>public PhantomReference(T referent, ReferenceQueue&lt;? super T&gt; q) {
    super(referent, q);
}
</code></pre><h4 id="get"><a name="get" class="plugin-anchor" href="#get"><i class="fa fa-link" aria-hidden="true"></i></a>get</h4>
<pre><code>public byte get() {
    return ((unsafe.getByte(ix(nextGetIndex()))));
}
</code></pre><h4 id="put"><a name="put" class="plugin-anchor" href="#put"><i class="fa fa-link" aria-hidden="true"></i></a>put</h4>
<pre><code>public ByteBuffer put(byte x) {
    unsafe.putByte(ix(nextPutIndex()), ((x)));
    return this;
}
</code></pre><ul>
<li><h3 id="filechannel&#xFF08;&#x963B;&#x585E;&#x5F0F;"><a name="filechannel&#xFF08;&#x963B;&#x585E;&#x5F0F;" class="plugin-anchor" href="#filechannel&#xFF08;&#x963B;&#x585E;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>FileChannel&#xFF08;&#x963B;&#x585E;&#x5F0F;)</h3>
</li>
<li>FileChannel&#x7684;read&#x3001;write&#x548C;map&#x901A;&#x8FC7;&#x5176;&#x5B9E;&#x73B0;&#x7C7B;FileChannelImpl&#x5B9E;&#x73B0;&#x3002;</li>
<li>FileChannelImpl&#x7684;Oracle JDK&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x6E90;&#x7801;&#xFF0C;&#x53EA;&#x80FD;&#x5728;OpenJDK&#x4E2D;&#x67E5;&#x770B;&#x3002;<h4 id="open"><a name="open" class="plugin-anchor" href="#open"><i class="fa fa-link" aria-hidden="true"></i></a>open</h4>
</li>
</ul>
<pre><code>public static FileChannel open(Path path, OpenOption... options)
    throws IOException
{
    Set&lt;OpenOption&gt; set = new HashSet&lt;OpenOption&gt;(options.length);
    Collections.addAll(set, options);
    return open(path, set, NO_ATTRIBUTES);
}
</code></pre><pre><code>public static FileChannel open(Path path,
                               Set&lt;? extends OpenOption&gt; options,
                               FileAttribute&lt;?&gt;... attrs)
    throws IOException
{
    FileSystemProvider provider = path.getFileSystem().provider();
    return provider.newFileChannel(path, options, attrs);
}
</code></pre><ul>
<li>WindowsFileSystemProvider#newFileChannel</li>
</ul>
<pre><code>public FileChannel newFileChannel(Path path,
                                  Set&lt;? extends OpenOption&gt; options,
                                  FileAttribute&lt;?&gt;... attrs)
    throws IOException
{
    if (path == null)
        throw new NullPointerException();
    if (!(path instanceof WindowsPath))
        throw new ProviderMismatchException();
    WindowsPath file = (WindowsPath)path;

    WindowsSecurityDescriptor sd = WindowsSecurityDescriptor.fromAttribute(attrs);
    try {
        return WindowsChannelFactory
            .newFileChannel(file.getPathForWin32Calls(),
                            file.getPathForPermissionCheck(),
                            options,
                            sd.address());
    } catch (WindowsException x) {
        x.rethrowAsIOException(file);
        return null;
    } finally {
        if (sd != null)
            sd.release();
    }
}
</code></pre><ul>
<li>WindowsChannelFactory#newFileChannel</li>
<li><p>static FileChannel newFileChannel(String pathForWindows,</p>
<pre><code>                            String pathToCheck,
                            Set&lt;? extends OpenOption&gt; options,
                            long pSecurityDescriptor)
</code></pre><p>  throws WindowsException
{
  Flags flags = Flags.toFlags(options);</p>
<p>  // default is reading; append =&gt; writing
  if (!flags.read &amp;&amp; !flags.write) {</p>
<pre><code>  if (flags.append) {
      flags.write = true;
  } else {
      flags.read = true;
  }
</code></pre><p>  }</p>
<p>  // validation
  if (flags.read &amp;&amp; flags.append)</p>
<pre><code>  throw new IllegalArgumentException(&quot;READ + APPEND not allowed&quot;);
</code></pre><p>  if (flags.append &amp;&amp; flags.truncateExisting)</p>
<pre><code>  throw new IllegalArgumentException(&quot;APPEND + TRUNCATE_EXISTING not allowed&quot;);
</code></pre><p>  FileDescriptor fdObj = open(pathForWindows, pathToCheck, flags, pSecurityDescriptor);
  return FileChannelImpl.open(fdObj, pathForWindows, flags.read, flags.write, flags.append, null);
}</p>
</li>
</ul>
<pre><code>/**
 * Opens file based on parameters and options, returning a FileDescriptor
 * encapsulating the handle to the open file.
 */
private static FileDescriptor open(String pathForWindows,
                                   String pathToCheck,
                                   Flags flags,
                                   long pSecurityDescriptor)
    throws WindowsException
{
    // set to true if file must be truncated after open
    boolean truncateAfterOpen = false;

    // map options
    int dwDesiredAccess = 0;
    if (flags.read)
        dwDesiredAccess |= GENERIC_READ;
    if (flags.write)
        dwDesiredAccess |= GENERIC_WRITE;

    int dwShareMode = 0;
    if (flags.shareRead)
        dwShareMode |= FILE_SHARE_READ;
    if (flags.shareWrite)
        dwShareMode |= FILE_SHARE_WRITE;
    if (flags.shareDelete)
        dwShareMode |= FILE_SHARE_DELETE;

    int dwFlagsAndAttributes = FILE_ATTRIBUTE_NORMAL;
    int dwCreationDisposition = OPEN_EXISTING;
    if (flags.write) {
        if (flags.createNew) {
            dwCreationDisposition = CREATE_NEW;
            // force create to fail if file is orphaned reparse point
            dwFlagsAndAttributes |= FILE_FLAG_OPEN_REPARSE_POINT;
        } else {
            if (flags.create)
                dwCreationDisposition = OPEN_ALWAYS;
            if (flags.truncateExisting) {
                // Windows doesn&apos;t have a creation disposition that exactly
                // corresponds to CREATE + TRUNCATE_EXISTING so we use
                // the OPEN_ALWAYS mode and then truncate the file.
                if (dwCreationDisposition == OPEN_ALWAYS) {
                    truncateAfterOpen = true;
                } else {
                    dwCreationDisposition = TRUNCATE_EXISTING;
                }
            }
        }
    }

    if (flags.dsync || flags.sync)
        dwFlagsAndAttributes |= FILE_FLAG_WRITE_THROUGH;
    if (flags.overlapped)
        dwFlagsAndAttributes |= FILE_FLAG_OVERLAPPED;
    if (flags.deleteOnClose)
        dwFlagsAndAttributes |= FILE_FLAG_DELETE_ON_CLOSE;

    // NOFOLLOW_LINKS and NOFOLLOW_REPARSEPOINT mean open reparse point
    boolean okayToFollowLinks = true;
    if (dwCreationDisposition != CREATE_NEW &amp;&amp;
        (flags.noFollowLinks ||
         flags.openReparsePoint ||
         flags.deleteOnClose))
    {
        if (flags.noFollowLinks || flags.deleteOnClose)
            okayToFollowLinks = false;
        dwFlagsAndAttributes |= FILE_FLAG_OPEN_REPARSE_POINT;
    }

    // permission check
    if (pathToCheck != null) {
        SecurityManager sm = System.getSecurityManager();
        if (sm != null) {
            if (flags.read)
                sm.checkRead(pathToCheck);
            if (flags.write)
                sm.checkWrite(pathToCheck);
            if (flags.deleteOnClose)
                sm.checkDelete(pathToCheck);
        }
    }

    // open file
    long handle = CreateFile(pathForWindows,
                             dwDesiredAccess,
                             dwShareMode,
                             pSecurityDescriptor,
                             dwCreationDisposition,
                             dwFlagsAndAttributes);

    // make sure this isn&apos;t a symbolic link.
    if (!okayToFollowLinks) {
        try {
            if (WindowsFileAttributes.readAttributes(handle).isSymbolicLink())
                throw new WindowsException(&quot;File is symbolic link&quot;);
        } catch (WindowsException x) {
            CloseHandle(handle);
            throw x;
        }
    }

    // truncate file (for CREATE + TRUNCATE_EXISTING case)
    if (truncateAfterOpen) {
        try {
            SetEndOfFile(handle);
        } catch (WindowsException x) {
            CloseHandle(handle);
            throw x;
        }
    }

    // make the file sparse if needed
    if (dwCreationDisposition == CREATE_NEW &amp;&amp; flags.sparse) {
        try {
            DeviceIoControlSetSparse(handle);
        } catch (WindowsException x) {
            // ignore as sparse option is hint
        }
    }

    // create FileDescriptor and return
    FileDescriptor fdObj = new FileDescriptor();
    fdAccess.setHandle(fdObj, handle);
    return fdObj;
}
</code></pre><ul>
<li>static long CreateFile(String path,<pre><code>                 int dwDesiredAccess,
                 int dwShareMode,
                 long lpSecurityAttributes,
                 int dwCreationDisposition,
                 int dwFlagsAndAttributes)
</code></pre>  throws WindowsException
{
  NativeBuffer buffer = asNativeBuffer(path);
  try {<pre><code>  return CreateFile0(buffer.address(),
                     dwDesiredAccess,
                     dwShareMode,
                     lpSecurityAttributes,
                     dwCreationDisposition,
                     dwFlagsAndAttributes);
</code></pre>  } finally {<pre><code>  buffer.release();
</code></pre>  }
}</li>
</ul>
<pre><code>private static native long CreateFile0(long lpFileName,
                                       int dwDesiredAccess,
                                       int dwShareMode,
                                       long lpSecurityAttributes,
                                       int dwCreationDisposition,
                                       int dwFlagsAndAttributes)
    throws WindowsException;
</code></pre><ul>
<li><h4 id="read"><a name="read" class="plugin-anchor" href="#read"><i class="fa fa-link" aria-hidden="true"></i></a>read</h4>
</li>
</ul>
<pre><code>public int read(ByteBuffer dst) throws IOException {
    ensureOpen();
    if (!readable)
        throw new NonReadableChannelException();
    synchronized (positionLock) {
        int n = 0;
        int ti = -1;
        try {
            begin();
            ti = threads.add();
            if (!isOpen())
                return 0;
            do {
                n = IOUtil.read(fd, dst, -1, nd);
            } while ((n == IOStatus.INTERRUPTED) &amp;&amp; isOpen());
            return IOStatus.normalize(n);
        } finally {
            threads.remove(ti);
            end(n &gt; 0);
            assert IOStatus.check(n);
        }
    }
}
</code></pre><ul>
<li>IOUtil.read</li>
<li><p>static int read(FileDescriptor fd, ByteBuffer dst, long position,</p>
<pre><code>          NativeDispatcher nd) IOException {
</code></pre><p>  if (dst.isReadOnly())</p>
<pre><code>  throw new IllegalArgumentException(&quot;Read-only buffer&quot;);
</code></pre><p>  if (dst instanceof DirectBuffer)</p>
<pre><code>  return readIntoNativeBuffer(fd, dst, position, nd);
</code></pre><p>  // Substitute a native buffer
  ByteBuffer bb = Util.getTemporaryDirectBuffer(dst.remaining());
  try {</p>
<pre><code>  int n = readIntoNativeBuffer(fd, bb, position, nd);
  bb.flip();
  if (n &gt; 0)
      dst.put(bb);
  return n;
</code></pre><p>  } finally {</p>
<pre><code>  Util.offerFirstTemporaryDirectBuffer(bb);
</code></pre><p>  }
}</p>
</li>
<li>&#x901A;&#x8FC7;&#x4E0A;&#x8FF0;&#x5B9E;&#x73B0;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x57FA;&#x4E8E;channel&#x7684;&#x6587;&#x4EF6;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A; </li>
<li>1&#x3001;&#x7533;&#x8BF7;&#x4E00;&#x5757;&#x548C;&#x7F13;&#x5B58;&#x540C;&#x5927;&#x5C0F;&#x7684;DirectByteBuffer bb&#x3002; </li>
<li>2&#x3001;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5230;&#x7F13;&#x5B58;bb&#xFF0C;&#x5E95;&#x5C42;&#x7531;NativeDispatcher&#x7684;read&#x5B9E;&#x73B0;&#x3002; </li>
<li>3&#x3001;&#x628A;bb&#x7684;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x5230;dst&#xFF08;&#x7528;&#x6237;&#x5B9A;&#x4E49;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x5728;jvm&#x4E2D;&#x5206;&#x914D;&#x5185;&#x5B58;)&#x3002; </li>
<li>read&#x65B9;&#x6CD5;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x590D;&#x5236;&#x4E86;&#x4E24;&#x6B21;&#x3002;</li>
</ul>
<h4 id="write"><a name="write" class="plugin-anchor" href="#write"><i class="fa fa-link" aria-hidden="true"></i></a>write</h4>
<pre><code>public int write(ByteBuffer src) throws IOException {
    ensureOpen();
    if (!writable)
        throw new NonWritableChannelException();
    synchronized (positionLock) {
        int n = 0;
        int ti = -1;
        try {
            begin();
            ti = threads.add();
            if (!isOpen())
                return 0;
            do {
                n = IOUtil.write(fd, src, -1, nd);
            } while ((n == IOStatus.INTERRUPTED) &amp;&amp; isOpen());
            return IOStatus.normalize(n);
        } finally {
            threads.remove(ti);
            end(n &gt; 0);
            assert IOStatus.check(n);
        }
    }
}
</code></pre><ul>
<li>IOUtil.write</li>
<li>static int write(FileDescriptor fd, ByteBuffer src, long position,<pre><code>           NativeDispatcher nd) throws IOException {
</code></pre>  if (src instanceof DirectBuffer)<pre><code>  return writeFromNativeBuffer(fd, src, position, nd);
</code></pre>  // Substitute a native buffer
  int pos = src.position();
  int lim = src.limit();
  assert (pos &lt;= lim);
  int rem = (pos &lt;= lim ? lim - pos : 0);
  ByteBuffer bb = Util.getTemporaryDirectBuffer(rem);
  try {<pre><code>  bb.put(src);
  bb.flip();
  // Do not update src until we see how many bytes were written
  src.position(pos);
  int n = writeFromNativeBuffer(fd, bb, position, nd);
  if (n &gt; 0) {
      // now update src
      src.position(pos + n);
  }
  return n;
</code></pre>  } finally {<pre><code>  Util.offerFirstTemporaryDirectBuffer(bb);
</code></pre>  }
}</li>
<li>&#x57FA;&#x4E8E;channel&#x7684;&#x6587;&#x4EF6;&#x6570;&#x636E;&#x5199;&#x5165;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A; </li>
<li>1&#x3001;&#x7533;&#x8BF7;&#x4E00;&#x5757;DirectByteBuffer&#xFF0C;bb&#x5927;&#x5C0F;&#x4E3A;byteBuffer&#x4E2D;&#x7684;limit - position&#x3002; </li>
<li>2&#x3001;&#x590D;&#x5236;byteBuffer&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5230;bb&#x4E2D;&#x3002; </li>
<li>3&#x3001;&#x628A;&#x6570;&#x636E;&#x4ECE;bb&#x4E2D;&#x5199;&#x5165;&#x5230;&#x6587;&#x4EF6;&#xFF0C;&#x5E95;&#x5C42;&#x7531;NativeDispatcher&#x7684;write&#x5B9E;&#x73B0;&#xFF0C;&#x5177;&#x4F53;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<pre><code>private static int writeFromNativeBuffer(FileDescriptor fd,
                                         ByteBuffer bb, long position, NativeDispatcher nd)
        throws IOException {
    int pos = bb.position();
    int lim = bb.limit();
    assert (pos &lt;= lim);
    int rem = (pos &lt;= lim ? lim - pos : 0);

    int written = 0;
    if (rem == 0)
        return 0;
    if (position != -1) {
        written = nd.pwrite(fd,
                ((DirectBuffer) bb).address() + pos,
                rem, position);
    } else {
        written = nd.write(fd, ((DirectBuffer) bb).address() + pos, rem);
    }
    if (written &gt; 0)
        bb.position(pos + written);
    return written;
}
</code></pre><ul>
<li>write&#x65B9;&#x6CD5;&#x4E5F;&#x5BFC;&#x81F4;&#x4E86;&#x6570;&#x636E;&#x590D;&#x5236;&#x4E86;&#x4E24;&#x6B21;&#x3002;</li>
<li></li>
</ul>
<h3 id="serversocketchannel"><a name="serversocketchannel" class="plugin-anchor" href="#serversocketchannel"><i class="fa fa-link" aria-hidden="true"></i></a>ServerSocketChannel</h3>
<ul>
<li>&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x662F;ServerSocketChannelImpl&#xFF0C;&#x540C;&#x6837;&#x662F;&#x95ED;&#x6E90;&#x7684;&#x3002;<h4 id="open"><a name="open" class="plugin-anchor" href="#open"><i class="fa fa-link" aria-hidden="true"></i></a>open</h4>
</li>
</ul>
<pre><code>public static ServerSocketChannel open() throws IOException {
    return SelectorProvider.provider().openServerSocketChannel();
}
</code></pre><ul>
<li>SelectorProvider.provider()&#x65B9;&#x6CD5;&#x5728;windows&#x5E73;&#x53F0;&#x4E0B;&#x8FD4;&#x56DE;&#x7684;&#x662F;SelectorProvider &#x7684;&#x5B9E;&#x73B0;&#x7C7B; WindowsSelectorProvider&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</li>
<li>WindowsSelectorProvider&#x7C7B;&#x7684;&#x76F4;&#x63A5;&#x7236;&#x7C7B;&#x4E3A;SelectorProviderImpl&#xFF1B;</li>
<li><p>SelectorProviderImpl &#x7684;&#x76F4;&#x63A5;&#x7236;&#x7C7B;&#x662F; SelectorProvider&#x3002;</p>
</li>
<li><p>SelectorProviderImpl# openServerSocketChannel</p>
</li>
</ul>
<pre><code>public ServerSocketChannel openServerSocketChannel() throws IOException {
    return new ServerSocketChannelImpl(this);
}
</code></pre><pre><code>- ServerSocketChannelImpl(SelectorProvider var1) throws IOException {
super(var1);
this.fd = Net.serverSocket(true);
this.fdVal = IOUtil.fdVal(this.fd);
this.state = 0;
</code></pre><p>}</p>
<pre><code>- super(var1)&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x7236;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;
</code></pre><ul>
<li><p>protected AbstractSelectableChannel(SelectorProvider provider) {
  this.provider = provider;
}</p>
</li>
<li><p>Net#serverSocket &#x521B;&#x5EFA;&#x4E00;&#x4E2A;FileDescriptor</p>
</li>
<li><p>static FileDescriptor serverSocket(boolean stream) {
  return IOUtil.newFD(socket0(isIPv6Available(), stream, true, fastLoopback));
}</p>
</li>
<li></li>
</ul>
<h4 id="bind"><a name="bind" class="plugin-anchor" href="#bind"><i class="fa fa-link" aria-hidden="true"></i></a>bind</h4>
<pre><code>public ServerSocketChannel bind(SocketAddress local, int backlog) throws IOException {
    synchronized (lock) {
        if (!isOpen())
            throw new ClosedChannelException();
        if (isBound())
            throw new AlreadyBoundException();
        InetSocketAddress isa = (local == null) ? new InetSocketAddress(0) :
            Net.checkAddress(local);
        SecurityManager sm = System.getSecurityManager();
        if (sm != null)
            sm.checkListen(isa.getPort());
        NetHooks.beforeTcpBind(fd, isa.getAddress(), isa.getPort());
        Net.bind(fd, isa.getAddress(), isa.getPort());
        Net.listen(fd, backlog &lt; 1 ? 50 : backlog);
        synchronized (stateLock) {
            localAddress = Net.localAddress(fd);
        }
    }
    return this;
}
</code></pre><ul>
<li><h4 id="register"><a name="register" class="plugin-anchor" href="#register"><i class="fa fa-link" aria-hidden="true"></i></a>register</h4>
</li>
<li>Selector&#x662F;&#x901A;&#x8FC7;Selector.open&#x65B9;&#x6CD5;&#x83B7;&#x5F97;&#x7684;&#x3002;</li>
<li>&#x5C06;&#x8FD9;&#x4E2A;&#x901A;&#x9053;channel&#x6CE8;&#x518C;&#x5230;&#x6307;&#x5B9A;&#x7684;selector&#x4E2D;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;SelectionKey&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x3002;</li>
<li>register&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5728;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x4E0A;&#x7684;&#x903B;&#x8F91;&#x6709;&#x4EE5;&#x4E0B;&#x56DB;&#x70B9;&#xFF1A;</li>
<li>1&#x3001;&#x9996;&#x5148;&#x68C0;&#x67E5;&#x901A;&#x9053;channel&#x662F;&#x5426;&#x662F;&#x6253;&#x5F00;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x6253;&#x5F00;&#x7684;&#xFF0C;&#x5219;&#x629B;&#x5F02;&#x5E38;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x6253;&#x5F00;&#x7684;&#xFF0C;&#x5219;&#x8FDB;&#x884C; 2&#x3002;</li>
<li>2&#x3001;&#x68C0;&#x67E5;&#x6307;&#x5B9A;&#x7684;interest&#x96C6;&#x5408;&#x662F;&#x5426;&#x662F;&#x6709;&#x6548;&#x7684;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6548;&#xFF0C;&#x5219;&#x629B;&#x5F02;&#x5E38;&#x3002;&#x5426;&#x5219;&#x8FDB;&#x884C; 3&#x3002;&#x8FD9;&#x91CC;&#x8981;&#x7279;&#x522B;&#x5F3A;&#x8C03;&#x4E00;&#x4E0B;&#xFF1A;&#x5BF9;&#x4E8E;ServerSocketChannel&#x4EC5;&#x4EC5;&#x652F;&#x6301;&#x201D;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x201D;&#xFF0C;&#x56E0;&#x6B64;interest&#x96C6;&#x5408;ops&#x6EE1;&#x8DB3;ops&amp;~sectionKey.OP_ACCEPT!=0,&#x5373;&#x5BF9;&#x4E8E;ServerSocketChannel&#x6CE8;&#x518C;&#x5230;Selector&#x4E2D;&#x65F6;&#x7684;&#x4E8B;&#x4EF6;&#x53EA;&#x80FD;&#x5305;&#x62EC;SelectionKey.OP_ACCEPT&#x3002;</li>
<li>3&#x3001;&#x5BF9;&#x901A;&#x9053;&#x8FDB;&#x884C;&#x4E86;&#x963B;&#x585E;&#x6A21;&#x5F0F;&#x7684;&#x68C0;&#x67E5;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x963B;&#x585E;&#x6A21;&#x5F0F;&#xFF0C;&#x5219;&#x629B;&#x5F02;&#x5E38;&#xFF0C;&#x5426;&#x5219;&#x8FDB;&#x884C;4.</li>
<li><p>4&#x3001;&#x5F97;&#x5230;&#x5F53;&#x524D;&#x901A;&#x9053;&#x5728;&#x6307;&#x5B9A;Selector&#x4E0A;&#x7684;SelectionKey&#xFF0C;&#x5047;&#x8BBE;&#x7ED3;&#x679C;&#x7528;k&#x8868;&#x793A;&#x3002;&#x4E0B;&#x9762;&#x5BF9;k&#x662F;&#x5426;&#x4E3A;null&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;&#x3002;&#x5982;&#x679C;k&#x4E0D;&#x4E3A;null&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x6B64;&#x901A;&#x9053;channel&#x5DF2;&#x7ECF;&#x5728;Selector&#x4E0A;&#x6CE8;&#x518C;&#x8FC7;&#x4E86;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x5C06;&#x6307;&#x5B9A;&#x7684;ops&#x6DFB;&#x52A0;&#x8FDB;SelectionKey&#x4E2D;&#x5373;&#x53EF;&#x3002;&#x5982;&#x679C;k&#x4E3A;null,&#x5219;&#x8BF4;&#x660E;&#x6B64;&#x901A;&#x9053;&#x8FD8;&#x6CA1;&#x6709;&#x5728;Selector&#x4E0A;&#x6CE8;&#x518C;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5148;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#xFF0C;&#x7136;&#x540E;&#x4E3A;&#x5176;&#x5BF9;&#x5E94;&#x7684;SelectionKey&#x8BBE;&#x7F6E;&#x7ED9;&#x5B9A;&#x503C;ops&#x3002;</p>
</li>
<li><p>&#x4E0E;Selector&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;Channel&#x5FC5;&#x987B;&#x5904;&#x4E8E;&#x975E;&#x963B;&#x585E;&#x6A21;&#x5F0F;&#x4E0B;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x4E0D;&#x80FD;&#x5C06;FileChannel&#x4E0E;Selector&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;FileChannel&#x4E0D;&#x80FD;&#x5207;&#x6362;&#x5230;&#x975E;&#x963B;&#x585E;&#x6A21;&#x5F0F;&#x3002;&#x800C;&#x5957;&#x63A5;&#x5B57;&#x901A;&#x9053;&#x90FD;&#x53EF;&#x4EE5;&#x3002;</p>
</li>
</ul>
<pre><code>public final SelectionKey register(Selector sel, int ops,
                                   Object att)
    throws ClosedChannelException
{
    synchronized (regLock) {
        if (!isOpen())
            throw new ClosedChannelException();
        if ((ops &amp; ~validOps()) != 0)
            throw new IllegalArgumentException();
        if (blocking)
            throw new IllegalBlockingModeException();
</code></pre><ul>
<li>// &#x5F97;&#x5230;&#x5F53;&#x524D;&#x901A;&#x9053;&#x5728;&#x6307;&#x5B9A;Selector&#x4E0A;&#x7684;SelectionKey&#xFF08;&#x590D;&#x5408;&#x4E8B;&#x4EF6;)</li>
<li>SelectionKey k = findKey(sel);</li>
<li>&#x5982;&#x679C;k&#x4E0D;&#x4E3A;null&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x6B64;&#x901A;&#x9053;&#x5DF2;&#x7ECF;&#x5728;Selector&#x4E0A;&#x6CE8;&#x518C;&#x8FC7;&#x4E86;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x5C06;&#x6307;&#x5B9A;&#x7684;ops&#x6DFB;&#x52A0;&#x8FDB;SelectionKey&#x4E2D;&#x5373;&#x53EF;&#x3002;</li>
<li>&#x5982;&#x679C;k&#x4E3A;null,&#x5219;&#x8BF4;&#x660E;&#x6B64;&#x901A;&#x9053;&#x8FD8;&#x6CA1;&#x6709;&#x5728;Selector&#x4E0A;&#x6CE8;&#x518C;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5148;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#xFF0C;&#x7136;&#x540E;&#x6DFB;&#x52A0;SelectionKey&#x3002; <pre><code>  if (k != null) {
      k.interestOps(ops);
      k.attach(att);
  }
  if (k == null) {
      // New registration
      synchronized (keyLock) {
          if (!isOpen())
              throw new ClosedChannelException();
          k = ((AbstractSelector)sel).register(this, ops, att);
          addKey(k);
      }
  }
  return k;
</code></pre>  }</li>
</ul>
<pre><code>private SelectionKey findKey(Selector sel) {
    synchronized (keyLock) {
        if (keys == null)
            return null;
        for (int i = 0; i &lt; keys.length; i++)
            if ((keys[i] != null) &amp;&amp; (keys[i].selector() == sel))
                return keys[i];
        return null;
    }
}
</code></pre><ul>
<li><h3 id="selector&#xFF08;&#x5982;&#x4F55;&#x5B9E;&#x73B0;channel&#x591A;&#x8DEF;&#x590D;&#x7528;"><a name="selector&#xFF08;&#x5982;&#x4F55;&#x5B9E;&#x73B0;channel&#x591A;&#x8DEF;&#x590D;&#x7528;" class="plugin-anchor" href="#selector&#xFF08;&#x5982;&#x4F55;&#x5B9E;&#x73B0;channel&#x591A;&#x8DEF;&#x590D;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>Selector&#xFF08;&#x5982;&#x4F55;&#x5B9E;&#x73B0;Channel&#x591A;&#x8DEF;&#x590D;&#x7528;)</h3>
</li>
<li><p>SocketChannel&#x3001;ServerSocketChannel&#x548C;Selector&#x7684;&#x5B9E;&#x4F8B;&#x521D;&#x59CB;&#x5316;&#x90FD;&#x901A;&#x8FC7;SelectorProvider&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x4E2D;Selector&#x662F;&#x6574;&#x4E2A;NIO Socket&#x7684;&#x6838;&#x5FC3;&#x5B9E;&#x73B0;&#x3002;</p>
</li>
<li>SelectorProvider&#x5728;windows&#x548C;linux&#x4E0B;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;provider&#x65B9;&#x6CD5;&#x4F1A;&#x8FD4;&#x56DE;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x3002;<h4 id="&#x6210;&#x5458;&#x53D8;&#x91CF;"><a name="&#x6210;&#x5458;&#x53D8;&#x91CF;" class="plugin-anchor" href="#&#x6210;&#x5458;&#x53D8;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6210;&#x5458;&#x53D8;&#x91CF;</h4>
1.- final class WindowsSelectorImpl extends SelectorImpl<br>2.- {<br>3.<pre><code>  private final int INIT_CAP = 8;//&#x9009;&#x62E9;key&#x96C6;&#x5408;&#xFF0C;key&#x5305;&#x88C5;&#x96C6;&#x5408;&#x521D;&#x59CB;&#x5316;&#x5BB9;&#x91CF;
</code></pre></li>
</ul>
<p>4.</p>
<pre><code>    private static final int MAX_SELECTABLE_FDS = 1024;//&#x6700;&#x5927;&#x9009;&#x62E9;key&#x6570;&#x91CF;
</code></pre><p>5.</p>
<pre><code>    private SelectionKeyImpl channelArray[];//&#x9009;&#x62E9;&#x5668;&#x5173;&#x8054;&#x901A;&#x9053;&#x96C6;&#x5408;
</code></pre><p>6.</p>
<pre><code>    private PollArrayWrapper pollWrapper;//&#x5B58;&#x653E;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x5BF9;&#x8C61;&#xFF08;&#x9009;&#x62E9;key&#xFF0C;&#x5524;&#x9192;&#x7BA1;&#x9053;&#x7684;source&#x4E0E;sink&#x901A;&#x9053;)&#x7684;&#x96C6;&#x5408;
</code></pre><p>7.</p>
<pre><code>    private int totalChannels;//&#x6CE8;&#x518C;&#x5230;&#x9009;&#x62E9;&#x7684;&#x901A;&#x9053;&#x6570;&#x91CF;
</code></pre><p>8.</p>
<pre><code>    private int threadsCount;//&#x9009;&#x62E9;&#x7EBF;&#x7A0B;&#x6570;
</code></pre><p>9.</p>
<pre><code>    private final List threads = new ArrayList();//&#x9009;&#x62E9;&#x64CD;&#x4F5C;&#x7EBF;&#x7A0B;&#x96C6;&#x5408;
</code></pre><p>10.</p>
<pre><code>    private final Pipe wakeupPipe = Pipe.open();//&#x5524;&#x9192;&#x7B49;&#x5F85;&#x9009;&#x62E9;&#x64CD;&#x4F5C;&#x7684;&#x7BA1;&#x9053;
</code></pre><p>11.</p>
<pre><code>    private final int wakeupSourceFd;//&#x5524;&#x9192;&#x7BA1;&#x9053;&#x6E90;&#x901A;&#x9053;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;
</code></pre><p>12.</p>
<pre><code>    private final int wakeupSinkFd;//&#x5524;&#x9192;&#x7BA1;&#x9053;sink&#x901A;&#x9053;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;
</code></pre><p>13.</p>
<pre><code>    private Object closeLock;//&#x9009;&#x62E9;&#x5668;&#x5173;&#x95ED;&#x540C;&#x6B65;&#x9501;
</code></pre><p>14.</p>
<pre><code>    private final FdMap fdMap = new FdMap();//&#x5B58;&#x653E;&#x9009;&#x62E9;key&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x4E0E;&#x9009;&#x62E9;key&#x6620;&#x5C04;&#x5173;&#x7CFB;&#x7684;Map
</code></pre><p>15.</p>
<pre><code>    private final SubSelector subSelector = new SubSelector();//&#x5B50;&#x9009;&#x62E9;&#x5668;
</code></pre><p>16.</p>
<pre><code>    private long timeout;//&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5177;&#x4F53;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF0C;&#x73B0;&#x5728;&#x8FD8;&#x6CA1;&#x660E;&#x767D;&#xFF0C;&#x5728;&#x540E;&#x9762;&#x5728;&#x770B;
</code></pre><p>17.</p>
<pre><code>    private final Object interruptLock = new Object();//&#x4E2D;&#x65AD;&#x540C;&#x6B65;&#x9501;&#xFF0C;&#x5728;&#x5524;&#x9192;&#x9009;&#x62E9;&#x64CD;&#x4F5C;&#x7EBF;&#x7A0B;&#x65F6;&#xFF0C;&#x7528;&#x4E8E;&#x540C;&#x6B65;
</code></pre><p>18.</p>
<pre><code>    private volatile boolean interruptTriggered;//&#x662F;&#x5426;&#x5524;&#x9192;&#x7B49;&#x5F85;&#x9009;&#x62E9;&#x64CD;&#x7684;&#x7EBF;&#x7A0B;
</code></pre><p>19.</p>
<pre><code>    private final StartLock startLock = new StartLock();//&#x9009;&#x62E9;&#x64CD;&#x4F5C;&#x5F00;&#x59CB;&#x9501;
</code></pre><p>20.</p>
<pre><code>    private final FinishLock finishLock = new FinishLock();//&#x9009;&#x62E9;&#x64CD;&#x4F5C;&#x7ED3;&#x675F;&#x9501;
</code></pre><p>21.</p>
<pre><code>    private long updateCount;//&#x66F4;&#x65B0;&#x6570;&#x91CF;&#xFF0C;&#x5177;&#x4F53;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#xFF0C;&#x73B0;&#x5728;&#x8FD8;&#x6CA1;&#x660E;&#x767D;&#xFF0C;&#x5728;&#x540E;&#x9762;&#x5728;&#x770B;
</code></pre><p>22.-     static final boolean $assertionsDisabled = !sun/nio/ch/WindowsSelectorImpl.desiredAssertionStatus();<br>23.-     static<br>24.-     {<br>25.-         //&#x52A0;&#x8F7D;nio&#xFF0C;net&#x8D44;&#x6E90;&#x5E93;<br>26.-         Util.load();<br>27.-     }<br>28.- }  </p>
<h4 id="open"><a name="open" class="plugin-anchor" href="#open"><i class="fa fa-link" aria-hidden="true"></i></a>open</h4>
<pre><code>public static Selector open() throws IOException {
    return SelectorProvider.provider().openSelector();
}
</code></pre><ul>
<li>WindowsSelectorProvider#openSelector</li>
</ul>
<pre><code>public AbstractSelector openSelector() throws IOException {
    return new WindowsSelectorImpl(this);
}
</code></pre><ul>
<li><p>&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;wakeupPipe</p>
<ul>
<li>WindowsSelectorImpl(SelectorProvider var1) throws IOException {
super(var1);
this.wakeupSourceFd = ((SelChImpl)this.wakeupPipe.source()).getFDVal();
SinkChannelImpl var2 = (SinkChannelImpl)this.wakeupPipe.sink();
var2.sc.socket().setTcpNoDelay(true);
this.wakeupSinkFd = var2.getFDVal();
this.pollWrapper.addWakeupSocket(this.wakeupSourceFd, 0);
}</li>
</ul>
</li>
<li><p>SelectorImpl#register</p>
</li>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;ServerSocketChannel&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x590D;&#x5408;&#x4E8B;&#x4EF6;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x662F;&#x9644;&#x4EF6;&#x3002;</li>
<li>1&#x3001;&#x4EE5;&#x5F53;&#x524D;channel&#x548C;selector&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x521D;&#x59CB;&#x5316;SelectionKeyImpl &#x5BF9;&#x8C61;selectionKeyImpl &#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x9644;&#x4EF6;attachment&#x3002; </li>
<li>2&#x3001;&#x5982;&#x679C;&#x5F53;&#x524D;channel&#x7684;&#x6570;&#x91CF;totalChannels&#x7B49;&#x4E8E;SelectionKeyImpl&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#xFF0C;&#x5BF9;SelectionKeyImpl&#x6570;&#x7EC4;&#x548C;pollWrapper&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x3002; </li>
<li>3&#x3001;&#x5982;&#x679C;totalChannels % MAXSELECTABLEFDS == 0&#xFF0C;&#x5219;&#x591A;&#x5F00;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5904;&#x7406;selector&#x3002; </li>
<li>4&#x3001;pollWrapper.addEntry&#x5C06;&#x628A;selectionKeyImpl&#x4E2D;&#x7684;socket&#x53E5;&#x67C4;&#x6DFB;&#x52A0;&#x5230;&#x5BF9;&#x5E94;&#x7684;pollfd&#x3002; </li>
<li>5&#x3001;k.interestOps(ops)&#x65B9;&#x6CD5;&#x6700;&#x7EC8;&#x4E5F;&#x4F1A;&#x628A;event&#x6DFB;&#x52A0;&#x5230;&#x5BF9;&#x5E94;&#x7684;pollfd&#x3002;</li>
<li>&#x6240;&#x4EE5;&#xFF0C;&#x4E0D;&#x7BA1;serverSocketChannel&#xFF0C;&#x8FD8;&#x662F;socketChannel&#xFF0C;&#x5728;selector&#x6CE8;&#x518C;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x6700;&#x7EC8;&#x90FD;&#x4FDD;&#x5B58;&#x5728;pollArray&#x4E2D;&#x3002;</li>
</ul>
<pre><code>protected final SelectionKey register(AbstractSelectableChannel ch,
                                      int ops,
                                      Object attachment) {
    if (!(ch instanceof SelChImpl))
        throw new IllegalSelectorException();
    SelectionKeyImpl k = new SelectionKeyImpl((SelChImpl)ch, this);
    k.attach(attachment);
    synchronized (publicKeys) {
        implRegister(k);
    }
    k.interestOps(ops);
    return k;
}
</code></pre><ul>
<li>WindowsSelectorImpl#implRegister</li>
<li>protected void implRegister(SelectionKeyImpl ski) {
  synchronized (closeLock) {<pre><code>  if (pollWrapper == null)
      throw new ClosedSelectorException();
  growIfNeeded();
  channelArray[totalChannels] = ski;
  ski.setIndex(totalChannels);
  fdMap.put(ski);
  keys.add(ski);
  pollWrapper.addEntry(totalChannels, ski);
  totalChannels++;
</code></pre>  }
}</li>
</ul>
<h4 id="select&#xFF08;&#x8FD4;&#x56DE;&#x6709;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;selectionkey&#x6570;&#x91CF;"><a name="select&#xFF08;&#x8FD4;&#x56DE;&#x6709;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;selectionkey&#x6570;&#x91CF;" class="plugin-anchor" href="#select&#xFF08;&#x8FD4;&#x56DE;&#x6709;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;selectionkey&#x6570;&#x91CF;"><i class="fa fa-link" aria-hidden="true"></i></a>select&#xFF08;&#x8FD4;&#x56DE;&#x6709;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;SelectionKey&#x6570;&#x91CF;)</h4>
<ul>
<li>var1&#x662F;timeout&#x65F6;&#x95F4;&#xFF0C;&#x65E0;&#x53C2;&#x6570;&#x7684;&#x7248;&#x672C;&#x5BF9;&#x5E94;&#x7684;timeout&#x4E3A;0.</li>
<li>select(long timeout)&#x548C;select()&#x4E00;&#x6837;&#xFF0C;&#x9664;&#x4E86;&#x6700;&#x957F;&#x4F1A;&#x963B;&#x585E;timeout&#x6BEB;&#x79D2;(&#x53C2;&#x6570;)&#x3002;</li>
<li>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5E76;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x7CBE;&#x786E;&#x65F6;&#x95F4;&#x7684;&#x4FDD;&#x8BC1;&#xFF0C;&#x548C;&#x5F53;&#x6267;&#x884C;wait(long timeout)&#x65B9;&#x6CD5;&#x65F6;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x4F1A;&#x5EF6;&#x65F6;timeout&#x9053;&#x7406;&#x4E00;&#x6837;&#x3002;</li>
<li>&#x8FD9;&#x91CC;&#x7684;timeout&#x8BF4;&#x660E;&#x5982;&#x4E0B;&#xFF1A;</li>
<li>&#x5982;&#x679C; timeout&#x4E3A;&#x6B63;&#xFF0C;&#x5219;select(long timeout)&#x5728;&#x7B49;&#x5F85;&#x6709;&#x901A;&#x9053;&#x88AB;&#x9009;&#x62E9;&#x65F6;&#x81F3;&#x591A;&#x4F1A;&#x963B;&#x585E;timeout&#x6BEB;&#x79D2;</li>
<li>&#x5982;&#x679C;timeout&#x4E3A;&#x96F6;&#xFF0C;&#x5219;&#x6C38;&#x8FDC;&#x963B;&#x585E;&#x76F4;&#x5230;&#x6709;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x901A;&#x9053;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#x3002;</li>
<li>timeout&#x4E0D;&#x80FD;&#x4E3A;&#x8D1F;&#x6570;&#x3002;</li>
</ul>
<pre><code>public int select(long timeout)
    throws IOException
{
    if (timeout &lt; 0)
        throw new IllegalArgumentException(&quot;Negative timeout&quot;);
    return lockAndDoSelect((timeout == 0) ? -1 : timeout);
}
</code></pre><ul>
<li>selectNow&#xFF08;&#x975E;&#x963B;&#x585E;&#x7248;&#x672C;)</li>
</ul>
<pre><code>public int selectNow() throws IOException {
    return this.lockAndDoSelect(0L);
}
</code></pre><pre><code>private int lockAndDoSelect(long timeout) throws IOException {
    synchronized (this) {
        if (!isOpen())
            throw new ClosedSelectorException();
        synchronized (publicKeys) {
            synchronized (publicSelectedKeys) {
                return doSelect(timeout);
            }
        }
    }
}
</code></pre><ul>
<li>WindowsSelectorImpl#doSelect</li>
<li><p>protected int doSelect(long timeout) throws IOException {
  if (channelArray == null)</p>
<pre><code>  throw new ClosedSelectorException();
</code></pre><p>  this.timeout = timeout; // set selector timeout
  processDeregisterQueue();
  if (interruptTriggered) {</p>
<pre><code>  resetWakeupSocket();
  return 0;
</code></pre><p>  }
  // Calculate number of helper threads needed for poll. If necessary
  // threads are created here and start waiting on startLock
  adjustThreadsCount();
  finishLock.reset(); // reset finishLock
  // Wakeup helper threads, waiting on startLock, so they start polling.
  // Redundant threads will exit here after wakeup.
  startLock.startThreads();
  // do polling in the main thread. Main thread is responsible for
  // first MAX_SELECTABLE_FDS entries in pollArray.
  try {</p>
<pre><code>  begin();
  try {
      subSelector.poll();
  } catch (IOException e) {
      finishLock.setException(e); // Save this exception
  }
  // Main thread is out of poll(). Wakeup others and wait for them
  if (threads.size() &gt; 0)
      finishLock.waitForHelperThreads();
} finally {
    end();
}
</code></pre><p>  // Done with poll(). Set wakeupSocket to nonsignaled  for the next run.
  finishLock.checkForException();
  processDeregisterQueue();
  int updated = updateSelectedKeys();
  // Done with poll(). Set wakeupSocket to nonsignaled  for the next run.
  resetWakeupSocket();
  return updated;
}</p>
</li>
<li><p>&#x5176;&#x4E2D; subSelector.poll() &#x662F;select&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x7531;native&#x51FD;&#x6570;poll0&#x5B9E;&#x73B0;&#xFF0C;readFds&#x3001;writeFds &#x548C;exceptFds&#x6570;&#x7EC4;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x5E95;&#x5C42;select&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6570;&#x7EC4;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x90FD;&#x662F;&#x5B58;&#x653E;&#x53D1;&#x751F;&#x4E8B;&#x4EF6;&#x7684;socket&#x7684;&#x603B;&#x6570;&#xFF0C;&#x5176;&#x4F59;&#x4F4D;&#x7F6E;&#x5B58;&#x653E;&#x53D1;&#x751F;&#x4E8B;&#x4EF6;&#x7684;socket&#x53E5;&#x67C4;fd&#x3002;</p>
</li>
</ul>
<pre><code>private int poll() throws IOException {
    return this.poll0(WindowsSelectorImpl.this.pollWrapper.pollArrayAddress, Math.min(WindowsSelectorImpl.this.totalChannels, 1024), this.readFds, this.writeFds, this.exceptFds, WindowsSelectorImpl.this.timeout);
}
</code></pre><pre><code>private native int poll0(long pollAddress, int numfds,
     int[] readFds, int[] writeFds, int[] exceptFds, long timeout);
</code></pre><ul>
<li>&#x5728;src/windows/native/sun/nio/ch/WindowsSelectorImpl.c&#x4E2D;&#x627E;&#x5230;&#x4E86;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;</li>
<li><h1 id="define-fdsetsize-1024"><a name="define-fdsetsize-1024" class="plugin-anchor" href="#define-fdsetsize-1024"><i class="fa fa-link" aria-hidden="true"></i></a>define FD_SETSIZE 1024</h1>
</li>
</ul>
<pre><code>Java_sun_nio_ch_WindowsSelectorImpl_00024SubSelector_poll0(JNIEnv *env, jobject this,
                                   jlong pollAddress, jint numfds,
                                   jintArray returnReadFds, jintArray returnWriteFds,
                                   jintArray returnExceptFds, jlong timeout)
{
    DWORD result = 0;
    pollfd *fds = (pollfd *) pollAddress;
    int i;
    FD_SET readfds, writefds, exceptfds;
    struct timeval timevalue, *tv;
    static struct timeval zerotime = {0, 0};
    int read_count = 0, write_count = 0, except_count = 0;

#ifdef _WIN64
    int resultbuf[FD_SETSIZE + 1];
#endif

    if (timeout == 0) {
        tv = &amp;zerotime;
    } else if (timeout &lt; 0) {
        tv = NULL;
    } else {
        tv = &amp;timevalue;
        tv-&gt;tv_sec =  (long)(timeout / 1000);
        tv-&gt;tv_usec = (long)((timeout % 1000) * 1000);
    }

    /* Set FD_SET structures required for select */
    for (i = 0; i &lt; numfds; i++) {
        if (fds[i].events &amp; POLLIN) {
           readfds.fd_array[read_count] = fds[i].fd;
           read_count++;
        }
        if (fds[i].events &amp; (POLLOUT | POLLCONN))
        {
           writefds.fd_array[write_count] = fds[i].fd;
           write_count++;
        }
        exceptfds.fd_array[except_count] = fds[i].fd;
        except_count++;
    }

    readfds.fd_count = read_count;
    writefds.fd_count = write_count;
    exceptfds.fd_count = except_count;

    /* Call select */
    if ((result = select(0 , &amp;readfds, &amp;writefds, &amp;exceptfds, tv))
                                                             == SOCKET_ERROR) {
        /* Bad error - this should not happen frequently */
        /* Iterate over sockets and call select() on each separately */
        FD_SET errreadfds, errwritefds, errexceptfds;
        readfds.fd_count = 0;
        writefds.fd_count = 0;
        exceptfds.fd_count = 0;
        for (i = 0; i &lt; numfds; i++) {
            /* prepare select structures for the i-th socket */
            errreadfds.fd_count = 0;
            errwritefds.fd_count = 0;
            if (fds[i].events &amp; POLLIN) {
               errreadfds.fd_array[0] = fds[i].fd;
               errreadfds.fd_count = 1;
            }
            if (fds[i].events &amp; (POLLOUT | POLLCONN))
            {
                errwritefds.fd_array[0] = fds[i].fd;
                errwritefds.fd_count = 1;
            }
            errexceptfds.fd_array[0] = fds[i].fd;
            errexceptfds.fd_count = 1;

            /* call select on the i-th socket */
            if (select(0, &amp;errreadfds, &amp;errwritefds, &amp;errexceptfds, &amp;zerotime)
                                                             == SOCKET_ERROR) {
                /* This socket causes an error. Add it to exceptfds set */
                exceptfds.fd_array[exceptfds.fd_count] = fds[i].fd;
                exceptfds.fd_count++;
            } else {
                /* This socket does not cause an error. Process result */
                if (errreadfds.fd_count == 1) {
                    readfds.fd_array[readfds.fd_count] = fds[i].fd;
                    readfds.fd_count++;
                }
                if (errwritefds.fd_count == 1) {
                    writefds.fd_array[writefds.fd_count] = fds[i].fd;
                    writefds.fd_count++;
                }
                if (errexceptfds.fd_count == 1) {
                    exceptfds.fd_array[exceptfds.fd_count] = fds[i].fd;
                    exceptfds.fd_count++;
                }
            }
        }
    }

    /* Return selected sockets. */
    /* Each Java array consists of sockets count followed by sockets list */

#ifdef _WIN64
    resultbuf[0] = readfds.fd_count;
    for (i = 0; i &lt; (int)readfds.fd_count; i++) {
        resultbuf[i + 1] = (int)readfds.fd_array[i];
    }
    (*env)-&gt;SetIntArrayRegion(env, returnReadFds, 0,
                              readfds.fd_count + 1, resultbuf);

    resultbuf[0] = writefds.fd_count;
    for (i = 0; i &lt; (int)writefds.fd_count; i++) {
        resultbuf[i + 1] = (int)writefds.fd_array[i];
    }
    (*env)-&gt;SetIntArrayRegion(env, returnWriteFds, 0,
                              writefds.fd_count + 1, resultbuf);

    resultbuf[0] = exceptfds.fd_count;
    for (i = 0; i &lt; (int)exceptfds.fd_count; i++) {
        resultbuf[i + 1] = (int)exceptfds.fd_array[i];
    }
    (*env)-&gt;SetIntArrayRegion(env, returnExceptFds, 0,
                              exceptfds.fd_count + 1, resultbuf);
#else
    (*env)-&gt;SetIntArrayRegion(env, returnReadFds, 0,
                              readfds.fd_count + 1, (jint *)&amp;readfds);

    (*env)-&gt;SetIntArrayRegion(env, returnWriteFds, 0,
                              writefds.fd_count + 1, (jint *)&amp;writefds);
    (*env)-&gt;SetIntArrayRegion(env, returnExceptFds, 0,
                              exceptfds.fd_count + 1, (jint *)&amp;exceptfds);
#endif
    return 0;
}
</code></pre><ul>
<li>&#x6267;&#x884C; selector.select() &#xFF0C;poll0&#x51FD;&#x6570;&#x628A;&#x6307;&#x5411;socket&#x53E5;&#x67C4;&#x548C;&#x4E8B;&#x4EF6;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x4F20;&#x7ED9;&#x5E95;&#x5C42;&#x51FD;&#x6570;&#x3002; </li>
<li>1&#x3001;&#x5982;&#x679C;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#x4E8B;&#x4EF6;&#xFF0C;&#x7A0B;&#x5E8F;&#x5C31;&#x963B;&#x585E;&#x5728;select&#x5904;&#xFF0C;&#x5F53;&#x7136;&#x4E0D;&#x4F1A;&#x4E00;&#x76F4;&#x963B;&#x585E;&#xFF0C;&#x56E0;&#x4E3A;epoll&#x5728;timeout&#x65F6;&#x95F4;&#x5185;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4E8B;&#x4EF6;&#xFF0C;&#x4E5F;&#x4F1A;&#x8FD4;&#x56DE;&#xFF1B; </li>
<li>2&#x3001;&#x4E00;&#x65E6;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#xFF0C;poll0&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;&#xFF1B; </li>
<li>3&#x3001;processDeregisterQueue&#x65B9;&#x6CD5;&#x4F1A;&#x6E05;&#x7406;&#x90A3;&#x4E9B;&#x5DF2;&#x7ECF;cancelled&#x7684;SelectionKey&#xFF1B; </li>
<li><p>4&#x3001;updateSelectedKeys&#x65B9;&#x6CD5;&#x7EDF;&#x8BA1;&#x6709;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;SelectionKey&#x6570;&#x91CF;&#xFF0C;&#x5E76;&#x628A;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x53D1;&#x751F;&#x4E8B;&#x4EF6;&#x7684;SelectionKey&#x6DFB;&#x52A0;&#x5230;selectedKeys&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#xFF0C;&#x63D0;&#x4F9B;&#x7ED9;&#x540E;&#x7EED;&#x4F7F;&#x7528;&#x3002;</p>
</li>
<li><p>&#x5982;&#x4F55;&#x5224;&#x65AD;&#x662F;&#x5426;&#x6709;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;?&#xFF08;native)</p>
</li>
<li>poll0()&#x4F1A;&#x76D1;&#x542C;pollWrapper&#x4E2D;&#x7684;FD&#x6709;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x8FDB;&#x51FA;&#xFF0C;&#x8FD9;&#x4F1A;&#x9020;&#x6210;IO&#x963B;&#x585E;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x6570;&#x636E;&#x8BFB;&#x5199;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x3002; </li>
<li>&#x6BD4;&#x5982;&#xFF0C;&#x7531;&#x4E8E;pollWrapper&#x4E2D;&#x4FDD;&#x5B58;&#x7684;&#x4E5F;&#x6709;ServerSocketChannel&#x7684;FD&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x8981;ClientSocket&#x53D1;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x5230;ServerSocket,&#x90A3;&#x4E48;poll0()&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;&#xFF1B; </li>
<li>&#x53C8;&#x7531;&#x4E8E;pollWrapper&#x4E2D;&#x4FDD;&#x5B58;&#x7684;&#x4E5F;&#x6709;pipe&#x7684;write&#x7AEF;&#x7684;FD&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x8981;pipe&#x7684;write&#x7AEF;&#x5411;FD&#x53D1;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x4F1A;&#x9020;&#x6210;poll0()&#x8FD4;&#x56DE;&#xFF1B; </li>
<li><p>&#x5982;&#x679C;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x90FD;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#xFF0C;&#x90A3;&#x4E48;poll0()&#x5C31;&#x4E00;&#x76F4;&#x963B;&#x585E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;selector.select()&#x4F1A;&#x4E00;&#x76F4;&#x963B;&#x585E;&#xFF1B;&#x5982;&#x679C;&#x6709;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#xFF0C;&#x90A3;&#x4E48;selector.select()&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;&#x3002;</p>
</li>
<li><p>&#x5728;&#x65E9;&#x671F;&#x7684;JDK1.4&#x548C;1.5 update10&#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;Selector&#x57FA;&#x4E8E;select/poll&#x6A21;&#x578B;&#x5B9E;&#x73B0;&#xFF0C;&#x662F;&#x57FA;&#x4E8E;IO&#x590D;&#x7528;&#x6280;&#x672F;&#x7684;&#x975E;&#x963B;&#x585E;IO&#xFF0C;&#x4E0D;&#x662F;&#x5F02;&#x6B65;IO&#x3002;&#x5728;JDK1.5 update10&#x548C;linux core2.6&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#xFF0C;sun&#x4F18;&#x5316;&#x4E86;Selctor&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5E95;&#x5C42;&#x4F7F;&#x7528;epoll&#x66FF;&#x6362;&#x4E86;select/poll&#x3002;</p>
</li>
<li>epoll&#x662F;Linux&#x4E0B;&#x7684;&#x4E00;&#x79CD;IO&#x591A;&#x8DEF;&#x590D;&#x7528;&#x6280;&#x672F;&#xFF0C;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x9AD8;&#x6548;&#x7684;&#x5904;&#x7406;&#x6570;&#x4EE5;&#x767E;&#x4E07;&#x8BA1;&#x7684;socket&#x53E5;&#x67C4;&#x3002;</li>
<li>&#x5728;Windows&#x4E0B;&#x662F;IOCP</li>
</ul>
<h4 id="windowsselectorimplwakeup"><a name="windowsselectorimplwakeup" class="plugin-anchor" href="#windowsselectorimplwakeup"><i class="fa fa-link" aria-hidden="true"></i></a>WindowsSelectorImpl.wakeup()</h4>
<pre><code>public Selector wakeup() {
    synchronized (interruptLock) {
        if (!interruptTriggered) {
            setWakeupSocket();
            interruptTriggered = true;
        }
    }
    return this;
}
</code></pre><pre><code>private void setWakeupSocket() {
    setWakeupSocket0(wakeupSinkFd);
}
</code></pre><pre><code>private native void setWakeupSocket0(int wakeupSinkFd);
</code></pre><pre><code>Java_sun_nio_ch_WindowsSelectorImpl_setWakeupSocket0(JNIEnv *env, jclass this,
                                                jint scoutFd)
{
    /* Write one byte into the pipe */
    const char byte = 1;
    send(scoutFd, &amp;byte, 1, 0);
}
</code></pre><ul>
<li><p>&#x8FD9;&#x91CC;&#x5B8C;&#x6210;&#x4E86;&#x5411;&#x6700;&#x5F00;&#x59CB;&#x5EFA;&#x7ACB;&#x7684;pipe&#x7684;sink&#x7AEF;&#x5199;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;source&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x5C31;&#x4F1A;&#x5904;&#x4E8E;&#x5C31;&#x7EEA;&#x72B6;&#x6001;&#xFF0C;poll&#x65B9;&#x6CD5;&#x4F1A;&#x8FD4;&#x56DE;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;select&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x3002;&#xFF08;&#x539F;&#x6765;&#x81EA;&#x5DF1;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;socket&#x94FE;&#x7740;&#x81EA;&#x5DF1;&#x53E6;&#x5916;&#x4E00;&#x4E2A;socket&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x8FD9;&#x4E2A;&#x76EE;&#x7684;)</p>
</li>
<li></li>
</ul>
<h2 id="java-aio-&#x6E90;&#x7801;"><a name="java-aio-&#x6E90;&#x7801;" class="plugin-anchor" href="#java-aio-&#x6E90;&#x7801;"><i class="fa fa-link" aria-hidden="true"></i></a>Java AIO &#x6E90;&#x7801;</h2>
<h3 id="asynchronousfilechannle&#xFF08;aio&#x57FA;&#x4E8E;completionhandler&#x56DE;&#x8C03;"><a name="asynchronousfilechannle&#xFF08;aio&#x57FA;&#x4E8E;completionhandler&#x56DE;&#x8C03;" class="plugin-anchor" href="#asynchronousfilechannle&#xFF08;aio&#x57FA;&#x4E8E;completionhandler&#x56DE;&#x8C03;"><i class="fa fa-link" aria-hidden="true"></i></a>AsynchronousFileChannle&#xFF08;AIO,&#x57FA;&#x4E8E;CompletionHandler&#x56DE;&#x8C03;)</h3>
<ul>
<li>&#x5728;Java 7&#x4E2D;&#xFF0C;AsynchronousFileChannel&#x88AB;&#x6DFB;&#x52A0;&#x5230;Java NIO&#x3002;AsynchronousFileChannel&#x4F7F;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x5F02;&#x6B65;&#x5730;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x6587;&#x4EF6;&#x6210;&#x4E3A;&#x53EF;&#x80FD;&#x3002;<h4 id="open"><a name="open" class="plugin-anchor" href="#open"><i class="fa fa-link" aria-hidden="true"></i></a>open</h4>
</li>
<li><p>Path path = Paths.get(&quot;data/test.xml&quot;);</p>
</li>
<li><p>AsynchronousFileChannel fileChannel =</p>
</li>
<li>AsynchronousFileChannel.open(path, StandardOpenOption.READ);</li>
</ul>
<pre><code>public static AsynchronousFileChannel open(Path file,
                                           Set&lt;? extends OpenOption&gt; options,
                                           ExecutorService executor,
                                           FileAttribute&lt;?&gt;... attrs)
    throws IOException
{
    FileSystemProvider provider = file.getFileSystem().provider();
    return provider.newAsynchronousFileChannel(file, options, executor, attrs);
}
</code></pre><ul>
<li>WindowsChannelFactory#newAsynchronousFileChannel</li>
<li><p>static AsynchronousFileChannel newAsynchronousFileChannel(String pathForWindows,</p>
<pre><code>                                                    String pathToCheck,
                                                    Set&lt;? extends OpenOption&gt; options,
                                                    long pSecurityDescriptor,
                                                    ThreadPool pool)
</code></pre><p>  throws IOException
{
  Flags flags = Flags.toFlags(options);</p>
<p>  // Overlapped I/O required
  flags.overlapped = true;</p>
<p>  // default is reading
  if (!flags.read &amp;&amp; !flags.write) {</p>
<pre><code>  flags.read = true;
</code></pre><p>  }</p>
<p>  // validation
  if (flags.append)</p>
<pre><code>  throw new UnsupportedOperationException(&quot;APPEND not allowed&quot;);
</code></pre><p>  // open file for overlapped I/O
  FileDescriptor fdObj;
  try {</p>
<pre><code>  fdObj = open(pathForWindows, pathToCheck, flags, pSecurityDescriptor);
</code></pre><p>  } catch (WindowsException x) {</p>
<pre><code>  x.rethrowAsIOException(pathForWindows);
  return null;
</code></pre><p>  }</p>
<p>  // create the AsynchronousFileChannel
  try {</p>
<pre><code>  return WindowsAsynchronousFileChannelImpl.open(fdObj, flags.read, flags.write, pool);
</code></pre><p>  } catch (IOException x) {</p>
<pre><code>  // IOException is thrown if the file handle cannot be associated
  // with the completion port. All we can do is close the file.
  long handle = fdAccess.getHandle(fdObj);
  CloseHandle(handle);
  throw x;
</code></pre><p>  }</p>
</li>
<li><p>WindowsAsynchronousFileChannelImpl#open</p>
</li>
</ul>
<pre><code>public static AsynchronousFileChannel open(FileDescriptor fdo,
                                           boolean reading,
                                           boolean writing,
                                           ThreadPool pool)
    throws IOException
{
    Iocp iocp;
    boolean isDefaultIocp;
    if (pool == null) {
        iocp = DefaultIocpHolder.defaultIocp;
        isDefaultIocp = true;
    } else {
        iocp = new Iocp(null, pool).start();
        isDefaultIocp = false;
    }
    try {
        return new
            WindowsAsynchronousFileChannelImpl(fdo, reading, writing, iocp, isDefaultIocp);
    } catch (IOException x) {
        // error binding to port so need to close it (if created for this channel)
        if (!isDefaultIocp)
            iocp.implClose();
        throw x;
    }
}
</code></pre><h4 id="read"><a name="read" class="plugin-anchor" href="#read"><i class="fa fa-link" aria-hidden="true"></i></a>read</h4>
<h4 id="write"><a name="write" class="plugin-anchor" href="#write"><i class="fa fa-link" aria-hidden="true"></i></a>write</h4>
<ul>
<li></li>
<li></li>
</ul>
<h2 id="netty-nio"><a name="netty-nio" class="plugin-anchor" href="#netty-nio"><i class="fa fa-link" aria-hidden="true"></i></a>Netty NIO</h2>
<ul>
<li><p>&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x8BED;&#x5883;&#xFF0C;Netty&#x76EE;&#x524D;&#x7684;&#x7248;&#x672C;&#x662F;&#x6CA1;&#x6709;&#x628A;IO&#x64CD;&#x4F5C;&#x4EA4;&#x8FC7;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x5C5E;&#x4E8E;&#x540C;&#x6B65;&#x7684;&#x3002;&#x5982;&#x679C;&#x522B;&#x4EBA;&#x8BF4;Netty&#x662F;&#x5F02;&#x6B65;&#x975E;&#x963B;&#x585E;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x6DF1;&#x7A76;&#xFF0C;&#x90A3;&#x771F;&#x8981;&#x770B;&#x770B;Netty&#x65B0;&#x7684;&#x7248;&#x672C;&#x662F;&#x5426;&#x628A;IO&#x64CD;&#x4F5C;&#x4EA4;&#x8FC7;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5904;&#x7406;&#xFF0C;&#x6216;&#x8005;&#x770B;&#x770B;&#x6709;&#x5426;&#x4F7F;&#x7528;JDK1.7&#x4E2D;&#x7684;AIO API&#xFF0C;&#x5426;&#x5219;&#x4ED6;&#x4EEC;&#x8BF4;&#x7684;&#x5F02;&#x6B65;&#x5176;&#x5B9E;&#x662F;&#x6307;&#x5BA2;&#x6237;&#x7AEF;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;Netty&#x7684;IO&#x64CD;&#x4F5C;API&#x201C;&#x4E0D;&#x505C;&#x987F;&#x7B49;&#x5F85;&#x201D;&#x3002;</p>
</li>
<li><p>&#x5F88;&#x591A;&#x4EBA;&#x6240;&#x8BB2;&#x7684;&#x5F02;&#x6B65;&#x5176;&#x5B9E;&#x6307;&#x7684;&#x662F;&#x7F16;&#x7A0B;&#x6A21;&#x578B;&#x4E0A;&#x7684;&#x5F02;&#x6B65;&#xFF08;&#x5373;&#x56DE;&#x8C03;)&#xFF0C;&#x800C;&#x975E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5F02;&#x6B65;&#x3002;</p>
<h2 id="nio&#x4E0E;epoll"><a name="nio&#x4E0E;epoll" class="plugin-anchor" href="#nio&#x4E0E;epoll"><i class="fa fa-link" aria-hidden="true"></i></a>NIO&#x4E0E;Epoll</h2>
</li>
<li>Linux2.6&#x4E4B;&#x540E;&#x652F;&#x6301;epoll</li>
<li>windows&#x652F;&#x6301;select&#x800C;&#x4E0D;&#x652F;&#x6301;epoll</li>
<li>&#x4E0D;&#x540C;&#x7CFB;&#x7EDF;&#x4E0B;nio&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x5305;&#x62EC;Sunos linux &#x548C;windows</li>
<li>select&#x7684;&#x590D;&#x6742;&#x5EA6;&#x4E3A;O(N)</li>
<li>select&#x6709;&#x6700;&#x5927;fd&#x9650;&#x5236;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1024</li>
<li><p>&#x4FEE;&#x6539;sys/select.h&#x53EF;&#x4EE5;&#x6539;&#x53D8;select&#x7684;fd&#x6570;&#x91CF;&#x9650;&#x5236;</p>
<ul>
<li>epoll&#x7684;&#x4E8B;&#x4EF6;&#x6A21;&#x578B;&#xFF0C;&#x65E0;fd&#x6570;&#x91CF;&#x9650;&#x5236;&#xFF0C;&#x590D;&#x6742;&#x5EA6;O(1),&#x4E0D;&#x9700;&#x8981;&#x904D;&#x5386;fd</li>
</ul>
</li>
<li></li>
</ul>
<h1 id="117-&#x52A8;&#x6001;&#x4EE3;&#x7406;"><a name="117-&#x52A8;&#x6001;&#x4EE3;&#x7406;" class="plugin-anchor" href="#117-&#x52A8;&#x6001;&#x4EE3;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>1.17 &#x52A8;&#x6001;&#x4EE3;&#x7406;</h1>
<ul>
<li>&#x9759;&#x6001;&#x4EE3;&#x7406;&#xFF1A;&#x4EE3;&#x7406;&#x7C7B;&#x662F;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5C31;&#x5B9E;&#x73B0;&#x597D;&#x7684;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4; Java &#x7F16;&#x8BD1;&#x5B8C;&#x6210;&#x540E;&#x4EE3;&#x7406;&#x7C7B;&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x9645;&#x7684; class &#x6587;&#x4EF6;&#x3002;</li>
<li><p>&#x52A8;&#x6001;&#x4EE3;&#x7406;&#xFF1A;&#x4EE3;&#x7406;&#x7C7B;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x751F;&#x6210;&#x7684;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4; Java &#x7F16;&#x8BD1;&#x5B8C;&#x4E4B;&#x540E;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x7684; class &#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x52A8;&#x6001;&#x751F;&#x6210;&#x7684;&#x7C7B;&#x5B57;&#x8282;&#x7801;&#xFF0C;&#x5E76;&#x52A0;&#x8F7D;&#x5230;JVM&#x4E2D;&#x3002;</p>
</li>
<li><p>JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x662F;&#x7531;Java&#x5185;&#x90E8;&#x7684;&#x53CD;&#x5C04;&#x673A;&#x5236;+&#x52A8;&#x6001;&#x751F;&#x6210;&#x5B57;&#x8282;&#x7801;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;cglib&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5E95;&#x5C42;&#x5219;&#x662F;&#x501F;&#x52A9;asm&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x5728;&#x751F;&#x6210;&#x7C7B;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x6BD4;&#x8F83;&#x9AD8;&#x6548;&#xFF0C;&#x800C;asm&#x5728;&#x751F;&#x6210;&#x7C7B;&#x4E4B;&#x540E;&#x7684;&#x76F8;&#x5173;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x6BD4;&#x8F83;&#x9AD8;&#x6548;&#xFF08;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;asm&#x751F;&#x6210;&#x7684;&#x7C7B;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#xFF0C;&#x8FD9;&#x6837;&#x89E3;&#x51B3;asm&#x751F;&#x6210;&#x7C7B;&#x8FC7;&#x7A0B;&#x4F4E;&#x6548;&#x95EE;&#x9898;)&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x70B9;&#x5FC5;&#x987B;&#x6CE8;&#x610F;&#xFF1A;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7684;&#x5E94;&#x7528;&#x524D;&#x63D0;&#xFF0C;&#x5FC5;&#x987B;&#x662F;&#x76EE;&#x6807;&#x7C7B;&#x57FA;&#x4E8E;&#x7EDF;&#x4E00;&#x7684;&#x63A5;&#x53E3;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4E0A;&#x8FF0;&#x524D;&#x63D0;&#xFF0C;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x4E0D;&#x80FD;&#x5E94;&#x7528;&#x3002;&#x7531;&#x6B64;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;JDK&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5C40;&#x9650;&#x6027;&#xFF0C;cglib&#x8FD9;&#x79CD;&#x7B2C;&#x4E09;&#x65B9;&#x7C7B;&#x5E93;&#x5B9E;&#x73B0;&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5E94;&#x7528;&#x66F4;&#x52A0;&#x5E7F;&#x6CDB;&#xFF0C;&#x4E14;&#x5728;&#x6548;&#x7387;&#x4E0A;&#x66F4;&#x6709;&#x4F18;&#x52BF;&#x3002;</p>
</li>
<li><p>&#x524D;&#x8005;&#x5FC5;&#x987B;&#x57FA;&#x4E8E;&#x63A5;&#x53E3;&#xFF0C;&#x540E;&#x8005;&#x4E0D;&#x9700;&#x8981;&#x63A5;&#x53E3;&#xFF0C;&#x662F;&#x57FA;&#x4E8E;&#x7EE7;&#x627F;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x80FD;&#x4EE3;&#x7406;final&#x7C7B;&#x548C;final&#x65B9;&#x6CD5;&#xFF1B;</p>
</li>
<li>JDK&#x91C7;&#x7528;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x8C03;&#x7528;&#x59D4;&#x6258;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;CGLIB&#x91C7;&#x7528;&#x7C7B;&#x4F3C;&#x7D22;&#x5F15;&#x7684;&#x65B9;&#x5F0F;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x59D4;&#x6258;&#x7C7B;&#x65B9;&#x6CD5;&#xFF1B;</li>
<li>&#x524D;&#x8005;&#x6548;&#x7387;&#x7565;&#x4F4E;&#x4E8E;&#x540E;&#x8005;&#x6548;&#x7387;&#xFF0C;CGLIB&#x6548;&#x7387;&#x7565;&#x9AD8;&#xFF08;&#x4E0D;&#x662F;&#x4E00;&#x5B9A;&#x7684;)<h2 id="jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x4F7F;&#x7528;"><a name="jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x4F7F;&#x7528;" class="plugin-anchor" href="#jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>JDK&#x52A8;&#x6001;&#x4EE3;&#x7406; &#x4F7F;&#x7528;</h2>
</li>
<li><p>Proxy&#x7C7B;&#xFF08;&#x4EE3;&#x7406;&#x7C7B;)&#x7684;&#x8BBE;&#x8BA1;&#x7528;&#x5230;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x7684;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#xFF0C;Proxy&#x7C7B;&#x5BF9;&#x8C61;&#x5B9E;&#x73B0;&#x4E86;&#x4EE3;&#x7406;&#x76EE;&#x6807;&#x7684;&#x6240;&#x6709;&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x4EE3;&#x66FF;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5B9E;&#x9645;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x4EE3;&#x7406;&#x7684;&#x76EE;&#x7684;&#x662F;&#x5728;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x4F5C;&#x589E;&#x5F3A;&#xFF0C;&#x8FD9;&#x79CD;&#x589E;&#x5F3A;&#x7684;&#x672C;&#x8D28;&#x901A;&#x5E38;&#x5C31;&#x662F;&#x5BF9;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#x3002;&#x6240;&#x4EE5;&#xFF0C;Proxy&#x5E94;&#x8BE5;&#x5305;&#x62EC;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x62E6;&#x622A;&#x5668;&#xFF0C;&#x6765;&#x6307;&#x793A;&#x5F53;&#x62E6;&#x622A;&#x5230;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x65F6;&#x4F5C;&#x4F55;&#x79CD;&#x5904;&#x7406;&#x3002;InvocationHandler&#x5C31;&#x662F;&#x62E6;&#x622A;&#x5668;&#x7684;&#x63A5;&#x53E3;&#x3002;</p>
</li>
<li><p>Proxy (&#x4EE3;&#x7406;) &#x63D0;&#x4F9B;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;&#x548C;&#x5B9E;&#x4F8B;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x5B83;&#x8FD8;&#x662F;&#x7531;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x7684;&#x6240;&#x6709;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x8D85;&#x7C7B;&#x3002; </p>
</li>
<li>&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7C7B;&#xFF08;&#x4EE3;&#x7406;&#x7C7B;)&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x5728;&#x521B;&#x5EFA;&#x7C7B;&#x65F6;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x6307;&#x5B9A;&#x7684;&#x63A5;&#x53E3;&#x5217;&#x8868;&#x7684;&#x7C7B; &#xFF0C;&#x4EE3;&#x7406;&#x63A5;&#x53E3;&#x662F;&#x4EE3;&#x7406;&#x7C7B;&#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x3002;&#x4EE3;&#x7406;&#x5B9E;&#x4F8B; &#x662F;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002; </li>
<li><p>&#x6BCF;&#x4E2A;&#x4EE3;&#x7406;&#x5B9E;&#x4F8B;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5173;&#x8054;&#x7684;&#x8C03;&#x7528;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x5BF9;&#x8C61;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x63A5;&#x53E3; InvocationHandler&#x3002;&#xFF08;&#x62E6;&#x622A;&#x5668;)</p>
</li>
<li><p>&#x5728;Java&#x4E2D;&#x600E;&#x6837;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5462;&#xFF1F;</p>
</li>
<li>&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x8FD8;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#x5462;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#xFF0C; &#x6240;&#x8C13;&#x4EE3;&#x7406;&#x5462;&#x4E5F;&#x5C31;&#x662F;&#x5728;&#x8C03;&#x7528;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x524D;&#x540E;&#x505A;&#x989D;&#x5916;&#x7684;&#x5DE5;&#x4F5C;&#x3002; </li>
<li>&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x81EA;&#x5DF1;&#x5199;&#x4E00;&#x4E2A;&#x5728;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x8981;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x80FD;&#x591F;&#x505A;&#x989D;&#x5916;&#x5DE5;&#x4F5C;&#x7684;&#x7C7B;&#xFF08;&#x62E6;&#x622A;&#x5668;)&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x7C7B;&#x5FC5;&#x987B;&#x7EE7;&#x627F;InvocationHandler&#x63A5;&#x53E3;&#xFF0C; &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7EE7;&#x627F;&#x5B83;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x5728;&#x8C03;&#x7528;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x4F1A;&#x8C03;&#x7528;&#x771F;&#x6B63;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C; &#x800C;&#x662F;&#x8F6C;&#x800C;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;invoke&#x65B9;&#x6CD5;&#xFF08;&#x7EE7;&#x627F;&#x65F6;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;)&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E2D;&#x4F60;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x771F;&#x6B63;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<h2 id="jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x539F;&#x7406;"><a name="jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x539F;&#x7406;" class="plugin-anchor" href="#jdk&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>JDK&#x52A8;&#x6001;&#x4EE3;&#x7406; &#x539F;&#x7406;</h2>
<ul>
<li>Proxy#newProxyInstance</li>
<li>&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x4E86;&#x6307;&#x5B9A;&#x63A5;&#x53E3;&#x7684;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x90FD;&#x4F1A;&#x8F6C;&#x53D1;&#x7ED9;InvocationHandler.invoke()&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<pre><code>public static Object newProxyInstance(ClassLoader loader,
                                      Class&lt;?&gt;[] interfaces,
                                      InvocationHandler h)
    throws IllegalArgumentException
{
    Objects.requireNonNull(h);

    final Class&lt;?&gt;[] intfs = interfaces.clone();
    final SecurityManager sm = System.getSecurityManager();
    if (sm != null) {
        checkProxyAccess(Reflection.getCallerClass(), loader, intfs);
    }

    /*
     * Look up or generate the designated proxy class.
     */
</code></pre><pre><code>// &#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;&#x7684;class
    Class&lt;?&gt; cl = getProxyClass0(loader, intfs);

    /*
     * Invoke its constructor with the designated invocation handler.
     */
    try {
        if (sm != null) {
            checkNewProxyPermission(Reflection.getCallerClass(), cl);
        }
        // &#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF08;&#x4E5F;&#x5C31;&#x662F;$Proxy0(InvocationHandler h))   
        final Constructor&lt;?&gt; cons = cl.getConstructor(constructorParams);
        final InvocationHandler ih = h;
        if (!Modifier.isPublic(cl.getModifiers())) {
            AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() {
                public Void run() {
                    cons.setAccessible(true);
                    return null;
                }
            });
        }
</code></pre><ul>
<li>// &#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x5E76;&#x628A;InvocationHandlerImpl&#x7684;&#x5B9E;&#x4F8B;&#x4F20;&#x7ED9;&#x5B83;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;  <pre><code>  return cons.newInstance(new Object[]{h});
</code></pre>  } catch (IllegalAccessException|InstantiationException e) {<pre><code>  throw new InternalError(e.toString(), e);
</code></pre>  } catch (InvocationTargetException e) {<pre><code>  Throwable t = e.getCause();
  if (t instanceof RuntimeException) {
      throw (RuntimeException) t;
  } else {
      throw new InternalError(t.toString(), t);
  }
</code></pre>  } catch (NoSuchMethodException e) {<pre><code>  throw new InternalError(e.toString(), e);
</code></pre>  }
}</li>
</ul>
<h3 id="1getproxyclass0&#xFF08;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;&#x7684;class"><a name="1getproxyclass0&#xFF08;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;&#x7684;class" class="plugin-anchor" href="#1getproxyclass0&#xFF08;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;&#x7684;class"><i class="fa fa-link" aria-hidden="true"></i></a>1)getProxyClass0&#xFF08;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;&#x7684;class)</h3>
<ul>
<li>&#x6700;&#x7EC8;&#x751F;&#x6210;&#x662F;&#x901A;&#x8FC7;ProxyGenerator&#x7684;generateProxyClass&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x7684;&#x3002;</li>
</ul>
<pre><code>private static Class&lt;?&gt; getProxyClass0(ClassLoader loader,
                                       Class&lt;?&gt;... interfaces) {
    if (interfaces.length &gt; 65535) {
        throw new IllegalArgumentException(&quot;interface limit exceeded&quot;);
    }

    // If the proxy class defined by the given loader implementing
    // the given interfaces exists, this will simply return the cached copy;
    // otherwise, it will create the proxy class via the ProxyClassFactory
    return proxyClassCache.get(loader, interfaces);
}
</code></pre><pre><code>private static final WeakCache&lt;ClassLoader, Class&lt;?&gt;[], Class&lt;?&gt;&gt;
    proxyClassCache = new WeakCache&lt;&gt;(new KeyFactory(), new ProxyClassFactory());
</code></pre><ul>
<li><ul>
<li>@param <k> type of keys</k></li>
<li>@param <p> type of parameters</p></li>
<li>@param <v> type of values
*/
final class WeakCache<k, p,="" v=""> {}</k,></v></li>
</ul>
</li>
</ul>
<pre><code>public V get(K key, P parameter) {
    Objects.requireNonNull(parameter);

    expungeStaleEntries();

    Object cacheKey = CacheKey.valueOf(key, refQueue);

    // lazily install the 2nd level valuesMap for the particular cacheKey
    ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap = map.get(cacheKey);
    if (valuesMap == null) {
        ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; oldValuesMap
            = map.putIfAbsent(cacheKey,
                              valuesMap = new ConcurrentHashMap&lt;&gt;());
        if (oldValuesMap != null) {
            valuesMap = oldValuesMap;
        }
    }

    // create subKey and retrieve the possible Supplier&lt;V&gt; stored by that
    // subKey from valuesMap
    Object subKey = Objects.requireNonNull(subKeyFactory.apply(key, parameter));
    Supplier&lt;V&gt; supplier = valuesMap.get(subKey);
    Factory factory = null;

    while (true) {
        if (supplier != null) {
            // supplier might be a Factory or a CacheValue&lt;V&gt; instance
</code></pre><ul>
<li><p>// supplier&#x662F;Factory,&#x8FD9;&#x4E2A;&#x7C7B;&#x5B9A;&#x4E49;&#x5728;WeakCache&#x7684;&#x5185;&#x90E8;&#x3002;</p>
<pre><code>      V value = supplier.get();
      if (value != null) {
          return value;
      }
  }
  // else no supplier in cache
  // or a supplier that returned null (could be a cleared CacheValue
  // or a Factory that wasn&apos;t successful in installing the CacheValue)

  // lazily construct a Factory
  if (factory == null) {
      factory = new Factory(key, parameter, subKey, valuesMap);
  }

  if (supplier == null) {
      supplier = valuesMap.putIfAbsent(subKey, factory);
      if (supplier == null) {
          // successfully installed Factory
          supplier = factory;
      }
      // else retry with winning supplier
  } else {
      if (valuesMap.replace(subKey, supplier, factory)) {
          // successfully replaced
          // cleared CacheEntry / unsuccessful Factory
          // with our Factory
          supplier = factory;
      } else {
          // retry with current supplier
          supplier = valuesMap.get(subKey);
      }
  }
</code></pre><p>  }
}</p>
</li>
<li><p>Factory</p>
</li>
</ul>
<pre><code>private final class Factory implements Supplier&lt;V&gt; {

    private final K key;
    private final P parameter;
    private final Object subKey;
    private final ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap;

    Factory(K key, P parameter, Object subKey,
            ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap) {
        this.key = key;
        this.parameter = parameter;
        this.subKey = subKey;
        this.valuesMap = valuesMap;
    }

    @Override
    public synchronized V get() { // serialize access
        // re-check
        Supplier&lt;V&gt; supplier = valuesMap.get(subKey);
        if (supplier != this) {
            // something changed while we were waiting:
            // might be that we were replaced by a CacheValue
            // or were removed because of failure -&gt;
            // return null to signal WeakCache.get() to retry
            // the loop
            return null;
        }
        // else still us (supplier == this)

        // create new value
</code></pre><ul>
<li><p>// &#x521B;&#x5EFA;&#x65B0;&#x7684;class</p>
<pre><code>  V value = null;
  try {
      value = Objects.requireNonNull(valueFactory.apply(key, parameter));
  } finally {
      if (value == null) { // remove us on failure
          valuesMap.remove(subKey, this);
      }
  }
  // the only path to reach here is with non-null value
  assert value != null;

  // wrap value with CacheValue (WeakReference)
  CacheValue&lt;V&gt; cacheValue = new CacheValue&lt;&gt;(value);

  // try replacing us with CacheValue (this should always succeed)
  if (valuesMap.replace(subKey, this, cacheValue)) {
      // put also in reverseMap
      reverseMap.put(cacheValue, Boolean.TRUE);
  } else {
      throw new AssertionError(&quot;Should not reach here&quot;);
  }

  // successfully replaced us with new CacheValue -&gt; return the value
  // wrapped by it
  return value;
</code></pre><p>  }
}</p>
</li>
</ul>
<pre><code>private static final class ProxyClassFactory
    implements BiFunction&lt;ClassLoader, Class&lt;?&gt;[], Class&lt;?&gt;&gt;
{
    // prefix for all proxy class names
    private static final String proxyClassNamePrefix = &quot;$Proxy&quot;;

    // next number to use for generation of unique proxy class names
    private static final AtomicLong nextUniqueNumber = new AtomicLong();

    @Override
    public Class&lt;?&gt; apply(ClassLoader loader, Class&lt;?&gt;[] interfaces) {

        Map&lt;Class&lt;?&gt;, Boolean&gt; interfaceSet = new IdentityHashMap&lt;&gt;(interfaces.length);
        for (Class&lt;?&gt; intf : interfaces) {
            /*
             * Verify that the class loader resolves the name of this
             * interface to the same Class object.
             */
            Class&lt;?&gt; interfaceClass = null;
            try {
                interfaceClass = Class.forName(intf.getName(), false, loader);
            } catch (ClassNotFoundException e) {
            }
            if (interfaceClass != intf) {
                throw new IllegalArgumentException(
                    intf + &quot; is not visible from class loader&quot;);
            }
            /*
             * Verify that the Class object actually represents an
             * interface.
             */
            if (!interfaceClass.isInterface()) {
                throw new IllegalArgumentException(
                    interfaceClass.getName() + &quot; is not an interface&quot;);
            }
            /*
             * Verify that this interface is not a duplicate.
             */
            if (interfaceSet.put(interfaceClass, Boolean.TRUE) != null) {
                throw new IllegalArgumentException(
                    &quot;repeated interface: &quot; + interfaceClass.getName());
            }
        }

        String proxyPkg = null;     // package to define proxy class in
        int accessFlags = Modifier.PUBLIC | Modifier.FINAL;

        /*
         * Record the package of a non-public proxy interface so that the
         * proxy class will be defined in the same package.  Verify that
         * all non-public proxy interfaces are in the same package.
         */
        for (Class&lt;?&gt; intf : interfaces) {
            int flags = intf.getModifiers();
            if (!Modifier.isPublic(flags)) {
                accessFlags = Modifier.FINAL;
                String name = intf.getName();
                int n = name.lastIndexOf(&apos;.&apos;);
                String pkg = ((n == -1) ? &quot;&quot; : name.substring(0, n + 1));
                if (proxyPkg == null) {
                    proxyPkg = pkg;
                } else if (!pkg.equals(proxyPkg)) {
                    throw new IllegalArgumentException(
                        &quot;non-public interfaces from different packages&quot;);
                }
            }
        }

        if (proxyPkg == null) {
            // if no non-public proxy interfaces, use com.sun.proxy package
            proxyPkg = ReflectUtil.PROXY_PACKAGE + &quot;.&quot;;
        }

        /*
         * Choose a name for the proxy class to generate.
         */
        long num = nextUniqueNumber.getAndIncrement();
        String proxyName = proxyPkg + proxyClassNamePrefix + num;

        /*
         * Generate the specified proxy class.
         */
        byte[] proxyClassFile = ProxyGenerator.generateProxyClass(
            proxyName, interfaces, accessFlags);
        try {
            return defineClass0(loader, proxyName,
                                proxyClassFile, 0, proxyClassFile.length);
        } catch (ClassFormatError e) {
            /*
             * A ClassFormatError here means that (barring bugs in the
             * proxy class generation code) there was some other
             * invalid aspect of the arguments supplied to the proxy
             * class creation (such as virtual machine limitations
             * exceeded).
             */
            throw new IllegalArgumentException(e.toString());
        }
    }
}
</code></pre><ul>
<li>&#x91CD;&#x70B9;&#xFF01;</li>
</ul>
<pre><code>/**
 * Generate a proxy class given a name and a list of proxy interfaces.
 *
 * @param name        the class name of the proxy class
 * @param interfaces  proxy interfaces
 * @param accessFlags access flags of the proxy class
*/
public static byte[] generateProxyClass(final String name,
                                        Class&lt;?&gt;[] interfaces,
                                        int accessFlags)
{
    ProxyGenerator gen = new ProxyGenerator(name, interfaces, accessFlags);
    final byte[] classFile = gen.generateClassFile();

    if (saveGeneratedFiles) {
        java.security.AccessController.doPrivileged(
        new java.security.PrivilegedAction&lt;Void&gt;() {
            public Void run() {
                try {
                    int i = name.lastIndexOf(&apos;.&apos;);
                    Path path;
                    if (i &gt; 0) {
                        Path dir = Paths.get(name.substring(0, i).replace(&apos;.&apos;, File.separatorChar));
                        Files.createDirectories(dir);
                        path = dir.resolve(name.substring(i+1, name.length()) + &quot;.class&quot;);
                    } else {
                        path = Paths.get(name + &quot;.class&quot;);
                    }
                    Files.write(path, classFile);
                    return null;
                } catch (IOException e) {
                    throw new InternalError(
                        &quot;I/O exception saving generated file: &quot; + e);
                }
            }
        });
    }

    return classFile;
}
</code></pre><ul>
<li>ProxyGenerator#generateClassFIle</li>
</ul>
<pre><code>/**
 * Generate a class file for the proxy class.  This method drives the
 * class file generation process.
 */
private byte[] generateClassFile() {

    /* ============================================================
     * Step 1: Assemble ProxyMethod objects for all methods to
     * generate proxy dispatching code for.
     */

    /*
     * Record that proxy methods are needed for the hashCode, equals,
     * and toString methods of java.lang.Object.  This is done before
     * the methods from the proxy interfaces so that the methods from
     * java.lang.Object take precedence over duplicate methods in the
     * proxy interfaces.
     */
    addProxyMethod(hashCodeMethod, Object.class);
    addProxyMethod(equalsMethod, Object.class);
    addProxyMethod(toStringMethod, Object.class);

    /*
     * Now record all of the methods from the proxy interfaces, giving
     * earlier interfaces precedence over later ones with duplicate
     * methods.
     */
    for (Class&lt;?&gt; intf : interfaces) {
        for (Method m : intf.getMethods()) {
            addProxyMethod(m, intf);
        }
    }

    /*
     * For each set of proxy methods with the same signature,
     * verify that the methods&apos; return types are compatible.
     */
    for (List&lt;ProxyMethod&gt; sigmethods : proxyMethods.values()) {
        checkReturnTypes(sigmethods);
    }

    /* ============================================================
     * Step 2: Assemble FieldInfo and MethodInfo structs for all of
     * fields and methods in the class we are generating.
     */
    try {
        methods.add(generateConstructor());

        for (List&lt;ProxyMethod&gt; sigmethods : proxyMethods.values()) {
            for (ProxyMethod pm : sigmethods) {

                // add static field for method&apos;s Method object
                fields.add(new FieldInfo(pm.methodFieldName,
                    &quot;Ljava/lang/reflect/Method;&quot;,
                     ACC_PRIVATE | ACC_STATIC));

                // generate code for proxy method and add it
                methods.add(pm.generateMethod());
            }
        }

        methods.add(generateStaticInitializer());

    } catch (IOException e) {
        throw new InternalError(&quot;unexpected I/O Exception&quot;, e);
    }

    if (methods.size() &gt; 65535) {
        throw new IllegalArgumentException(&quot;method limit exceeded&quot;);
    }
    if (fields.size() &gt; 65535) {
        throw new IllegalArgumentException(&quot;field limit exceeded&quot;);
    }

    /* ============================================================
     * Step 3: Write the final class file.
     */

    /*
     * Make sure that constant pool indexes are reserved for the
     * following items before starting to write the final class file.
     */
    cp.getClass(dotToSlash(className));
    cp.getClass(superclassName);
    for (Class&lt;?&gt; intf: interfaces) {
        cp.getClass(dotToSlash(intf.getName()));
    }

    /*
     * Disallow new constant pool additions beyond this point, since
     * we are about to write the final constant pool table.
     */
    cp.setReadOnly();

    ByteArrayOutputStream bout = new ByteArrayOutputStream();
    DataOutputStream dout = new DataOutputStream(bout);

    try {
        /*
         * Write all the items of the &quot;ClassFile&quot; structure.
         * See JVMS section 4.1.
         */
                                    // u4 magic;
        dout.writeInt(0xCAFEBABE);
                                    // u2 minor_version;
        dout.writeShort(CLASSFILE_MINOR_VERSION);
                                    // u2 major_version;
        dout.writeShort(CLASSFILE_MAJOR_VERSION);

        cp.write(dout);             // (write constant pool)

                                    // u2 access_flags;
        dout.writeShort(accessFlags);
                                    // u2 this_class;
        dout.writeShort(cp.getClass(dotToSlash(className)));
                                    // u2 super_class;
        dout.writeShort(cp.getClass(superclassName));

                                    // u2 interfaces_count;
        dout.writeShort(interfaces.length);
                                    // u2 interfaces[interfaces_count];
        for (Class&lt;?&gt; intf : interfaces) {
            dout.writeShort(cp.getClass(
                dotToSlash(intf.getName())));
        }

                                    // u2 fields_count;
        dout.writeShort(fields.size());
                                    // field_info fields[fields_count];
        for (FieldInfo f : fields) {
            f.write(dout);
        }

                                    // u2 methods_count;
        dout.writeShort(methods.size());
                                    // method_info methods[methods_count];
        for (MethodInfo m : methods) {
            m.write(dout);
        }

                                     // u2 attributes_count;
        dout.writeShort(0); // (no ClassFile attributes for proxy classes)

    } catch (IOException e) {
        throw new InternalError(&quot;unexpected I/O Exception&quot;, e);
    }

    return bout.toByteArray();
}
</code></pre><h3 id="2getconstructor&#xFF08;&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a name="2getconstructor&#xFF08;&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#2getconstructor&#xFF08;&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>2)getConstructor&#xFF08;&#x83B7;&#x53D6;&#x4EE3;&#x7406;&#x7C7B;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;)</h3>
<h3 id="3newinstance&#xFF08;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;"><a name="3newinstance&#xFF08;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;" class="plugin-anchor" href="#3newinstance&#xFF08;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;"><i class="fa fa-link" aria-hidden="true"></i></a>3)newInstance&#xFF08;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;)</h3>
<h2 id="cglib&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x4F7F;&#x7528;"><a name="cglib&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x4F7F;&#x7528;" class="plugin-anchor" href="#cglib&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>CGLIB&#x52A8;&#x6001;&#x4EE3;&#x7406; &#x4F7F;&#x7528;</h2>
<ul>
<li>CGLIB(Code Generation Library)&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;ASM&#x7684;&#x5B57;&#x8282;&#x7801;&#x751F;&#x6210;&#x5E93;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x5BF9;&#x5B57;&#x8282;&#x7801;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x548C;&#x52A8;&#x6001;&#x751F;&#x6210;&#x3002;CGLIB&#x901A;&#x8FC7;&#x7EE7;&#x627F;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x4EE3;&#x7406;&#x3002;</li>
<li>CGLIB&#x7684;&#x6838;&#x5FC3;&#x7C7B;&#xFF1A;</li>
<li>net.sf.cglib.proxy.Enhancer &#x2013; &#x4E3B;&#x8981;&#x7684;&#x589E;&#x5F3A;&#x7C7B;</li>
<li>net.sf.cglib.proxy.MethodInterceptor &#x2013; &#x4E3B;&#x8981;&#x7684;&#x65B9;&#x6CD5;&#x62E6;&#x622A;&#x7C7B;&#xFF0C;&#x5B83;&#x662F;Callback&#x63A5;&#x53E3;&#x7684;&#x5B50;&#x63A5;&#x53E3;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x6237;&#x5B9E;&#x73B0;</li>
<li><p>net.sf.cglib.proxy.MethodProxy &#x2013; JDK&#x7684;java.lang.reflect.Method&#x7C7B;&#x7684;&#x4EE3;&#x7406;&#x7C7B;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7684;&#x5B9E;&#x73B0;&#x5BF9;&#x6E90;&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;,&#x5982;&#x4F7F;&#x7528;&#xFF1A;</p>
</li>
<li><p>Object o = methodProxy.invokeSuper(proxy, args);//&#x867D;&#x7136;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x88AB;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x6B7B;&#x5FAA;&#x73AF;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
</li>
<li>net.sf.cglib.proxy.MethodInterceptor&#x63A5;&#x53E3;&#x662F;&#x6700;&#x901A;&#x7528;&#x7684;&#x56DE;&#x8C03;&#xFF08;callback)&#x7C7B;&#x578B;&#xFF0C;&#x5B83;&#x7ECF;&#x5E38;&#x88AB;&#x57FA;&#x4E8E;&#x4EE3;&#x7406;&#x7684;AOP&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x62E6;&#x622A;&#xFF08;intercept)&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x3002;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x53EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;</li>
</ul>
<pre><code>public Object intercept(Object object, java.lang.reflect.Method method,
</code></pre><ul>
<li>Object[] args, MethodProxy proxy) throws Throwable;</li>
<li>&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4EE3;&#x7406;&#x5BF9;&#x50CF;&#xFF0C;&#x7B2C;&#x4E8C;&#x548C;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x5206;&#x522B;&#x662F;&#x62E6;&#x622A;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x3002;&#x539F;&#x6765;&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x80FD;&#x901A;&#x8FC7;&#x4F7F;&#x7528;java.lang.reflect.Method&#x5BF9;&#x8C61;&#x7684;&#x4E00;&#x822C;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#xFF0C;&#x6216;&#x8005;&#x4F7F;&#x7528; net.sf.cglib.proxy.MethodProxy&#x5BF9;&#x8C61;&#x8C03;&#x7528;&#x3002;net.sf.cglib.proxy.MethodProxy&#x901A;&#x5E38;&#x88AB;&#x9996;&#x9009;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x66F4;&#x5FEB;&#x3002;</li>
</ul>
<pre><code>public class CglibProxy implements MethodInterceptor {
</code></pre><ul>
<li>@Override  </li>
</ul>
<pre><code>    public Object intercept(Object o, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {
</code></pre><ul>
<li>System.out.println(&quot;++++++before &quot; + methodProxy.getSuperName() + &quot;++++++&quot;);  </li>
<li>System.out.println(method.getName());  </li>
<li>Object o1 = methodProxy.invokeSuper(o, args);  </li>
<li>System.out.println(&quot;++++++before &quot; + methodProxy.getSuperName() + &quot;++++++&quot;);  </li>
<li>return o1;  </li>
<li>}  </li>
<li>}</li>
</ul>
<pre><code>public class Main {
</code></pre><pre><code>    public static void main(String[] args) {
</code></pre><ul>
<li>CglibProxy cglibProxy = new CglibProxy();  </li>
<li></li>
<li>Enhancer enhancer = new Enhancer();  </li>
<li>enhancer.setSuperclass(UserServiceImpl.class);  </li>
<li>enhancer.setCallback(cglibProxy);  </li>
<li></li>
<li>UserService o = (UserService)enhancer.create();  <ul>
<li>o.getName(1);  </li>
<li>o.getAge(1);  </li>
</ul>
</li>
<li>}  </li>
<li>}</li>
<li>&#x6211;&#x4EEC;&#x901A;&#x8FC7;CGLIB&#x7684;Enhancer&#x6765;&#x6307;&#x5B9A;&#x8981;&#x4EE3;&#x7406;&#x7684;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x3001;&#x5B9E;&#x9645;&#x5904;&#x7406;&#x4EE3;&#x7406;&#x903B;&#x8F91;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6700;&#x7EC8;&#x901A;&#x8FC7;&#x8C03;&#x7528;create()&#x65B9;&#x6CD5;&#x5F97;&#x5230;&#x4EE3;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x6240;&#x6709;&#x975E;final&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x90FD;&#x4F1A;&#x8F6C;&#x53D1;&#x7ED9;MethodInterceptor.intercept()&#x65B9;&#x6CD5;&#xFF0C;&#x5728;intercept()&#x65B9;&#x6CD5;&#x91CC;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x4EFB;&#x4F55;&#x903B;&#x8F91;&#xFF0C;&#x6BD4;&#x5982;&#x4FEE;&#x6539;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#xFF0C;&#x52A0;&#x5165;&#x65E5;&#x5FD7;&#x529F;&#x80FD;&#x3001;&#x5B89;&#x5168;&#x68C0;&#x67E5;&#x529F;&#x80FD;&#x7B49;&#xFF1B;&#x901A;&#x8FC7;&#x8C03;&#x7528;MethodProxy.invokeSuper()&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8C03;&#x7528;&#x8F6C;&#x53D1;&#x7ED9;&#x539F;&#x59CB;&#x5BF9;&#x8C61;&#xFF0C;&#x5177;&#x4F53;&#x5230;&#x672C;&#x4F8B;&#xFF0C;&#x5C31;&#x662F;HelloConcrete&#x7684;&#x5177;&#x4F53;&#x65B9;&#x6CD5;&#x3002;CGLIG&#x4E2D;MethodInterceptor&#x7684;&#x4F5C;&#x7528;&#x8DDF;JDK&#x4EE3;&#x7406;&#x4E2D;&#x7684;InvocationHandler&#x5F88;&#x7C7B;&#x4F3C;&#xFF0C;&#x90FD;&#x662F;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x4E2D;&#x8F6C;&#x7AD9;&#x3002;</li>
<li>&#x6CE8;&#x610F;&#xFF1A;&#x5BF9;&#x4E8E;&#x4ECE;Object&#x4E2D;&#x7EE7;&#x627F;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;CGLIB&#x4EE3;&#x7406;&#x4E5F;&#x4F1A;&#x8FDB;&#x884C;&#x4EE3;&#x7406;&#xFF0C;&#x5982;hashCode()&#x3001;equals()&#x3001;toString()&#x7B49;&#xFF0C;&#x4F46;&#x662F;getClass()&#x3001;wait()&#x7B49;&#x65B9;&#x6CD5;&#x4E0D;&#x4F1A;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;final&#x65B9;&#x6CD5;&#xFF0C;CGLIB&#x65E0;&#x6CD5;&#x4EE3;&#x7406;&#x3002;</li>
<li>&#x65E2;&#x7136;&#x662F;&#x7EE7;&#x627F;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x8003;&#x8651;final&#x7684;&#x95EE;&#x9898;&#x3002;&#x6211;&#x4EEC;&#x77E5;&#x9053;final&#x7C7B;&#x578B;&#x4E0D;&#x80FD;&#x6709;&#x5B50;&#x7C7B;&#xFF0C;&#x6240;&#x4EE5;CGLIB&#x4E0D;&#x80FD;&#x4EE3;&#x7406;final&#x7C7B;&#x578B;&#x3002;</li>
<li>final&#x65B9;&#x6CD5;&#x662F;&#x4E0D;&#x80FD;&#x91CD;&#x8F7D;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x4E0D;&#x80FD;&#x901A;&#x8FC7;CGLIB&#x4EE3;&#x7406;&#xFF0C;&#x9047;&#x5230;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0D;&#x4F1A;&#x629B;&#x5F02;&#x5E38;&#xFF0C;&#x800C;&#x662F;&#x4F1A;&#x8DF3;&#x8FC7;final&#x65B9;&#x6CD5;&#x53EA;&#x4EE3;&#x7406;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<h2 id="cglib&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x539F;&#x7406;"><a name="cglib&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x539F;&#x7406;" class="plugin-anchor" href="#cglib&#x52A8;&#x6001;&#x4EE3;&#x7406;-&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>CGLIB&#x52A8;&#x6001;&#x4EE3;&#x7406; &#x539F;&#x7406;</h2>
<ul>
<li>1&#x3001;&#x751F;&#x6210;&#x4EE3;&#x7406;&#x7C7B;Class&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x8282;&#x7801;&#xFF08;&#x57FA;&#x4E8E;ASM)&#xFF1B; </li>
<li>2&#x3001;&#x901A;&#x8FC7; Class.forName&#x52A0;&#x8F7D;&#x4E8C;&#x8FDB;&#x5236;&#x5B57;&#x8282;&#x7801;&#xFF0C;&#x751F;&#x6210;Class&#x5BF9;&#x8C61;&#xFF1B; </li>
<li><p>3&#x3001;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x83B7;&#x53D6;&#x5B9E;&#x4F8B;&#x6784;&#x9020;&#xFF0C;&#x5E76;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7406;&#x7C7B;&#x5BF9;&#x8C61;&#x3002;</p>
</li>
<li><p>&#x8C03;&#x7528;&#x59D4;&#x6258;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x4F7F;&#x7528;invokeSuper</p>
</li>
</ul>
<pre><code>public Object invokeSuper(Object obj, Object[] args) throws Throwable {
    try {
        init();
        FastClassInfo fci = fastClassInfo;
        return fci.f2.invoke(fci.i2, obj, args);
    } catch (InvocationTargetException e) {
        throw e.getTargetException();
    }
}
</code></pre><pre><code>private static class FastClassInfo
{
    FastClass f1;
    FastClass f2;
    int i1;
    int i2;
}
</code></pre><ul>
<li>f1&#x6307;&#x5411;&#x59D4;&#x6258;&#x7C7B;&#x5BF9;&#x8C61;&#xFF0C;f2&#x6307;&#x5411;&#x4EE3;&#x7406;&#x7C7B;&#x5BF9;&#x8C61;</li>
<li>i1&#x662F;&#x88AB;&#x4EE3;&#x7406;&#x7684;&#x65B9;&#x6CD5;&#x5728;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;</li>
<li>i2&#x662F;CGLIB$&#x88AB;&#x4EE3;&#x7406;&#x7684;&#x65B9;&#x6CD5;$0&#x5728;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;<h3 id="fastclass&#x5B9E;&#x73B0;&#x673A;&#x5236;"><a name="fastclass&#x5B9E;&#x73B0;&#x673A;&#x5236;" class="plugin-anchor" href="#fastclass&#x5B9E;&#x73B0;&#x673A;&#x5236;"><i class="fa fa-link" aria-hidden="true"></i></a>FastClass&#x5B9E;&#x73B0;&#x673A;&#x5236;</h3>
</li>
<li>FastClass&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5BF9;Class&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x5904;&#x7406;&#xFF0C;&#x63D0;&#x51FA;&#x4E0B;&#x6807;&#x6982;&#x5FF5;index&#xFF0C;&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x4FDD;&#x5B58;&#x65B9;&#x6CD5;&#x7684;&#x5F15;&#x7528;&#x4FE1;&#x606F;&#xFF0C;&#x5C06;&#x539F;&#x5148;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#xFF0C;&#x8F6C;&#x5316;&#x4E3A;&#x65B9;&#x6CD5;&#x7684;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x4F53;&#x73B0;&#x6240;&#x8C13;&#x7684;fast&#x3002;</li>
</ul>
<ul>
<li>&#x5728;FastTest&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C; getIndex&#x4E2D;&#x5BF9;Test&#x7C7B;&#x7684;&#x6BCF;&#x4E2A;&#x65B9;&#x6CD5;&#x6839;&#x636E;hash&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#xFF0C; invoke&#x6839;&#x636E;&#x6307;&#x5B9A;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x76EE;&#x6807;&#x65B9;&#x6CD5;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x3002;</li>
</ul>
<ul>
<li><h1 id="118-&#x53CD;&#x5C04;"><a name="118-&#x53CD;&#x5C04;" class="plugin-anchor" href="#118-&#x53CD;&#x5C04;"><i class="fa fa-link" aria-hidden="true"></i></a>1.18 &#x53CD;&#x5C04;</h1>
</li>
<li>Java&#x7684;&#x52A8;&#x6001;&#x6027;&#x4F53;&#x73B0;&#x5728;&#xFF1A;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x3001;&#x52A8;&#x6001;&#x6267;&#x884C;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x3001;&#x52A8;&#x6001;&#x64CD;&#x4F5C;&#x5B57;&#x8282;&#x7801;</li>
<li><p>&#x53CD;&#x5C04;&#xFF1A;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x52A0;&#x8F7D;&#x3001;&#x63A2;&#x77E5;&#x3001;&#x4F7F;&#x7528;&#x7F16;&#x8BD1;&#x65F6;&#x672A;&#x77E5;&#x7684;&#x7C7B;&#x3002;</p>
</li>
<li><p>Class.forName&#x4F7F;&#x7528;&#x7684;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;&#x662F;&#x8C03;&#x7528;&#x8005;&#x7684;&#x7C7B;&#x52A0;&#x8F7D;&#x5668;</p>
<h2 id="class"><a name="class" class="plugin-anchor" href="#class"><i class="fa fa-link" aria-hidden="true"></i></a>Class</h2>
</li>
<li>&#x8868;&#x793A;Java&#x4E2D;&#x7684;&#x7C7B;&#x578B;&#xFF08;class&#x3001;interface&#x3001;enum&#x3001;annotation&#x3001;primitive type&#x3001;void)&#x672C;&#x8EAB;&#x3002;</li>
</ul>
<ul>
<li>&#x4E00;&#x4E2A;&#x7C7B;&#x88AB;&#x52A0;&#x8F7D;&#x4E4B;&#x540E;&#xFF0C;JVM&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x8BE5;&#x7C7B;&#x7684;Class&#x5BF9;&#x8C61;&#xFF0C;&#x7C7B;&#x7684;&#x6574;&#x4E2A;&#x7ED3;&#x6784;&#x4FE1;&#x606F;&#x4F1A;&#x653E;&#x5728;&#x76F8;&#x5E94;&#x7684;Class&#x5BF9;&#x8C61;&#x4E2D;&#x3002;</li>
<li>&#x8FD9;&#x4E2A;Class&#x5BF9;&#x8C61;&#x5C31;&#x50CF;&#x4E00;&#x4E2A;&#x955C;&#x5B50;&#x4E00;&#x6837;&#xFF0C;&#x4ECE;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;&#x3002;</li>
<li><p>&#x53CD;&#x5C04;&#x7684;&#x6838;&#x5FC3;&#x5C31;&#x662F;Class</p>
</li>
<li><p>&#x5982;&#x679C;&#x591A;&#x6B21;&#x6267;&#x884C;forName&#x7B49;&#x52A0;&#x8F7D;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x7C7B;&#x53EA;&#x4F1A;&#x88AB;&#x52A0;&#x8F7D;&#x4E00;&#x6B21;&#xFF1B;&#x4E00;&#x4E2A;&#x7C7B;&#x53EA;&#x4F1A;&#x5F62;&#x6210;&#x4E00;&#x4E2A;Class&#x5BF9;&#x8C61;&#xFF0C;&#x65E0;&#x8BBA;&#x6267;&#x884C;&#x591A;&#x5C11;&#x6B21;&#x52A0;&#x8F7D;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x83B7;&#x5F97;&#x7684;Class&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>
<h2 id="&#x7528;&#x9014;"><a name="&#x7528;&#x9014;" class="plugin-anchor" href="#&#x7528;&#x9014;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7528;&#x9014;</h2>
</li>
</ul>
<h2 id="&#x6027;&#x80FD;"><a name="&#x6027;&#x80FD;" class="plugin-anchor" href="#&#x6027;&#x80FD;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6027;&#x80FD;</h2>
<ul>
<li>&#x53CD;&#x5C04;&#x5E26;&#x6765;&#x7075;&#x6D3B;&#x6027;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x4E5F;&#x6709;&#x964D;&#x4F4E;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x6548;&#x7387;&#x7684;&#x5F0A;&#x7AEF;</li>
<li><p>setAccessible&#x65B9;&#x6CD5;&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x6807;&#x8BB0;&#x67D0;&#x4E9B;&#x79C1;&#x6709;&#x7684;&#x5C5E;&#x6027;&#x65B9;&#x6CD5;&#x4E3A;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x5C5E;&#x6027;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;</p>
</li>
<li><p>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x542F;&#x7528;&#x548C;&#x7981;&#x7528;&#x8BBF;&#x95EE;&#x5B89;&#x5168;&#x68C0;&#x67E5;&#x7684;&#x5F00;&#x5173;&#x3002;&#x5982;&#x679C;&#x505A;&#x68C0;&#x67E5;&#x5C31;&#x4F1A;&#x964D;&#x4F4E;&#x6548;&#x7387;&#xFF1B;&#x5173;&#x95ED;&#x68C0;&#x67E5;&#x5C31;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#x3002;</p>
</li>
<li>&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x6BD4;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x8981;&#x6162;&#x5927;&#x7EA6;30&#x500D;&#xFF0C;&#x5982;&#x679C;&#x8DF3;&#x8FC7;&#x5B89;&#x5168;&#x68C0;&#x67E5;&#x7684;&#x8BDD;&#x6BD4;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x8981;&#x6162;&#x5927;&#x7EA6;7&#x500D;</li>
<li>&#x5F00;&#x542F;&#x548C;&#x4E0D;&#x5F00;&#x542F;&#x5B89;&#x5168;&#x68C0;&#x67E5;&#x5BF9;&#x4E8E;&#x53CD;&#x5C04;&#x800C;&#x8A00;&#x53EF;&#x80FD;&#x4F1A;&#x5DEE;4&#x500D;&#x7684;&#x6267;&#x884C;&#x6548;&#x7387;&#x3002;</li>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x6162;?<ul>
<li>1)&#x9A8C;&#x8BC1;&#x7B49;&#x9632;&#x5FA1;&#x4EE3;&#x7801;&#x8FC7;&#x4E8E;&#x7E41;&#x7410;&#xFF0C;&#x8FD9;&#x4E00;&#x6B65;&#x672C;&#x6765;&#x5728;link&#x9636;&#x6BB5;&#xFF0C;&#x73B0;&#x5728;&#x5374;&#x5728;&#x8BA1;&#x7B97;&#x65F6;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;</li>
<li>2)&#x4EA7;&#x751F;&#x5F88;&#x591A;&#x4E34;&#x65F6;&#x5BF9;&#x8C61;&#xFF0C;&#x9020;&#x6210;GC&#x4E0E;&#x8BA1;&#x7B97;&#x65F6;&#x95F4;&#x6D88;&#x8017;</li>
<li>3)&#x7531;&#x4E8E;&#x7F3A;&#x5C11;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x4E22;&#x5931;&#x4E86;&#x5F88;&#x591A;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x6BD4;&#x5982;JIT(&#x5B83;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;JVM&#x7684;&#x91CD;&#x8981;&#x8BC4;&#x6D4B;&#x6807;&#x51C6;&#x4E4B;&#x4E00;)</li>
</ul>
</li>
<li>&#x5F53;&#x7136;&#xFF0C;&#x73B0;&#x4EE3;JVM&#x4E5F;&#x4E0D;&#x662F;&#x975E;&#x5E38;&#x6162;&#x4E86;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x5BF9;&#x53CD;&#x5C04;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x4EE5;&#x53CA;&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#x540C;&#x6837;&#x5B9E;&#x73B0;JIT&#x4F18;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x53CD;&#x5C04;&#x4E0D;&#x4E00;&#x5B9A;&#x6162;&#x3002;<h2 id="&#x5B9E;&#x73B0;"><a name="&#x5B9E;&#x73B0;" class="plugin-anchor" href="#&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5B9E;&#x73B0;</h2>
</li>
<li>&#x53CD;&#x5C04;&#x5728;Java&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#xFF0C;&#x4E0D;&#x8FC7;&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x7684;&#x4ECD;&#x662F;native&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x4E0B;&#x4E3A;&#x4E3B;&#x6D41;&#x53CD;&#x5C04;&#x64CD;&#x4F5C;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
</ul>
<h3 id="classforname&#x7684;&#x5B9E;&#x73B0;"><a name="classforname&#x7684;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#classforname&#x7684;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>Class.forName&#x7684;&#x5B9E;&#x73B0;</h3>
<ul>
<li>Class.forName&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5305;&#x540D;&#x5BFB;&#x627E;Class&#x5BF9;&#x8C61;&#xFF0C;&#x6BD4;&#x5982;Class.forName(&quot;java.lang.String&quot;)&#x3002;</li>
<li>&#x5728;JDK&#x7684;&#x6E90;&#x7801;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x7684;&#x662F;native&#x65B9;&#x6CD5;forName0()&#xFF0C;&#x5B83;&#x5728;JVM&#x4E2D;&#x8C03;&#x7528;&#x7684;&#x5B9E;&#x9645;&#x662F;FindClassFromCaller()&#xFF0C;&#x539F;&#x7406;&#x4E0E;ClassLoader&#x7684;&#x6D41;&#x7A0B;&#x4E00;&#x6837;&#x3002;</li>
</ul>
<pre><code>public static Class&lt;?&gt; forName(String className)
            throws ClassNotFoundException {
    Class&lt;?&gt; caller = Reflection.getCallerClass();
    return forName0(className, true, ClassLoader.getClassLoader(caller), caller);
}
</code></pre><pre><code>private static native Class&lt;?&gt; forName0(String name, boolean initialize,
                                        ClassLoader loader,
                                        Class&lt;?&gt; caller)
    throws ClassNotFoundException;
</code></pre><pre><code>Java_java_lang_Class_forName0(JNIEnv *env, jclass this, jstring classname,
                              jboolean initialize, jobject loader, jclass caller)
{
    char *clname;
    jclass cls = 0;
    char buf[128];
    jsize len;
    jsize unicode_len;

    if (classname == NULL) {
        JNU_ThrowNullPointerException(env, 0);
        return 0;
    }

    len = (*env)-&gt;GetStringUTFLength(env, classname);
    unicode_len = (*env)-&gt;GetStringLength(env, classname);
    if (len &gt;= (jsize)sizeof(buf)) {
        clname = malloc(len + 1);
        if (clname == NULL) {
            JNU_ThrowOutOfMemoryError(env, NULL);
            return NULL;
        }
    } else {
        clname = buf;
    }
    (*env)-&gt;GetStringUTFRegion(env, classname, 0, unicode_len, clname);

    if (VerifyFixClassname(clname) == JNI_TRUE) {
        /* slashes present in clname, use name b4 translation for exception */
        (*env)-&gt;GetStringUTFRegion(env, classname, 0, unicode_len, clname);
        JNU_ThrowClassNotFoundException(env, clname);
        goto done;
    }

    if (!VerifyClassname(clname, JNI_TRUE)) {  /* expects slashed name */
        JNU_ThrowClassNotFoundException(env, clname);
        goto done;
    }

    cls = JVM_FindClassFromCaller(env, clname, initialize, loader, caller);

 done:
    if (clname != buf) {
        free(clname);
    }
    return cls;
}
</code></pre><ul>
<li><p>JVM_ENTRY(jclass, JVM_FindClassFromClass(JNIEnv <em>env, const char </em>name,</p>
<pre><code>                                   jboolean init, jclass from))
</code></pre><p>JVMWrapper2(&quot;JVM_FindClassFromClass %s&quot;, name);
if (name == NULL || (int)strlen(name) &gt; Symbol::max_length()) {
  // It&apos;s impossible to create this class;  the name cannot fit
  // into the constant pool.
  THROW_MSG_0(vmSymbols::java_lang_NoClassDefFoundError(), name);
}
TempNewSymbol h_name = SymbolTable::new_symbol(name, CHECK_NULL);
oop from_class_oop = JNIHandles::resolve(from);
Klass* from_class = (from_class_oop == NULL)</p>
<pre><code>                     ? (Klass*)NULL
                     : java_lang_Class::as_Klass(from_class_oop);
</code></pre><p>oop class_loader = NULL;
oop protection_domain = NULL;
if (from_class != NULL) {
  class_loader = from_class-&gt;class_loader();
  protection_domain = from_class-&gt;protection_domain();
}
Handle h_loader(THREAD, class_loader);
Handle h_prot  (THREAD, protection_domain);
jclass result = find_class_from_class_loader(env, h_name, init, h_loader,</p>
<pre><code>                                         h_prot, true, thread);
</code></pre><p>if (TraceClassResolution &amp;&amp; result != NULL) {
  // this function is generally only used for class loading during verification.
  ResourceMark rm;
  oop from_mirror = JNIHandles::resolve_non_null(from);
  Klass<em> from_class = java_lang_Class::as_Klass(from_mirror);
  const char </em> from_name = from_class-&gt;external_name();</p>
<p>  oop mirror = JNIHandles::resolve_non_null(result);
  Klass<em> to_class = java_lang_Class::as_Klass(mirror);
  const char </em> to = to_class-&gt;external_name();
  tty-&gt;print(&quot;RESOLVE %s %s (verification)\n&quot;, from_name, to);
}</p>
<p>return result;
JVM_END</p>
</li>
<li></li>
</ul>
<h3 id="getdeclaredfields&#x7684;&#x5B9E;&#x73B0;"><a name="getdeclaredfields&#x7684;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#getdeclaredfields&#x7684;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>getDeclaredFields&#x7684;&#x5B9E;&#x73B0;</h3>
<ul>
<li><p>&#x5728;JDK&#x6E90;&#x7801;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;class.getDeclaredFields()&#x65B9;&#x6CD5;&#x5B9E;&#x9645;&#x8C03;&#x7528;&#x7684;&#x662F;native&#x65B9;&#x6CD5;getDeclaredFields0()&#xFF0C;&#x5B83;&#x5728;JVM&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>1)&#x6839;&#x636E;Class&#x7ED3;&#x6784;&#x4F53;&#x4FE1;&#x606F;&#xFF0C;&#x83B7;&#x53D6;field_count&#x4E0E;fields[]&#x5B57;&#x6BB5;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x65E9;&#x5DF2;&#x5728;load&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x653E;&#x5165;&#x4E86;</li>
<li>2)&#x6839;&#x636E;field_count&#x7684;&#x5927;&#x5C0F;&#x5206;&#x914D;&#x5185;&#x5B58;&#x3001;&#x521B;&#x5EFA;&#x6570;&#x7EC4;</li>
<li>3)&#x5C06;&#x6570;&#x7EC4;&#x8FDB;&#x884C;forEach&#x5FAA;&#x73AF;&#xFF0C;&#x901A;&#x8FC7;fields[]&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#x4F9D;&#x6B21;&#x521B;&#x5EFA;Object&#x5BF9;&#x8C61;</li>
<li>4)&#x8FD4;&#x56DE;&#x6570;&#x7EC4;&#x6307;&#x9488;</li>
</ul>
</li>
<li><p>&#x4E3B;&#x8981;&#x6162;&#x5728;&#x5982;&#x4E0B;&#x65B9;&#x9762;&#xFF1A;</p>
</li>
<li>&#x521B;&#x5EFA;&#x3001;&#x8BA1;&#x7B97;&#x3001;&#x5206;&#x914D;&#x6570;&#x7EC4;&#x5BF9;&#x8C61;</li>
<li>&#x5BF9;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x5FAA;&#x73AF;&#x8D4B;&#x503C;</li>
</ul>
<pre><code>public Field[] getDeclaredFields() throws SecurityException {
    checkMemberAccess(Member.DECLARED, Reflection.getCallerClass(), true);
    return copyFields(privateGetDeclaredFields(false));
}
</code></pre><pre><code>private Field[] privateGetDeclaredFields(boolean publicOnly) {
    checkInitted();
    Field[] res;
    ReflectionData&lt;T&gt; rd = reflectionData();
    if (rd != null) {
        res = publicOnly ? rd.declaredPublicFields : rd.declaredFields;
        if (res != null) return res;
    }
    // No cached value available; request value from VM
    res = Reflection.filterFields(this, getDeclaredFields0(publicOnly));
    if (rd != null) {
        if (publicOnly) {
            rd.declaredPublicFields = res;
        } else {
            rd.declaredFields = res;
        }
    }
    return res;
}
</code></pre><pre><code>private static Field[] copyFields(Field[] arg) {
    Field[] out = new Field[arg.length];
    ReflectionFactory fact = getReflectionFactory();
    for (int i = 0; i &lt; arg.length; i++) {
        out[i] = fact.copyField(arg[i]);
    }
    return out;
}
</code></pre><ul>
<li><h3 id="methodinvoke&#x7684;&#x5B9E;&#x73B0;"><a name="methodinvoke&#x7684;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#methodinvoke&#x7684;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>Method.invoke&#x7684;&#x5B9E;&#x73B0;</h3>
</li>
<li><p>&#x4EE5;&#x4E0B;&#x4E3A;&#x65E0;&#x540C;&#x6B65;&#x3001;&#x65E0;&#x5F02;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8C03;&#x7528;&#x7684;&#x6B65;&#x9AA4;</p>
<ul>
<li>1)&#x521B;&#x5EFA;Frame</li>
<li>2)&#x5982;&#x679C;&#x5BF9;&#x8C61;flag&#x4E3A;native&#xFF0C;&#x4EA4;&#x7ED9;native_handler&#x8FDB;&#x884C;&#x5904;&#x7406;</li>
<li>3)&#x5728;frame&#x4E2D;&#x6267;&#x884C;java&#x4EE3;&#x7801;</li>
<li>4)&#x5F39;&#x51FA;Frame</li>
<li>5)&#x8FD4;&#x56DE;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x7684;&#x6307;&#x9488;</li>
</ul>
</li>
<li><p>&#x4E3B;&#x8981;&#x6162;&#x5728;&#x5982;&#x4E0B;&#x65B9;&#x9762;&#xFF1A;</p>
</li>
<li><p>&#x9700;&#x8981;&#x5B8C;&#x5168;&#x6267;&#x884C;ByteCode&#x800C;&#x7F3A;&#x5C11;JIT&#x7B49;&#x4F18;&#x5316;</p>
</li>
<li>&#x68C0;&#x67E5;&#x53C2;&#x6570;&#x975E;&#x5E38;&#x591A;&#xFF0C;&#x8FD9;&#x4E9B;&#x672C;&#x6765;&#x53EF;&#x4EE5;&#x5728;&#x7F16;&#x8BD1;&#x5668;&#x6216;&#x8005;&#x52A0;&#x8F7D;&#x65F6;&#x5B8C;&#x6210;</li>
</ul>
<pre><code>public Object invoke(Object obj, Object... args)
    throws IllegalAccessException, IllegalArgumentException,
       InvocationTargetException
{
    if (!override) {
        if (!Reflection.quickCheckMemberAccess(clazz, modifiers)) {
            Class&lt;?&gt; caller = Reflection.getCallerClass();
            checkAccess(caller, clazz, obj, modifiers);
        }
    }
    MethodAccessor ma = methodAccessor;             // read volatile
    if (ma == null) {
        ma = acquireMethodAccessor();
    }
    return ma.invoke(obj, args);
}
</code></pre><ul>
<li>NativeMethodAccessorImpl#invoke</li>
</ul>
<pre><code>public Object invoke(Object obj, Object[] args)
    throws IllegalArgumentException, InvocationTargetException
{
    // We can&apos;t inflate methods belonging to vm-anonymous classes because
    // that kind of class can&apos;t be referred to by name, hence can&apos;t be
    // found from the generated bytecode.
    if (++numInvocations &gt; ReflectionFactory.inflationThreshold()
            &amp;&amp; !ReflectUtil.isVMAnonymousClass(method.getDeclaringClass())) {
        MethodAccessorImpl acc = (MethodAccessorImpl)
            new MethodAccessorGenerator().
                generateMethod(method.getDeclaringClass(),
                               method.getName(),
                               method.getParameterTypes(),
                               method.getReturnType(),
                               method.getExceptionTypes(),
                               method.getModifiers());
        parent.setDelegate(acc);
    }

    return invoke0(method, obj, args);
}
</code></pre><pre><code>private static native Object invoke0(Method m, Object obj, Object[] args);
</code></pre><ul>
<li>Java_sun_reflect_NativeMethodAccessorImpl_invoke0
(JNIEnv *env, jclass unused, jobject m, jobject obj, jobjectArray args)
{
  return JVM_InvokeMethod(env, m, obj, args);
}</li>
</ul>
<ul>
<li><p>JVM_ENTRY(jobject, JVM_InvokeMethod(JNIEnv *env, jobject method, jobject obj, jobjectArray args0))
JVMWrapper(&quot;JVM_InvokeMethod&quot;);
Handle method_handle;
if (thread-&gt;stack_available((address) &amp;method_handle) &gt;= JVMInvokeMethodSlack) {
  method_handle = Handle(THREAD, JNIHandles::resolve(method));
  Handle receiver(THREAD, JNIHandles::resolve(obj));
  objArrayHandle args(THREAD, objArrayOop(JNIHandles::resolve(args0)));
  oop result = Reflection::invoke_method(method_handle(), receiver, args, CHECK_NULL);
  jobject res = JNIHandles::make_local(env, result);
  if (JvmtiExport::should_post_vm_object_alloc()) {</p>
<pre><code>oop ret_type = java_lang_reflect_Method::return_type(method_handle());
assert(ret_type != NULL, &quot;sanity check: ret_type oop must not be NULL!&quot;);
if (java_lang_Class::is_primitive(ret_type)) {
  // Only for primitive type vm allocates memory for java object.
  // See box() method.
  JvmtiExport::post_vm_object_alloc(JavaThread::current(), result);
}
</code></pre><p>  }
  return res;
} else {
  THROW_0(vmSymbols::java_lang_StackOverflowError());
}
JVM_END</p>
</li>
<li></li>
</ul>
<h3 id="classnewinstance&#x7684;&#x5B9E;&#x73B0;"><a name="classnewinstance&#x7684;&#x5B9E;&#x73B0;" class="plugin-anchor" href="#classnewinstance&#x7684;&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>class.newInstance&#x7684;&#x5B9E;&#x73B0;</h3>
<pre><code>- 1)&#x68C0;&#x6D4B;&#x6743;&#x9650;&#x3001;&#x9884;&#x5206;&#x914D;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x7B49;&#x53C2;&#x6570;
- 2)&#x521B;&#x5EFA;Object&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5206;&#x914D;&#x7A7A;&#x95F4;
- 3)&#x901A;&#x8FC7;Method.invoke&#x8C03;&#x7528;&#x6784;&#x9020;&#x51FD;&#x6570;(&lt;init&gt;())
- 4)&#x8FD4;&#x56DE;Object&#x6307;&#x9488;
</code></pre><ul>
<li><p>&#x4E3B;&#x8981;&#x6162;&#x5728;&#x5982;&#x4E0B;&#x65B9;&#x9762;&#xFF1A;</p>
</li>
<li><p>&#x53C2;&#x6570;&#x68C0;&#x67E5;&#x4E0D;&#x80FD;&#x4F18;&#x5316;&#x6216;&#x8005;&#x9057;&#x6F0F;</p>
</li>
<li><init>()&#x7684;&#x67E5;&#x8868;</init></li>
<li>Method.invoke&#x672C;&#x8EAB;&#x8017;&#x65F6;</li>
</ul>
<pre><code>public T newInstance()
    throws InstantiationException, IllegalAccessException
{
    if (System.getSecurityManager() != null) {
        checkMemberAccess(Member.PUBLIC, Reflection.getCallerClass(), false);
    }

    // NOTE: the following code may not be strictly correct under
    // the current Java memory model.

    // Constructor lookup
    if (cachedConstructor == null) {
        if (this == Class.class) {
            throw new IllegalAccessException(
                &quot;Can not call newInstance() on the Class for java.lang.Class&quot;
            );
        }
        try {
            Class&lt;?&gt;[] empty = {};
            final Constructor&lt;T&gt; c = getConstructor0(empty, Member.DECLARED);
            // Disable accessibility checks on the constructor
            // since we have to do the security check here anyway
            // (the stack depth is wrong for the Constructor&apos;s
            // security check to work)
            java.security.AccessController.doPrivileged(
                new java.security.PrivilegedAction&lt;Void&gt;() {
                    public Void run() {
                            c.setAccessible(true);
                            return null;
                        }
                    });
            cachedConstructor = c;
        } catch (NoSuchMethodException e) {
            throw (InstantiationException)
                new InstantiationException(getName()).initCause(e);
        }
    }
    Constructor&lt;T&gt; tmpConstructor = cachedConstructor;
    // Security check (same as in java.lang.reflect.Constructor)
    int modifiers = tmpConstructor.getModifiers();
    if (!Reflection.quickCheckMemberAccess(this, modifiers)) {
        Class&lt;?&gt; caller = Reflection.getCallerClass();
        if (newInstanceCallerCache != caller) {
            Reflection.ensureMemberAccess(caller, this, null, modifiers);
            newInstanceCallerCache = caller;
        }
    }
    // Run constructor
    try {
        return tmpConstructor.newInstance((Object[])null);
    } catch (InvocationTargetException e) {
        Unsafe.getUnsafe().throwException(e.getTargetException());
        // Not reached
        return null;
    }
}
</code></pre><ul>
<li><h1 id="119-xml"><a name="119-xml" class="plugin-anchor" href="#119-xml"><i class="fa fa-link" aria-hidden="true"></i></a>1.19 XML</h1>
<h2 id="dom"><a name="dom" class="plugin-anchor" href="#dom"><i class="fa fa-link" aria-hidden="true"></i></a>DOM</h2>
</li>
<li><p>OM&#x662F;&#x7528;&#x4E0E;&#x5E73;&#x53F0;&#x548C;&#x8BED;&#x8A00;&#x65E0;&#x5173;&#x7684;&#x65B9;&#x5F0F;&#x8868;&#x793A;XML&#x6587;&#x6863;&#x7684;&#x5B98;&#x65B9;W3C&#x6807;&#x51C6;&#x3002;DOM&#x662F;&#x4EE5;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x7EC4;&#x7EC7;&#x7684;&#x8282;&#x70B9;&#x6216;&#x4FE1;&#x606F;&#x7247;&#x65AD;&#x7684;&#x96C6;&#x5408;&#x3002;&#x8FD9;&#x4E2A;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x5141;&#x8BB8;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5728;&#x6811;&#x4E2D;&#x5BFB;&#x627E;&#x7279;&#x5B9A;&#x4FE1;&#x606F;&#x3002;&#x5206;&#x6790;&#x8BE5;&#x7ED3;&#x6784;&#x901A;&#x5E38;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x6574;&#x4E2A;&#x6587;&#x6863;&#x548C;&#x6784;&#x9020;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#xFF0C;&#x7136;&#x540E;&#x624D;&#x80FD;&#x505A;&#x4EFB;&#x4F55;&#x5DE5;&#x4F5C;&#x3002;&#x7531;&#x4E8E;&#x5B83;&#x662F;&#x57FA;&#x4E8E;&#x4FE1;&#x606F;&#x5C42;&#x6B21;&#x7684;&#xFF0C;&#x56E0;&#x800C;DOM&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x57FA;&#x4E8E;&#x6811;&#x6216;&#x57FA;&#x4E8E;&#x5BF9;&#x8C61;&#x7684;&#x3002;</p>
</li>
<li><p>&#x4F18;&#x70B9;</p>
</li>
<li>&#x2460;&#x5141;&#x8BB8;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5BF9;&#x6570;&#x636E;&#x548C;&#x7ED3;&#x6784;&#x505A;&#x51FA;&#x66F4;&#x6539;&#x3002;</li>
<li>&#x2461;&#x8BBF;&#x95EE;&#x662F;&#x53CC;&#x5411;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x5728;&#x6811;&#x4E2D;&#x4E0A;&#x4E0B;&#x5BFC;&#x822A;&#xFF0C;&#x83B7;&#x53D6;&#x548C;&#x64CD;&#x4F5C;&#x4EFB;&#x610F;&#x90E8;&#x5206;&#x7684;&#x6570;&#x636E;&#x3002;</li>
<li>&#x7F3A;&#x70B9;</li>
<li><p>&#x2460;&#x901A;&#x5E38;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x6574;&#x4E2A;XML&#x6587;&#x6863;&#x6765;&#x6784;&#x9020;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#xFF0C;&#x6D88;&#x8017;&#x8D44;&#x6E90;&#x5927;&#x3002;</p>
</li>
<li><h2 id="sax"><a name="sax" class="plugin-anchor" href="#sax"><i class="fa fa-link" aria-hidden="true"></i></a>SAX</h2>
</li>
<li>SAX&#x5904;&#x7406;&#x7684;&#x4F18;&#x70B9;&#x975E;&#x5E38;&#x7C7B;&#x4F3C;&#x4E8E;&#x6D41;&#x5A92;&#x4F53;&#x7684;&#x4F18;&#x70B9;&#x3002;&#x5206;&#x6790;&#x80FD;&#x591F;&#x7ACB;&#x5373;&#x5F00;&#x59CB;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7B49;&#x5F85;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x88AB;&#x5904;&#x7406;&#x3002;&#x800C;&#x4E14;&#xFF0C;&#x7531;&#x4E8E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EA;&#x662F;&#x5728;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x65F6;&#x68C0;&#x67E5;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x9700;&#x8981;&#x5C06;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;&#x5927;&#x578B;&#x6587;&#x6863;&#x6765;&#x8BF4;&#x662F;&#x4E2A;&#x5DE8;&#x5927;&#x7684;&#x4F18;&#x70B9;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x751A;&#x81F3;&#x4E0D;&#x5FC5;&#x89E3;&#x6790;&#x6574;&#x4E2A;&#x6587;&#x6863;&#xFF1B;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x67D0;&#x4E2A;&#x6761;&#x4EF6;&#x5F97;&#x5230;&#x6EE1;&#x8DB3;&#x65F6;&#x505C;&#x6B62;&#x89E3;&#x6790;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;SAX&#x8FD8;&#x6BD4;&#x5B83;&#x7684;&#x66FF;&#x4EE3;&#x8005;DOM&#x5FEB;&#x8BB8;&#x591A;&#x3002;</li>
<li>&#x4F18;&#x70B9;</li>
<li>&#x2460;&#x4E0D;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x88AB;&#x5904;&#x7406;&#xFF0C;&#x5206;&#x6790;&#x5C31;&#x80FD;&#x7ACB;&#x5373;&#x5F00;&#x59CB;&#x3002;</li>
<li>&#x2461;&#x53EA;&#x5728;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x65F6;&#x68C0;&#x67E5;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002;</li>
<li>&#x2462;&#x53EF;&#x4EE5;&#x5728;&#x67D0;&#x4E2A;&#x6761;&#x4EF6;&#x5F97;&#x5230;&#x6EE1;&#x8DB3;&#x65F6;&#x505C;&#x6B62;&#x89E3;&#x6790;&#xFF0C;&#x4E0D;&#x5FC5;&#x89E3;&#x6790;&#x6574;&#x4E2A;&#x6587;&#x6863;&#x3002;</li>
<li><p>&#x2463;&#x6548;&#x7387;&#x548C;&#x6027;&#x80FD;&#x8F83;&#x9AD8;&#xFF0C;&#x80FD;&#x89E3;&#x6790;&#x5927;&#x4E8E;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x7684;&#x6587;&#x6863;&#x3002;</p>
</li>
<li><p>&#x7F3A;&#x70B9;</p>
</li>
<li>&#x2460;&#x9700;&#x8981;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x81EA;&#x5DF1;&#x8D1F;&#x8D23;TAG&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#xFF08;&#x4F8B;&#x5982;&#x7EF4;&#x62A4;&#x7236;/&#x5B50;&#x5173;&#x7CFB;&#x7B49;)&#xFF0C;&#x6587;&#x6863;&#x8D8A;&#x590D;&#x6742;&#x7A0B;&#x5E8F;&#x5C31;&#x8D8A;&#x590D;&#x6742;&#x3002;</li>
<li><p>&#x2461;&#x5355;&#x5411;&#x5BFC;&#x822A;&#xFF0C;&#x65E0;&#x6CD5;&#x5B9A;&#x4F4D;&#x6587;&#x6863;&#x5C42;&#x6B21;&#xFF0C;&#x5F88;&#x96BE;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x540C;&#x4E00;&#x6587;&#x6863;&#x7684;&#x4E0D;&#x540C;&#x90E8;&#x5206;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x652F;&#x6301;XPath&#x3002;</p>
</li>
<li><p>JDOM</p>
</li>
<li><p>DOM4J</p>
</li>
<li></li>
</ul>
<h1 id="120-java8"><a name="120-java8" class="plugin-anchor" href="#120-java8"><i class="fa fa-link" aria-hidden="true"></i></a>1.20 Java8</h1>
<h2 id="lambda&#x8868;&#x8FBE;&#x5F0F;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x5F15;&#x7528;stream-api"><a name="lambda&#x8868;&#x8FBE;&#x5F0F;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x5F15;&#x7528;stream-api" class="plugin-anchor" href="#lambda&#x8868;&#x8FBE;&#x5F0F;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;&#x5F15;&#x7528;stream-api"><i class="fa fa-link" aria-hidden="true"></i></a>Lambda&#x8868;&#x8FBE;&#x5F0F;&amp;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&amp;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&amp;Stream API</h2>
<ul>
<li><p>Java8 stream&#x8FED;&#x4EE3;&#x7684;&#x4F18;&#x52BF;&#x548C;&#x533A;&#x522B;&#xFF1B;lambda&#x8868;&#x8FBE;&#x5F0F;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5F15;&#x5165;&#x5B83;</p>
<ul>
<li>1)&#x6D41;&#xFF08;&#x9AD8;&#x7EA7;Iterator)&#xFF1A;&#x5BF9;&#x96C6;&#x5408;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5404;&#x79CD;&#x975E;&#x5E38;&#x4FBF;&#x5229;&#x3001;&#x9AD8;&#x6548;&#x7684;&#x805A;&#x5408;&#x64CD;&#x4F5C;&#xFF08;aggregate operation)&#xFF0C;&#x6216;&#x8005;&#x5927;&#x6279;&#x91CF;&#x6570;&#x636E;&#x64CD;&#x4F5C; (bulk data operation)&#xFF0C;&#x9690;&#x5F0F;&#x8FED;&#x4EE3;&#x7B49;&#xFF0C;&#x4EE3;&#x7801;&#x7B80;&#x6D01;</li>
<li>2)&#x65B9;&#x4FBF;&#x5730;&#x5B9E;&#x73B0;&#x5E76;&#x884C;&#xFF08;&#x5E76;&#x884C;&#x6D41;)&#xFF0C;&#x6BD4;&#x5982;&#x5B9E;&#x73B0;MapReduce</li>
<li>3)Lamdba&#xFF1A;&#x7B80;&#x5316;&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4EE3;&#x7801;&#x66F4;&#x52A0;&#x7D27;&#x51D1;</li>
<li>4)&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#xFF1A;&#x65B9;&#x6CD5;&#x5F15;&#x7528;&#x662F;lambda&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x8868;&#x8FBE;&#x65B9;&#x5F0F;</li>
</ul>
</li>
<li>&#x5BF9;&#x8C61;::&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;</li>
<li>&#x7C7B;::&#x9759;&#x6001;&#x65B9;&#x6CD5;</li>
<li>&#x7C7B;::&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#x540D;</li>
</ul>
<h2 id="optional"><a name="optional" class="plugin-anchor" href="#optional"><i class="fa fa-link" aria-hidden="true"></i></a>Optional</h2>
<ul>
<li>Optional&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x5BB9;&#x6613;&#xFF1A;&#x5B58;&#x653E;T&#x7C7B;&#x578B;&#x7684;&#x503C;&#x6216;&#x8005;null&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x6709;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x6765;&#x907F;&#x514D;&#x663E;&#x5F0F;&#x7684;null&#x68C0;&#x67E5;&#x3002;<h2 id="completablefuture"><a name="completablefuture" class="plugin-anchor" href="#completablefuture"><i class="fa fa-link" aria-hidden="true"></i></a>CompletableFuture</h2>
<ul>
<li>1)&#x5B9E;&#x73B0;&#x5F02;&#x6B65;API&#xFF08;&#x5C06;&#x4EFB;&#x52A1;&#x4EA4;&#x7ED9;&#x53E6;&#x4E00;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#xFF0C;&#x8BE5;&#x7EBF;&#x7A0B;&#x4E0E;&#x8C03;&#x7528;&#x65B9;&#x5F02;&#x6B65;&#xFF0C;&#x901A;&#x8FC7;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6216;&#x963B;&#x585E;&#x7684;&#x65B9;&#x5F0F;&#x53D6;&#x5F97;&#x4EFB;&#x52A1;&#x7ED3;&#x679C;)</li>
<li>2)&#x5C06;&#x6279;&#x91CF;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#x8F6C;&#x4E3A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#xFF08;&#x5E76;&#x884C;&#x6D41;/CompletableFuture)</li>
<li>3)&#x591A;&#x4E2A;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x5408;&#x5E76;<h2 id="&#x65F6;&#x95F4;&#x65E5;&#x671F;api"><a name="&#x65F6;&#x95F4;&#x65E5;&#x671F;api" class="plugin-anchor" href="#&#x65F6;&#x95F4;&#x65E5;&#x671F;api"><i class="fa fa-link" aria-hidden="true"></i></a>&#x65F6;&#x95F4;&#x65E5;&#x671F;API</h2>
</li>
</ul>
</li>
<li>&#x65B0;&#x7684;java.time&#x5305;&#x5305;&#x542B;&#x4E86;&#x6240;&#x6709;&#x5173;&#x4E8E;&#x65E5;&#x671F;&#x3001;&#x65F6;&#x95F4;&#x3001;&#x65F6;&#x533A;&#x3001;Instant&#xFF08;&#x8DDF;&#x65E5;&#x671F;&#x7C7B;&#x4F3C;&#x4F46;&#x662F;&#x7CBE;&#x786E;&#x5230;&#x7EB3;&#x79D2;)&#x3001;duration&#xFF08;&#x6301;&#x7EED;&#x65F6;&#x95F4;)&#x548C;&#x65F6;&#x949F;&#x64CD;&#x4F5C;&#x7684;&#x7C7B;&#x3002;&#x65B0;&#x8BBE;&#x8BA1;&#x7684;API&#x8BA4;&#x771F;&#x8003;&#x8651;&#x4E86;&#x8FD9;&#x4E9B;&#x7C7B;&#x7684;&#x4E0D;&#x53D8;&#x6027;&#xFF08;&#x4ECE;java.util.Calendar&#x5438;&#x53D6;&#x7684;&#x6559;&#x8BAD;)&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x5B9E;&#x4F8B;&#x9700;&#x8981;&#x4FEE;&#x6539;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
</ul>
<h2 id="&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x4E0E;&#x9759;&#x6001;&#x65B9;&#x6CD5;"><a name="&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x4E0E;&#x9759;&#x6001;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x4E0E;&#x9759;&#x6001;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x4E0E;&#x9759;&#x6001;&#x65B9;&#x6CD5;</h2>
<ul>
<li>&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x4F7F;&#x5F97;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x7834;&#x574F;&#x4E8C;&#x8FDB;&#x5236;&#x517C;&#x5BB9;&#x6027;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x5F80;&#x73B0;&#x5B58;&#x63A5;&#x53E3;&#x4E2D;&#x6DFB;&#x52A0;&#x65B0;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5373;&#x4E0D;&#x5F3A;&#x5236;&#x90A3;&#x4E9B;&#x5B9E;&#x73B0;&#x4E86;&#x8BE5;&#x63A5;&#x53E3;&#x7684;&#x7C7B;&#x4E5F;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x65B0;&#x52A0;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x5141;&#x8BB8;&#x5728;&#x4E0D;&#x6253;&#x7834;&#x73B0;&#x6709;&#x7EE7;&#x627F;&#x4F53;&#x7CFB;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x6539;&#x8FDB;&#x63A5;&#x53E3;&#x3002;&#x8BE5;&#x7279;&#x6027;&#x5728;&#x5B98;&#x65B9;&#x5E93;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x662F;&#xFF1A;&#x7ED9;java.util.Collection&#x63A5;&#x53E3;&#x6DFB;&#x52A0;&#x65B0;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;stream()&#x3001;parallelStream()&#x3001;forEach()&#x548C;removeIf()&#x7B49;&#x7B49;&#x3002;</li>
</ul>
<ul>
<li><h1 id="121-java9"><a name="121-java9" class="plugin-anchor" href="#121-java9"><i class="fa fa-link" aria-hidden="true"></i></a>1.21 Java9</h1>
<h2 id="&#x6A21;&#x5757;&#x5316;"><a name="&#x6A21;&#x5757;&#x5316;" class="plugin-anchor" href="#&#x6A21;&#x5757;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6A21;&#x5757;&#x5316;</h2>
</li>
<li>&#x63D0;&#x4F9B;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E;OSGI&#x6846;&#x67B6;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6A21;&#x5757;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x76F8;&#x4E92;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x53EF;&#x4EE5;&#x5BFC;&#x51FA;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;API&#xFF0C;&#x5E76;&#x4E14;&#x9690;&#x85CF;&#x5B9E;&#x73B0;&#x7684;&#x7EC6;&#x8282;&#xFF0C;Java&#x63D0;&#x4F9B;&#x8BE5;&#x529F;&#x80FD;&#x7684;&#x4E3B;&#x8981;&#x7684;&#x52A8;&#x673A;&#x5728;&#x4E8E;&#xFF0C;&#x51CF;&#x5C11;&#x5185;&#x5B58;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x5728;JVM&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x81F3;&#x5C11;&#x4F1A;&#x6709;30&#xFF5E;60MB&#x7684;&#x5185;&#x5B58;&#x52A0;&#x8F7D;&#xFF0C;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x662F;JVM&#x9700;&#x8981;&#x52A0;&#x8F7D;rt.jar&#xFF0C;&#x4E0D;&#x7BA1;&#x5176;&#x4E2D;&#x7684;&#x7C7B;&#x662F;&#x5426;&#x88AB;classloader&#x52A0;&#x8F7D;&#xFF0C;&#x7B2C;&#x4E00;&#x6B65;&#x6574;&#x4E2A;jar&#x90FD;&#x4F1A;&#x88AB;JVM&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x5F53;&#x4E2D;&#x53BB;&#xFF0C;&#x6A21;&#x5757;&#x5316;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6A21;&#x5757;&#x7684;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x9700;&#x8981;&#x7684;class&#x3002;</li>
<li>&#x5728;&#x5F15;&#x5165;&#x4E86;&#x6A21;&#x5757;&#x7CFB;&#x7EDF;&#x4E4B;&#x540E;&#xFF0C;JDK &#x88AB;&#x91CD;&#x65B0;&#x7EC4;&#x7EC7;&#x6210; 94 &#x4E2A;&#x6A21;&#x5757;&#x3002;Java &#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x65B0;&#x589E;&#x7684; jlink &#x5DE5;&#x5177;&#xFF0C;&#x521B;&#x5EFA;&#x51FA;&#x53EA;&#x5305;&#x542B;&#x6240;&#x4F9D;&#x8D56;&#x7684; JDK &#x6A21;&#x5757;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x8FD0;&#x884C;&#x65F6;&#x955C;&#x50CF;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x6781;&#x5927;&#x7684;&#x51CF;&#x5C11; Java &#x8FD0;&#x884C;&#x65F6;&#x73AF;&#x5883;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x4F7F;&#x5F97;JDK&#x53EF;&#x4EE5;&#x5728;&#x66F4;&#x5C0F;&#x7684;&#x8BBE;&#x5907;&#x4E2D;&#x4F7F;&#x7528;&#x3002;&#x91C7;&#x7528;&#x6A21;&#x5757;&#x5316;&#x7CFB;&#x7EDF;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EA;&#x9700;&#x8981;&#x8FD9;&#x4E9B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6240;&#x9700;&#x7684;&#x90A3;&#x90E8;&#x5206;JDK&#x6A21;&#x5757;&#xFF0C;&#x800C;&#x975E;&#x662F;&#x6574;&#x4E2A;JDK&#x6846;&#x67B6;&#x4E86;&#x3002;<h2 id="http2"><a name="http2" class="plugin-anchor" href="#http2"><i class="fa fa-link" aria-hidden="true"></i></a>HTTP/2</h2>
</li>
<li>Java 9&#x7684;&#x7248;&#x672C;&#x4E2D;&#x5F15;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;package:java.net.http&#xFF0C;&#x91CC;&#x9762;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;Http&#x8BBF;&#x95EE;&#x5F88;&#x597D;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4E0D;&#x4EC5;&#x652F;&#x6301;Http1.1&#x800C;&#x4E14;&#x8FD8;&#x652F;&#x6301;HTTP/2&#xFF0C;&#x4EE5;&#x53CA;WebSocket&#xFF0C;&#x636E;&#x8BF4;&#x6027;&#x80FD;&#x7279;&#x522B;&#x597D;&#x3002;<h2 id="jshell"><a name="jshell" class="plugin-anchor" href="#jshell"><i class="fa fa-link" aria-hidden="true"></i></a>JShell</h2>
</li>
<li>java9&#x5F15;&#x5165;&#x4E86;jshell&#x8FD9;&#x4E2A;&#x4EA4;&#x4E92;&#x6027;&#x5DE5;&#x5177;&#xFF0C;&#x8BA9;Java&#x4E5F;&#x53EF;&#x4EE5;&#x50CF;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x4E00;&#x6837;&#x6765;&#x8FD0;&#x884C;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x63A7;&#x5236;&#x53F0;&#x542F;&#x52A8; jshell &#xFF0C;&#x5728; jshell &#x4E2D;&#x76F4;&#x63A5;&#x8F93;&#x5165;&#x8868;&#x8FBE;&#x5F0F;&#x5E76;&#x67E5;&#x770B;&#x5176;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x3002;&#x5F53;&#x9700;&#x8981;&#x6D4B;&#x8BD5;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x8FD0;&#x884C;&#x6548;&#x679C;&#xFF0C;&#x6216;&#x662F;&#x5FEB;&#x901F;&#x7684;&#x5BF9;&#x8868;&#x8FBE;&#x5F0F;&#x8FDB;&#x884C;&#x6C42;&#x503C;&#x65F6;&#xFF0C;jshell &#x90FD;&#x975E;&#x5E38;&#x5B9E;&#x7528;&#x3002;</li>
<li>&#x9664;&#x4E86;&#x8868;&#x8FBE;&#x5F0F;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x521B;&#x5EFA; Java &#x7C7B;&#x548C;&#x65B9;&#x6CD5;&#x3002;jshell &#x4E5F;&#x6709;&#x57FA;&#x672C;&#x7684;&#x4EE3;&#x7801;&#x5B8C;&#x6210;&#x529F;&#x80FD;&#x3002;<h2 id="&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;"><a name="&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;</h2>
</li>
<li>Java 9&#x589E;&#x52A0;&#x4E86;List.of()&#x3001;Set.of()&#x3001;Map.of()&#x548C;Map.ofEntries()&#x7B49;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x4E0D;&#x53EF;&#x53D8;&#x96C6;&#x5408;&#x3002;<h2 id="&#x79C1;&#x6709;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;"><a name="&#x79C1;&#x6709;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;" class="plugin-anchor" href="#&#x79C1;&#x6709;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x79C1;&#x6709;&#x63A5;&#x53E3;&#x65B9;&#x6CD5;</h2>
</li>
<li>Java 8 &#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x63A5;&#x53E3;&#x7684;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x548C;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x53E3;&#x4E5F;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x884C;&#x4E3A;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x65B9;&#x6CD5;&#x5B9A;&#x4E49;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x548C;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x79C1;&#x6709;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x6B64;&#x907F;&#x514D;&#x4E86;&#x4EE3;&#x7801;&#x5197;&#x4F59;&#xFF0C;&#x8FD9;&#x4E5F;&#x4F7F;&#x4EE3;&#x7801;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#x3002;&#x5982;&#x679C;&#x79C1;&#x6709;&#x65B9;&#x6CD5;&#x662F;&#x9759;&#x6001;&#x7684;&#xFF0C;&#x90A3;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x5C5E;&#x4E8E;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#x3002;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x9759;&#x6001;&#x7684;&#x79C1;&#x6709;&#x65B9;&#x6CD5;&#x53EA;&#x80FD;&#x88AB;&#x5728;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x5B9E;&#x4F8B;&#x8C03;&#x7528;&#x3002;<h2 id="&#x591A;&#x7248;&#x672C;&#x517C;&#x5BB9;-jar"><a name="&#x591A;&#x7248;&#x672C;&#x517C;&#x5BB9;-jar" class="plugin-anchor" href="#&#x591A;&#x7248;&#x672C;&#x517C;&#x5BB9;-jar"><i class="fa fa-link" aria-hidden="true"></i></a>&#x591A;&#x7248;&#x672C;&#x517C;&#x5BB9; JAR</h2>
<ul>
<li>&#x5F53;&#x4E00;&#x4E2A;&#x65B0;&#x7248;&#x672C;&#x7684; Java &#x51FA;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x7684;&#x5E93;&#x7528;&#x6237;&#x8981;&#x82B1;&#x8D39;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x624D;&#x4F1A;&#x5207;&#x6362;&#x5230;&#x8FD9;&#x4E2A;&#x65B0;&#x7684;&#x7248;&#x672C;&#x3002;&#x8FD9;&#x5C31;&#x610F;&#x5473;&#x7740;&#x5E93;&#x8981;&#x53BB;&#x5411;&#x540E;&#x517C;&#x5BB9;&#x4F60;&#x60F3;&#x8981;&#x652F;&#x6301;&#x7684;&#x6700;&#x8001;&#x7684; Java &#x7248;&#x672C; (&#x8BB8;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x5C31;&#x662F; Java 6 &#x6216;&#x8005; 7)&#x3002;&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x610F;&#x5473;&#x7740;&#x672A;&#x6765;&#x7684;&#x5F88;&#x957F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x4F60;&#x90FD;&#x4E0D;&#x80FD;&#x5728;&#x5E93;&#x4E2D;&#x8FD0;&#x7528; Java 9 &#x6240;&#x63D0;&#x4F9B;&#x7684;&#x65B0;&#x7279;&#x6027;&#x3002;&#x5E78;&#x8FD0;&#x7684;&#x662F;&#xFF0C;&#x591A;&#x7248;&#x672C;&#x517C;&#x5BB9; JAR &#x529F;&#x80FD;&#x80FD;&#x8BA9;&#x4F60;&#x521B;&#x5EFA;&#x4EC5;&#x5728;&#x7279;&#x5B9A;&#x7248;&#x672C;&#x7684; Java &#x73AF;&#x5883;&#x4E2D;&#x8FD0;&#x884C;&#x5E93;&#x7A0B;&#x5E8F;&#x65F6;&#x9009;&#x62E9;&#x4F7F;&#x7528;&#x7684; class &#x7248;&#x672C;&#x3002;</li>
</ul>
</li>
</ul>
<h2 id="&#x7EDF;&#x4E00;-jvm-&#x65E5;&#x5FD7;"><a name="&#x7EDF;&#x4E00;-jvm-&#x65E5;&#x5FD7;" class="plugin-anchor" href="#&#x7EDF;&#x4E00;-jvm-&#x65E5;&#x5FD7;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7EDF;&#x4E00; JVM &#x65E5;&#x5FD7;</h2>
<ul>
<li>Java 9 &#x4E2D; &#xFF0C;JVM &#x6709;&#x4E86;&#x7EDF;&#x4E00;&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x65B0;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;-Xlog &#x6765;&#x63A7;&#x5236; JVM &#x4E0A; &#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x3002;&#x8BE5;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x7CFB;&#x7EDF;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8F93;&#x51FA;&#x7684;&#x65E5;&#x5FD7;&#x6D88;&#x606F;&#x7684;&#x6807;&#x7B7E;&#x3001;&#x7EA7;&#x522B;&#x3001;&#x4FEE;&#x9970;&#x7B26;&#x548C;&#x8F93;&#x51FA;&#x76EE;&#x6807;&#x7B49;&#x3002;<h2 id="&#x5783;&#x573E;&#x6536;&#x96C6;&#x673A;&#x5236;"><a name="&#x5783;&#x573E;&#x6536;&#x96C6;&#x673A;&#x5236;" class="plugin-anchor" href="#&#x5783;&#x573E;&#x6536;&#x96C6;&#x673A;&#x5236;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5783;&#x573E;&#x6536;&#x96C6;&#x673A;&#x5236;</h2>
</li>
<li>Java 9 &#x79FB;&#x9664;&#x4E86;&#x5728; Java 8 &#x4E2D; &#x88AB;&#x5E9F;&#x5F03;&#x7684;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x914D;&#x7F6E;&#x7EC4;&#x5408;&#xFF0C;&#x540C;&#x65F6;&#x628A;G1&#x8BBE;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x5B9E;&#x73B0;&#x3002;&#x66FF;&#x4EE3;&#x4E86;&#x4E4B;&#x524D;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7684;Parallel GC&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x6539;&#x53D8;&#xFF0C;evens&#x7684;&#x8BC4;&#x8BBA;&#x662F;&#x9171;&#x7D2B;&#x7684;&#xFF1A;&#x8FD9;&#x9879;&#x53D8;&#x66F4;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x76F8;&#x5BF9;&#x4E8E;Parallel&#x6765;&#x8BF4;&#xFF0C;G1&#x4F1A;&#x5728;&#x5E94;&#x7528;&#x7EBF;&#x7A0B;&#x4E0A;&#x505A;&#x66F4;&#x591A;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x800C;Parallel&#x51E0;&#x4E4E;&#x6CA1;&#x6709;&#x5728;&#x5E94;&#x7528;&#x7EBF;&#x7A0B;&#x4E0A;&#x505A;&#x4EFB;&#x4F55;&#x4E8B;&#x60C5;&#xFF0C;&#x5B83;&#x57FA;&#x672C;&#x4E0A;&#x5B8C;&#x5168;&#x4F9D;&#x8D56;GC&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x6240;&#x6709;&#x7684;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5207;&#x6362;&#x5230;G1&#x5C06;&#x4F1A;&#x4E3A;&#x5E94;&#x7528;&#x7EBF;&#x7A0B;&#x5E26;&#x6765;&#x989D;&#x5916;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x4ECE;&#x800C;&#x76F4;&#x63A5;&#x5F71;&#x54CD;&#x5230;&#x5E94;&#x7528;&#x7684;&#x6027;&#x80FD;</li>
</ul>
<h2 id="io-&#x6D41;&#x65B0;&#x7279;&#x6027;"><a name="io-&#x6D41;&#x65B0;&#x7279;&#x6027;" class="plugin-anchor" href="#io-&#x6D41;&#x65B0;&#x7279;&#x6027;"><i class="fa fa-link" aria-hidden="true"></i></a>I/O &#x6D41;&#x65B0;&#x7279;&#x6027;</h2>
<ul>
<li><p>java.io.InputStream &#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x65B0;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x8BFB;&#x53D6;&#x548C;&#x590D;&#x5236; InputStream &#x4E2D;&#x5305;&#x542B;&#x7684;&#x6570;&#x636E;&#x3002;
&#xF06C;- readAllBytes&#xFF1A;&#x8BFB;&#x53D6; InputStream &#x4E2D;&#x7684;&#x6240;&#x6709;&#x5269;&#x4F59;&#x5B57;&#x8282;&#x3002;
&#xF06C;- readNBytes&#xFF1A; &#x4ECE; InputStream &#x4E2D;&#x8BFB;&#x53D6;&#x6307;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x5B57;&#x8282;&#x5230;&#x6570;&#x7EC4;&#x4E2D;&#x3002;
&#xF06C;- transferTo&#xFF1A;&#x8BFB;&#x53D6; InputStream &#x4E2D;&#x7684;&#x5168;&#x90E8;&#x5B57;&#x8282;&#x5E76;&#x5199;&#x5165;&#x5230;&#x6307;&#x5B9A;&#x7684; OutputStream &#x4E2D; &#x3002;</p>
</li>
<li></li>
</ul>

<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Java集合面试题及答案.html" class="navigation navigation-prev " aria-label="Previous page: Java集合面试题及答案">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="七、JavaWeb.html" class="navigation navigation-next " aria-label="Next page: 七、JavaWeb">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"一、Java基础","level":"1.11.3","depth":2,"next":{"title":"七、JavaWeb","level":"1.11.4","depth":2,"path":"zother5-Java-Interview/七、JavaWeb.md","ref":"zother5-Java-Interview/七、JavaWeb.md","articles":[]},"previous":{"title":"Java集合面试题及答案","level":"1.11.2","depth":2,"path":"zother5-Java-Interview/Java集合面试题及答案.md","ref":"zother5-Java-Interview/Java集合面试题及答案.md","articles":[]},"dir":"ltr"},"config":{"plugins":["github","-highlight","baidu","splitter","sitemap","back-to-top-button","code","splitter","-lunr","-search","search-pro","theme-comscore","popup","hide-element","anchors","nocache","page-toc-button"],"ignores":["friends","tags","categories","about"],"root":".deploy/content","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"nocache":{},"github":{"url":"https://github.com/zhaoda/webpack-handbook"},"editlink":{"base":"https://github.com/zhaoda/webpack-handbook/blob/master/content","label":"编辑本页"},"splitter":{},"search-pro":{},"popup":{},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"sitemap":{"hostname":"http://zhaoda.net/"},"theme-comscore":{},"page-toc-button":{"maxTocDepth":2,"minTocSize":2},"back-to-top-button":{},"baidu":{"token":"a9787f0ab45d5e237bab522431d0a7ec"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"SUMMARY.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"java实用笔记","language":"zh-hans","output.name":"site","catalog":["./source/_posts"],"links":{"sidebar":{"Home":"http://blog.liangqingxiang.top/"}},"gitbook":"3.2.3","description":"学习笔记"},"file":{"path":"zother5-Java-Interview/一、Java基础.md","mtime":"2020-06-10T11:07:39.376Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-06-10T11:07:51.816Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-baidu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-nocache/nocache.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

